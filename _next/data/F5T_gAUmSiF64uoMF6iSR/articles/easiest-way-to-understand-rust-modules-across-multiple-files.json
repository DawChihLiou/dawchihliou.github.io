{"pageProps":{"post":{"title":"Easiest Way to Understand Rust Modules Across Multiple Files","publishedAt":"Nov 17, 2022","description":"With a real-world example","cover":"/optimized/articles/rust-module/hero.webp","category":"Rust","coverWidth":"1400","coverHeight":"600","body":{"raw":"\n## TL;DR\n\n- üí° Easy and simple explanation of Rust's modules across different files.\n- ü§ø We'll deep dive into a real-world example to explore the module system.\n- üìà Tons of diagrams to help you understand.\n\n---\n\nThe module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.\n\nLet's go.\n\n## Rust Modules Across Files\n\nRust requires the developers to manually build module trees. The way to do it is by declaring modules with the **mod** keyword.\n\nThe module tree starts with the crate root, usually _src/lib.rs_ for a library crate or _src/main.rs_ for a binary crate. The Rust compiler will first look in the crate root for modules to compile.\n\nLet's say you want to import a module \"a\" in a binary crate, you can declare the module like this:\n\n```rust:main.rs\nmod a;\n\nfn main() { /* do amazing things */ }\n```\n\nThe compiler will look for the module in the _src_ directory in the following places:\n\nIn _src/a.rs_\n\n```bash\n.\n‚îú‚îÄ‚îÄ Cargo.lock\n‚îú‚îÄ‚îÄ Cargo.toml\n‚îî‚îÄ‚îÄ src\n ¬†¬† ‚îú‚îÄ‚îÄ a.rs\n ¬†¬† ‚îî‚îÄ‚îÄ main.rs\n```\n\nOr in _src/a/mod.rs_\n\n```bash\n.\n‚îú‚îÄ‚îÄ Cargo.lock\n‚îú‚îÄ‚îÄ Cargo.toml\n‚îî‚îÄ‚îÄ src\n    ‚îú‚îÄ‚îÄ a\n    ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs\n    ‚îî‚îÄ‚îÄ main.rs\n```\n\nBy declaring **mod a** in _main.rs_, you've built a module tree like this:\n\n<img\n  src=\"/optimized/articles/rust-module/tree-a.webp\"\n  alt=\"Initial Rust module tree\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\n## Rust Submodules Across Files\n\nWithin a module, you can create submodules to further organize your code. Let's say you want to declare module \"b\" and \"c\" in module \"a\":\n\n```rust:/src/a/mod.rs\nmod b;\nmod c;\n```\n\nThe compiler will look for the submodules in _src/a_ directory:\n\n```bash\n.\n‚îú‚îÄ‚îÄ Cargo.lock\n‚îú‚îÄ‚îÄ Cargo.toml\n‚îî‚îÄ‚îÄ src\n    ‚îú‚îÄ‚îÄ a\n    ‚îÇ   ‚îú‚îÄ‚îÄ b.rs\n    ‚îÇ   ‚îú‚îÄ‚îÄ c.rs\n    ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs\n    ‚îî‚îÄ‚îÄ main.rs\n```\n\nNow you've build a tree like this:\n\n<img\n  src=\"/optimized/articles/rust-module/tree-abc.webp\"\n  alt=\"Rust module tree with submodules\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\n## Visibility with \"pub\"\n\nBy default, all the [items][3] in a module are private. They are only visible by the items in the same module.\n\n```rust:src/a/mod.rs\nmod b;\nmod c;\n\nfn do_a() {} // only the other functions in module a can use it\n             // it's not visible to main.rs\n```\n\nIn order for its parent modules to have access to the function _do_a_, we need to add the key word **pub**.\n\n```rust:src/a/mod.rs\npub fn do_a() {} // now it's visible to main.rs\n```\n\nWe can access _do_a_ using the [path qualifier _::_][5].\n\n```rust:src/main.rs\nmod a;\n\nfn main() {\n    a::do_a();\n}\n```\n\nWe can use the same pattern for submodules.\n\n```rust:src/a/b.rs\npub fn do_b() {} // visible to module \"a\" and all the submodules of module \"a\"\n```\n\nBy adding **pub** to _do_b_, the function now is accessible to module \"a\".\n\n```rust:src/a/mod.rs\nmod b;\nmod c;\n\npub fn do_a {\n    b::do_b();\n}\n```\n\n_do_b_ is also accessible to the submodules of module \"a\". You can access it with either the absolute or relative path.\n\n```rust:src/a/c.rs\npub fn do_c {\n    crate::a::b::do_b(); // absolute path\n    super::b::do_b(); // relative path\n}\n```\n\n## Re-exporting Items\n\nAn item of a submodule is not accessible to a non-parent module. For example, we can try to access _do_b_ in _main.rs_\n\n```rust:src/main.rs\nmod:a;\n\nfn main() {\n    a::b::do_b();\n    // ^^^^ function `do_b` is private\n}\n```\n\nYou'll see an error message saying _do_b_ is private. That's because _do_b_ is only accessible within module \"a\" so far. To make it visible to the crate root, We need to re-export it by adding **pub** to the module \"b\" declaration from module \"a\".\n\n```rust:src/a/mod.rs\npub mod b;\n// --snip--\n```\n\n## The \"use\" Declaration\n\nThe [**use**][2] declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule \"c\":\n\n```rust:src/a/c.rs\nuse crate::a::b::do_b;\n\npub fn do_c {\n    do_b();\n}\n```\n\nIt creates a local name binding to its path for _do_b_. **use** is very useful for long paths.\n\n## A Real World Example\n\nTo demonstrate the Rust's module system, I created a simple CLI called **affme**, short for \"affirm me\".\n\n<img\n  src=\"/articles/rust-module/demo.gif\"\n  alt=\"affme demo\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\n**affme** is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.\n\n> The demo is [available on GitHub][7]. Feel free to take a look at the repo and try it out‚ú®\n\nThe code design is straightforward:\n\n<img\n  src=\"/optimized/articles/rust-module/program-design.webp\"\n  alt=\"affme code design\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nIn the \"format\" block,\n\n- It takes a user input,\n- concatenates the input with a random affirmation and a random emoji,\n- applies a random font color to the concatenated affirmation,\n- and finally outputs the affirmation.\n\nTo showcase the module system across files, I design the module tree as following:\n\n<img\n  src=\"/optimized/articles/rust-module/module-tree.webp\"\n  alt=\"affme module tree design\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nA few things worth mentioning:\n\n- This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.\n- In the library crate root _src/lib.rs_, it accesses functions from the _affirmation_ and _formatter_ module.\n- The _affirmation_ module and both of the submodules in the _formatter_ module are using the same function in the _random_ module to randomly pick an item. Because the _affirmation_ module and _formatter_ submodules are in different branches of the tree, we need to declare the _random_ module in the common ancestor of the module tree.\n\nIn the file system, it looks like this:\n\n```bash\n.\n‚îú‚îÄ‚îÄ Cargo.lock\n‚îú‚îÄ‚îÄ Cargo.toml\n‚îú‚îÄ‚îÄ src\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ affirmation.rs\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ formatter\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ color.rs\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ emoji.rs\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ mod.rs\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lib.rs\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ main.rs\n‚îÇ¬†¬† ‚îî‚îÄ‚îÄ random.rs\n‚îî‚îÄ‚îÄ target\n```\n\nLet's dive into the library crate root to see how the code is structured.\n\n```rust:src/lib.rs\nmod affirmation;\nmod formatter;\nmod random;\n\nuse affirmation::Affirmation;\nuse formatter::format;\n\npub fn affirm(name: &str) -> String {\n    let affirmation = Affirmation::new().random();\n    format(affirmation, name)\n}\n```\n\nHere you can see the module declarations on the top. You can also find the _use_ declarations to create the local name binding for _Affirmation_ and _format_.\n\nThe random module is straightforward:\n\n```rust:src/random.rs\nuse rand::Rng;\n\npub fn pick<'a, T: ?Sized>(items: &[&'a T]) -> &'a T {\n    let random_index: usize = rand::thread_rng().gen_range(0..items.len());\n    items.get(random_index).unwrap()\n}\n```\n\nIt has a public _pick_ function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let's take a look at _affirmation_ module as an example:\n\n```rust:src/affirmation.rs\nuse crate::random;\n\n#[derive(Debug)]\npub struct Affirmation<'a> {\n    affirmations: [&'a str; 6],\n}\n\nimpl<'a> Affirmation<'a> {\n    pub fn new() -> Self {\n        let affirmations = [\n            \"You're beautiful\",\n            \"You're awesome\",\n            \"You're wonderful\",\n            \"You've got this\",\n            \"You can do all things\",\n            \"Go get it\",\n        ];\n        Affirmation { affirmations }\n    }\n\n    pub fn random(&self) -> &'a str {\n        random::pick(&self.affirmations)\n    }\n}\n```\n\nYou can see the _use_ declaration for the _random_ module. The _affirmation_ module is able to access the _random_ module because the _random_ module was declared in the library crate root. I use the _pub_ keyword on the _Affirmation_ struct and its functions so that the crate root has visibility over them.\n\nYou can find the same coding pattern in the _emoji_ and _color_ submodule.\n\nTo bring it all together, let's take a look at the _format_ module.\n\n```rust:src/formatter/mod.rs\nmod color;\nmod emoji;\n\nuse color::Color;\nuse colored::*;\nuse emoji::Emoji;\n\npub fn format(affirmation: &str, name: &str) -> String {\n    let emoji = Emoji::new();\n    let color = Color::new();\n\n    let phrase = format!(\"{}, {} {}\", affirmation, name, emoji.random())\n        .color(color.random())\n        .bold()\n        .to_string();\n\n    format!(\n        \"{}\\n{}\\n{}\\n{}\\n{}\",\n        \"*\".repeat(phrase.len() + 2).magenta(),\n        format!(\"*{}*\", \" \".repeat(phrase.len())).magenta(),\n        format!(\"    ‚úèÔ∏è  ...{}  \", phrase,),\n        format!(\"*{}*\", \" \".repeat(phrase.len())).magenta(),\n        \"*\".repeat(phrase.len() + 2).magenta()\n    )\n}\n```\n\nIt brings _color_ and _emoji_ submodules in scope so we can concatenate the full affirmation with random emoji and random font color.\n\n## Final Thoughts\n\nRust Modules across multiple files is a little different from other languages but once you understand **mod**, **use**, and **pub**, the module design becomes easier and intentional.\n\n**Rust Module Cheat Sheet**\n\n- A module tree starts from the crate root.\n- Use **mod** to build your tree with modules and submodules.\n- Use **pub** to make module items visible to the parent module.\n- You can re-export with **pub mod** or **pub use**.\n\n**Special Thanks**\n\nThanks [Liang Chun][8] for reviewing the example code in [affme][7].\n\n## References\n\n- [Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language][1]\n- [Book: Use declarations - The Rust Reference][2]\n- [Book: Items - The Rust Reference][3]\n- [Book: Modules - The Rust Reference][4]\n- [Book: Paths - The Rust Reference][5]\n- [Article: How to Use Rust Modules Across Different Files - Casey Falkowski][6]\n- [GitHub: affme repository][7]\n- [GitHub: Liang Chun's profile][8]\n\n[1]: https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html\n[2]: https://doc.rust-lang.org/reference/items/use-declarations.html\n[3]: https://doc.rust-lang.org/reference/items.html\n[4]: https://doc.rust-lang.org/reference/items/modules.html\n[5]: https://doc.rust-lang.org/reference/paths.html\n[6]: https://spin.atomicobject.com/2022/01/24/rust-module-system/\n[7]: https://github.com/DawChihLiou/affme\n[8]: https://github.com/liangchunn\n\n---\n\nHere you have it! Thanks for reading throughüôå\nIf you find this article useful, please share it to help more people in their engineering journey.\n\nüê¶ Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\n\n‚è≠ Ready for the next article? üëâ [**Ex-Principal Engineer's Guide to Design Thinking and Continuous Delivery**](/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery)\n\nHappy coding!\n","code":"var Component=(()=>{var r=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var i=a=>l(a,\"__esModule\",{value:!0});var u=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),N=(a,n)=>{i(a);for(var s in n)l(a,s,{get:n[s],enumerable:!0})},k=(a,n,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!p.call(a,c)&&c!==\"default\"&&l(a,c,{get:()=>n[c],enumerable:!(s=d(n,c))||s.enumerable});return a},f=a=>k(i(l(a!=null?r(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var t=u((v,o)=>{o.exports=_jsx_runtime});var b={};N(b,{default:()=>y});var e=f(t());function g(a={}){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",hr:\"hr\",p:\"p\",strong:\"strong\",em:\"em\",div:\"div\",pre:\"pre\",code:\"code\",blockquote:\"blockquote\"},a.components),{wrapper:s}=n,c=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"tldr\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#tldr\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"TL;DR\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"light bulb\",children:\"\\u{1F4A1}\"}),\" Easy and simple explanation of Rust's modules across different files.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"\",\"aria-hidden\":!0,children:\"\\u{1F93F}\"}),\" We'll deep dive into a real-world example to explore the module system.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"chart increasing\",children:\"\\u{1F4C8}\"}),\" Tons of diagrams to help you understand.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.p,{children:\"The module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Let's go.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"rust-modules-across-files\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#rust-modules-across-files\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Rust Modules Across Files\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Rust requires the developers to manually build module trees. The way to do it is by declaring modules with the \",(0,e.jsx)(n.strong,{children:\"mod\"}),\" keyword.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The module tree starts with the crate root, usually \",(0,e.jsx)(n.em,{children:\"src/lib.rs\"}),\" for a library crate or \",(0,e.jsx)(n.em,{children:\"src/main.rs\"}),\" for a binary crate. The Rust compiler will first look in the crate root for modules to compile.\"]}),`\n`,(0,e.jsx)(n.p,{children:`Let's say you want to import a module \"a\" in a binary crate, you can declare the module like this:`}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"main.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"/* do amazing things */\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"The compiler will look for the module in the \",(0,e.jsx)(n.em,{children:\"src\"}),\" directory in the following places:\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In \",(0,e.jsx)(n.em,{children:\"src/a.rs\"})]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \\xA0\\xA0 \\u251C\\u2500\\u2500 a.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \\xA0\\xA0 \\u2514\\u2500\\u2500 main.rs\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Or in \",(0,e.jsx)(n.em,{children:\"src/a/mod.rs\"})]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u251C\\u2500\\u2500 a\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u2514\\u2500\\u2500 mod.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2514\\u2500\\u2500 main.rs\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"By declaring \",(0,e.jsx)(n.strong,{children:\"mod a\"}),\" in \",(0,e.jsx)(n.em,{children:\"main.rs\"}),\", you've built a module tree like this:\"]}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/tree-a.webp\",alt:\"Initial Rust module tree\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"rust-submodules-across-files\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#rust-submodules-across-files\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Rust Submodules Across Files\"]}),`\n`,(0,e.jsx)(n.p,{children:`Within a module, you can create submodules to further organize your code. Let's say you want to declare module \"b\" and \"c\" in module \"a\":`}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"/src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"The compiler will look for the submodules in \",(0,e.jsx)(n.em,{children:\"src/a\"}),\" directory:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u251C\\u2500\\u2500 a\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u251C\\u2500\\u2500 b.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u251C\\u2500\\u2500 c.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u2514\\u2500\\u2500 mod.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2514\\u2500\\u2500 main.rs\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Now you've build a tree like this:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/tree-abc.webp\",alt:\"Rust module tree with submodules\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"visibility-with-pub\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#visibility-with-pub\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),'Visibility with \"pub\"']}),`\n`,(0,e.jsxs)(n.p,{children:[\"By default, all the \",(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items.html\",children:\"items\"}),\" in a module are private. They are only visible by the items in the same module.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// only the other functions in module a can use it\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"             \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// it's not visible to main.rs\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In order for its parent modules to have access to the function \",(0,e.jsx)(n.em,{children:\"do_a\"}),\", we need to add the key word \",(0,e.jsx)(n.strong,{children:\"pub\"}),\".\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsx)(n.code,{className:\"language-rust code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// now it's visible to main.rs\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"We can access \",(0,e.jsx)(n.em,{children:\"do_a\"}),\" using the \",(0,e.jsxs)(n.a,{href:\"https://doc.rust-lang.org/reference/paths.html\",children:[\"path qualifier \",(0,e.jsx)(n.em,{children:\"::\"})]}),\".\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/main.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"We can use the same pattern for submodules.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/b.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsx)(n.code,{className:\"language-rust code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'// visible to module \"a\" and all the submodules of module \"a\"'}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"By adding \",(0,e.jsx)(n.strong,{children:\"pub\"}),\" to \",(0,e.jsx)(n.em,{children:\"do_b\"}),', the function now is accessible to module \"a\".']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_a\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.em,{children:\"do_b\"}),' is also accessible to the submodules of module \"a\". You can access it with either the absolute or relative path.']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/c.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_c\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// absolute path\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"super\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// relative path\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"re-exporting-items\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#re-exporting-items\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Re-exporting Items\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"An item of a submodule is not accessible to a non-parent module. For example, we can try to access \",(0,e.jsx)(n.em,{children:\"do_b\"}),\" in \",(0,e.jsx)(n.em,{children:\"main.rs\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/main.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ^^^^ function `do_b` is private\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You'll see an error message saying \",(0,e.jsx)(n.em,{children:\"do_b\"}),\" is private. That's because \",(0,e.jsx)(n.em,{children:\"do_b\"}),' is only accessible within module \"a\" so far. To make it visible to the crate root, We need to re-export it by adding ',(0,e.jsx)(n.strong,{children:\"pub\"}),' to the module \"b\" declaration from module \"a\".']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// --snip--\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"the-use-declaration\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#the-use-declaration\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),'The \"use\" Declaration']}),`\n`,(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items/use-declarations.html\",children:(0,e.jsx)(n.strong,{children:\"use\"})}),' declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule \"c\":']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/c.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),\"do_b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_c\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"It creates a local name binding to its path for \",(0,e.jsx)(n.em,{children:\"do_b\"}),\". \",(0,e.jsx)(n.strong,{children:\"use\"}),\" is very useful for long paths.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"a-real-world-example\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#a-real-world-example\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"A Real World Example\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To demonstrate the Rust's module system, I created a simple CLI called \",(0,e.jsx)(n.strong,{children:\"affme\"}),', short for \"affirm me\".']}),`\n`,(0,e.jsx)(\"img\",{src:\"/articles/rust-module/demo.gif\",alt:\"affme demo\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"affme\"}),\" is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"The demo is \",(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/affme\",children:\"available on GitHub\"}),\". Feel free to take a look at the repo and try it out\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"The code design is straightforward:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/program-design.webp\",alt:\"affme code design\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:'In the \"format\" block,'}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"It takes a user input,\"}),`\n`,(0,e.jsx)(n.li,{children:\"concatenates the input with a random affirmation and a random emoji,\"}),`\n`,(0,e.jsx)(n.li,{children:\"applies a random font color to the concatenated affirmation,\"}),`\n`,(0,e.jsx)(n.li,{children:\"and finally outputs the affirmation.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"To showcase the module system across files, I design the module tree as following:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/module-tree.webp\",alt:\"affme module tree design\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:\"A few things worth mentioning:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"In the library crate root \",(0,e.jsx)(n.em,{children:\"src/lib.rs\"}),\", it accesses functions from the \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" and \",(0,e.jsx)(n.em,{children:\"formatter\"}),\" module.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"The \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module and both of the submodules in the \",(0,e.jsx)(n.em,{children:\"formatter\"}),\" module are using the same function in the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module to randomly pick an item. Because the \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module and \",(0,e.jsx)(n.em,{children:\"formatter\"}),\" submodules are in different branches of the tree, we need to declare the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module in the common ancestor of the module tree.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"In the file system, it looks like this:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 affirmation.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 formatter\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 color.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 emoji.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 mod.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 lib.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 main.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 random.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 target\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Let's dive into the library crate root to see how the code is structured.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/lib.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"affirmation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"formatter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"formatter\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),\"format\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"affirm\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" affirmation \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"format\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you can see the module declarations on the top. You can also find the \",(0,e.jsx)(n.em,{children:\"use\"}),\" declarations to create the local name binding for \",(0,e.jsx)(n.em,{children:\"Affirmation\"}),\" and \",(0,e.jsx)(n.em,{children:\"format\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"The random module is straightforward:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/random.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rand\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Rng\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"pick\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Sized\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"items\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" random_index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"usize\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rand\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"thread_rng\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"gen_range\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"..\"}),\"items\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    items\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"random_index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"It has a public \",(0,e.jsx)(n.em,{children:\"pick\"}),\" function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let's take a look at \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module as an example:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/affirmation.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"random\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[derive(Debug)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"struct\"}),\" \",(0,e.jsx)(n.span,{className:\"token type-definition class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    affirmations\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"impl\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"Self\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" affirmations \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You're beautiful\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You're awesome\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You're wonderful\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You've got this\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"You can do all things\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Go get it\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" affirmations \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"random\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"pick\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"affirmations\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can see the \",(0,e.jsx)(n.em,{children:\"use\"}),\" declaration for the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module. The \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module is able to access the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module because the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module was declared in the library crate root. I use the \",(0,e.jsx)(n.em,{children:\"pub\"}),\" keyword on the \",(0,e.jsx)(n.em,{children:\"Affirmation\"}),\" struct and its functions so that the crate root has visibility over them.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can find the same coding pattern in the \",(0,e.jsx)(n.em,{children:\"emoji\"}),\" and \",(0,e.jsx)(n.em,{children:\"color\"}),\" submodule.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To bring it all together, let's take a look at the \",(0,e.jsx)(n.em,{children:\"format\"}),\" module.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/formatter/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"emoji\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"color\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"colored\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"emoji\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Emoji\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"format\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" emoji \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Emoji\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" color \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" phrase \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"{}, {} {}\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" emoji\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"color\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"bold\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{}\\\\n{}\\\\n{}\\\\n{}\\\\n{}\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"*{}*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\" \"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token string\",children:['\"    ',(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"pencil\",children:\"\\u270F\\uFE0F\"}),'  ...{}  \"']}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"*{}*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\" \"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"It brings \",(0,e.jsx)(n.em,{children:\"color\"}),\" and \",(0,e.jsx)(n.em,{children:\"emoji\"}),\" submodules in scope so we can concatenate the full affirmation with random emoji and random font color.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"final-thoughts\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#final-thoughts\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Final Thoughts\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Rust Modules across multiple files is a little different from other languages but once you understand \",(0,e.jsx)(n.strong,{children:\"mod\"}),\", \",(0,e.jsx)(n.strong,{children:\"use\"}),\", and \",(0,e.jsx)(n.strong,{children:\"pub\"}),\", the module design becomes easier and intentional.\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Rust Module Cheat Sheet\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"A module tree starts from the crate root.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Use \",(0,e.jsx)(n.strong,{children:\"mod\"}),\" to build your tree with modules and submodules.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Use \",(0,e.jsx)(n.strong,{children:\"pub\"}),\" to make module items visible to the parent module.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"You can re-export with \",(0,e.jsx)(n.strong,{children:\"pub mod\"}),\" or \",(0,e.jsx)(n.strong,{children:\"pub use\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Special Thanks\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Thanks \",(0,e.jsx)(n.a,{href:\"https://github.com/liangchunn\",children:\"Liang Chun\"}),\" for reviewing the example code in \",(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/affme\",children:\"affme\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"references\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#references\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"References\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html\",children:\"Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items/use-declarations.html\",children:\"Book: Use declarations - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items.html\",children:\"Book: Items - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items/modules.html\",children:\"Book: Modules - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/paths.html\",children:\"Book: Paths - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://spin.atomicobject.com/2022/01/24/rust-module-system/\",children:\"Article: How to Use Rust Modules Across Different Files - Casey Falkowski\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/affme\",children:\"GitHub: affme repository\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/liangchunn\",children:\"GitHub: Liang Chun's profile\"})}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you have it! Thanks for reading through\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"raising hands\",children:\"\\u{1F64C}\"}),`\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"bird\",children:\"\\u{1F426}\"}),\" Feel free to connect with me on \",(0,e.jsx)(n.a,{href:\"https://twitter.com/dawchihliou\",children:\"twitter\"}),\"!\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u23ED Ready for the next article? \",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"backhand index pointing right\",children:\"\\u{1F449}\"}),\" \",(0,e.jsx)(n.a,{href:\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery\",children:(0,e.jsx)(n.strong,{children:\"Ex-Principal Engineer's Guide to Design Thinking and Continuous Delivery\"})})]}),`\n`,(0,e.jsx)(n.p,{children:\"Happy coding!\"})]});return s?(0,e.jsx)(s,Object.assign({},a,{children:c})):c}var y=g;return b;})();\n;return Component.default;"},"_id":"articles/easiest-way-to-understand-rust-modules-across-multiple-files.mdx","_raw":{"sourceFilePath":"articles/easiest-way-to-understand-rust-modules-across-multiple-files.mdx","sourceFileName":"easiest-way-to-understand-rust-modules-across-multiple-files.mdx","sourceFileDir":"articles","bodyType":"mdx","flattenedPath":"articles/easiest-way-to-understand-rust-modules-across-multiple-files"},"type":"Article","readingTime":{"text":"8 min read","minutes":7.745,"time":464700,"words":1549},"wordCount":1549,"slug":"easiest-way-to-understand-rust-modules-across-multiple-files"}},"__N_SSG":true}