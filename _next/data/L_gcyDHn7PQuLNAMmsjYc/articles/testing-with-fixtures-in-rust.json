{"pageProps":{"post":{"title":"Testing With Fixtures in Rust","publishedAt":"Jun 23, 2023","description":"No more awkward test cases. Here's one fixture-based testing framework that cleaned up my Rust unit tests.","cover":"/optimized/articles/testing-with-fixtures-in-rust/hero.webp","category":"Rust","coverWidth":"1400","coverHeight":"700","body":{"raw":"\n## In this article\n\n- üî¨ We'll learn the limitations of #[test] in Rust.\n- ü™Ñ We'll explore an alternative to write cleaner unit tests with fixtures.\n- üèó We'll refactor the unit tests in one of my open source projects!\n\nLet's go.\n\n---\n\nThis article is also available on\n\n- [Level Up Coding](https://medium.com/gitconnected/testing-with-fixtures-in-rust-a59e6b9e1522)\n- [Hacker Noon](https://hackernoon.com/enhancing-test-stability-with-fixtures-in-rust)\n\nFeel free to read it on your favorite platform‚ú®\n\n---\n\n## The Fixture Problem\n\n[Test fixtures][2] are very effective in producing repeatable tests. A test fixture can be a constant or function that encapsulates a test's dependency.\n\nI wanted to create a few test fixtures for my unit tests in one of my open source projects called [Voy][7]. It's a WebAssembly semantic engine written in Rust. What it does is to [extract features][4] using machine learning models, build an index, and provide a query function that enables users to search the index based on meaning and semantics. Here's a quick demo:\n\n<img\n  src=\"/articles/share-rust-types-with-typescript-for-webassembly-in-30-seconds/voy.gif\"\n  alt=\"Voy demo\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\n> You can find the [Voy's repository on GitHub][7]! Feel free to try it out. The repository includes [examples](https://github.com/tantaraio/voy/tree/main/examples) that you can see how to use Voy in different frameworks.\n\nWhile I was still working on the feature extraction, I needed pre-generated [embeddings][6] to test the index and query part of the engine. The fixture for embeddings looks like this:\n\n```rust\npub static EMBEDDING: [[f32; 768]; 6] = [\n    [\n        0.01960003957247733,\n        -0.03651725347725505,\n        0.03361894761373059,\n        // ...\n    ]\n```\n\nI created a static variable for 6 embeddings in an array. Each item is a 768 dimensional vector that represents a sentence.\n\nTo use the fixture, I simply imported it in my test module. My unit test looks like this:\n\n```rust\nuse super::engine_fixtures::{EMBEDDING, CONTENT, QUESTION};\nuse crate::engine::{add, index, remove, search, Query};\nuse crate::{EmbeddedResource, Resource};\n\nfn get_resource(k: usize) -> Resource {\n     let embeddings = EMBEDDING\n         .iter()\n         .take(k)\n         .enumerate()\n         .map(|(i, x)| EmbeddedResource {\n             id: i.to_string(),\n             title: CONTENT.get(i).unwrap().to_string(),\n             url: \"\".to_owned(),\n             embeddings: x.to_vec(),\n         })\n         .collect();\n     Resource { embeddings }\n }\n\n#[test]\n fn it_returns_vector_search_result() {\n     let resource: Resource = get_resource(6);\n     let index = index(resource).unwrap();\n\n     let query = Query::Embeddings(QUESTION.to_vec());\n     let result = search(&index, &query, 1).unwrap();\n\n     assert_eq!(result.get(0).unwrap().title, CONTENT[0]);\n     assert_eq!(result.get(1).unwrap().title, CONTENT[1]);\n     assert_eq!(result.get(2).unwrap().title, CONTENT[2]);\n     assert_eq!(result.get(3).unwrap().title, CONTENT[4]);\n     assert_eq!(result.get(4).unwrap().title, CONTENT[5]);\n     assert_eq!(result.get(5).unwrap().title, CONTENT[3]);\n }\n```\n\nI created another 2 fixtures for the sentences the generated the embeddings and a question embedding to perform the query.\n\nThe test case worked. The fixture produced repeatable results. However, it seems a little off. It's not very clean:\n\n- I needed a helper function to \"get_resource\" in the test case to initiate the fixture.\n- The fixtures were not encapsulated in the unit test and the usages were scattered.\n\nSo I started looking for a better way to write the test.\n\n## Introducing The rstest Crate\n\n[rstest][1] makes it very easy to write unit tests with fixtures. All you need to do is:\n\n#### Defining fixtures\n\n```rust\n#[fixture]\npub fn fixture() -> u32 { 42 }\n```\n\n#### Replacing #[test] with #[rstest] macro.\n\n```rust\n#[rstest]\nfn should_success(fixture: u32) {\n    assert_eq!(fixture, 42);\n}\n```\n\nYou can check out [rstest's repository][1] to find more ways to write test fixtures.\n\nNow let's use rstest to refactor the fixtures above. I'll simply create a function to return the static variable. Like this:\n\n```rust:src/engine/tests/fixtures.rs\nuse rstest::fixture;\n\n#[fixture]\npub fn embedding_fixture() -> [[f32; 768]; 6] {\n    EMBEDDING\n}\n```\n\nWe can refactor the \"get_resource\" helper function as a fixture too:\n\n```rust:src/engine/tests/fixtures.rs\n#[fixture]\npub fn resource_fixture() -> Resource {\n    let content = content_fixture();\n    let embeddings = embedding_fixture()\n        .iter()\n        .enumerate()\n        .map(|(i, x)| EmbeddedResource {\n            id: i.to_string(),\n            title: content.get(i).unwrap().to_string(),\n            url: \"\".to_owned(),\n            embeddings: x.to_vec(),\n        })\n        .collect();\n    Resource { embeddings }\n}\n```\n\nSince each fixture functions are just functions, we can use them inside another fixture function like we see in the \"resource_fixture\" function above.\n\nTo use the fixtures in a test case, we'll need to import the fixtures and inject them as parameters:\n\n```rust:src/engine/tests/mod.rs\nuse fixtures::*;\nuse rstest::*;\n\n#[rstest]\nfn it_returns_vector_search_result(\n    resource_fixture: Resource,\n    question_fixture: [f32; 768],\n    content_fixture: [&'static str; 6],\n) {\n    let index = index(resource_fixture).unwrap();\n    let query = Query::Embeddings(question_fixture.to_vec());\n    let result = search(&index, &query, 6).unwrap();\n\n    assert_eq!(result.get(0).unwrap().title, content_fixture[0]);\n    assert_eq!(result.get(1).unwrap().title, content_fixture[1]);\n    assert_eq!(result.get(2).unwrap().title, content_fixture[2]);\n    assert_eq!(result.get(3).unwrap().title, content_fixture[4]);\n    assert_eq!(result.get(4).unwrap().title, content_fixture[5]);\n    assert_eq!(result.get(5).unwrap().title, content_fixture[3]);\n}\n```\n\nMake sure the parameters have the same names as the fixtures. rstest uses the names to inject and initiate the fixtures in the test functions.\n\nLet's run \"cargo test\" to see if it works.\n\n<img\n  src=\"/optimized/articles/testing-with-fixtures-in-rust/terminal.webp\"\n  alt=\"Unit result with fixtures\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nIt does!\n\n## Final Thoughts\n\n[rstest][1] has more convenient features. For example, you can write multiple test cases with #[case]:\n\n```rust\nuse rstest::rstest;\n\n#[rstest]\n#[case(0, 0)]\n#[case(1, 1)]\n#[case(2, 1)]\n#[case(3, 2)]\n#[case(4, 3)]\nfn fibonacci_test(#[case] input: u32, #[case] expected: u32) {\n    assert_eq!(expected, fibonacci(input))\n}\n```\n\nYou can also test [Future][8]!\n\n```rust\nuse rstest::*;\n#[fixture]\nasync fn base() -> u32 { 42 }\n\n#[rstest]\n#[case(21, async { 2 })]\n#[case(6, async { 7 })]\nasync fn my_async_test(#[future] base: u32, #[case] expected: u32, #[future] #[case] div: u32) {\n    assert_eq!(expected, base.await / div.await);\n}\n```\n\nThese are just a few examples I took from rstest. It has more fixture-based features that help us to structure cleaner unit tests with test fixtures. I really enjoyed it.\n\n[Voy][7] is an open source semantic search engine in WebAssembly. I created it to empower more projects to build semantic features and create better user experiences for people around the world. Voy follows several design principles:\n\n- ü§è **Tiny**: Reduce overhead for limited devices, such as mobile browsers with slow network or IoT.\n- üöÄ **Fast**: Create the best search experience for the users.\n- üå≥ **Tree Shakable**: Optimize bundle size and enable asynchronous capabilities for modern Web API, such as Web Workers.\n- üîã **Resumable**: Generate portable embeddings index anywhere, anytime.\n- ‚òÅÔ∏è **Worldwide**: Run semantic search on CDN edge servers.\n\nIt's available on npm. You can simply install it with your favorite package manager and you're ready to go.\n\n```bash\n# with npm\nnpm i voy-search\n\n# with Yarn\nyarn add voy-search\n\n# with pnpm\npnpm add voy-search\n```\n\nGive it a try and I'm happy to hear from you!\n\n## References\n\n- [Feature extraction][4] - Wikipedia\n- [Future][8] - Rust Doc\n- [Rust][3] - Rust Team\n- [rstest][1] - GitHub\n- [Test fixture][2] - Wikipedia\n- [Voy][7] - GitHub\n- [WebAssembly][5] - WebAssembly.org\n- [Embeddings][6] - Google for Developers\n\n[1]: https://docs.rs/rstest/latest/rstest/\n[2]: https://en.wikipedia.org/wiki/Test_fixture\n[3]: https://www.rust-lang.org\n[4]: https://en.wikipedia.org/wiki/Feature_extraction\n[5]: https://webassembly.org\n[6]: https://developers.google.com/machine-learning/crash-course/embeddings/video-lecture\n[7]: https://github.com/tantaraio/voy\n[8]: https://doc.rust-lang.org/std/future/index.html\n\n---\n\nüí¨ Comments on [Reddit](https://www.reddit.com/r/rust/comments/14gyo5p/testing_with_fixtures_in_rust/?utm_source=share&utm_medium=web2x&context=3).\n\n---\n\nHere you have it! Thanks for reading through üôå\nIf you find this article useful, please share it to help more people in their engineering journey.\n\nüê¶ Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\n\n‚è≠Ô∏è Ready for the next article? üëâ [Share Rust Types With TypeScript for WebAssembly in 30 Seconds](/articles/share-rust-types-with-typescript-for-webassembly-in-30-seconds)\n\nHappy coding!\n","code":"var Component=(()=>{var u=Object.create;var t=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,l)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>n[c],enumerable:!(l=d(n,c))||l.enumerable});return a};var g=(a,n,s)=>(s=a!=null?u(m(a)):{},i(n||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=>i(t({},\"__esModule\",{value:!0}),a);var r=k((T,o)=>{o.exports=_jsx_runtime});var _={};f(_,{default:()=>x,frontmatter:()=>y});var e=g(r()),y={title:\"Testing With Fixtures in Rust\",publishedAt:\"Jun 23, 2023\",description:\"No more awkward test cases. Here's one fixture-based testing framework that cleaned up my Rust unit tests.\",cover:\"/optimized/articles/testing-with-fixtures-in-rust/hero.webp\",category:\"Rust\",coverWidth:\"1400\",coverHeight:\"700\"};function p(a){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",p:\"p\",hr:\"hr\",blockquote:\"blockquote\",pre:\"pre\",code:\"code\",h4:\"h4\",div:\"div\",strong:\"strong\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"in-this-article\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#in-this-article\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"In this article\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"microscope\",children:\"\\u{1F52C}\"}),\" We'll learn the limitations of #[test] in Rust.\"]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u{1FA84} We'll explore an alternative to write cleaner unit tests with fixtures.\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u{1F3D7} We'll refactor the unit tests in one of my open source projects!\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Let's go.\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.p,{children:\"This article is also available on\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://medium.com/gitconnected/testing-with-fixtures-in-rust-a59e6b9e1522\",children:\"Level Up Coding\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://hackernoon.com/enhancing-test-stability-with-fixtures-in-rust\",children:\"Hacker Noon\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Feel free to read it on your favorite platform\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"})]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h2,{id:\"the-fixture-problem\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#the-fixture-problem\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"The Fixture Problem\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/Test_fixture\",children:\"Test fixtures\"}),\" are very effective in producing repeatable tests. A test fixture can be a constant or function that encapsulates a test's dependency.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I wanted to create a few test fixtures for my unit tests in one of my open source projects called \",(0,e.jsx)(n.a,{href:\"https://github.com/tantaraio/voy\",children:\"Voy\"}),\". It's a WebAssembly semantic engine written in Rust. What it does is to \",(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/Feature_extraction\",children:\"extract features\"}),\" using machine learning models, build an index, and provide a query function that enables users to search the index based on meaning and semantics. Here's a quick demo:\"]}),`\n`,(0,e.jsx)(\"img\",{src:\"/articles/share-rust-types-with-typescript-for-webassembly-in-30-seconds/voy.gif\",alt:\"Voy demo\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"You can find the \",(0,e.jsx)(n.a,{href:\"https://github.com/tantaraio/voy\",children:\"Voy's repository on GitHub\"}),\"! Feel free to try it out. The repository includes \",(0,e.jsx)(n.a,{href:\"https://github.com/tantaraio/voy/tree/main/examples\",children:\"examples\"}),\" that you can see how to use Voy in different frameworks.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"While I was still working on the feature extraction, I needed pre-generated \",(0,e.jsx)(n.a,{href:\"https://developers.google.com/machine-learning/crash-course/embeddings/video-lecture\",children:\"embeddings\"}),\" to test the index and query part of the engine. The fixture for embeddings looks like this:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"EMBEDDING\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"f32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"768\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.01960003957247733\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0.03651725347725505\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.03361894761373059\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"I created a static variable for 6 embeddings in an array. Each item is a 768 dimensional vector that represents a sentence.\"}),`\n`,(0,e.jsx)(n.p,{children:\"To use the fixture, I simply imported it in my test module. My unit test looks like this:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"super\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"engine_fixtures\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"EMBEDDING\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"QUESTION\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"engine\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"add\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" remove\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" search\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"EmbeddedResource\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"get_resource\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"k\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"usize\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" embeddings \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"EMBEDDING\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"iter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"take\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"k\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"enumerate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token closure-params\",children:[(0,e.jsx)(n.span,{className:\"token closure-punctuation punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token closure-punctuation punctuation\",children:\"|\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"EmbeddedResource\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"             id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"             title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"             url\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_owned\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"             embeddings\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_vec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"         \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"collect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" embeddings \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[test]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"it_returns_vector_search_result\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" resource\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"get_resource\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" index \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"index\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"resource\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" query \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Embeddings\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"QUESTION\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_vec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"search\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),\"index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"CONTENT\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"I created another 2 fixtures for the sentences the generated the embeddings and a question embedding to perform the query.\"}),`\n`,(0,e.jsx)(n.p,{children:\"The test case worked. The fixture produced repeatable results. However, it seems a little off. It's not very clean:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:'I needed a helper function to \"get_resource\" in the test case to initiate the fixture.'}),`\n`,(0,e.jsx)(n.li,{children:\"The fixtures were not encapsulated in the unit test and the usages were scattered.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"So I started looking for a better way to write the test.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"introducing-the-rstest-crate\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#introducing-the-rstest-crate\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Introducing The rstest Crate\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://docs.rs/rstest/latest/rstest/\",children:\"rstest\"}),\" makes it very easy to write unit tests with fixtures. All you need to do is:\"]}),`\n`,(0,e.jsxs)(n.h4,{id:\"defining-fixtures\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#defining-fixtures\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Defining fixtures\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[fixture]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"fixture\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"42\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h4,{id:\"replacing-test-with-rstest-macro\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#replacing-test-with-rstest-macro\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Replacing #[test] with #[rstest] macro.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[rstest]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"should_success\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"42\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can check out \",(0,e.jsx)(n.a,{href:\"https://docs.rs/rstest/latest/rstest/\",children:\"rstest's repository\"}),\" to find more ways to write test fixtures.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Now let's use rstest to refactor the fixtures above. I'll simply create a function to return the static variable. Like this:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/engine/tests/fixtures.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rstest\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),\"fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[fixture]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"embedding_fixture\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"f32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"768\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"EMBEDDING\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:'We can refactor the \"get_resource\" helper function as a fixture too:'}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/engine/tests/fixtures.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[fixture]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"resource_fixture\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" content \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"content_fixture\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" embeddings \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"embedding_fixture\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"iter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"enumerate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token closure-params\",children:[(0,e.jsx)(n.span,{className:\"token closure-punctuation punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token closure-punctuation punctuation\",children:\"|\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"EmbeddedResource\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" content\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            url\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_owned\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            embeddings\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_vec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"collect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" embeddings \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:'Since each fixture functions are just functions, we can use them inside another fixture function like we see in the \"resource_fixture\" function above.'}),`\n`,(0,e.jsx)(n.p,{children:\"To use the fixtures in a test case, we'll need to import the fixtures and inject them as parameters:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/engine/tests/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"fixtures\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rstest\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[rstest]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"it_returns_vector_search_result\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    resource_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Resource\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    question_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"f32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"768\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'static\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" index \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"index\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"resource_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" query \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Embeddings\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"question_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_vec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"search\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),\"index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&\"}),\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" content_fixture\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Make sure the parameters have the same names as the fixtures. rstest uses the names to inject and initiate the fixtures in the test functions.\"}),`\n`,(0,e.jsx)(n.p,{children:`Let's run \"cargo test\" to see if it works.`}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/testing-with-fixtures-in-rust/terminal.webp\",alt:\"Unit result with fixtures\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:\"It does!\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"final-thoughts\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#final-thoughts\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Final Thoughts\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://docs.rs/rstest/latest/rstest/\",children:\"rstest\"}),\" has more convenient features. For example, you can write multiple test cases with #[case]:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rstest\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),\"rstest\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[rstest]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(0, 0)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(1, 1)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(2, 1)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(3, 2)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(4, 3)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"fibonacci_test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case]\"}),\" input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case]\"}),\" expected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"expected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fibonacci\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"input\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can also test \",(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/std/future/index.html\",children:\"Future\"}),\"!\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rstest\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[fixture]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"base\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"42\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[rstest]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(21, async { 2 })]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case(6, async { 7 })]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"my_async_test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[future]\"}),\" base\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case]\"}),\" expected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[future]\"}),\" \",(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[case]\"}),\" div\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"u32\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"assert_eq!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"expected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" base\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\" div\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"await\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"These are just a few examples I took from rstest. It has more fixture-based features that help us to structure cleaner unit tests with test fixtures. I really enjoyed it.\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/tantaraio/voy\",children:\"Voy\"}),\" is an open source semantic search engine in WebAssembly. I created it to empower more projects to build semantic features and create better user experiences for people around the world. Voy follows several design principles:\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"\",\"aria-hidden\":!0,children:\"\\u{1F90F}\"}),\" \",(0,e.jsx)(n.strong,{children:\"Tiny\"}),\": Reduce overhead for limited devices, such as mobile browsers with slow network or IoT.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"rocket\",children:\"\\u{1F680}\"}),\" \",(0,e.jsx)(n.strong,{children:\"Fast\"}),\": Create the best search experience for the users.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"deciduous tree\",children:\"\\u{1F333}\"}),\" \",(0,e.jsx)(n.strong,{children:\"Tree Shakable\"}),\": Optimize bundle size and enable asynchronous capabilities for modern Web API, such as Web Workers.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"battery\",children:\"\\u{1F50B}\"}),\" \",(0,e.jsx)(n.strong,{children:\"Resumable\"}),\": Generate portable embeddings index anywhere, anytime.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"cloud\",children:\"\\u2601\\uFE0F\"}),\" \",(0,e.jsx)(n.strong,{children:\"Worldwide\"}),\": Run semantic search on CDN edge servers.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"It's available on npm. You can simply install it with your favorite package manager and you're ready to go.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# with npm\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),` i voy-search\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# with Yarn\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"yarn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"add\"}),` voy-search\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# with pnpm\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"pnpm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"add\"}),` voy-search\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Give it a try and I'm happy to hear from you!\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"references\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#references\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"References\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/Feature_extraction\",children:\"Feature extraction\"}),\" - Wikipedia\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/std/future/index.html\",children:\"Future\"}),\" - Rust Doc\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.rust-lang.org\",children:\"Rust\"}),\" - Rust Team\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://docs.rs/rstest/latest/rstest/\",children:\"rstest\"}),\" - GitHub\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/Test_fixture\",children:\"Test fixture\"}),\" - Wikipedia\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/tantaraio/voy\",children:\"Voy\"}),\" - GitHub\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://webassembly.org\",children:\"WebAssembly\"}),\" - WebAssembly.org\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://developers.google.com/machine-learning/crash-course/embeddings/video-lecture\",children:\"Embeddings\"}),\" - Google for Developers\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"speech balloon\",children:\"\\u{1F4AC}\"}),\" Comments on \",(0,e.jsx)(n.a,{href:\"https://www.reddit.com/r/rust/comments/14gyo5p/testing_with_fixtures_in_rust/?utm_source=share&utm_medium=web2x&context=3\",children:\"Reddit\"}),\".\"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you have it! Thanks for reading through \",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"raising hands\",children:\"\\u{1F64C}\"}),`\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"bird\",children:\"\\u{1F426}\"}),\" Feel free to connect with me on \",(0,e.jsx)(n.a,{href:\"https://twitter.com/dawchihliou\",children:\"twitter\"}),\"!\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"\",\"aria-hidden\":!0,children:\"\\u23ED\\uFE0F\"}),\" Ready for the next article? \",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"backhand index pointing right\",children:\"\\u{1F449}\"}),\" \",(0,e.jsx)(n.a,{href:\"/articles/share-rust-types-with-typescript-for-webassembly-in-30-seconds\",children:\"Share Rust Types With TypeScript for WebAssembly in 30 Seconds\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"Happy coding!\"})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var x=w;return b(_);})();\n;return Component;"},"_id":"articles/testing-with-fixtures-in-rust.mdx","_raw":{"sourceFilePath":"articles/testing-with-fixtures-in-rust.mdx","sourceFileName":"testing-with-fixtures-in-rust.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/testing-with-fixtures-in-rust"},"type":"Article","readingTime":{"text":"6 min read","minutes":5.625,"time":337500,"words":1125},"wordCount":1127,"slug":"testing-with-fixtures-in-rust"}},"__N_SSG":true}