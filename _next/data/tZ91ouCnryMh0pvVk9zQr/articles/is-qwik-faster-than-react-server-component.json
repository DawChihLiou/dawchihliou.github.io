{"pageProps":{"post":{"title":"Is Qwik Faster than React Server Component?","publishedAt":"Jan 26, 2023","description":"A benchmark comparison and analysis between Qwik and Next.js 13.","cover":"/optimized/articles/qwik-vs-next/hero.webp","category":"Frontend","coverWidth":"1400","coverHeight":"600","body":{"raw":"\n## TL;DR\n\n- 🔥 We'll find out whether the trending framework Qwik is faster than Next.js\n- 🤖 We'll look at a demo that generates with OpenAI's DALL-E and its performance benchmark.\n- 🚀 We'll discuss how Next.js leverages React server component to achieve fast SSR.\n\n---\n\nPage speed matters. Faster website results in [better UX, better SEO, and more profit][9]. The [latest research done by Rekuten 24][27] shows that optimizing [Core Web Vitals][21] leads to:\n\n> - 53.37% in revenue per visitor.\n> - 33.13% in conversion rate.\n> - 15.20% in average order value.\n> - 9.99% in average time spent.\n> - A 35.12% reduction in exit rate.\n\nThe modern frameworks and frontend libraries address speed and help developers ship better user experience to the users. We'll be discussing two of the modern frameworks: [Qwik][3] and [Next.js][28]. We'll see an experiment benchmark and look into how each framework achieves optimal performance.\n\nLet's go.\n\n## How The Experiment Is Set Up\n\n- qwik v0.16\n- Next.js v13\n- React v18\n\n## Let's Peek The Result\n\nI built two identical applications with Qwik and Next.js and measured the performances. The demo look like this:\n\n<img\n  src=\"/articles/qwik-vs-next/demo.gif\"\n  alt=\"DALL-E web app demo\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\n> You can find [the demo on GitHub][18]. Feel free to take a look at the repo and try it out✨\n\nThe application lets users enter prompts to [DALL·E][0], an AI image generator, and displays the generated AI images in the page. It also displays the latest Twitter feed about DALL·E.\n\nThe key features are:\n\n- Server Side rendering the application.\n- Client side fetching the image results with [DALL·E's REST API][1].\n- Server side fetching the Twitter feed with [Twitter's REST API][20].\n\nHere's the core Web Vitals by Lighthouse for Qwik:\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/qwik-lighthouse.webp\"\n  alt=\"Qwik Lighthouse score\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nComparing to Next.js's Web Vitals:\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/sc-lighthouse.webp\"\n  alt=\"Next with server component Lighthouse score\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nWe can observe the following:\n\n- Qwik's [speed index][22] is 0.5 s faster than Next.js.\n- Qwik's [time to interactive][24] is 0.3 s faster than Next.js.\n- Next.js has a 0 ms [total blocking time][23], comparing to Qwik's 160 ms.\n- Next.js has a slightly higher overall [performance score][10] by 5 points.\n- Next.js's [largest contentful paint][25] is 0.8 s faster than Qwik.\n\nLet's take a closer look at the how the application in each framework is set up.\n\n## Qwik Server Side Rendering\n\nThe component structure:\n\n```tsx:qwik/src/routes/index.tsx\nexport const onGet: RequestHandler<TwitterResponse> = async () => {\n  const data = await fetchTweets();\n  return data;\n}\n\nexport default component$(() => {\n  const tweets = useEndpoint<TwitterResponse>();\n  return (\n    <Layout>\n      <DallePromptAndResult />\n      <Resource\n        value={tweets}\n        onResolved={(result) => (\n          <SSRTwitterCarousel data={result} />\n        )}\n      />\n      <StaticPromptRecommendation />\n    </Layout>\n  )\n})\n```\n\nWhen the Qwik server receives a page request, it starts the rendering process on the server. The \"useEndPoint\" function invokes the \"onGet\" function on the server and fetches the twitter feed. The \"Resource\" component will pause the rendering until the twitter data is resolved or rejected. Once the rendering is completed, the server responds to the client with rendered HTML.\n\nWe can observe the server side rendering behavior in the performance profile:\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/qwik-perf.webp\"\n  alt=\"Qwik performance\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nThe lead time to respond to the client is blocked by the server side data fetching and component rendering.\n\n## Next.js SSR and Streaming\n\nThe component structure:\n\n```tsx:next/app/page.tsx\nexport default async function Page() {\n  const tweets = await fetchTweets();\n  return (\n    <Layout>\n      <DallePromptAndResult />\n      <Suspense fallback={<Skeleton />}>\n        <SSRTwitterCarousel data={tweets} />\n      </Suspense>\n      <StaticPromptRecommendation />\n    </Layout>\n  )\n}\n```\n\nThe \"Page\" component is a server component. It looks just like a normal component but it supports async/await.\n\nWhen the Next.js server receives a page request, it starts the rendering process and [streaming][26] the rendering result to the client so that the client can progressively render and display the UI to the users. While the server is fetching twitter feeds, React renders the suspense placeholder to indicate the pending state. Once the data is resolved or rejected, React reveals the suspense boundary and displays the final UI.\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/sc-perf.webp\"\n  alt=\"Next with server component performance\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nYou can see the client starts rendering while the server is streaming. It reduces the lead time for the users to start seeing the page.\n\n## Resumability v.s. React Server Component\n\n> Qwik embraces the \"Get HTML and render\" mental model.\n\n[Resumability][6] is Qwik's innovation. It allows an application to be rendered as much as possible on the server and resumes the rest of the rendering on the client.\n\nThe framework looks like this:\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/qwik.webp\"\n  alt=\"Next with server component performance\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nWhen receiving a request, the Qwik server starts the rendering process and generate\n\n- serialized application state,\n- serialized event handlers,\n- component HTMLs,\n- and component code chunks.\n\nThe server then responds to the client with the page HTML and the serialized state.\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/qwik-network.webp\"\n  alt=\"Next with server component performance\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nOn the client, the browser processes the [critical rendering path][12] and displays the UI. Qwik deserializes the state after the page HTML is loaded. The state contains all the local states of each component. The lazy loaded components are able to be dynamically imported independently without knowing the parent's state because they can refer to the deserialized state for their local states when they are rendering on the client.\n\nQwik also serializes event handlers.\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/qwik-serd.webp\"\n  alt=\"Qwik serialization\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nIn the server-generated HTML, the event handlers are referenced as dynamic JavaScript chunks. When users interact with an interactive element, Qwik uses the reference to dynamically download the chunk from the server and fire the event with the event handler inside the chunk.\n\n<img\n  src=\"/articles/qwik-vs-next/qwik-dynamic-import.gif\"\n  alt=\"Qwik dynamic import\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nOn the other hand, Next.js has a different approach to server side rendering.\n\n> Next.js and React server component promotes the \"Render while fetching\" mental model.\n\n[Next.js 13 introduces React server component as an experimental feature][13]. [Server component][14] is a special type of component that can only be rendered on the server. Combining with Suspense and Streaming, the framework is able to progressively render interactive UI while avoiding long data requests from blocking the page rendering.\n\nThe framework looks like this:\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/next.webp\"\n  alt=\"Next.js and React Server Component\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\nWhen Next.js server receives a request, it delegates React to handle rendering. On the server, React renders the component tree into a UI description in JSON instead of native HTML. The UI description describes the entire component tree. For the client components, React describes them as components for the client to handle with serialized props. For the server components, React renders them to native HTMLs and places them in the UI description.\n\nOn the client, React receives and reconciles the UI description in the response stream to progressively render the UI. When React sees a suspense boundary, it renders the suspense placeholder until the pending data is resolved and reveals the suspense boundary.\n\nBecause React receives a UI description instead of native HTML on the client, it needs to construct the component tree, render the UI, and attach event handlers on the client. It's known as hydration.\n\n<img\n  src=\"/optimized/articles/qwik-vs-next/sc-perf-2.webp\"\n  alt=\"Next.js and React Server Component\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/>\n\n## Final Thoughts\n\nQwik's concept of [serializing states and event handlers][4] is very innovative. The client is able to render the page with just HTML and minimal JavaScript. It reduces the amount of JavaScript the client needs to download for the initial load and leverages dynamic import to download event handlers and components on the fly. We can clearly observe the benefit from the benchmark and performance profile.\n\nHowever, the combination of React server component, suspense, and streaming has a profound impact on user experience. Users are able to see and interact with the content of the page without waiting for server side data fetching to complete.\n\nThe result of the experiment is not conclusive to me. Both frameworks performed well in the benchmarks. The differences in First Content Paint, Largest Content Paint, and Cumulative Layout Shift are likely a result of different Twitter images.\n\n## References\n\n- [API Reference: Create image][1] - OpenAI\n- [Case Study][9] - web.dev\n- [Critical rendering path][12] - MDN\n- [DALL·E 2][0] - OpenAI\n- [Data Fetching Fundamentals][17] - Next.js\n- [First class support for promises][19] - Andrew Clark\n- [How Rakuten 24's investment in Core Web Vitals increased revenue per visitor by 53.37% and conversion rate by 33.13%][27] - web.dev\n- [Hydration is Pure Overhead][4] - Builder.io\n- [Lighthouse performance scoring][10] - Chrome Developers\n- [Lazy loading][11] - MDN\n- [Next.js][28] - Vercel\n- [Node.js library][2] - OpenAI\n- [Populating the page: how browsers work][16] - MDN\n- [Progressively][7] - Builder.io\n- [qwik][3] - Builder.io\n- [qwik-vs-next][18] - Daw-Chih Liou\n- [RFC: React Server Components][14] - React Community\n- [Resumable vs. Hydration][6] - Builder.io\n- [Reactivity][8] - Builder.io\n- [Server and Client Components][13] - Next.js\n- [The \"why\" of web performance][15] - MDN\n- [Think Qwik][5] - Builder.io\n- [Time to Interfactive][24] - Chrome Developers\n- [Total Blocking Time][23] - Chrome Developers\n- [Twitter API v2][20] - Twitter Developer Aplatform\n- [Web Vitals][21] - web.dev\n- [Speed Index][22] - Chrome Developers\n- [Largest Contentful Paint][25] - Chrome Developers\n\n[0]: https://openai.com/dall-e-2/\n[1]: https://beta.openai.com/docs/api-reference/images/create\n[2]: https://beta.openai.com/docs/libraries/node-js-library\n[3]: https://qwik.builder.io\n[4]: https://www.builder.io/blog/hydration-is-pure-overhead\n[5]: https://qwik.builder.io/docs/think-qwik/\n[6]: https://qwik.builder.io/docs/concepts/resumable/\n[7]: https://qwik.builder.io/docs/concepts/progressive/\n[8]: https://qwik.builder.io/docs/concepts/reactivity/\n[9]: https://web.dev/tags/case-study/\n[10]: https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/\n[11]: https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\n[12]: https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\n[13]: https://beta.nextjs.org/docs/rendering/server-and-client-components\n[14]: https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md\n[15]: https://developer.mozilla.org/en-US/docs/Learn/Performance/why_web_performance\n[16]: https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work\n[17]: https://beta.nextjs.org/docs/data-fetching/fundamentals#fetching-data-with-server-components\n[18]: https://github.com/DawChihLiou/qwik-vs-next\n[19]: https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md#seamless-integration-with-javascript-ecosystem\n[20]: https://developer.twitter.com/en/docs/twitter-api\n[21]: https://web.dev/vitals/\n[22]: https://developer.chrome.com/en/docs/lighthouse/performance/speed-index/\n[23]: https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time/\n[24]: https://developer.chrome.com/docs/lighthouse/performance/interactive/\n[25]: https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint/\n[26]: https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense\n[27]: https://web.dev/rakuten/\n[28]: https://nextjs.org\n\nHere you have it! Thanks for reading through🙌\nIf you find this article useful, please share it to help more people in their engineering journey.\n\n🐦 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\n\n⏭ Ready for the next article? 👉 [**Tired of Slow Code Reviews? Read this**](/articles/tired-of-slow-code-reviews)\n\nHappy coding!\n","code":"var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},c=(a,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!k.call(a,s)&&s!==t&&i(a,s,{get:()=>e[s],enumerable:!(r=p(e,s))||r.enumerable});return a};var w=(a,e,t)=>(t=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),f=a=>c(i({},\"__esModule\",{value:!0}),a);var o=N((T,l)=>{l.exports=_jsx_runtime});var y={};g(y,{default:()=>x,frontmatter:()=>v});var n=w(o()),v={title:\"Is Qwik Faster than React Server Component?\",publishedAt:\"Jan 26, 2023\",description:\"A benchmark comparison and analysis between Qwik and Next.js 13.\",cover:\"/optimized/articles/qwik-vs-next/hero.webp\",category:\"Frontend\",coverWidth:\"1400\",coverHeight:\"600\"};function h(a){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",hr:\"hr\",p:\"p\",blockquote:\"blockquote\",div:\"div\",pre:\"pre\",code:\"code\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"tldr\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#tldr\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"TL;DR\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"fire\",children:\"\\u{1F525}\"}),\" We'll find out whether the trending framework Qwik is faster than Next.js\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"robot face\",children:\"\\u{1F916}\"}),\" We'll look at a demo that generates with OpenAI's DALL-E and its performance benchmark.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"rocket\",children:\"\\u{1F680}\"}),\" We'll discuss how Next.js leverages React server component to achieve fast SSR.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.p,{children:[\"Page speed matters. Faster website results in \",(0,n.jsx)(e.a,{href:\"https://web.dev/tags/case-study/\",children:\"better UX, better SEO, and more profit\"}),\". The \",(0,n.jsx)(e.a,{href:\"https://web.dev/rakuten/\",children:\"latest research done by Rekuten 24\"}),\" shows that optimizing \",(0,n.jsx)(e.a,{href:\"https://web.dev/vitals/\",children:\"Core Web Vitals\"}),\" leads to:\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"53.37% in revenue per visitor.\"}),`\n`,(0,n.jsx)(e.li,{children:\"33.13% in conversion rate.\"}),`\n`,(0,n.jsx)(e.li,{children:\"15.20% in average order value.\"}),`\n`,(0,n.jsx)(e.li,{children:\"9.99% in average time spent.\"}),`\n`,(0,n.jsx)(e.li,{children:\"A 35.12% reduction in exit rate.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The modern frameworks and frontend libraries address speed and help developers ship better user experience to the users. We'll be discussing two of the modern frameworks: \",(0,n.jsx)(e.a,{href:\"https://qwik.builder.io\",children:\"Qwik\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://nextjs.org\",children:\"Next.js\"}),\". We'll see an experiment benchmark and look into how each framework achieves optimal performance.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Let's go.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"how-the-experiment-is-set-up\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#how-the-experiment-is-set-up\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"How The Experiment Is Set Up\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"qwik v0.16\"}),`\n`,(0,n.jsx)(e.li,{children:\"Next.js v13\"}),`\n`,(0,n.jsx)(e.li,{children:\"React v18\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"lets-peek-the-result\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#lets-peek-the-result\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Let's Peek The Result\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I built two identical applications with Qwik and Next.js and measured the performances. The demo look like this:\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/articles/qwik-vs-next/demo.gif\",alt:\"DALL-E web app demo\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"You can find \",(0,n.jsx)(e.a,{href:\"https://github.com/DawChihLiou/qwik-vs-next\",children:\"the demo on GitHub\"}),\". Feel free to take a look at the repo and try it out\",(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The application lets users enter prompts to \",(0,n.jsx)(e.a,{href:\"https://openai.com/dall-e-2/\",children:\"DALL\\xB7E\"}),\", an AI image generator, and displays the generated AI images in the page. It also displays the latest Twitter feed about DALL\\xB7E.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The key features are:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Server Side rendering the application.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"Client side fetching the image results with \",(0,n.jsx)(e.a,{href:\"https://beta.openai.com/docs/api-reference/images/create\",children:\"DALL\\xB7E's REST API\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Server side fetching the Twitter feed with \",(0,n.jsx)(e.a,{href:\"https://developer.twitter.com/en/docs/twitter-api\",children:\"Twitter's REST API\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Here's the core Web Vitals by Lighthouse for Qwik:\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/qwik-lighthouse.webp\",alt:\"Qwik Lighthouse score\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"Comparing to Next.js's Web Vitals:\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/sc-lighthouse.webp\",alt:\"Next with server component Lighthouse score\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"We can observe the following:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Qwik's \",(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/en/docs/lighthouse/performance/speed-index/\",children:\"speed index\"}),\" is 0.5 s faster than Next.js.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Qwik's \",(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/interactive/\",children:\"time to interactive\"}),\" is 0.3 s faster than Next.js.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Next.js has a 0 ms \",(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time/\",children:\"total blocking time\"}),\", comparing to Qwik's 160 ms.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Next.js has a slightly higher overall \",(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/\",children:\"performance score\"}),\" by 5 points.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Next.js's \",(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint/\",children:\"largest contentful paint\"}),\" is 0.8 s faster than Qwik.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Let's take a closer look at the how the application in each framework is set up.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"qwik-server-side-rendering\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#qwik-server-side-rendering\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Qwik Server Side Rendering\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The component structure:\"}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"qwik/src/routes/index.tsx\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" onGet\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"RequestHandler\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"TwitterResponse\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fetchTweets\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"component$\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" tweets \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token generic-function\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"useEndpoint\"}),(0,n.jsxs)(e.span,{className:\"token generic class-name\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"TwitterResponse\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"})]})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Layout\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"DallePromptAndResult\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Resource\"})]}),`\n`]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"tweets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"onResolved\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[\"          \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"SSRTwitterCarousel\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"data\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"result\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"StaticPromptRecommendation\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Layout\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:'When the Qwik server receives a page request, it starts the rendering process on the server. The \"useEndPoint\" function invokes the \"onGet\" function on the server and fetches the twitter feed. The \"Resource\" component will pause the rendering until the twitter data is resolved or rejected. Once the rendering is completed, the server responds to the client with rendered HTML.'}),`\n`,(0,n.jsx)(e.p,{children:\"We can observe the server side rendering behavior in the performance profile:\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/qwik-perf.webp\",alt:\"Qwik performance\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"The lead time to respond to the client is blocked by the server side data fetching and component rendering.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"nextjs-ssr-and-streaming\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#nextjs-ssr-and-streaming\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Next.js SSR and Streaming\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The component structure:\"}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"next/app/page.tsx\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"Page\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" tweets \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fetchTweets\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Layout\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"DallePromptAndResult\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Suspense\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"fallback\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Skeleton\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"SSRTwitterCarousel\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"data\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"tweets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Suspense\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"StaticPromptRecommendation\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Layout\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:'The \"Page\" component is a server component. It looks just like a normal component but it supports async/await.'}),`\n`,(0,n.jsxs)(e.p,{children:[\"When the Next.js server receives a page request, it starts the rendering process and \",(0,n.jsx)(e.a,{href:\"https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense\",children:\"streaming\"}),\" the rendering result to the client so that the client can progressively render and display the UI to the users. While the server is fetching twitter feeds, React renders the suspense placeholder to indicate the pending state. Once the data is resolved or rejected, React reveals the suspense boundary and displays the final UI.\"]}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/sc-perf.webp\",alt:\"Next with server component performance\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can see the client starts rendering while the server is streaming. It reduces the lead time for the users to start seeing the page.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"resumability-vs-react-server-component\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#resumability-vs-react-server-component\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Resumability v.s. React Server Component\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:'Qwik embraces the \"Get HTML and render\" mental model.'}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://qwik.builder.io/docs/concepts/resumable/\",children:\"Resumability\"}),\" is Qwik's innovation. It allows an application to be rendered as much as possible on the server and resumes the rest of the rendering on the client.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The framework looks like this:\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/qwik.webp\",alt:\"Next with server component performance\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"When receiving a request, the Qwik server starts the rendering process and generate\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"serialized application state,\"}),`\n`,(0,n.jsx)(e.li,{children:\"serialized event handlers,\"}),`\n`,(0,n.jsx)(e.li,{children:\"component HTMLs,\"}),`\n`,(0,n.jsx)(e.li,{children:\"and component code chunks.\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"The server then responds to the client with the page HTML and the serialized state.\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/qwik-network.webp\",alt:\"Next with server component performance\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"On the client, the browser processes the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\",children:\"critical rendering path\"}),\" and displays the UI. Qwik deserializes the state after the page HTML is loaded. The state contains all the local states of each component. The lazy loaded components are able to be dynamically imported independently without knowing the parent's state because they can refer to the deserialized state for their local states when they are rendering on the client.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Qwik also serializes event handlers.\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/qwik-serd.webp\",alt:\"Qwik serialization\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"In the server-generated HTML, the event handlers are referenced as dynamic JavaScript chunks. When users interact with an interactive element, Qwik uses the reference to dynamically download the chunk from the server and fire the event with the event handler inside the chunk.\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/articles/qwik-vs-next/qwik-dynamic-import.gif\",alt:\"Qwik dynamic import\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"On the other hand, Next.js has a different approach to server side rendering.\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:'Next.js and React server component promotes the \"Render while fetching\" mental model.'}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://beta.nextjs.org/docs/rendering/server-and-client-components\",children:\"Next.js 13 introduces React server component as an experimental feature\"}),\". \",(0,n.jsx)(e.a,{href:\"https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md\",children:\"Server component\"}),\" is a special type of component that can only be rendered on the server. Combining with Suspense and Streaming, the framework is able to progressively render interactive UI while avoiding long data requests from blocking the page rendering.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The framework looks like this:\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/next.webp\",alt:\"Next.js and React Server Component\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"When Next.js server receives a request, it delegates React to handle rendering. On the server, React renders the component tree into a UI description in JSON instead of native HTML. The UI description describes the entire component tree. For the client components, React describes them as components for the client to handle with serialized props. For the server components, React renders them to native HTMLs and places them in the UI description.\"}),`\n`,(0,n.jsx)(e.p,{children:\"On the client, React receives and reconciles the UI description in the response stream to progressively render the UI. When React sees a suspense boundary, it renders the suspense placeholder until the pending data is resolved and reveals the suspense boundary.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Because React receives a UI description instead of native HTML on the client, it needs to construct the component tree, render the UI, and attach event handlers on the client. It's known as hydration.\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/qwik-vs-next/sc-perf-2.webp\",alt:\"Next.js and React Server Component\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"final-thoughts\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#final-thoughts\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Final Thoughts\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Qwik's concept of \",(0,n.jsx)(e.a,{href:\"https://www.builder.io/blog/hydration-is-pure-overhead\",children:\"serializing states and event handlers\"}),\" is very innovative. The client is able to render the page with just HTML and minimal JavaScript. It reduces the amount of JavaScript the client needs to download for the initial load and leverages dynamic import to download event handlers and components on the fly. We can clearly observe the benefit from the benchmark and performance profile.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"However, the combination of React server component, suspense, and streaming has a profound impact on user experience. Users are able to see and interact with the content of the page without waiting for server side data fetching to complete.\"}),`\n`,(0,n.jsx)(e.p,{children:\"The result of the experiment is not conclusive to me. Both frameworks performed well in the benchmarks. The differences in First Content Paint, Largest Content Paint, and Cumulative Layout Shift are likely a result of different Twitter images.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"references\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#references\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"References\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://beta.openai.com/docs/api-reference/images/create\",children:\"API Reference: Create image\"}),\" - OpenAI\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://web.dev/tags/case-study/\",children:\"Case Study\"}),\" - web.dev\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\",children:\"Critical rendering path\"}),\" - MDN\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://openai.com/dall-e-2/\",children:\"DALL\\xB7E 2\"}),\" - OpenAI\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://beta.nextjs.org/docs/data-fetching/fundamentals#fetching-data-with-server-components\",children:\"Data Fetching Fundamentals\"}),\" - Next.js\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md#seamless-integration-with-javascript-ecosystem\",children:\"First class support for promises\"}),\" - Andrew Clark\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://web.dev/rakuten/\",children:\"How Rakuten 24's investment in Core Web Vitals increased revenue per visitor by 53.37% and conversion rate by 33.13%\"}),\" - web.dev\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://www.builder.io/blog/hydration-is-pure-overhead\",children:\"Hydration is Pure Overhead\"}),\" - Builder.io\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/\",children:\"Lighthouse performance scoring\"}),\" - Chrome Developers\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\",children:\"Lazy loading\"}),\" - MDN\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://nextjs.org\",children:\"Next.js\"}),\" - Vercel\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://beta.openai.com/docs/libraries/node-js-library\",children:\"Node.js library\"}),\" - OpenAI\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work\",children:\"Populating the page: how browsers work\"}),\" - MDN\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://qwik.builder.io/docs/concepts/progressive/\",children:\"Progressively\"}),\" - Builder.io\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://qwik.builder.io\",children:\"qwik\"}),\" - Builder.io\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/DawChihLiou/qwik-vs-next\",children:\"qwik-vs-next\"}),\" - Daw-Chih Liou\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md\",children:\"RFC: React Server Components\"}),\" - React Community\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://qwik.builder.io/docs/concepts/resumable/\",children:\"Resumable vs. Hydration\"}),\" - Builder.io\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://qwik.builder.io/docs/concepts/reactivity/\",children:\"Reactivity\"}),\" - Builder.io\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://beta.nextjs.org/docs/rendering/server-and-client-components\",children:\"Server and Client Components\"}),\" - Next.js\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Learn/Performance/why_web_performance\",children:'The \"why\" of web performance'}),\" - MDN\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://qwik.builder.io/docs/think-qwik/\",children:\"Think Qwik\"}),\" - Builder.io\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/interactive/\",children:\"Time to Interfactive\"}),\" - Chrome Developers\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time/\",children:\"Total Blocking Time\"}),\" - Chrome Developers\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.twitter.com/en/docs/twitter-api\",children:\"Twitter API v2\"}),\" - Twitter Developer Aplatform\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://web.dev/vitals/\",children:\"Web Vitals\"}),\" - web.dev\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/en/docs/lighthouse/performance/speed-index/\",children:\"Speed Index\"}),\" - Chrome Developers\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint/\",children:\"Largest Contentful Paint\"}),\" - Chrome Developers\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here you have it! Thanks for reading through\",(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"raising hands\",children:\"\\u{1F64C}\"}),`\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"bird\",children:\"\\u{1F426}\"}),\" Feel free to connect with me on \",(0,n.jsx)(e.a,{href:\"https://twitter.com/dawchihliou\",children:\"twitter\"}),\"!\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u23ED Ready for the next article? \",(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"backhand index pointing right\",children:\"\\u{1F449}\"}),\" \",(0,n.jsx)(e.a,{href:\"/articles/tired-of-slow-code-reviews\",children:(0,n.jsx)(e.strong,{children:\"Tired of Slow Code Reviews? Read this\"})})]}),`\n`,(0,n.jsx)(e.p,{children:\"Happy coding!\"})]})}function b(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(h,a)})):h(a)}var x=b;return f(y);})();\n;return Component;"},"_id":"articles/is-qwik-faster-than-react-server-component.mdx","_raw":{"sourceFilePath":"articles/is-qwik-faster-than-react-server-component.mdx","sourceFileName":"is-qwik-faster-than-react-server-component.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/is-qwik-faster-than-react-server-component"},"type":"Article","readingTime":{"text":"9 min read","minutes":8.355,"time":501300,"words":1671},"wordCount":1673,"slug":"is-qwik-faster-than-react-server-component"}},"__N_SSG":true}