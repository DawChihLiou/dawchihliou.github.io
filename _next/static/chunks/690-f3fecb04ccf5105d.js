"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{877:function(e,n,s){s.d(n,{Z:function(){return l}});var a=s(5893),t=s(7294),i=s(9008),c=s.n(i),r=s(1163),o=s(3418);function l(e){let{children:n,title:s,description:i,url:l,image:d,imageWidth:h,imageHeight:p,publishedAt:m}=e,u=(0,r.useRouter)(),x=(0,t.useMemo)(()=>m?new Date(m).toISOString():new Date().toISOString(),[m]),j=(0,t.useMemo)(()=>d.replace(/\.webp$/,".png"),[d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:s}),(0,a.jsx)("meta",{name:"description",content:i}),(0,a.jsx)("meta",{name:"robots",content:"follow, index"}),(0,a.jsx)("link",{rel:"canonical",href:"".concat(o.Z.home).concat(u.asPath)}),(0,a.jsx)("meta",{itemProp:"name",content:s}),(0,a.jsx)("meta",{itemProp:"description",content:i}),(0,a.jsx)("meta",{itemProp:"image",content:j}),(0,a.jsx)("meta",{property:"og:title",content:s}),(0,a.jsx)("meta",{property:"og:type",content:"website"}),(0,a.jsx)("meta",{property:"og:url",content:l}),(0,a.jsx)("meta",{property:"og:description",content:i}),(0,a.jsx)("meta",{property:"og:image",content:j}),(0,a.jsx)("meta",{property:"og:image:type",content:"image/png"}),(0,a.jsx)("meta",{property:"og:image:width",content:h}),(0,a.jsx)("meta",{property:"og:image:height",content:p}),(0,a.jsx)("meta",{property:"og:image:alt",content:i}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:site",content:"@dawchihliou"}),(0,a.jsx)("meta",{name:"twitter:creator",content:"@dawchihliou"}),(0,a.jsx)("meta",{name:"twitter:title",content:s}),(0,a.jsx)("meta",{name:"twitter:description",content:i}),(0,a.jsx)("meta",{name:"twitter:image",content:d}),(0,a.jsx)("meta",{property:"article:published_time",content:x}),(0,a.jsx)("meta",{property:"article:section",content:"Article Section"}),(0,a.jsx)("meta",{property:"article:tag",content:"Article Tag"})]}),n]})}},3377:function(e,n,s){s.d(n,{Z:function(){return r}});var a=s(3418),t=JSON.parse('[{"title":"Binary Tree Insertion in Rust","publishedAt":"January 13, 2022","description":"I was struggling with Rust\'s ownership when implementing a Binary Tree so I re-read about it. After taking my time understanding it and refactoring, I finally made a breakthrough\uD83D\uDE0E I\'m very excited to share with you the awesome features in Rust I came across. You\'ll see interesting concepts like smart pointers and ownership.","cover":"/optimized/articles/rust-binary-tree-insertion/hero.webp","category":"Rust","coverWidth":"1411","coverHeight":"682","body":{"raw":"\\n## TL;DR\\n\\n- \uD83C\uDF33 We\'ll implement a Binary Tree together.\\n- \uD83E\uDDD1‍\uD83C\uDF3E We\'ll discuss a couple of ways to insert a node in a Binary Tree.\\n- \uD83E\uDDD1‍\uD83D\uDD2C We\'ll discuss Rust\'s ownership in action.\\n- ✨ We\'ll touch on more features and syntax in Rust.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/binary-tree-insertion-in-rust-a2d969c3d33d)\\n- [Hacker Noon](https://hackernoon.com/how-to-insert-binary-tree-in-rust)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nI was struggling hard with Rust\'s ownership when implementing a Binary Tree so I pivoted and re-read about it.\\nAfter taking my time understanding it and refactoring my code, I finally made a breakthrough\uD83D\uDE0E\\nI\'m very excited to share with you the awesome features in Rust I came across.\\nYou\'ll see interesting concepts like smart pointers and ownership.\\n\\nLet\'s get it!\\n\\n## Data Structure\\n\\nA [Binary Tree](https://en.wikipedia.org/wiki/Binary_tree) data structure look like this:\\n\\n<img\\n  src=\\"/optimized/articles/rust-binary-tree-insertion/tree.webp\\"\\n  alt=\\"Binary tree data structure visualization\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nEach node has no more than two child nodes. We refer them as `left` child and `right` child.\\nWe can translate the description into Rust code like this:\\n\\n```rust\\npub struct BinaryTree<T> {\\n    pub value: T,\\n    pub left: Option<Box<BinaryTree<T>>>,\\n    pub right: Option<Box<BinaryTree<T>>>,\\n}\\n```\\n\\nThe `BinaryTree` struct holds a value with the generic type `T`.\\nWe use [`Option` enum](https://doc.rust-lang.org/std/option/) to represent that the `left` and `right` child are both optional.\\n\\nA `Option<T>` is either a `Some` that contains a value of the type `T`, or a `None` that represents it doesn\'t.\\nBecause we are using `Option` to express whether a value is either something or nothing, the Rust compiler can check if we handle all the cases [to prevent bugs](https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html?highlight=option#the-option-enum-and-its-advantages-over-null-values).\\nComparing to JavaScript where we use [`null`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null) value to express the same concept, `Option` encourages me to handle use cases upfront and it saves me a lot of trouble in runtime.\\n\\nThe [`Box`](https://doc.rust-lang.org/book/ch15-01-box.html) is one of the smart pointers.\\nIt saves an address that points to a data in memory.\\n`Box` helps us to create a `BinaryTree` struct with an unknown size, so that we can grow the Binary Tree by inserting nodes without thinking ahead how many nodes we\'ll have when creating the tree.\\n\\n[Memory management](http://web.mit.edu/rust-lang_v1.25/arch/amd64_ubuntu1404/share/doc/rust/html/book/first-edition/the-stack-and-the-heap.html) is one of the reason Rust is so performing and interesting to learn.\\n\\n## Insertion\\n\\nBefore inserting a new Binary Tree node, we need to create an root. Let\'s implement it:\\n\\n```rust\\nimpl<T> BinaryTree<T> {\\n    pub fn new(value: T) -> Self {\\n        BinaryTree {\\n            value,\\n            left: None,\\n            right: None,\\n        }\\n    }\\n}\\n```\\n\\nThe `new` [associated function](https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions) takes the value of `T` and return a `BinaryTree` that holds the value and no child nodes.\\n\\nNow that we can use `BinaryTree::new` to create a root node, we can think about how to insert child nodes.\\nIntuitively, it would be great if we can insert left or right child node by calling methods on the root node instance. Like this:\\n\\n```rust\\nBinaryTree::new(1)\\n  .left(BinaryTree::new(2))\\n  .right(BinaryTree::new(3))\\n```\\n\\nLuckily, I found an [great article](https://endler.dev/2017/boxes-and-trees/) from my friend at trivago, [Matthias](https://twitter.com/matthiasendler), explaining exactly how to implement it.\\n\\n```rust\\nimpl<T> BinaryTree<T> {\\n    pub fn new(value: T) -> Self {\\n        BinaryTree {\\n            value,\\n            left: None,\\n            right: None,\\n        }\\n    }\\n\\n    pub fn left(mut self, node: BinaryTree<T>) -> Self {\\n        self.left = Some(Box::new(node));\\n        self\\n    }\\n\\n    pub fn right(mut self, node: BinaryTree<T>) -> Self {\\n        self.right = Some(Box::new(node));\\n        self\\n    }\\n}\\n```\\n\\nNow let\'s write some tests to make sure the associated functions work:\\n\\n```rust\\n#[cfg(test)]\\nmod tests {\\n    use super::*;\\n\\n    #[test]\\n    fn create_new_tree() {\\n        let tree = BinaryTree::new(1);\\n\\n        assert_eq!(tree.value, 1);\\n    }\\n\\n    #[test]\\n    fn insert_left() {\\n        let tree = BinaryTree::new(1).left(BinaryTree::new(2));\\n\\n        if let Some(node) = tree.left {\\n            assert_eq!(node.value, 2);\\n        }\\n\\n        assert_eq!(tree.right, None);\\n    }\\n\\n    #[test]\\n    fn insert_right() {\\n        let tree = BinaryTree::new(1).right(BinaryTree::new(2));\\n\\n        if let Some(node) = tree.right {\\n            assert_eq!(node.value, 2);\\n        }\\n\\n        assert_eq!(tree.left, None);\\n    }\\n}\\n```\\n\\n\uD83E\uDD73\\n\\n## Breadth-First Insertion\\n\\nThe insertion methods are very flexible and we can easily create a tree in just a few lines:\\n\\n```rust\\nBinaryTree::new(1)\\n    .left(\\n        BinaryTree::new(2)\\n            .left(BinaryTree::new(4))\\n            .right(BinaryTree::new(5))\\n    )\\n    .right(BinaryTree::new(3))\\n```\\n\\nThe code creates a Binary Tree like this:\\n\\n<img\\n  src=\\"/optimized/articles/rust-binary-tree-insertion/tree-3.webp\\"\\n  alt=\\"A simple Binary Tree example\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIt got me thinking.\\n\\n> If I just want to create a [balanced Binary Tree](https://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees) without any other requirements, can I insert a node and the tree finds the next available spot for me?\\n\\nSomething like this:\\n\\n```rust\\nlet mut root = BinaryTree::new(1);\\nroot.insert(2);\\nroot.insert(3);\\nroot.insert(4);\\nroot.insert(5);\\n```\\n\\nand it creates the same tree structure as we saw above.\\n\\nWe can achieve it by traverse the tree in the [breadth-first](https://en.wikipedia.org/wiki/Breadth-first_search) fashion and insert a node as soon as we found an absent child node.\\n\\nThe easiest way to implement a breath-first traversal is with a [Queue](<https://en.wikipedia.org/wiki/Queue_(abstract_data_type)>).\\nRust has a [`VecDequeue`](https://doc.rust-lang.org/std/collections/struct.VecDeque.html) in the standard library we can use.\\n\\n```rust\\npub fn insert(&mut self, new_value: T) {\\n    let mut queue: VecDeque<&mut BinaryTree<T>> = VecDeque::new();\\n    queue.push_front(self);\\n\\n    loop {\\n        let BinaryTree {\\n            ref mut left,\\n            ref mut right,\\n            ..\\n        } = queue.pop_back().unwrap();\\n\\n        match left {\\n            Some(node) => {\\n                queue.push_front(node);\\n            }\\n            None => {\\n                *left = Some(Box::new(BinaryTree::new(new_value)));\\n                return;\\n            }\\n        }\\n\\n        match right {\\n            Some(node) => {\\n                queue.push_front(node);\\n            }\\n            None => {\\n                *right = Some(Box::new(BinaryTree::new(new_value)));\\n                return;\\n            }\\n        }\\n    }\\n}\\n```\\n\\nThe algorithm is to force the loop to visit sibling nodes first, from left to right, before visiting the next layer of child nodes.\\nIn each iteration, we\'ll check if either the `left` or `right` child is absent.\\nIf we found one, that\'s the next available spot for the new node.\\n\\nIt\'s a rather straightforward algorithm but [I struggled to get it right](https://www.reddit.com/r/rust/comments/ry34vr/problem_with_implementing_binary_tree_insertion/).\\nThe problem was that I didn\'t understand [ownership in Rust](https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html).\\n\\nLet\'s go through the `insert` method together.\\n\\nFirst thing we want to decide is how do we want to use the first argument `self`.\\n`self` is referring to the `BinaryTree` instance the method is called on.\\nWhat we need from `self` is to be able to mutate the `left` and `right` child node so that we can insert a new node.\\nSimply passing in a mutable reference `&mut self` will do the job because the method don\'t need to take ownership of `self`.\\n\\nFor the `VecDeque` item data type, we can use the same data type as `self` to store mutable references of `BinaryTree`.\\n\\nWhen popping the queue inside the loop, we want to use a mutable reference to `left` and `right` because we want to insert the new node.\\n\\nWhen inserting the new node, we [dereference](https://doc.rust-lang.org/book/ch15-02-deref.html) the `left` and `right` to allow the new node assignment, like this: `*left = Some(Box::new(BinaryTree::new(new_value)))`.\\n\\nIt took me some time to figure out how to borrow or move the data in the method.\\nOnce I got it, it make so much sense!\\n\\nLet\'s write some tests for it\uD83E\uDDD1‍\uD83D\uDD2C\\n\\n```rust\\n#[test]\\nfn insert() {\\n    let mut tree = BinaryTree::new(1);\\n    tree.insert(2);\\n    tree.insert(3);\\n    tree.insert(4);\\n    tree.insert(5);\\n\\n    assert_eq!(\\n        tree,\\n        BinaryTree::new(1)\\n            .left(\\n                BinaryTree::new(2)\\n                    .left(BinaryTree::new(4))\\n                    .right(BinaryTree::new(5))\\n            )\\n            .right(BinaryTree::new(3))\\n    );\\n\\n    tree.insert(6);\\n\\n    assert_eq!(\\n        tree,\\n        BinaryTree::new(1)\\n            .left(\\n                BinaryTree::new(2)\\n                    .left(BinaryTree::new(4))\\n                    .right(BinaryTree::new(5))\\n            )\\n            .right(BinaryTree::new(3).left(BinaryTree::new(6)))\\n    )\\n}\\n```\\n\\nIf we run the tests, you\'ll see a error message like this:\\n\\n<img\\n  src=\\"/optimized/articles/rust-binary-tree-insertion/error-partial-equal.webp\\"\\n  alt=\\"Test aborted because of the Copy Trait is not implemented\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIt\'s because the trees couldn\'t compare with each other.\\nWe can fix it by adding [`PartialEq`](https://doc.rust-lang.org/std/cmp/trait.PartialEq.html) trait to the `BinaryTree` struct.\\n\\n```diff\\n+ #[derive(PartialEq)]\\npub struct BinaryTree<T> {\\n    pub value: T,\\n    pub left: Option<Box<BinaryTree<T>>>,\\n    pub right: Option<Box<BinaryTree<T>>>,\\n}\\n```\\n\\n\uD83E\uDD73\\n\\n## Converting Array into Binary Tree\\n\\nNow that we have an automatic insertion with the `insert` method, we can consider creating a balanced tree in a more convenient way.\\nFor example, I want to have something similar to [`Vec::from`](https://doc.rust-lang.org/std/vec/struct.Vec.html#examples): an associated function `BinaryTree::from` that takes in an array and returns a balanced `BinaryTree`.\\n\\nLet\'s write a test to visualize the use case better:\\n\\n```rust\\n#[test]\\nfn create_new_tree_with_from() {\\n    // `BinaryTree::from` takes in a reference of an array because borrowing is sufficient\\n    let tree = BinaryTree::from(&[1, 2, 3, 4, 5, 6]);\\n\\n    assert_eq!(\\n        tree,\\n        BinaryTree::new(1)\\n            .left(\\n                BinaryTree::new(2)\\n                    .left(BinaryTree::new(4))\\n                    .right(BinaryTree::new(5))\\n            )\\n            .right(BinaryTree::new(3).left(BinaryTree::new(6)))\\n    )\\n}\\n```\\n\\nTo implement `BinaryTree::from`, we can simply iterate through the array and using the `insert` method to create the tree structure.\\n\\n```rust\\nimpl<T> BinaryTree<T> {\\n    pub fn from(new_values: &[T]) -> Self {\\n        let (first, rest) = new_values.split_first().unwrap();\\n        let mut root: BinaryTree<T> = BinaryTree::new(*first);\\n\\n        for value in rest {\\n            root.insert(*value)\\n        }\\n        root\\n    }\\n}\\n```\\n\\nIn the function, we created a root node from the first array element and then insert the rest element in the tree one by one.\\n\\nIf you try to test it, you\'ll see an error message like this:\\n\\n<img\\n  src=\\"/optimized/articles/rust-binary-tree-insertion/error-copy-trait.webp\\"\\n  alt=\\"Test aborted because of the Copy Trait is not implemented\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWe can fix it by specifying the type `T` implements the [`Copy`](https://doc.rust-lang.org/std/marker/trait.Copy.html) trait.\\n\\n```diff\\n- impl<T> BinaryTree<T> {\\n+ impl<T> BinaryTree<T>\\n+ where\\n+     T: Copy,\\n+ {\\n```\\n\\nThe reason is that the `insert` method actually take ownership over `new_value`.\\nIn order to keep the program memory save, the compiler didn\'t allow us to \\"move\\" the array elements into the `insert` method because the array might be referenced in other parts of the program.\\nSo what we can do is to pass in a copy (duplicate) of an array element.\\n\\nNow it should work!\\n\\n## Final Thought\\n\\nThat\'s it! The full implementation of our Binary Tree assertion is here⬇️\\n\\n```rust\\n#[derive(Debug, PartialEq)]\\npub struct BinaryTree<T> {\\n    pub value: T,\\n    pub left: Option<Box<BinaryTree<T>>>,\\n    pub right: Option<Box<BinaryTree<T>>>,\\n}\\n\\nimpl<T> BinaryTree<T>\\nwhere\\n    T: Copy,\\n{\\n    ///\\n    /// Create a new Binary Tree node.\\n    ///\\n    pub fn new(value: T) -> Self {\\n        BinaryTree {\\n            value,\\n            left: None,\\n            right: None,\\n        }\\n    }\\n\\n    ///\\n    /// Create a balanced tree from an array reference.\\n    ///\\n    pub fn from(new_values: &[T]) -> Self {\\n        let (first, rest) = new_values.split_first().unwrap();\\n        let mut root: BinaryTree<T> = BinaryTree::new(*first);\\n\\n        for value in rest {\\n            root.insert(*value)\\n        }\\n        root\\n    }\\n\\n    ///\\n    /// Insert a tree node in the next available branch with breadth first traversal.\\n    ///\\n    pub fn insert(&mut self, new_value: T) {\\n        let mut queue: VecDeque<&mut BinaryTree<T>> = VecDeque::new();\\n        queue.push_front(self);\\n        loop {\\n            let BinaryTree {\\n                ref mut left,\\n                ref mut right,\\n                ..\\n            } = queue.pop_back().unwrap();\\n\\n            match left {\\n                Some(node) => {\\n                    queue.push_front(node);\\n                }\\n                None => {\\n                    *left = Some(Box::new(BinaryTree::new(new_value)));\\n                    return;\\n                }\\n            }\\n\\n            match right {\\n                Some(node) => {\\n                    queue.push_front(node);\\n                }\\n                None => {\\n                    *right = Some(Box::new(BinaryTree::new(new_value)));\\n                    return;\\n                }\\n            }\\n        }\\n    }\\n\\n    ///\\n    /// Insert a left child node.\\n    ///\\n    pub fn left(mut self, node: BinaryTree<T>) -> Self {\\n        self.left = Some(Box::new(node));\\n        self\\n    }\\n\\n    ///\\n    /// Insert a right child node.\\n    ///\\n    pub fn right(mut self, node: BinaryTree<T>) -> Self {\\n        self.right = Some(Box::new(node));\\n        self\\n    }\\n}\\n\\n#[cfg(test)]\\nmod tests {\\n    use super::*;\\n\\n    #[test]\\n    fn create_new_tree() {\\n        let tree = BinaryTree::new(1);\\n\\n        assert_eq!(tree.value, 1);\\n    }\\n\\n    #[test]\\n    fn insert_left() {\\n        let tree = BinaryTree::new(1).left(BinaryTree::new(2));\\n\\n        if let Some(node) = tree.left {\\n            assert_eq!(node.value, 2);\\n        }\\n\\n        assert_eq!(tree.right, None);\\n    }\\n\\n    #[test]\\n    fn insert_right() {\\n        let tree = BinaryTree::new(1).right(BinaryTree::new(2));\\n\\n        if let Some(node) = tree.right {\\n            assert_eq!(node.value, 2);\\n        }\\n\\n        assert_eq!(tree.left, None);\\n    }\\n\\n    #[test]\\n    fn insert() {\\n        let mut tree = BinaryTree::new(1);\\n        tree.insert(2);\\n        tree.insert(3);\\n        tree.insert(4);\\n        tree.insert(5);\\n\\n        assert_eq!(\\n            tree,\\n            BinaryTree::new(1)\\n                .left(\\n                    BinaryTree::new(2)\\n                        .left(BinaryTree::new(4))\\n                        .right(BinaryTree::new(5))\\n                )\\n                .right(BinaryTree::new(3))\\n        );\\n\\n        tree.insert(6);\\n\\n        assert_eq!(\\n            tree,\\n            BinaryTree::new(1)\\n                .left(\\n                    BinaryTree::new(2)\\n                        .left(BinaryTree::new(4))\\n                        .right(BinaryTree::new(5))\\n                )\\n                .right(BinaryTree::new(3).left(BinaryTree::new(6)))\\n        )\\n    }\\n\\n    #[test]\\n    fn create_new_tree_from() {\\n        let tree = BinaryTree::from(&[1, 2, 3, 4, 5, 6]);\\n\\n        assert_eq!(\\n            tree,\\n            BinaryTree::new(1)\\n                .left(\\n                    BinaryTree::new(2)\\n                        .left(BinaryTree::new(4))\\n                        .right(BinaryTree::new(5))\\n                )\\n                .right(BinaryTree::new(3).left(BinaryTree::new(6)))\\n        )\\n    }\\n}\\n```\\n\\n## Reference\\n\\n- [Binary Tree](https://en.wikipedia.org/wiki/Binary_tree)\\n- [Balanced Binary Tree](https://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees)\\n- [Breadth-First Search](https://en.wikipedia.org/wiki/Breadth-first_search)\\n- [Queue](<https://en.wikipedia.org/wiki/Queue_(abstract_data_type)>)\\n- [Rust `Option` Type](https://doc.rust-lang.org/std/option/)\\n- [Rust `Box` Pointer](https://doc.rust-lang.org/book/ch15-01-box.html)\\n- [Rust `VecDequeue`](https://doc.rust-lang.org/std/collections/struct.VecDeque.html)\\n- [Rust `PartialEq` Trait](https://doc.rust-lang.org/std/cmp/trait.PartialEq.html)\\n- [Rust `Copy` Trait](https://doc.rust-lang.org/std/marker/trait.Copy.html)\\n- [Rust `Vec::from`](https://doc.rust-lang.org/std/vec/struct.Vec.html#examples)\\n- [Rust Associated Function](https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions)\\n- [Rust Ownership](https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html)\\n- [JavaSCript `null`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null)\\n- [The Stack and the Heap](http://web.mit.edu/rust-lang_v1.25/arch/amd64_ubuntu1404/share/doc/rust/html/book/first-edition/the-stack-and-the-heap.html)\\n- [Of Boxes and Trees - Smart Pointers in Rust](https://endler.dev/2017/boxes-and-trees/)\\n- [Problem with Implementing Binary Tree Insertion](https://www.reddit.com/r/rust/comments/ry34vr/problem_with_implementing_binary_tree_insertion/)\\n- [The Option Enum and Its Advantages Over Null Values](https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html?highlight=option#the-option-enum-and-its-advantages-over-null-values)\\n- [Treating Smart Pointers Like Regular References with the Deref Trait](https://doc.rust-lang.org/book/ch15-02-deref.html)\\n\\n---\\n\\n\uD83D\uDCAC Comments on [Reddit](https://www.reddit.com/r/rust/comments/s3u7fk/binary_tree_insertion_in_rust/).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\n\\nIf you find it useful, please share this article to help more people in their engineering journey.\\n\\nFeel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nIf you\'re interested in Unicode in Rust and JavaScript, I wrote an article [\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"](/articles/indexing-strings-in-rust-and-typescript).\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.\\n\\nIf you\'re interested in writing a CLI with TypeScript and implementing a real-world CLI application with Google Lighthouse integration, check out my previous article [\\"Writing Your Own TypeScript CLI\\"](/articles/writing-your-own-typescript-cli).\\n\\nIf you\'re wondering how to test Redux Observable, I wrote an article [\\"Writing Better Marble Tests for Redux Observable andTypeScript\\"](https://itnext.io/better-marble-test-70c7676a1e2) just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let c of m(n))!N.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=h(n,c))||t.enumerable});return a};var w=(a,n,s)=>(s=a!=null?d(u(a)):{},i(n||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),y=a=>i(l({},\\"__esModule\\",{value:!0}),a);var r=k((_,o)=>{o.exports=_jsx_runtime});var B={};f(B,{default:()=>T,frontmatter:()=>g});var e=w(r()),g={title:\\"Binary Tree Insertion in Rust\\",publishedAt:\\"January 13, 2022\\",description:\\"I was struggling with Rust\'s ownership when implementing a Binary Tree so I re-read about it. After taking my time understanding it and refactoring, I finally made a breakthrough\\\\u{1F60E} I\'m very excited to share with you the awesome features in Rust I came across. You\'ll see interesting concepts like smart pointers and ownership.\\",cover:\\"/optimized/articles/rust-binary-tree-insertion/hero.webp\\",category:\\"Rust\\",coverWidth:\\"1411\\",coverHeight:\\"682\\"};function p(a){let n=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",code:\\"code\\",pre:\\"pre\\",blockquote:\\"blockquote\\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"deciduous tree\\",children:\\"\\\\u{1F333}\\"}),\\" We\'ll implement a Binary Tree together.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sheaf of rice\\",children:\\"\\\\u{1F33E}\\"}),\\" We\'ll discuss a couple of ways to insert a node in a Binary Tree.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" We\'ll discuss Rust\'s ownership in action.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"}),\\" We\'ll touch on more features and syntax in Rust.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"This article is also available on\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://betterprogramming.pub/binary-tree-insertion-in-rust-a2d969c3d33d\\",children:\\"Better Programming\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hackernoon.com/how-to-insert-binary-tree-in-rust\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[`I was struggling hard with Rust\'s ownership when implementing a Binary Tree so I pivoted and re-read about it.\\nAfter taking my time understanding it and refactoring my code, I finally made a breakthrough`,(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with sunglasses\\",children:\\"\\\\u{1F60E}\\"}),`\\nI\'m very excited to share with you the awesome features in Rust I came across.\\nYou\'ll see interesting concepts like smart pointers and ownership.`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s get it!\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"data-structure\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#data-structure\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Data Structure\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"A \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Binary_tree\\",children:\\"Binary Tree\\"}),\\" data structure look like this:\\"]}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-binary-tree-insertion/tree.webp\\",alt:\\"Binary tree data structure visualization\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Each node has no more than two child nodes. We refer them as \\",(0,e.jsx)(n.code,{children:\\"left\\"}),\\" child and \\",(0,e.jsx)(n.code,{children:\\"right\\"}),` child.\\nWe can translate the description into Rust code like this:`]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"struct\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token type-definition class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Option\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Option\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),\\" struct holds a value with the generic type \\",(0,e.jsx)(n.code,{children:\\"T\\"}),`.\\nWe use `,(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/option/\\",children:[(0,e.jsx)(n.code,{children:\\"Option\\"}),\\" enum\\"]}),\\" to represent that the \\",(0,e.jsx)(n.code,{children:\\"left\\"}),\\" and \\",(0,e.jsx)(n.code,{children:\\"right\\"}),\\" child are both optional.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"A \\",(0,e.jsx)(n.code,{children:\\"Option<T>\\"}),\\" is either a \\",(0,e.jsx)(n.code,{children:\\"Some\\"}),\\" that contains a value of the type \\",(0,e.jsx)(n.code,{children:\\"T\\"}),\\", or a \\",(0,e.jsx)(n.code,{children:\\"None\\"}),` that represents it doesn\'t.\\nBecause we are using `,(0,e.jsx)(n.code,{children:\\"Option\\"}),\\" to express whether a value is either something or nothing, the Rust compiler can check if we handle all the cases \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html?highlight=option#the-option-enum-and-its-advantages-over-null-values\\",children:\\"to prevent bugs\\"}),`.\\nComparing to JavaScript where we use `,(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null\\",children:(0,e.jsx)(n.code,{children:\\"null\\"})}),\\" value to express the same concept, \\",(0,e.jsx)(n.code,{children:\\"Option\\"}),\\" encourages me to handle use cases upfront and it saves me a lot of trouble in runtime.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch15-01-box.html\\",children:(0,e.jsx)(n.code,{children:\\"Box\\"})}),` is one of the smart pointers.\\nIt saves an address that points to a data in memory.\\n`,(0,e.jsx)(n.code,{children:\\"Box\\"}),\\" helps us to create a \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),\\" struct with an unknown size, so that we can grow the Binary Tree by inserting nodes without thinking ahead how many nodes we\'ll have when creating the tree.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\\"http://web.mit.edu/rust-lang_v1.25/arch/amd64_ubuntu1404/share/doc/rust/html/book/first-edition/the-stack-and-the-heap.html\\",children:\\"Memory management\\"}),\\" is one of the reason Rust is so performing and interesting to learn.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"insertion\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#insertion\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Insertion\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Before inserting a new Binary Tree node, we need to create an root. Let\'s implement it:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"impl\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The \\",(0,e.jsx)(n.code,{children:\\"new\\"}),\\" \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions\\",children:\\"associated function\\"}),\\" takes the value of \\",(0,e.jsx)(n.code,{children:\\"T\\"}),\\" and return a \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),\\" that holds the value and no child nodes.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Now that we can use \\",(0,e.jsx)(n.code,{children:\\"BinaryTree::new\\"}),` to create a root node, we can think about how to insert child nodes.\\nIntuitively, it would be great if we can insert left or right child node by calling methods on the root node instance. Like this:`]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Luckily, I found an \\",(0,e.jsx)(n.a,{href:\\"https://endler.dev/2017/boxes-and-trees/\\",children:\\"great article\\"}),\\" from my friend at trivago, \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/matthiasendler\\",children:\\"Matthias\\"}),\\", explaining exactly how to implement it.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"impl\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"left \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"right \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now let\'s write some tests to make sure the associated functions work:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[cfg(test)]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"tests\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"super\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"create_new_tree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert_left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"left \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert_right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"right \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F973}\\"})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"breadth-first-insertion\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#breadth-first-insertion\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Breadth-First Insertion\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The insertion methods are very flexible and we can easily create a tree in just a few lines:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The code creates a Binary Tree like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-binary-tree-insertion/tree-3.webp\\",alt:\\"A simple Binary Tree example\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"It got me thinking.\\"}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsxs)(n.p,{children:[\\"If I just want to create a \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees\\",children:\\"balanced Binary Tree\\"}),\\" without any other requirements, can I insert a node and the tree finds the next available spot for me?\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Something like this:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" root \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"and it creates the same tree structure as we saw above.\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can achieve it by traverse the tree in the \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Breadth-first_search\\",children:\\"breadth-first\\"}),\\" fashion and insert a node as soon as we found an absent child node.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The easiest way to implement a breath-first traversal is with a \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Queue_(abstract_data_type)\\",children:\\"Queue\\"}),`.\\nRust has a `,(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/std/collections/struct.VecDeque.html\\",children:(0,e.jsx)(n.code,{children:\\"VecDequeue\\"})}),\\" in the standard library we can use.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" new_value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"VecDeque\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"VecDeque\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push_front\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"loop\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"ref\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"ref\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"..\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"pop_back\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unwrap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"match\\"}),\\" left \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push_front\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"left \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"new_value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"match\\"}),\\" right \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push_front\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"right \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"new_value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[`The algorithm is to force the loop to visit sibling nodes first, from left to right, before visiting the next layer of child nodes.\\nIn each iteration, we\'ll check if either the `,(0,e.jsx)(n.code,{children:\\"left\\"}),\\" or \\",(0,e.jsx)(n.code,{children:\\"right\\"}),` child is absent.\\nIf we found one, that\'s the next available spot for the new node.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"It\'s a rather straightforward algorithm but \\",(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/rust/comments/ry34vr/problem_with_implementing_binary_tree_insertion/\\",children:\\"I struggled to get it right\\"}),`.\\nThe problem was that I didn\'t understand `,(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html\\",children:\\"ownership in Rust\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s go through the \\",(0,e.jsx)(n.code,{children:\\"insert\\"}),\\" method together.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"First thing we want to decide is how do we want to use the first argument \\",(0,e.jsx)(n.code,{children:\\"self\\"}),`.\\n`,(0,e.jsx)(n.code,{children:\\"self\\"}),\\" is referring to the \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),` instance the method is called on.\\nWhat we need from `,(0,e.jsx)(n.code,{children:\\"self\\"}),\\" is to be able to mutate the \\",(0,e.jsx)(n.code,{children:\\"left\\"}),\\" and \\",(0,e.jsx)(n.code,{children:\\"right\\"}),` child node so that we can insert a new node.\\nSimply passing in a mutable reference `,(0,e.jsx)(n.code,{children:\\"&mut self\\"}),\\" will do the job because the method don\'t need to take ownership of \\",(0,e.jsx)(n.code,{children:\\"self\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"For the \\",(0,e.jsx)(n.code,{children:\\"VecDeque\\"}),\\" item data type, we can use the same data type as \\",(0,e.jsx)(n.code,{children:\\"self\\"}),\\" to store mutable references of \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"When popping the queue inside the loop, we want to use a mutable reference to \\",(0,e.jsx)(n.code,{children:\\"left\\"}),\\" and \\",(0,e.jsx)(n.code,{children:\\"right\\"}),\\" because we want to insert the new node.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"When inserting the new node, we \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch15-02-deref.html\\",children:\\"dereference\\"}),\\" the \\",(0,e.jsx)(n.code,{children:\\"left\\"}),\\" and \\",(0,e.jsx)(n.code,{children:\\"right\\"}),\\" to allow the new node assignment, like this: \\",(0,e.jsx)(n.code,{children:\\"*left = Some(Box::new(BinaryTree::new(new_value)))\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.p,{children:`It took me some time to figure out how to borrow or move the data in the method.\\nOnce I got it, it make so much sense!`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s write some tests for it\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"})]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"If we run the tests, you\'ll see a error message like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-binary-tree-insertion/error-partial-equal.webp\\",alt:\\"Test aborted because of the Copy Trait is not implemented\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[`It\'s because the trees couldn\'t compare with each other.\\nWe can fix it by adding `,(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/std/cmp/trait.PartialEq.html\\",children:(0,e.jsx)(n.code,{children:\\"PartialEq\\"})}),\\" trait to the \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),\\" struct.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-diff\\",children:(0,e.jsxs)(n.code,{className:\\"language-diff code-highlight\\",children:[(0,e.jsx)(n.span,{className:\\"code-line inserted\\",children:(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` #[derive(PartialEq)]\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`pub struct BinaryTree<T> {\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:`   pub value: T,\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:`   pub left: Option<Box<BinaryTree<T>>>,\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:`   pub right: Option<Box<BinaryTree<T>>>,\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token unchanged\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F973}\\"})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"converting-array-into-binary-tree\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#converting-array-into-binary-tree\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Converting Array into Binary Tree\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Now that we have an automatic insertion with the \\",(0,e.jsx)(n.code,{children:\\"insert\\"}),` method, we can consider creating a balanced tree in a more convenient way.\\nFor example, I want to have something similar to `,(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/std/vec/struct.Vec.html#examples\\",children:(0,e.jsx)(n.code,{children:\\"Vec::from\\"})}),\\": an associated function \\",(0,e.jsx)(n.code,{children:\\"BinaryTree::from\\"}),\\" that takes in an array and returns a balanced \\",(0,e.jsx)(n.code,{children:\\"BinaryTree\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s write a test to visualize the use case better:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"create_new_tree_with_from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// `BinaryTree::from` takes in a reference of an array because borrowing is sufficient\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"To implement \\",(0,e.jsx)(n.code,{children:\\"BinaryTree::from\\"}),\\", we can simply iterate through the array and using the \\",(0,e.jsx)(n.code,{children:\\"insert\\"}),\\" method to create the tree structure.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"impl\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"new_values\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"first\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" rest\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" new_values\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"split_first\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unwrap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"first\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"for\\"}),\\" value \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"in\\"}),\\" rest \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`        root\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"In the function, we created a root node from the first array element and then insert the rest element in the tree one by one.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"If you try to test it, you\'ll see an error message like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-binary-tree-insertion/error-copy-trait.webp\\",alt:\\"Test aborted because of the Copy Trait is not implemented\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can fix it by specifying the type \\",(0,e.jsx)(n.code,{children:\\"T\\"}),\\" implements the \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/std/marker/trait.Copy.html\\",children:(0,e.jsx)(n.code,{children:\\"Copy\\"})}),\\" trait.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-diff\\",children:(0,e.jsxs)(n.code,{className:\\"language-diff code-highlight\\",children:[(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` impl<T> BinaryTree<T> {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` impl<T> BinaryTree<T>\\n`})]})]}),(0,e.jsx)(n.span,{className:\\"code-line inserted\\",children:(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` where\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line inserted\\",children:(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:`     T: Copy,\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line inserted\\",children:(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` {\\n`})]})})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The reason is that the \\",(0,e.jsx)(n.code,{children:\\"insert\\"}),\\" method actually take ownership over \\",(0,e.jsx)(n.code,{children:\\"new_value\\"}),`.\\nIn order to keep the program memory save, the compiler didn\'t allow us to \\"move\\" the array elements into the `,(0,e.jsx)(n.code,{children:\\"insert\\"}),` method because the array might be referenced in other parts of the program.\\nSo what we can do is to pass in a copy (duplicate) of an array element.`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now it should work!\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"final-thought\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#final-thought\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Final Thought\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"That\'s it! The full implementation of our Binary Tree assertion is here\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"down arrow\\",children:\\"\\\\u2B07\\\\uFE0F\\"})]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[derive(Debug, PartialEq)]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"struct\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token type-definition class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Option\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Option\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"impl\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"where\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Copy\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/// Create a new Binary Tree node.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/// Create a balanced tree from an array reference.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"new_values\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"first\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" rest\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" new_values\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"split_first\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unwrap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"first\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"for\\"}),\\" value \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"in\\"}),\\" rest \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            root\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`        root\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/// Insert a tree node in the next available branch with breadth first traversal.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" new_value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"VecDeque\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"VecDeque\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push_front\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"loop\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"ref\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"ref\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"..\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"pop_back\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unwrap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"match\\"}),\\" left \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push_front\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"left \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"new_value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"match\\"}),\\" right \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    queue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push_front\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\"right \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"new_value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/// Insert a left child node.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"left \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/// Insert a right child node.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"///\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"right \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Box\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[cfg(test)]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"tests\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"super\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"create_new_tree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert_left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"left \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"right\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert_right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"right \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"node\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"left\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"None\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"insert\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[test]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"create_new_tree_from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tree \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            tree\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                    \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"4\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"5\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"                \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"right\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"left\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"BinaryTree\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"reference\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#reference\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Reference\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Binary_tree\\",children:\\"Binary Tree\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees\\",children:\\"Balanced Binary Tree\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Breadth-first_search\\",children:\\"Breadth-First Search\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Queue_(abstract_data_type)\\",children:\\"Queue\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/option/\\",children:[\\"Rust \\",(0,e.jsx)(n.code,{children:\\"Option\\"}),\\" Type\\"]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/book/ch15-01-box.html\\",children:[\\"Rust \\",(0,e.jsx)(n.code,{children:\\"Box\\"}),\\" Pointer\\"]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/collections/struct.VecDeque.html\\",children:[\\"Rust \\",(0,e.jsx)(n.code,{children:\\"VecDequeue\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/cmp/trait.PartialEq.html\\",children:[\\"Rust \\",(0,e.jsx)(n.code,{children:\\"PartialEq\\"}),\\" Trait\\"]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/marker/trait.Copy.html\\",children:[\\"Rust \\",(0,e.jsx)(n.code,{children:\\"Copy\\"}),\\" Trait\\"]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/vec/struct.Vec.html#examples\\",children:[\\"Rust \\",(0,e.jsx)(n.code,{children:\\"Vec::from\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions\\",children:\\"Rust Associated Function\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html\\",children:\\"Rust Ownership\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null\\",children:[\\"JavaSCript \\",(0,e.jsx)(n.code,{children:\\"null\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"http://web.mit.edu/rust-lang_v1.25/arch/amd64_ubuntu1404/share/doc/rust/html/book/first-edition/the-stack-and-the-heap.html\\",children:\\"The Stack and the Heap\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://endler.dev/2017/boxes-and-trees/\\",children:\\"Of Boxes and Trees - Smart Pointers in Rust\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/rust/comments/ry34vr/problem_with_implementing_binary_tree_insertion/\\",children:\\"Problem with Implementing Binary Tree Insertion\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html?highlight=option#the-option-enum-and-its-advantages-over-null-values\\",children:\\"The Option Enum and Its Advantages Over Null Values\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch15-02-deref.html\\",children:\\"Treating Smart Pointers Like Regular References with the Deref Trait\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" Comments on \\",(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/rust/comments/s3u7fk/binary_tree_insertion_in_rust/\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"If you find it useful, please share this article to help more people in their engineering journey.\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re interested in Unicode in Rust and JavaScript, I wrote an article \\",(0,e.jsx)(n.a,{href:\\"/articles/indexing-strings-in-rust-and-typescript\\",children:\'\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"\'}),`.\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re interested in writing a CLI with TypeScript and implementing a real-world CLI application with Google Lighthouse integration, check out my previous article \\",(0,e.jsx)(n.a,{href:\\"/articles/writing-your-own-typescript-cli\\",children:\'\\"Writing Your Own TypeScript CLI\\"\'}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re wondering how to test Redux Observable, I wrote an article \\",(0,e.jsx)(n.a,{href:\\"https://itnext.io/better-marble-test-70c7676a1e2\\",children:\'\\"Writing Better Marble Tests for Redux Observable andTypeScript\\"\'}),` just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function b(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var T=b;return y(B);})();\\n;return Component;"},"_id":"articles/binary-tree-insertion-in-rust.mdx","_raw":{"sourceFilePath":"articles/binary-tree-insertion-in-rust.mdx","sourceFileName":"binary-tree-insertion-in-rust.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/binary-tree-insertion-in-rust"},"type":"Article","readingTime":{"text":"11 min read","minutes":10.43,"time":625800,"words":2086},"wordCount":2088,"slug":"binary-tree-insertion-in-rust"},{"title":"Building Better Next.js Static Sites with MDX and Contentlayer","publishedAt":"February 4, 2022","description":"Recently I have been researching on reducing the effort to create a new article on my static website. I analyzed more and found out the friction was in my MDX usage with Next.js. After shifting to Contentlayer, publishing content becomes so effortless. I will show you how.","cover":"/optimized/articles/nextjs-mdx-contentlayer/hero.webp","category":"Frontend","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83D\uDCA8 Contentlayer reduces a lot of friction in publishing the content on my static website.\\n- \uD83D\uDE0D MDX with remark and rehype plugins is awesomely convenient and powerful.\\n- \uD83C\uDF75 Next.js jells very well with Contentlayer and MDX\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/building-better-next-js-static-sites-with-mdx-and-contentlayer-9a06ca84e7f7)\\n- [Hacker Noon](https://hackernoon.com/build-faster-nextjs-static-sites-using-mdx-and-contentlayer)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nI fully embraced [Static Site Generation](https://www.netlify.com/blog/2020/04/14/what-is-a-static-site-generator-and-3-ways-to-find-the-best-one) (SSG) for my website to optimize the site speed and scaling in the future.\\n\\nRecently I\'ve been researching on reducing the effort to create a new article on my website.\\nThere were many touch points in my [Next.js](https://nextjs.org/) project setup in order to:\\n\\n- publish a new article\\n- estimate reading time\\n- update [the list of articles](/articles)\\n- create a new RSS feed\\n- update sitemap\\n\\n## What Was The Problem?\\n\\nI analyzed a little more and found out the friction was in my MDX usage.\\nMy file structure looked like this:\\n\\n```bash\\nmy-blog\\n├── public\\n├── data\\n│   └── blogs.json\\n├── components\\n│   └── Blog.tsx\\n└── pages\\n    ├── blogs\\n    │   ├── blog-one.mdx\\n    │   ├── blog-two.mdx\\n    │   └── blog-three.mdx\\n    └── index.tsx\\n```\\n\\nIt is the [standard setup](https://nextjs.org/docs/advanced-features/using-mdx) recommended by Next.js.\\nI was using [@mdx-js/loader](https://github.com/mdx-js/mdx/tree/main/packages/loader) and [@next/mdx](https://www.npmjs.com/package/@next/mdx) to transform MDX into pages.\\n\\nTake `pages/blogs/blog-one.mdx` for example, the content looked like this:\\n\\n```jsx:pages/blogs/blog-one.mdx\\nimport Blog from \'../../components/Blog\'\\n\\nexport const meta = {\\n  title: \'Blog One\uD83D\uDE80\',\\n  publishedAt: \'February 4, 2022\'\\n  description: \\"Learn how to build a Next.js blog with MDX and Contentlayer!\\",\\n  cover: \'/optimized/articles/blog-one/hero.webp\',\\n}\\n\\nexport default ({ children }) => (\\n  <Blog\\n    title={meta.title}\\n    description={meta.description}\\n    cover={meta.cover}\\n    publishedAt={meta.publishedAt}\\n  >\\n    {children}\\n  </Blog>\\n)\\n\\nHey There\uD83D\uDC4B\\n\\nWelcome to Blog one✨ Let\'s learn together!\\n```\\n\\n`blog-one.mdx` named-exported a meta data.\\nIt was picked up by the the default component that took care of the layout and rendered the meta data.\\n\\nThe `<Blog />` component looked like this:\\n\\n```tsx:components/Blog.tsx\\nimport { BlogProps } from \'./types\'\\n\\nexport default function Blog(props: BlogProps) {\\n  return (\\n    <article>\\n      <h1>{props.title}</h1>\\n      <h2>{props.description}</h2>\\n      <p>\\n        {props.publishedAt}\\n      </p>\\n      <img alt={props.title} src={props.cover} width=\\"100%\\" loading=\\"lazy\\" />\\n      {props.children}\\n    </article>\\n  )\\n}\\n```\\n\\nI was treating MDX files as pages.\\n\\nBecause the `meta` data in each MDX file was trapped in the page, I duplicated all the meta data and aggregated them in `data/blogs.json`.\\nI used it to maintain the list of articles on my website, the RSS feed, and the [sitemap](https://developers.google.com/search/docs/advanced/sitemaps/overview) for SEO.\\n\\n> It would be much better if I could treat the MDX files as data, and generate pages based on the data.\\n\\nThis way, **I could use the MDX files as data points and page content at the same time**.\\nPublishing a new article ideally could be much more frictionless.\\n\\nI came across [Lee Robinson\'s website](https://leerob.io/) and found out he was using a alpha library called [Contentlayer](https://github.com/contentlayerdev/contentlayer) to solve the problem.\\n\\n## What is Contentlayer\\n\\n[Contentlayer](https://github.com/contentlayerdev/contentlayer) is an library in its early stage that turns content into data.\\nIt works roughly like this:\\n\\n- It takes in headless CMS or local content in YAML, JSON, MDX, or Markdown as source.\\n- It transforms the content into TypeScript types and data files in JSON that includes the original content, meta data, and any derived data we specified.\\n- It aggregates all the data in JSON and exports them as [ESM](https://nodejs.org/api/esm.html#modules-ecmascript-modules).\\n\\nFor my use case, I can use the aggregated data generated by Contentlayer to replace my previous manual process:\\n\\n- I use the generated data to build the new page for an article.\\n- I use the generated data to render [the list of articles](https://dawchihliou.github.io/articles).\\n- I use the generated data to create a new RSS feed.\\n- I use the new file structure to generate a new sitemap.\\n- All automatic!\\n\\nContentlayer offers easy integration with Next.js.\\nI\'ll show you how in the next sections.\\n\\n## Using MDX as Data\\n\\nLet\'s first explore how to use MDX as a data point.\\n\\nMDX offers [YAML frontmatter](https://mdxjs.com/guides/frontmatter/) support with custom parsers.\\nYou can express the meta data like this:\\n\\n```md:data/blogs/blog-one.mdx\\n---\\ntitle: \'Blog One\uD83D\uDE80\'\\npublishedAt: \'February 4, 2022\'\\ndescription: \'Learn how to build a Next.js blog with MDX and Contentlayer!\'\\ncover: \'/optimized/articles/blog-one/hero.webp\'\\n---\\n\\nHey There\uD83D\uDC4B\\n\\nWelcome to Blog One✨ Let\'s learn together!\\n```\\n\\nYou can see the meta data in YAML syntax is inside the `---` block, and the body of the content follows in MDX syntax.\\nComparing to the [old setup](#what-was-the-problem) where MDX file were treated as pages, the new MDX file contains only meta data and content.\\n\\nThe next thing we need to do is to generate the blog page that renders the meta data and the content with the layout from `<Blog />` component.\\n\\n## Integrating Contentlayer in Next.js\\n\\nNow that we updated the MDX files to contain only data and content, Let\'s move them into the `data` directory.\\n\\nThe new file structure looks like this:\\n\\n```bash\\nmy-blog\\n├── public\\n├── components\\n│   └── Blog.tsx\\n├── pages\\n│   ├── blogs\\n│   │   └── [slug].tsx\\n│   └── index.tsx\\n└── data\\n    └──blogs\\n       ├── blog-one.mdx\\n       ├── blog-two.mdx\\n       └── blog-three.mdx\\n```\\n\\nNotice that we replaced the MDX files in `pages/blogs` directory with a [dynamic route](https://nextjs.org/docs/routing/dynamic-routes) `[slug].tsx`.\\nWe\'ll use this page to statically generate the blog pages [later](#using-contentlayer-data-for-static-site-generation).\\n\\n### Configuring Contentlayer\\n\\nContentlayer offers seamless integration with Next.js.\\n\\nTo install the dependencies:\\n\\n```bash\\nyarn add contentlayer next-contentlayer\\n```\\n\\nContentlayer reads the configuration from `contentlayer.config.ts`.\\nLet\'s create one.\\n\\n```bash\\ntouch contentlayer.config.ts\\n```\\n\\nInside the `contentlayer.config.ts`, we need to add instructions to tell Contentlayer how to parse:\\n\\n- `name`: namespace\\n- `filePathPattern`: input files\\n- `bodyType`: content body type for parsing\\n- `fields`: meta data fields\\n- `computedFields`: derived meta data fields\\n\\n```ts:contentlayer.config.ts\\nimport { defineDocumentType, makeSource } from \'contentlayer/source-files\'\\nimport readingTime from \'reading-time\'\\n\\nexport const Blog = defineDocumentType(() => ({\\n  name: \'Blog\',\\n  filePathPattern: \'blogs/*.mdx\',\\n  bodyType: \'mdx\',\\n  fields: {\\n    title: { type: \'string\', required: true },\\n    publishedAt: { type: \'string\', required: true },\\n    description: { type: \'string\', required: true },\\n    cover: { type: \'string\', required: true },\\n  },\\n  computedFields: {\\n    readingTime: {\\n      type: \'json\',\\n      resolve: (doc) => readingTime(doc.body.raw)\\n    },\\n    slug: {\\n      type: \'string\',\\n      resolve: (doc) => doc._raw.sourceFileName.replace(\'.mdx\', \'\'),\\n    },\\n  },\\n}))\\n\\nexport default makeSource({\\n  contentDirPath: \'data\',\\n  documentTypes: [Blog],\\n  mdx: {\\n    remarkPlugins: [],\\n    rehypePlugins: [],\\n  },\\n})\\n```\\n\\nIn the `computedFields`, we can compute data like `readingTime` from the content body\uD83E\uDD29.\\nI\'m using [`reading-time`](https://github.com/ngryman/reading-time) for calculating the reading time based on word count.\\nThe `slug` field is for generating the dynamic route later in the `[slug].tsx` page.\\n\\nUnder the hood, Contentlayer uses [`mdx-bundler`](https://github.com/kentcdodds/mdx-bundler) to parse MDX and YAML frontmatter and extract the content and data.\\nIf you\'re interested in the magic behind it, you can read more about [`gray-matter`](https://github.com/jonschlinkert/gray-matter) and [`remark-mdx-frontmatter`](https://github.com/remcohaszing/remark-mdx-frontmatter).\\nThese are the libraries `mdx-bundler` uses internally.\\n\\nAt the end of the configuration, `makeSource` will then look for files that match `blogs/*.mdx` pattern under `data` directory and generate the blog data in `.contentlayer` directory at your project root.\\n\\nLastly, wrap your Next.js configuration with `next-contentlayer` to integrate with Next.js\'s live-reload and build process.\\n\\n```js:next.config.js\\nconst { withContentlayer } = require(\'next-contentlayer\')\\n\\nmodule.exports = withContentlayer()({\\n  // ... your Next.js config\\n})\\n```\\n\\n### Using Contentlayer data for Static Site Generation\\n\\nWe are ready to use the generated data from Contentlayer and build the static pages\uD83E\uDD29\\n\\nAll we need to do is to use `allBlogs` from `.contentlayer/data` to build the dynamic routes with [`getStaticPaths`](https://nextjs.org/docs/api-reference/data-fetching/get-static-paths) and use [`getStaticProps`](https://nextjs.org/docs/api-reference/data-fetching/get-static-props) to pass the blog data to the `[slug].tsx` page.\\n\\n```tsx:pages/blogs/[slug].tsx\\nimport { useMDXComponent } from \'next-contentlayer/hooks\'\\nimport { allBlogs } from \'.contentlayer/data\'\\nimport type { Blog } from \'.contentlayer/types\'\\nimport BlogLayout from \'../../../components/Blog\'\\n\\ntype BlogProps = {\\n  blog: Blog\\n}\\n\\nexport default function Blog({ blog }: BlogProps) {\\n  const Component = useMDXComponent(post.body.code)\\n\\n  return (\\n    <BlogLayout {...blog}>\\n      <Component />\\n    </BlogLayout>\\n  )\\n}\\n\\nexport async function getStaticPaths() {\\n  return {\\n    paths: allBlogs.map((blog) => ({ params: { slug: blog.slug } })),\\n    fallback: false,\\n  }\\n}\\n\\nexport async function getStaticProps({ params }) {\\n  const blog = allBlogs.find((blog) => blog.slug === params.slug)\\n  return { props: { blog } }\\n}\\n```\\n\\nAfter the project is built, you\'ll see the blogs available at `/blogs/blog-one`, `/blogs/blog-two`, and `/blogs/blog-three`✨\\n\\n### Bonus: remark & rehype Plugins\\n\\nThere are a lot more we can do with MDX by leveraging remark and rehype plugins in the `contentlayer.config.ts`.\\n\\n- [remark](https://github.com/remarkjs/remark) is an awesome plugin ecosystem that transforms markdown.\\n- [rehype](https://github.com/rehypejs/rehype) is another powerful plugin ecosystem that transforms HTML.\\n\\nThey are two separate ecosystems but we can convert remark to rehype and generate HTML markup.\\nThe transformation looks like this:\\n\\n```bash\\nMDX ----> remark AST ------> rehype AST --------> HTML\\n    parse            convert            stringify\\n```\\n\\nContentlayer takes care of the flow.\\nAll we need to do is adding the plugins to provide instruction for the transformations.\\nI\'m using the following plugins:\\n\\n- [`remark-gfm`](https://github.com/remarkjs/remark-gfm) to support [GitHub Flavored Markdown](https://github.github.com/gfm/).\\n- [`rehype-slug`](https://github.com/rehypejs/rehype-slug) and [`rehype-autolink-headings`](https://github.com/rehypejs/rehype-autolink-headings) to render heading links.\\n- [`rehype-prism-plus`](https://github.com/timlrx/rehype-prism-plus) to render syntax highlighting in code blocks.\\n- [`rehype-code-titles`](https://github.com/rockchalkwushock/rehype-code-titles) to render code block titles.\\n- [`rehype-accessible-emojis`](https://www.npmjs.com/package/rehype-accessible-emojis) to provide accessibility to emojis.\\n\\n```diff:contentlayer.config.ts\\n+ import remarkGfm from \'remark-gfm\'\\n+ import rehypeSlug from \'rehype-slug\'\\n+ import rehypeAutolinkHeadings from \'rehype-autolink-headings\'\\n+ import rehypeCodeTitles from \'rehype-code-titles\'\\n+ import rehypePrism from \'rehype-prism-plus\'\\n+ import { rehypeAccessibleEmojis } from \'rehype-accessible-emojis\'\\n\\n// ...\\n\\nexport default makeSource({\\n  mdx: {\\n-    remarkPlugins: [],\\n+    remarkPlugins: [remarkGfm],\\n-    rehypePlugins: [],\\n+    rehypePlugins: [\\n+      rehypeSlug,\\n+      rehypeCodeTitles,\\n+      rehypePrism,\\n+      rehypeAutolinkHeadings,\\n+      rehypeAccessibleEmojis,\\n    ],\\n  },\\n})\\n```\\n\\n## Contentlayer Applications\\n\\nThere are more things we can do with the data.\\n\\n### Application #1: RSS Feed\\n\\nI can now write a script to generate a RSS feed base on the `allBlogs` data!\\n\\n```js:scripts/rss.mjs\\nimport { writeFileSync } from \'fs\'\\nimport RSS from \'rss\'\\nimport { allBlogs } from \'.contentlayer/data\'\\n\\nconst feed = new RSS({\\n  title: \\"My Blogs\\",\\n  feed_url: \'localhost:3000/rss.xml\',\\n  site_url: \'localhost:3000\',\\n})\\n\\nallBlogs.map((blog) => ({\\n  title: blog.title,\\n  description: blog.description,\\n  url: `localhost:3000/blogs/${blog.slug}`\\n  date: blog.publishedAt,\\n})).forEach((item) => {\\n  feed.item(item)\\n})\\n\\nwriteFileSync(\'./public/rss.xml\', feed.xml({ indent: true }))\\n```\\n\\n### Application #2: XML Sitemap\\n\\nIt\'s easier to write a script for sitemap generation.\\nAll we need is the file structure in the `data` and `page` directories.\\n\\n```js:scripts/sitemap.mjs\\nimport { writeFileSync } from \'fs\'\\nimport { globby } from \'globby\'\\nimport prettier from \'prettier\'\\n\\nconst pages = await globby([\\n  \'pages/*.tsx\',\\n  \'data/**/*.mdx\',\\n  \'!pages/_*.tsx\',\\n])\\n\\nconst urlTags = pages\\n  .map((file) =>\\n    file\\n      .replace(\'pages\', \'\')\\n      .replace(\'data/content\', \'\')\\n      .replace(\'.tsx\', \'\')\\n      .replace(\'.mdx\', \'\')\\n  )\\n  .map((path) => (path === \'/index\' ? \'/\' : path))\\n  .map(\\n    (path) => `\\n      <url>\\n          <loc>localhost:3000${path}</loc>\\n      </url>\\n    `\\n  )\\n  .join(\'\')\\n\\nconst sitemap = `\\n  <?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n  <urlset xmlns=\\"http://www.sitemaps.org/schemas/sitemap/0.9\\">\\n      ${urlTags}\\n  </urlset>\\n`\\n\\nconst prettierConfig = await prettier.resolveConfig(\'./prettierrc\')\\nconst formatted = prettier.format(sitemap, {\\n  ...prettierConfig,\\n  parser: \'html\',\\n})\\n\\nwriteFileSync(\'public/sitemap.xml\', formatted)\\n```\\n\\nRun both scripts after building the project and automatically generate a new RSS feed and sitemap.\\n\\n```diff:package.json\\n\\"scripts\\": {\\n+    \\"sitemap\\": \\"node scripts/sitemap.mjs\\",\\n+    \\"rss\\": \\"node scripts/rss.mjs\\",\\n+    \\"postbuild\\": \\"yarn sitemap && yarn rss\\",\\n  },\\n```\\n\\n## Final Thoughts\\n\\nBuilding Static sites with Next.js becomes so effortless with MDX and Contentlayer.\\n\\nMDX combines with remark and rehype ecosystem enriches the possibility of building consistent pages with Markdown.\\nContentlayer makes data and content in MDX files available to consume in Next.js projects.\\n\\nIf you\'re exploring ways to build your own static sites, checkout the libraries mentioned earlier.\\nIt not only reduces the time to market, but also is a lot of fun to build!\uD83E\uDD84\\n\\n## References\\n\\n- [GitHub: Contentlayer](https://github.com/contentlayerdev/contentlayer)\\n- [GitHub: rss](https://github.com/dylang/node-rss)\\n- [GitHub: remark](https://github.com/remarkjs/remark)\\n- [GitHub: rehype](https://github.com/rehypejs/rehype)\\n- [GitHub: rehype-slug](https://github.com/rehypejs/rehype-slug)\\n- [GitHub: rehype-autolink-headings](https://github.com/rehypejs/rehype-autolink-headings)\\n- [GitHub: rehype-prism-plus](https://github.com/timlrx/rehype-prism-plus)\\n- [GitHub: rehype-code-titles](https://github.com/rockchalkwushock/rehype-code-titles)\\n- [GitHub: @mdx-js/loader](https://github.com/mdx-js/mdx/tree/main/packages/loader)\\n- [GitHub: reading-time](https://github.com/ngryman/reading-time)\\n- [GitHub: remark-gfm](https://github.com/remarkjs/remark-gfm)\\n- [GitHub: mdx-bundler](https://github.com/kentcdodds/mdx-bundler)\\n- [GitHub: gray-matter](https://github.com/jonschlinkert/gray-matter)\\n- [GitHub: remark-mdx-frontmatter](https://github.com/remcohaszing/remark-mdx-frontmatter)\\n- [GitHub: rss](https://github.com/dylang/node-rss)\\n- [GitHub: globby](https://github.com/sindresorhus/globby)\\n- [npm: @next/mdx](https://www.npmjs.com/package/@next/mdx)\\n- [npm: rehype-accessible-emojis](https://www.npmjs.com/package/rehype-accessible-emojis)\\n- [Website: Lee Robinson\'s portfolio](https://leerob.io/)\\n- [Website: MDX](https://mdxjs.com/)\\n- [Website: Using MDX with Next.js](https://nextjs.org/docs/advanced-features/using-mdx)\\n- [Website: Next.js](https://nextjs.org/)\\n- [Website: Next.js Dynamic Routes](https://nextjs.org/docs/routing/dynamic-routes)\\n- [Website: Next.js getStaticPaths](https://nextjs.org/docs/api-reference/data-fetching/get-static-paths)\\n- [Website: Next.js getStaticProps](https://nextjs.org/docs/api-reference/data-fetching/get-static-props)\\n- [Website: Frontmatter](https://mdxjs.com/guides/frontmatter/)\\n- [Website: URI Fragment](https://en.wikipedia.org/wiki/URI_fragment)\\n- [Website: Learn about sitemaps](https://developers.google.com/search/docs/advanced/sitemaps/overview)\\n- [Website: ESMAScript modules](https://nodejs.org/api/esm.html#modules-ecmascript-modules)\\n- [Website: GitHub Flavored Markdown Spec](https://github.github.com/gfm)\\n- [Website: Abstract Syntax Tree](https://en.wikipedia.org/wiki/Abstract_syntax_tree)\\n- [Website: What is a Static Site Generator? And 3 ways to find the best one](https://www.netlify.com/blog/2020/04/14/what-is-a-static-site-generator-and-3-ways-to-find-the-best-one)\\n- [Website: Prettier](https://prettier.io/)\\n\\n---\\n\\n\uD83D\uDCAC See comments on [Reddit](https://www.reddit.com/r/learnjavascript/comments/smz0fs/building_better_nextjs_static_sites_with_mdx_and/?utm_source=share&utm_medium=web2x&context=3).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\n\\nIf you find it useful, please share this article to help more people in their engineering journey.\\n\\nFeel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nIn my previous article [\\"From Frontend Developer to Principal Software Engineer\\"](/articles/from-frontend-developer-to-principal-software-engineer), I shared 50+ books and online resources that helped me in my engineering journey.\\n\\nIf you\'re interested in implementing Binary Trees in Rust, my previous article [\\"Binary Tree Insertion in Rust\\"](/articles/binary-tree-insertion-in-rust) shared my struggle when I was implementing a Binary Tree.\\nIt took me some time to have a grasp on Rust\'s ownership.\\n\\nIf you\'re interested in Unicode in Rust and JavaScript, I wrote an article [\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"](/articles/indexing-strings-in-rust-and-typescript).\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.\\n\\nHappy coding!\\n","code":"var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},i=(a,e,s,t)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let c of m(e))!N.call(a,c)&&c!==s&&l(a,c,{get:()=>e[c],enumerable:!(t=h(e,c))||t.enumerable});return a};var y=(a,e,s)=>(s=a!=null?p(u(a)):{},i(e||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),f=a=>i(l({},\\"__esModule\\",{value:!0}),a);var o=k((S,r)=>{r.exports=_jsx_runtime});var j={};g(j,{default:()=>x,frontmatter:()=>b});var n=y(o()),b={title:\\"Building Better Next.js Static Sites with MDX and Contentlayer\\",publishedAt:\\"February 4, 2022\\",description:\\"Recently I have been researching on reducing the effort to create a new article on my static website. I analyzed more and found out the friction was in my MDX usage with Next.js. After shifting to Contentlayer, publishing content becomes so effortless. I will show you how.\\",cover:\\"/optimized/articles/nextjs-mdx-contentlayer/hero.webp\\",category:\\"Frontend\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function d(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",pre:\\"pre\\",code:\\"code\\",div:\\"div\\",blockquote:\\"blockquote\\",strong:\\"strong\\",h3:\\"h3\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"dashing away\\",children:\\"\\\\u{1F4A8}\\"}),\\" Contentlayer reduces a lot of friction in publishing the content on my static website.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with heart-eyes\\",children:\\"\\\\u{1F60D}\\"}),\\" MDX with remark and rehype plugins is awesomely convenient and powerful.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"teacup without handle\\",children:\\"\\\\u{1F375}\\"}),\\" Next.js jells very well with Contentlayer and MDX\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://betterprogramming.pub/building-better-next-js-static-sites-with-mdx-and-contentlayer-9a06ca84e7f7\\",children:\\"Better Programming\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://hackernoon.com/build-faster-nextjs-static-sites-using-mdx-and-contentlayer\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I fully embraced \\",(0,n.jsx)(e.a,{href:\\"https://www.netlify.com/blog/2020/04/14/what-is-a-static-site-generator-and-3-ways-to-find-the-best-one\\",children:\\"Static Site Generation\\"}),\\" (SSG) for my website to optimize the site speed and scaling in the future.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[`Recently I\'ve been researching on reducing the effort to create a new article on my website.\\nThere were many touch points in my `,(0,n.jsx)(e.a,{href:\\"https://nextjs.org/\\",children:\\"Next.js\\"}),\\" project setup in order to:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"publish a new article\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"estimate reading time\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"update \\",(0,n.jsx)(e.a,{href:\\"/articles\\",children:\\"the list of articles\\"})]}),`\\n`,(0,n.jsx)(e.li,{children:\\"create a new RSS feed\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"update sitemap\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"what-was-the-problem\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-was-the-problem\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What Was The Problem?\\"]}),`\\n`,(0,n.jsx)(e.p,{children:`I analyzed a little more and found out the friction was in my MDX usage.\\nMy file structure looked like this:`}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`my-blog\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 public\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 data\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u2514\\\\u2500\\\\u2500 blogs.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 components\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u2514\\\\u2500\\\\u2500 Blog.tsx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 pages\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u251C\\\\u2500\\\\u2500 blogs\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u251C\\\\u2500\\\\u2500 blog-one.mdx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u251C\\\\u2500\\\\u2500 blog-two.mdx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u2514\\\\u2500\\\\u2500 blog-three.mdx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2514\\\\u2500\\\\u2500 index.tsx\\n`})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"It is the \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/using-mdx\\",children:\\"standard setup\\"}),` recommended by Next.js.\\nI was using `,(0,n.jsx)(e.a,{href:\\"https://github.com/mdx-js/mdx/tree/main/packages/loader\\",children:\\"@mdx-js/loader\\"}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/@next/mdx\\",children:\\"@next/mdx\\"}),\\" to transform MDX into pages.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Take \\",(0,n.jsx)(e.code,{children:\\"pages/blogs/blog-one.mdx\\"}),\\" for example, the content looked like this:\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"pages/blogs/blog-one.mdx\\"}),(0,n.jsx)(e.pre,{className:\\"language-jsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-jsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token imports\\",children:(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Blog\\"})}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'../../components/Blog\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" meta \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token string\\",children:[\\"\'Blog One\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\"\'\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"publishedAt\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'February 4, 2022\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"description\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"Learn how to build a Next.js blog with MDX and Contentlayer!\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"cover\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'/optimized/articles/blog-one/hero.webp\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"default\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token parameter\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" children \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Blog\\"})]}),`\\n`]})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"title\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"meta\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"description\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"meta\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"description\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"cover\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"meta\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"cover\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"publishedAt\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"meta\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"publishedAt\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"children\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"  \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Blog\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Hey\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token maybe-class-name\\",children:[\\"There\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"})]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Welcome\\"}),\\" to \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Blog\\"}),\\" one\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Let\\"}),\\"\'s learn together\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"!\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\\"blog-one.mdx\\"}),` named-exported a meta data.\\nIt was picked up by the the default component that took care of the layout and rendered the meta data.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The \\",(0,n.jsx)(e.code,{children:\\"<Blog />\\"}),\\" component looked like this:\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"components/Blog.tsx\\"}),(0,n.jsx)(e.pre,{className:\\"language-tsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-tsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"BlogProps\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'./types\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"Blog\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"BlogProps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"article\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"h1\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"h1\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"h2\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"description\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"h2\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"p\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"        \\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"publishedAt\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"p\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"img\\"]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"alt\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"src\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"cover\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"width\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"100%\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"loading\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"lazy\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"props\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"children\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"article\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"I was treating MDX files as pages.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Because the \\",(0,n.jsx)(e.code,{children:\\"meta\\"}),\\" data in each MDX file was trapped in the page, I duplicated all the meta data and aggregated them in \\",(0,n.jsx)(e.code,{children:\\"data/blogs.json\\"}),`.\\nI used it to maintain the list of articles on my website, the RSS feed, and the `,(0,n.jsx)(e.a,{href:\\"https://developers.google.com/search/docs/advanced/sitemaps/overview\\",children:\\"sitemap\\"}),\\" for SEO.\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:\\"It would be much better if I could treat the MDX files as data, and generate pages based on the data.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"This way, \\",(0,n.jsx)(e.strong,{children:\\"I could use the MDX files as data points and page content at the same time\\"}),`.\\nPublishing a new article ideally could be much more frictionless.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I came across \\",(0,n.jsx)(e.a,{href:\\"https://leerob.io/\\",children:\\"Lee Robinson\'s website\\"}),\\" and found out he was using a alpha library called \\",(0,n.jsx)(e.a,{href:\\"https://github.com/contentlayerdev/contentlayer\\",children:\\"Contentlayer\\"}),\\" to solve the problem.\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"what-is-contentlayer\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-is-contentlayer\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What is Contentlayer\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/contentlayerdev/contentlayer\\",children:\\"Contentlayer\\"}),` is an library in its early stage that turns content into data.\\nIt works roughly like this:`]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"It takes in headless CMS or local content in YAML, JSON, MDX, or Markdown as source.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"It transforms the content into TypeScript types and data files in JSON that includes the original content, meta data, and any derived data we specified.\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"It aggregates all the data in JSON and exports them as \\",(0,n.jsx)(e.a,{href:\\"https://nodejs.org/api/esm.html#modules-ecmascript-modules\\",children:\\"ESM\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"For my use case, I can use the aggregated data generated by Contentlayer to replace my previous manual process:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"I use the generated data to build the new page for an article.\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"I use the generated data to render \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles\\",children:\\"the list of articles\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.li,{children:\\"I use the generated data to create a new RSS feed.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"I use the new file structure to generate a new sitemap.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"All automatic!\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:`Contentlayer offers easy integration with Next.js.\\nI\'ll show you how in the next sections.`}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"using-mdx-as-data\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#using-mdx-as-data\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Using MDX as Data\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s first explore how to use MDX as a data point.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"MDX offers \\",(0,n.jsx)(e.a,{href:\\"https://mdxjs.com/guides/frontmatter/\\",children:\\"YAML frontmatter\\"}),` support with custom parsers.\\nYou can express the meta data like this:`]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"data/blogs/blog-one.mdx\\"}),(0,n.jsx)(e.pre,{className:\\"language-md\\",children:(0,n.jsxs)(e.code,{className:\\"language-md code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token front-matter-block\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"---\\"}),`\\n`]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token front-matter-block\\",children:(0,n.jsxs)(e.span,{className:\\"token front-matter yaml language-yaml\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token string\\",children:[\\"\'Blog One\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\"\'\\"]}),`\\n`]})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token front-matter-block\\",children:(0,n.jsxs)(e.span,{className:\\"token front-matter yaml language-yaml\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"publishedAt\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'February 4, 2022\'\\"}),`\\n`]})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token front-matter-block\\",children:(0,n.jsxs)(e.span,{className:\\"token front-matter yaml language-yaml\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"description\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Learn how to build a Next.js blog with MDX and Contentlayer!\'\\"}),`\\n`]})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token front-matter-block\\",children:[(0,n.jsxs)(e.span,{className:\\"token front-matter yaml language-yaml\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"cover\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'/optimized/articles/blog-one/hero.webp\'\\"})]}),`\\n`]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token front-matter-block\\",children:(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"---\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"Hey There\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"Welcome to Blog One\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"}),` Let\'s learn together!\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can see the meta data in YAML syntax is inside the \\",(0,n.jsx)(e.code,{children:\\"---\\"}),` block, and the body of the content follows in MDX syntax.\\nComparing to the `,(0,n.jsx)(e.a,{href:\\"#what-was-the-problem\\",children:\\"old setup\\"}),\\" where MDX file were treated as pages, the new MDX file contains only meta data and content.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The next thing we need to do is to generate the blog page that renders the meta data and the content with the layout from \\",(0,n.jsx)(e.code,{children:\\"<Blog />\\"}),\\" component.\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"integrating-contentlayer-in-nextjs\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#integrating-contentlayer-in-nextjs\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Integrating Contentlayer in Next.js\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Now that we updated the MDX files to contain only data and content, Let\'s move them into the \\",(0,n.jsx)(e.code,{children:\\"data\\"}),\\" directory.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The new file structure looks like this:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`my-blog\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 public\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 components\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u2514\\\\u2500\\\\u2500 Blog.tsx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 pages\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u251C\\\\u2500\\\\u2500 blogs\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"\\\\u2502   \\\\u2502   \\\\u2514\\\\u2500\\\\u2500 \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"slug\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`.tsx\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u2514\\\\u2500\\\\u2500 index.tsx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 data\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2514\\\\u2500\\\\u2500blogs\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`       \\\\u251C\\\\u2500\\\\u2500 blog-one.mdx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`       \\\\u251C\\\\u2500\\\\u2500 blog-two.mdx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`       \\\\u2514\\\\u2500\\\\u2500 blog-three.mdx\\n`})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Notice that we replaced the MDX files in \\",(0,n.jsx)(e.code,{children:\\"pages/blogs\\"}),\\" directory with a \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/routing/dynamic-routes\\",children:\\"dynamic route\\"}),\\" \\",(0,n.jsx)(e.code,{children:\\"[slug].tsx\\"}),`.\\nWe\'ll use this page to statically generate the blog pages `,(0,n.jsx)(e.a,{href:\\"#using-contentlayer-data-for-static-site-generation\\",children:\\"later\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"configuring-contentlayer\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#configuring-contentlayer\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Configuring Contentlayer\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Contentlayer offers seamless integration with Next.js.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"To install the dependencies:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` contentlayer next-contentlayer\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Contentlayer reads the configuration from \\",(0,n.jsx)(e.code,{children:\\"contentlayer.config.ts\\"}),`.\\nLet\'s create one.`]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"touch\\"}),` contentlayer.config.ts\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Inside the \\",(0,n.jsx)(e.code,{children:\\"contentlayer.config.ts\\"}),\\", we need to add instructions to tell Contentlayer how to parse:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\\"name\\"}),\\": namespace\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\\"filePathPattern\\"}),\\": input files\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\\"bodyType\\"}),\\": content body type for parsing\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\\"fields\\"}),\\": meta data fields\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\\"computedFields\\"}),\\": derived meta data fields\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"contentlayer.config.ts\\"}),(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" defineDocumentType\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" makeSource \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'contentlayer/source-files\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" readingTime \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'reading-time\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" Blog \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"defineDocumentType\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  name\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Blog\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  filePathPattern\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'blogs/*.mdx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  bodyType\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'mdx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  fields\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    title\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" type\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'string\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" required\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    publishedAt\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" type\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'string\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" required\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    description\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" type\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'string\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" required\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    cover\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" type\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'string\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" required\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  computedFields\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    readingTime\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      type\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'json\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token function-variable function\\",children:\\"resolve\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"doc\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"readingTime\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"doc\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"body\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"raw\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    slug\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      type\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'string\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token function-variable function\\",children:\\"resolve\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"doc\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" doc\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"_raw\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"sourceFileName\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"replace\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'.mdx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"makeSource\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  contentDirPath\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'data\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  documentTypes\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"Blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  mdx\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    remarkPlugins\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    rehypePlugins\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In the \\",(0,n.jsx)(e.code,{children:\\"computedFields\\"}),\\", we can compute data like \\",(0,n.jsx)(e.code,{children:\\"readingTime\\"}),\\" from the content body\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F929}\\"}),`.\\nI\'m using `,(0,n.jsx)(e.a,{href:\\"https://github.com/ngryman/reading-time\\",children:(0,n.jsx)(e.code,{children:\\"reading-time\\"})}),` for calculating the reading time based on word count.\\nThe `,(0,n.jsx)(e.code,{children:\\"slug\\"}),\\" field is for generating the dynamic route later in the \\",(0,n.jsx)(e.code,{children:\\"[slug].tsx\\"}),\\" page.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Under the hood, Contentlayer uses \\",(0,n.jsx)(e.a,{href:\\"https://github.com/kentcdodds/mdx-bundler\\",children:(0,n.jsx)(e.code,{children:\\"mdx-bundler\\"})}),` to parse MDX and YAML frontmatter and extract the content and data.\\nIf you\'re interested in the magic behind it, you can read more about `,(0,n.jsx)(e.a,{href:\\"https://github.com/jonschlinkert/gray-matter\\",children:(0,n.jsx)(e.code,{children:\\"gray-matter\\"})}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://github.com/remcohaszing/remark-mdx-frontmatter\\",children:(0,n.jsx)(e.code,{children:\\"remark-mdx-frontmatter\\"})}),`.\\nThese are the libraries `,(0,n.jsx)(e.code,{children:\\"mdx-bundler\\"}),\\" uses internally.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"At the end of the configuration, \\",(0,n.jsx)(e.code,{children:\\"makeSource\\"}),\\" will then look for files that match \\",(0,n.jsx)(e.code,{children:\\"blogs/*.mdx\\"}),\\" pattern under \\",(0,n.jsx)(e.code,{children:\\"data\\"}),\\" directory and generate the blog data in \\",(0,n.jsx)(e.code,{children:\\".contentlayer\\"}),\\" directory at your project root.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Lastly, wrap your Next.js configuration with \\",(0,n.jsx)(e.code,{children:\\"next-contentlayer\\"}),\\" to integrate with Next.js\'s live-reload and build process.\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"next.config.js\\"}),(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" withContentlayer \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"require\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'next-contentlayer\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"module\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"exports\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"withContentlayer\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// ... your Next.js config\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"using-contentlayer-data-for-static-site-generation\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#using-contentlayer-data-for-static-site-generation\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Using Contentlayer data for Static Site Generation\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We are ready to use the generated data from Contentlayer and build the static pages\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F929}\\"})]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"All we need to do is to use \\",(0,n.jsx)(e.code,{children:\\"allBlogs\\"}),\\" from \\",(0,n.jsx)(e.code,{children:\\".contentlayer/data\\"}),\\" to build the dynamic routes with \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/api-reference/data-fetching/get-static-paths\\",children:(0,n.jsx)(e.code,{children:\\"getStaticPaths\\"})}),\\" and use \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/api-reference/data-fetching/get-static-props\\",children:(0,n.jsx)(e.code,{children:\\"getStaticProps\\"})}),\\" to pass the blog data to the \\",(0,n.jsx)(e.code,{children:\\"[slug].tsx\\"}),\\" page.\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"pages/blogs/[slug].tsx\\"}),(0,n.jsx)(e.pre,{className:\\"language-tsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-tsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" useMDXComponent \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'next-contentlayer/hooks\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" allBlogs \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'.contentlayer/data\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Blog\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'.contentlayer/types\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token imports\\",children:(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"BlogLayout\\"})}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'../../../components/Blog\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"BlogProps\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  blog\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Blog\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"Blog\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" blog \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"BlogProps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"Component\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"useMDXComponent\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"post\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"body\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"code\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"BlogLayout\\"})]}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token spread\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token spread operator\\",children:\\"...\\"}),\\"blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Component\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"BlogLayout\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"getStaticPaths\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    paths\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" allBlogs\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" params\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" slug\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"slug\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    fallback\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"false\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"getStaticProps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" params \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" blog \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" allBlogs\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"find\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"slug\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"===\\"}),\\" params\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"slug\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" props\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" blog \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"After the project is built, you\'ll see the blogs available at \\",(0,n.jsx)(e.code,{children:\\"/blogs/blog-one\\"}),\\", \\",(0,n.jsx)(e.code,{children:\\"/blogs/blog-two\\"}),\\", and \\",(0,n.jsx)(e.code,{children:\\"/blogs/blog-three\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"bonus-remark--rehype-plugins\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#bonus-remark--rehype-plugins\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Bonus: remark & rehype Plugins\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"There are a lot more we can do with MDX by leveraging remark and rehype plugins in the \\",(0,n.jsx)(e.code,{children:\\"contentlayer.config.ts\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/remarkjs/remark\\",children:\\"remark\\"}),\\" is an awesome plugin ecosystem that transforms markdown.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/rehypejs/rehype\\",children:\\"rehype\\"}),\\" is another powerful plugin ecosystem that transforms HTML.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:`They are two separate ecosystems but we can convert remark to rehype and generate HTML markup.\\nThe transformation looks like this:`}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"MDX ----\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" remark AST ------\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" rehype AST --------\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),` HTML\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    parse            convert            stringify\\n`})]})}),`\\n`,(0,n.jsx)(e.p,{children:`Contentlayer takes care of the flow.\\nAll we need to do is adding the plugins to provide instruction for the transformations.\\nI\'m using the following plugins:`}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/remarkjs/remark-gfm\\",children:(0,n.jsx)(e.code,{children:\\"remark-gfm\\"})}),\\" to support \\",(0,n.jsx)(e.a,{href:\\"https://github.github.com/gfm/\\",children:\\"GitHub Flavored Markdown\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/rehypejs/rehype-slug\\",children:(0,n.jsx)(e.code,{children:\\"rehype-slug\\"})}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rehypejs/rehype-autolink-headings\\",children:(0,n.jsx)(e.code,{children:\\"rehype-autolink-headings\\"})}),\\" to render heading links.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/timlrx/rehype-prism-plus\\",children:(0,n.jsx)(e.code,{children:\\"rehype-prism-plus\\"})}),\\" to render syntax highlighting in code blocks.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/rockchalkwushock/rehype-code-titles\\",children:(0,n.jsx)(e.code,{children:\\"rehype-code-titles\\"})}),\\" to render code block titles.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/rehype-accessible-emojis\\",children:(0,n.jsx)(e.code,{children:\\"rehype-accessible-emojis\\"})}),\\" to provide accessibility to emojis.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"contentlayer.config.ts\\"}),(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import remarkGfm from \'remark-gfm\'\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import rehypeSlug from \'rehype-slug\'\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import rehypeAutolinkHeadings from \'rehype-autolink-headings\'\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import rehypeCodeTitles from \'rehype-code-titles\'\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import rehypePrism from \'rehype-prism-plus\'\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import { rehypeAccessibleEmojis } from \'rehype-accessible-emojis\'\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// ...\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`export default makeSource({\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` mdx: {\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line deleted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token deleted-sign deleted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    remarkPlugins: [],\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token deleted-sign deleted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    remarkPlugins: [remarkGfm],\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line deleted\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token deleted-sign deleted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    rehypePlugins: [],\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token deleted-sign deleted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    rehypePlugins: [\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      rehypeSlug,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      rehypeCodeTitles,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      rehypePrism,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      rehypeAutolinkHeadings,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      rehypeAccessibleEmojis,\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   ],\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` },\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`})\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"contentlayer-applications\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#contentlayer-applications\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Contentlayer Applications\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"There are more things we can do with the data.\\"}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"application-1-rss-feed\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#application-1-rss-feed\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Application #1: RSS Feed\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I can now write a script to generate a RSS feed base on the \\",(0,n.jsx)(e.code,{children:\\"allBlogs\\"}),\\" data!\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"scripts/rss.mjs\\"}),(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" writeFileSync \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'fs\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token constant\\",children:\\"RSS\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'rss\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" allBlogs \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'.contentlayer/data\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" feed \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"new\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"RSS\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"My Blogs\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"feed_url\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'localhost:3000/rss.xml\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"site_url\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'localhost:3000\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"allBlogs\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token parameter\\",children:\\"blog\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"title\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"description\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"description\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"url\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"localhost:3000/blogs/\\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"slug\\"}),(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"date\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" blog\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"publishedAt\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"forEach\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token parameter\\",children:\\"item\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  feed\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"item\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"item\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"writeFileSync\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'./public/rss.xml\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" feed\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"xml\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"indent\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"application-2-xml-sitemap\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#application-2-xml-sitemap\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Application #2: XML Sitemap\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[`It\'s easier to write a script for sitemap generation.\\nAll we need is the file structure in the `,(0,n.jsx)(e.code,{children:\\"data\\"}),\\" and \\",(0,n.jsx)(e.code,{children:\\"page\\"}),\\" directories.\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"scripts/sitemap.mjs\\"}),(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" writeFileSync \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'fs\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" globby \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'globby\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token imports\\",children:\\"prettier\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'prettier\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" pages \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword control-flow\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"globby\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'pages/*.tsx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'data/**/*.mdx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'!pages/_*.tsx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" urlTags \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),` pages\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token parameter\\",children:\\"file\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    file\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"replace\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'pages\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"replace\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'data/content\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"replace\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'.tsx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"replace\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'.mdx\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token parameter\\",children:\\"path\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"path \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"===\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'/index\'\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"?\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'/\'\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" path\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token parameter\\",children:\\"path\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:`\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token template-string\\",children:(0,n.jsx)(e.span,{className:\\"token string\\",children:`      <url>\\n`})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"          <loc>localhost:3000\\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"path\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:`</loc>\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token template-string\\",children:(0,n.jsx)(e.span,{className:\\"token string\\",children:`      </url>\\n`})})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"    \\"}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"join\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" sitemap \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:`\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token template-string\\",children:(0,n.jsx)(e.span,{className:\\"token string\\",children:`  <?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n`})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token template-string\\",children:(0,n.jsx)(e.span,{className:\\"token string\\",children:`  <urlset xmlns=\\"http://www.sitemaps.org/schemas/sitemap/0.9\\">\\n`})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"urlTags\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:`\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token template-string\\",children:(0,n.jsx)(e.span,{className:\\"token string\\",children:`  </urlset>\\n`})})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token string\\"}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" prettierConfig \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword control-flow\\",children:\\"await\\"}),\\" prettier\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"resolveConfig\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'./prettierrc\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" formatted \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" prettier\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"format\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"sitemap\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token spread operator\\",children:\\"...\\"}),\\"prettierConfig\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"parser\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'html\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"writeFileSync\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'public/sitemap.xml\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" formatted\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Run both scripts after building the project and automatically generate a new RSS feed and sitemap.\\"}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"package.json\\"}),(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\"scripts\\": {\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"sitemap\\": \\"node scripts/sitemap.mjs\\",\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"rss\\": \\"node scripts/rss.mjs\\",\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"postbuild\\": \\"yarn sitemap && yarn rss\\",\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` },\\n`})]})]})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Building Static sites with Next.js becomes so effortless with MDX and Contentlayer.\\"}),`\\n`,(0,n.jsx)(e.p,{children:`MDX combines with remark and rehype ecosystem enriches the possibility of building consistent pages with Markdown.\\nContentlayer makes data and content in MDX files available to consume in Next.js projects.`}),`\\n`,(0,n.jsxs)(e.p,{children:[`If you\'re exploring ways to build your own static sites, checkout the libraries mentioned earlier.\\nIt not only reduces the time to market, but also is a lot of fun to build!`,(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"unicorn face\\",children:\\"\\\\u{1F984}\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/contentlayerdev/contentlayer\\",children:\\"GitHub: Contentlayer\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/dylang/node-rss\\",children:\\"GitHub: rss\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/remarkjs/remark\\",children:\\"GitHub: remark\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/rehypejs/rehype\\",children:\\"GitHub: rehype\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/rehypejs/rehype-slug\\",children:\\"GitHub: rehype-slug\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/rehypejs/rehype-autolink-headings\\",children:\\"GitHub: rehype-autolink-headings\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/timlrx/rehype-prism-plus\\",children:\\"GitHub: rehype-prism-plus\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/rockchalkwushock/rehype-code-titles\\",children:\\"GitHub: rehype-code-titles\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/mdx-js/mdx/tree/main/packages/loader\\",children:\\"GitHub: @mdx-js/loader\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/ngryman/reading-time\\",children:\\"GitHub: reading-time\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/remarkjs/remark-gfm\\",children:\\"GitHub: remark-gfm\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/kentcdodds/mdx-bundler\\",children:\\"GitHub: mdx-bundler\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/jonschlinkert/gray-matter\\",children:\\"GitHub: gray-matter\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/remcohaszing/remark-mdx-frontmatter\\",children:\\"GitHub: remark-mdx-frontmatter\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/dylang/node-rss\\",children:\\"GitHub: rss\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/sindresorhus/globby\\",children:\\"GitHub: globby\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/@next/mdx\\",children:\\"npm: @next/mdx\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/rehype-accessible-emojis\\",children:\\"npm: rehype-accessible-emojis\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://leerob.io/\\",children:\\"Website: Lee Robinson\'s portfolio\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://mdxjs.com/\\",children:\\"Website: MDX\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/using-mdx\\",children:\\"Website: Using MDX with Next.js\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nextjs.org/\\",children:\\"Website: Next.js\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/routing/dynamic-routes\\",children:\\"Website: Next.js Dynamic Routes\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/api-reference/data-fetching/get-static-paths\\",children:\\"Website: Next.js getStaticPaths\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/api-reference/data-fetching/get-static-props\\",children:\\"Website: Next.js getStaticProps\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://mdxjs.com/guides/frontmatter/\\",children:\\"Website: Frontmatter\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/URI_fragment\\",children:\\"Website: URI Fragment\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://developers.google.com/search/docs/advanced/sitemaps/overview\\",children:\\"Website: Learn about sitemaps\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nodejs.org/api/esm.html#modules-ecmascript-modules\\",children:\\"Website: ESMAScript modules\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.github.com/gfm\\",children:\\"Website: GitHub Flavored Markdown Spec\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\\",children:\\"Website: Abstract Syntax Tree\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.netlify.com/blog/2020/04/14/what-is-a-static-site-generator-and-3-ways-to-find-the-best-one\\",children:\\"Website: What is a Static Site Generator? And 3 ways to find the best one\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://prettier.io/\\",children:\\"Website: Prettier\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" See comments on \\",(0,n.jsx)(e.a,{href:\\"https://www.reddit.com/r/learnjavascript/comments/smz0fs/building_better_nextjs_static_sites_with_mdx_and/?utm_source=share&utm_medium=web2x&context=3\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"If you find it useful, please share this article to help more people in their engineering journey.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In my previous article \\",(0,n.jsx)(e.a,{href:\\"/articles/from-frontend-developer-to-principal-software-engineer\\",children:\'\\"From Frontend Developer to Principal Software Engineer\\"\'}),\\", I shared 50+ books and online resources that helped me in my engineering journey.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\'re interested in implementing Binary Trees in Rust, my previous article \\",(0,n.jsx)(e.a,{href:\\"/articles/binary-tree-insertion-in-rust\\",children:\'\\"Binary Tree Insertion in Rust\\"\'}),` shared my struggle when I was implementing a Binary Tree.\\nIt took me some time to have a grasp on Rust\'s ownership.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\'re interested in Unicode in Rust and JavaScript, I wrote an article \\",(0,n.jsx)(e.a,{href:\\"/articles/indexing-strings-in-rust-and-typescript\\",children:\'\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"\'}),`.\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function w(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var x=w;return f(j);})();\\n;return Component;"},"_id":"articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer.mdx","_raw":{"sourceFilePath":"articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer.mdx","sourceFileName":"build-better-nextjs-static-sites-with-mdx-and-contentlayer.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer"},"type":"Article","readingTime":{"text":"11 min read","minutes":10.665,"time":639900,"words":2133},"wordCount":2135,"slug":"build-better-nextjs-static-sites-with-mdx-and-contentlayer"},{"title":"Building A Custom Google Maps Marker React Component Like Airbnb in Next.js","publishedAt":"Aug 23, 2022","description":"We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project.","cover":"/optimized/articles/custom-google-maps-marker/hero.webp","category":"React","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- ✨ We\'ll learn how to build a custom Google Maps marker using any React component.\\n- \uD83D\uDC85 We\'ll learn how to create animation and user interaction with our custom marker.\\n- \uD83D\uDE80 We\'ll discuss how to avoid compilation error during build time in Next.js.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/building-a-custom-google-maps-marker-react-component-like-airbnb-in-next-js-52fb37ccfabb)\\n- [Hacker Noon](https://hackernoon.com/building-an-airbnb-like-map-in-nextjs)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nI was curious about making [markers on Google Maps like Airbnb](https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab&refinement_paths%5B%5D=%2Fhomes&flexible_trip_lengths%5B%5D=one_week&query=San%20Francisco%2C%20CA%2C%20USA&place_id=ChIJIQBpAG2ahYAR_6128GcTUEo&date_picker_type=calendar&checkin=2022-08-27&checkout=2022-08-31&adults=2&source=structured_search_input_header&search_type=user_map_move&ne_lat=37.8053501277308&ne_lng=-122.37779937848381&sw_lat=37.77496292220189&sw_lng=-122.44955383405022&zoom=15&search_by_map=true).\\n\\n<img\\n  src=\\"/optimized/articles/custom-google-maps-marker/airbnb-map-screenshot.webp\\"\\n  alt=\\"Airbnb map screenshot\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThese markers pack much more functionalities than the default markers from Google Maps. Besides custom styling, each marker displays a dynamic pricing and [states](https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/). When you interact with them, you\'ll see custom React components rendered with data.\\n\\nI find it very fun and useful so let\'s unpack it together!\\n\\nWe\'ll be building a proof of concept to create customer markers using any React component.\\n\\n<img\\n  src=\\"/articles/custom-google-maps-marker/demo.gif\\"\\n  alt=\\"Full user interaction with custom Marker\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nLet\'s go.\\n\\n## Setting up The Project\\n\\n> The demo is [available on GitHub](https://github.com/DawChihLiou/react-google-maps-marker-demo). Feel free to fork it\uD83D\uDE80\\n\\nI integrated the Google Maps API in a [Next.js](https://vercel.com/solutions/nextjs) project by following the [official tutorial](https://developers.google.com/maps/documentation/javascript/react-map). The tutorial explains in detail how to render Google Maps and markers in React applications.\\n\\nThere are a few more integrations included in the project:\\n\\n- [RapidAPI - Priceline com Provider](https://rapidapi.com/tipsters/api/priceline-com-provider/): to fetch hotel listings as our dataset.\\n- [Tailwind CSS](https://tailwindcss.com/): to provide css styles.\\n- [Framer Motion](https://www.framer.com/motion/): to apply animations on React components.\\n\\nThe default marker from Google Maps looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/custom-google-maps-marker/googlemaps-marker.webp\\"\\n  alt=\\"Default Google Maps Markers\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Customizing Markers Using Google Maps Overlay\\n\\nGoogle Maps API offers an [OverlayView class](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView) to place DOM elements on the map. We can use the **OverlayView** to place the container of a [React Portal](https://reactjs.org/docs/portals.html) on the map and render a custom react component into the container.\\n\\nFollowing [the official tutorial to create a custom Overlay class](https://developers.google.com/maps/documentation/javascript/customoverlays), we\'ll implement the three basic methods:\\n\\n- **onAdd**: to append our portal container to the target [pane](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes).\\n- **draw**: to position the container.\\n- **onRemove**: to remove the container from the DOM.\\n\\n```ts:Overlay.ts\\nexport class Overlay extends google.maps.OverlayView {\\n  container: HTMLElement\\n  pane: keyof google.maps.MapPanes\\n  position: google.maps.LatLng | google.maps.LatLngLiteral\\n\\n  constructor(\\n    container: HTMLElement,\\n    pane: keyof google.maps.MapPanes,\\n    position: google.maps.LatLng | google.maps.LatLngLiteral\\n  ) {\\n    super()\\n    this.container = container\\n    this.pane = pane\\n    this.position = position\\n  }\\n\\n  onAdd(): void {\\n    const pane = this.getPanes()?.[this.pane]\\n    pane?.appendChild(this.container)\\n  }\\n\\n  draw(): void {\\n    const projection = this.getProjection()\\n    const point = projection.fromLatLngToDivPixel(this.position)\\n\\n    if (point === null) {\\n      return\\n    }\\n\\n    this.container.style.transform = `translate(${point.x}px, ${point.y}px)`\\n  }\\n\\n  onRemove(): void {\\n    if (this.container.parentNode !== null) {\\n      this.container.parentNode.removeChild(this.container)\\n    }\\n  }\\n}\\n```\\n\\n## Connecting Google Maps and React\\n\\nNow that we have our custom **Overlay** class, we can create a React component to:\\n\\n- create a container,\\n- instantiate **Overlay** class,\\n- add the overlay into the map instance,\\n- and create a React portal to render components in the container.\\n\\n```tsx:OverlayView.tsx\\nimport { PropsWithChildren, useEffect, useMemo } from \'react\'\\nimport { createPortal } from \'react-dom\'\\nimport { Overlay } from \'./Overlay\'\\n\\ntype OverlayProps = PropsWithChildren<{\\n  position: google.maps.LatLng | google.maps.LatLngLiteral\\n  pane?: keyof google.maps.MapPanes\\n  map: google.maps.Map\\n  zIndex?: number\\n}>\\n\\nexport default function OverlayView({\\n  position,\\n  pane = \'floatPane\',\\n  map,\\n  zIndex,\\n  children,\\n}: OverlayProps) {\\n  const container = useMemo(() => {\\n    const div = document.createElement(\'div\')\\n    div.style.position = \'absolute\'\\n    return div\\n  }, [])\\n\\n  const overlay = useMemo(() => {\\n    return new Overlay(container, pane, position)\\n  }, [container, pane, position])\\n\\n  useEffect(() => {\\n    overlay?.setMap(map)\\n    return () => overlay?.setMap(null)\\n  }, [map, overlay])\\n\\n  // to move the container to the foreground and background\\n  useEffect(() => {\\n    container.style.zIndex = `${zIndex}`\\n  }, [zIndex, container])\\n\\n  return createPortal(children, container)\\n}\\n```\\n\\nLet\'s create a marker using the **OverlayView** component and a button.\\n\\n```tsx:CustomMarker.tsx\\nimport { useMemo } from \\"react\\";\\nimport { Hotel } from \\"../../types/hotel\\";\\nimport OverlayView from \\"../OverlayView\\";\\n\\ninterface CustomMarkerProps {\\n  hotel: Hotel;\\n  map?: google.maps.Map;\\n}\\n\\nexport default function CustomMarker({\\n  hotel,\\n  map,\\n}: CustomMarkerProps) {\\n  const price = useMemo(() => {\\n    return `$ ${hotel.ratesSummary.minPrice.replace(/\\\\.(.*?\\\\d*)/g, \'\')}`\\n  }, [hotel])\\n\\n  return (\\n    <>\\n      {map && (\\n        <OverlayView\\n          position={{\\n            lat: hotel.location.latitude as number,\\n            lng: hotel.location.longitude as number,\\n          }}\\n          map={map}\\n          styles={{\\n            backgorundColor: \'DarkGray\',\\n            color: \'white\',\\n          }}\\n        >\\n          {/* use a button as the marker */}\\n          <button onClick={handleClick}>{price}</button>\\n        </OverlayView>\\n      )}\\n    </>\\n  )\\n}\\n```\\n\\n## Resolving Error in Next.js\\n\\nIf you\'ve started your dev server or tried to build the project, you might see a **Reference Error** saying **\\"google is not defined\\"**:\\n\\n<img\\n  src=\\"/optimized/articles/custom-google-maps-marker/reference-error.webp\\"\\n  alt=\\"Reference Error from Webpack\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThis is because Webpack doesn\'t recognize \\"google\\" at build time. At build time, Google Maps JavaScript API is not yet loaded so Webpack is not able to evaluate the **Overlay** class at the module level. What we can do is to wrap the class in a [factory function](https://www.patterns.dev/posts/factory-pattern/) to resolve the build error.\\n\\n```tsx:Overlay.ts\\nexport function createOverlay(\\n  container: HTMLElement,\\n  pane: keyof google.maps.MapPanes,\\n  position: google.maps.LatLng | google.maps.LatLngLiteral\\n) {\\n  class Overlay extends google.maps.OverlayView {\\n    container: HTMLElement\\n    pane: keyof google.maps.MapPanes\\n    position: google.maps.LatLng | google.maps.LatLngLiteral\\n\\n    constructor(\\n      container: HTMLElement,\\n      pane: keyof google.maps.MapPanes,\\n      position: google.maps.LatLng | google.maps.LatLngLiteral\\n    ) {\\n      super()\\n      this.container = container\\n      this.pane = pane\\n      this.position = position\\n    }\\n\\n    onAdd(): void {\\n      const pane = this.getPanes()?.[this.pane]\\n      pane?.appendChild(this.container)\\n    }\\n\\n    draw(): void {\\n      const projection = this.getProjection()\\n      const point = projection.fromLatLngToDivPixel(this.position)\\n\\n      if (point === null) {\\n        return\\n      }\\n\\n      this.container.style.transform = `translate(${point.x}px, ${point.y}px)`\\n    }\\n\\n    onRemove(): void {\\n      if (this.container.parentNode !== null) {\\n        this.container.parentNode.removeChild(this.container)\\n      }\\n    }\\n  }\\n  return new Overlay(container, pane, position)\\n}\\n```\\n\\nLet\'s refactor the **OverlayView** component accordingly:\\n\\n```diff:OverlayView.tsx\\n- import { Overlay } from \'./Overlay\'\\n+ import { createOverlay } from \'./Overlay\'\\n\\nexport default function OverlayView({\\n  position,\\n  pane = \'floatPane\',\\n  map,\\n  zIndex,\\n  children,\\n}: OverlayProps) {\\n\\n  const overlay = useMemo(() => {\\n-   return new Overlay(container, pane, position)\\n+   return createOverlay(container, pane, position)\\n  }, [container, pane, position])\\n\\n}\\n```\\n\\nNow we should be able to see our map again and our custom markers without error!\\n\\n<img\\n  src=\\"/optimized/articles/custom-google-maps-marker/custom-marker.webp\\"\\n  alt=\\"Custom Google Maps Markers built with Overlay\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Adding Animations and User Interactions\\n\\nSince our custom markers are React components, we can define the user experience and use the available tooling in the React ecosystem. Let\'s implement:\\n\\n- a soft animation to transition the marker\'s appearance,\\n- and a click event handler to toggle the button state and a card component that displays hotel details.\\n\\n```tsx:CustomMarker.tsx\\nimport { useCallback, useMemo } from \'react\'\\nimport { Hotel } from \'../../types/hotel\'\\nimport OverlayView from \'../OverlayView\'\\nimport { motion } from \'framer-motion\'\\n\\ninterface CustomMarkerProps {\\n  hotel: Hotel\\n  map?: google.maps.Map\\n  onClick: (payload: Hotel) => void\\n  highlight?: boolean\\n}\\n\\nexport default function CustomMarker({\\n  hotel,\\n  map,\\n  onClick,\\n  highlight,\\n}: CustomMarkerProps) {\\n  const price = useMemo(() => {\\n    return `$ ${hotel.ratesSummary.minPrice.replace(/\\\\.(.*?\\\\d*)/g, \'\')}`\\n  }, [hotel])\\n\\n  const handleClick = useCallback(() => {\\n    onClick(hotel)\\n  }, [onClick, hotel])\\n\\n  return (\\n    <>\\n      {map && (\\n        <OverlayView\\n          position={{\\n            lat: hotel.location.latitude as number,\\n            lng: hotel.location.longitude as number,\\n          }}\\n          map={map}\\n          // when users select it, move the marker to the foreground\\n          zIndex={highlight ? 99 : 0}\\n        >\\n          {/* appearance transition */}\\n          <motion.div\\n            initial={{ opacity: 0 }}\\n            animate={{ opacity: 1 }}\\n            exit={{ opacity: 0 }}\\n            transition={{\\n              type: \'spring\',\\n              stiffness: 400,\\n              damping: 20,\\n              delay: Math.random() * 0.3,\\n            }}\\n          >\\n            <button\\n              onClick={handleClick}\\n              // button state toggle\\n              styles={{\\n                backgorundColor: highlight ? \'white\' : \'DarkGray\',\\n                color: highlight ? \'black\' : \'white\',\\n              }}\\n            >\\n              {price}\\n            </button>\\n          </motion.div>\\n        </OverlayView>\\n      )}\\n    </>\\n  )\\n}\\n```\\n\\nThe animation looks like this:\\n\\n<img\\n  src=\\"/articles/custom-google-maps-marker/animation-demo.gif\\"\\n  alt=\\"Full user interaction with custom Marker\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe button state toggle and the card toggle are also in place:\\n\\n<img\\n  src=\\"/articles/custom-google-maps-marker/demo.gif\\"\\n  alt=\\"Full user interaction with custom Marker\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Final Thoughts\\n\\nIt looks like a lot of code to create a custom marker but the mental model is actually straightforward:\\n\\n- We render a DOM element as the container in the map through an overlay instance.\\n- In the overlay, we can position the container at the right place on the map.\\n- The container is also the destination of a React portal.\\n- When a React marker component is ready to render, we portal the component to the container in the map.\\n\\n## References\\n\\n- [Website: Adding a Map and Markers to a React Application](https://developers.google.com/maps/documentation/javascript/react-map)\\n- [Website: Google Maps JavaScript API - Markers](https://developers.google.com/maps/documentation/javascript/markers)\\n- [Website: Google Maps JavaScript API - Custom Markers](https://developers.google.com/maps/documentation/javascript/custom-markers)\\n- [Website: Google Maps JavaScript API - OverlayView class](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView)\\n- [Website: Google Maps JavaScript API - Custom Overlays](https://developers.google.com/maps/documentation/javascript/customoverlays)\\n- [Website: Google Maps JavaScript API - MapPanes interface](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes)\\n- [Website: Airbnb](https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab&refinement_paths%5B%5D=%2Fhomes&flexible_trip_lengths%5B%5D=one_week&query=San%20Francisco%2C%20CA%2C%20USA&place_id=ChIJIQBpAG2ahYAR_6128GcTUEo&date_picker_type=calendar&checkin=2022-08-27&checkout=2022-08-31&adults=2&source=structured_search_input_header&search_type=user_map_move&ne_lat=37.8053501277308&ne_lng=-122.37779937848381&sw_lat=37.77496292220189&sw_lng=-122.44955383405022&zoom=15&search_by_map=true)\\n- [Website: Designing States for Buttons & UI Interactions - Adobe XD Ideas](https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/)\\n- [Website: Framer Motion](https://www.framer.com/motion/)\\n- [Website: React Portals](https://reactjs.org/docs/portals.html)\\n- [Website: Next.js](https://vercel.com/solutions/nextjs)\\n- [Website: RapidAPI - Priceline com Provider](https://rapidapi.com/tipsters/api/priceline-com-provider/)\\n- [Website: Factory Pattern - patterns](https://www.patterns.dev/posts/factory-pattern/)\\n- [GitHub: Google Maps JavaScript API React Wrapper](https://github.com/googlemaps/react-wrapper)\\n- [GitHub: react-google-maps-marker-demo](https://github.com/DawChihLiou/react-google-maps-marker-demo)\\n\\n---\\n\\n\uD83D\uDCAC Comments on [Reddit](https://www.reddit.com/r/javascript/comments/wvnx8q/building_a_custom_google_maps_marker_react/).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Event Bus for React**](/articles/event-bus-for-react)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},o=(a,n,s,t)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let c of h(n))!N.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var y=(a,n,s)=>(s=a!=null?d(u(a)):{},o(n||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),w=a=>o(l({},\\"__esModule\\",{value:!0}),a);var r=k((M,i)=>{i.exports=_jsx_runtime});var x={};g(x,{default:()=>b,frontmatter:()=>f});var e=y(r()),f={title:\\"Building A Custom Google Maps Marker React Component Like Airbnb in Next.js\\",publishedAt:\\"Aug 23, 2022\\",description:\\"We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project.\\",cover:\\"/optimized/articles/custom-google-maps-marker/hero.webp\\",category:\\"React\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function p(a){let n=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",blockquote:\\"blockquote\\",strong:\\"strong\\",div:\\"div\\",pre:\\"pre\\",code:\\"code\\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"}),\\" We\'ll learn how to build a custom Google Maps marker using any React component.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"nail polish\\",children:\\"\\\\u{1F485}\\"}),\\" We\'ll learn how to create animation and user interaction with our custom marker.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\" We\'ll discuss how to avoid compilation error during build time in Next.js.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"This article is also available on\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://betterprogramming.pub/building-a-custom-google-maps-marker-react-component-like-airbnb-in-next-js-52fb37ccfabb\\",children:\\"Better Programming\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hackernoon.com/building-an-airbnb-like-map-in-nextjs\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"I was curious about making \\",(0,e.jsx)(n.a,{href:\\"https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab&refinement_paths%5B%5D=%2Fhomes&flexible_trip_lengths%5B%5D=one_week&query=San%20Francisco%2C%20CA%2C%20USA&place_id=ChIJIQBpAG2ahYAR_6128GcTUEo&date_picker_type=calendar&checkin=2022-08-27&checkout=2022-08-31&adults=2&source=structured_search_input_header&search_type=user_map_move&ne_lat=37.8053501277308&ne_lng=-122.37779937848381&sw_lat=37.77496292220189&sw_lng=-122.44955383405022&zoom=15&search_by_map=true\\",children:\\"markers on Google Maps like Airbnb\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/custom-google-maps-marker/airbnb-map-screenshot.webp\\",alt:\\"Airbnb map screenshot\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"These markers pack much more functionalities than the default markers from Google Maps. Besides custom styling, each marker displays a dynamic pricing and \\",(0,e.jsx)(n.a,{href:\\"https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/\\",children:\\"states\\"}),\\". When you interact with them, you\'ll see custom React components rendered with data.\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"I find it very fun and useful so let\'s unpack it together!\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"We\'ll be building a proof of concept to create customer markers using any React component.\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/articles/custom-google-maps-marker/demo.gif\\",alt:\\"Full user interaction with custom Marker\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"setting-up-the-project\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#setting-up-the-project\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Setting up The Project\\"]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsxs)(n.p,{children:[\\"The demo is \\",(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/react-google-maps-marker-demo\\",children:\\"available on GitHub\\"}),\\". Feel free to fork it\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"I integrated the Google Maps API in a \\",(0,e.jsx)(n.a,{href:\\"https://vercel.com/solutions/nextjs\\",children:\\"Next.js\\"}),\\" project by following the \\",(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/react-map\\",children:\\"official tutorial\\"}),\\". The tutorial explains in detail how to render Google Maps and markers in React applications.\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"There are a few more integrations included in the project:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://rapidapi.com/tipsters/api/priceline-com-provider/\\",children:\\"RapidAPI - Priceline com Provider\\"}),\\": to fetch hotel listings as our dataset.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://tailwindcss.com/\\",children:\\"Tailwind CSS\\"}),\\": to provide css styles.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.framer.com/motion/\\",children:\\"Framer Motion\\"}),\\": to apply animations on React components.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The default marker from Google Maps looks like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/custom-google-maps-marker/googlemaps-marker.webp\\",alt:\\"Default Google Maps Markers\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"customizing-markers-using-google-maps-overlay\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#customizing-markers-using-google-maps-overlay\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Customizing Markers Using Google Maps Overlay\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Google Maps API offers an \\",(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView\\",children:\\"OverlayView class\\"}),\\" to place DOM elements on the map. We can use the \\",(0,e.jsx)(n.strong,{children:\\"OverlayView\\"}),\\" to place the container of a \\",(0,e.jsx)(n.a,{href:\\"https://reactjs.org/docs/portals.html\\",children:\\"React Portal\\"}),\\" on the map and render a custom react component into the container.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Following \\",(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/customoverlays\\",children:\\"the official tutorial to create a custom Overlay class\\"}),\\", we\'ll implement the three basic methods:\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"onAdd\\"}),\\": to append our portal container to the target \\",(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes\\",children:\\"pane\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"draw\\"}),\\": to position the container.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"onRemove\\"}),\\": to remove the container from the DOM.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"Overlay.ts\\"}),(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"class\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Overlay\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"google\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"OverlayView \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  container\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),` HTMLElement\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),`MapPanes\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  position\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"LatLng \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),`LatLngLiteral\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"constructor\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    container\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" HTMLElement\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"MapPanes\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    position\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"LatLng \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),`LatLngLiteral\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"super\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"container \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),` container\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"pane \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),` pane\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"position \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),` position\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onAdd\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" pane \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"getPanes\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"pane\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"appendChild\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"draw\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" projection \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"getProjection\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" point \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" projection\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"fromLatLngToDivPixel\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"position\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"point \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"null\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"style\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"transform \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token template-string\\",children:[(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"translate(\\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"point\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"x\\",(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"px, \\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"point\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"y\\",(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"px)\\"}),(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onRemove\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"parentNode \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"!==\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"null\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"parentNode\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"removeChild\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"connecting-google-maps-and-react\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#connecting-google-maps-and-react\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Connecting Google Maps and React\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Now that we have our custom \\",(0,e.jsx)(n.strong,{children:\\"Overlay\\"}),\\" class, we can create a React component to:\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"create a container,\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"instantiate \\",(0,e.jsx)(n.strong,{children:\\"Overlay\\"}),\\" class,\\"]}),`\\n`,(0,e.jsx)(n.li,{children:\\"add the overlay into the map instance,\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"and create a React portal to render components in the container.\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"OverlayView.tsx\\"}),(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"PropsWithChildren\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" useEffect\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" useMemo \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'react\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" createPortal \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'react-dom\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Overlay\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'./Overlay\'\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"OverlayProps\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"PropsWithChildren\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  position\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLng\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLngLiteral\\"})}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"MapPanes\\"})}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  map\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token known-class-name class-name\\",children:\\"Map\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  zIndex\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"number\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"OverlayView\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  position\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  pane \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'floatPane\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  zIndex\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  children\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"OverlayProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" container \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" div \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token dom variable\\",children:\\"document\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"createElement\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'div\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    div\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"style\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"position\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'absolute\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),` div\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" overlay \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"new\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Overlay\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" pane\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" position\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" pane\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" position\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useEffect\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    overlay\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"setMap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" overlay\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"setMap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"null\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" overlay\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// to move the container to the foreground and background\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useEffect\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"style\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"zIndex\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token template-string\\",children:[(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"zIndex\\",(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"zIndex\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"createPortal\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"children\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s create a marker using the \\",(0,e.jsx)(n.strong,{children:\\"OverlayView\\"}),\\" component and a button.\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"CustomMarker.tsx\\"}),(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" useMemo \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"react\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Hotel\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"../../types/hotel\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token imports\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"OverlayView\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"../OverlayView\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"interface\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"CustomMarkerProps\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  hotel\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Hotel\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  map\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token known-class-name class-name\\",children:\\"Map\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"CustomMarker\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"CustomMarkerProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" price \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token template-string\\",children:[(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"$ \\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"ratesSummary\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"minPrice\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"replace\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsxs)(n.span,{className:\\"token regex\\",children:[(0,e.jsx)(n.span,{className:\\"token regex-delimiter\\",children:\\"/\\"}),(0,e.jsxs)(n.span,{className:\\"token regex-source language-regex\\",children:[(0,e.jsx)(n.span,{className:\\"token special-escape escape\\",children:\\"\\\\\\\\.\\"}),(0,e.jsx)(n.span,{className:\\"token group punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token char-set class-name\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token quantifier number\\",children:\\"*?\\"}),(0,e.jsx)(n.span,{className:\\"token char-set class-name\\",children:\\"\\\\\\\\d\\"}),(0,e.jsx)(n.span,{className:\\"token quantifier number\\",children:\\"*\\"}),(0,e.jsx)(n.span,{className:\\"token group punctuation\\",children:\\")\\"})]}),(0,e.jsx)(n.span,{className:\\"token regex-delimiter\\",children:\\"/\\"}),(0,e.jsx)(n.span,{className:\\"token regex-flags\\",children:\\"g\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"map \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"OverlayView\\"})]}),`\\n`]})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"position\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            lat\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"location\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"latitude\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"as\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"number\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            lng\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"location\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"longitude\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"as\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"number\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"map\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"styles\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            backgorundColor\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'DarkGray\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            color\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'white\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"          \\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/* use a button as the marker */\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"          \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"button\\"]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onClick\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleClick\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"price\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"button\\"]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"        \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"OverlayView\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"resolving-error-in-nextjs\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#resolving-error-in-nextjs\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Resolving Error in Next.js\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'ve started your dev server or tried to build the project, you might see a \\",(0,e.jsx)(n.strong,{children:\\"Reference Error\\"}),\\" saying \\",(0,e.jsx)(n.strong,{children:\'\\"google is not defined\\"\'}),\\":\\"]}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/custom-google-maps-marker/reference-error.webp\\",alt:\\"Reference Error from Webpack\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[`This is because Webpack doesn\'t recognize \\"google\\" at build time. At build time, Google Maps JavaScript API is not yet loaded so Webpack is not able to evaluate the `,(0,e.jsx)(n.strong,{children:\\"Overlay\\"}),\\" class at the module level. What we can do is to wrap the class in a \\",(0,e.jsx)(n.a,{href:\\"https://www.patterns.dev/posts/factory-pattern/\\",children:\\"factory function\\"}),\\" to resolve the build error.\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"Overlay.ts\\"}),(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"createOverlay\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  container\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"HTMLElement\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"MapPanes\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  position\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLng\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLngLiteral\\"})}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"class\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Overlay\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"google\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"OverlayView\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    container\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"HTMLElement\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"MapPanes\\"})}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    position\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLng\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLngLiteral\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"constructor\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      container\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"HTMLElement\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"MapPanes\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      position\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLng\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"LatLngLiteral\\"})}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"super\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"container\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),` container\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"pane\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),` pane\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"position\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),` position\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onAdd\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" pane \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"getPanes\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"pane\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      pane\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"appendChild\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"container\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"draw\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" projection \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"getProjection\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" point \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" projection\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"fromLatLngToDivPixel\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"position\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"point \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"null\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"container\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"style\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"transform\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token template-string\\",children:[(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"translate(\\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"point\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"x\\",(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"px, \\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"point\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"y\\",(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"px)\\"}),(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onRemove\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"container\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"parentNode\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"!==\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"null\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"container\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"parentNode\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"removeChild\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"this\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"container\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"new\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Overlay\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"container\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" pane\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" position\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s refactor the \\",(0,e.jsx)(n.strong,{children:\\"OverlayView\\"}),\\" component accordingly:\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"OverlayView.tsx\\"}),(0,e.jsx)(n.pre,{className:\\"language-diff\\",children:(0,e.jsxs)(n.code,{className:\\"language-diff code-highlight\\",children:[(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` import { Overlay } from \'./Overlay\'\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` import { createOverlay } from \'./Overlay\'\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`export default function OverlayView({\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` position,\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` pane = \'floatPane\',\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` map,\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` zIndex,\\n`})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token line\\"}),(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` children,\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token unchanged\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`}: OverlayProps) {\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const overlay = useMemo(() => {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token unchanged\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:`   return new Overlay(container, pane, position)\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:`   return createOverlay(container, pane, position)\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` }, [container, pane, position])\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token unchanged\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`}\\n`})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now we should be able to see our map again and our custom markers without error!\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/custom-google-maps-marker/custom-marker.webp\\",alt:\\"Custom Google Maps Markers built with Overlay\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"adding-animations-and-user-interactions\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#adding-animations-and-user-interactions\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Adding Animations and User Interactions\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Since our custom markers are React components, we can define the user experience and use the available tooling in the React ecosystem. Let\'s implement:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"a soft animation to transition the marker\'s appearance,\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"and a click event handler to toggle the button state and a card component that displays hotel details.\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"CustomMarker.tsx\\"}),(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" useCallback\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" useMemo \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'react\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Hotel\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'../../types/hotel\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token imports\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"OverlayView\\"})}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'../OverlayView\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" motion \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'framer-motion\'\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"interface\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"CustomMarkerProps\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  hotel\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Hotel\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  map\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token known-class-name class-name\\",children:\\"Map\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onClick\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Hotel\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  highlight\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"boolean\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"CustomMarker\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  onClick\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  highlight\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"CustomMarkerProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" price \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token template-string\\",children:[(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"$ \\"}),(0,e.jsxs)(n.span,{className:\\"token interpolation\\",children:[(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"ratesSummary\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"minPrice\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"replace\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsxs)(n.span,{className:\\"token regex\\",children:[(0,e.jsx)(n.span,{className:\\"token regex-delimiter\\",children:\\"/\\"}),(0,e.jsxs)(n.span,{className:\\"token regex-source language-regex\\",children:[(0,e.jsx)(n.span,{className:\\"token special-escape escape\\",children:\\"\\\\\\\\.\\"}),(0,e.jsx)(n.span,{className:\\"token group punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token char-set class-name\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token quantifier number\\",children:\\"*?\\"}),(0,e.jsx)(n.span,{className:\\"token char-set class-name\\",children:\\"\\\\\\\\d\\"}),(0,e.jsx)(n.span,{className:\\"token quantifier number\\",children:\\"*\\"}),(0,e.jsx)(n.span,{className:\\"token group punctuation\\",children:\\")\\"})]}),(0,e.jsx)(n.span,{className:\\"token regex-delimiter\\",children:\\"/\\"}),(0,e.jsx)(n.span,{className:\\"token regex-flags\\",children:\\"g\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" handleClick \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useCallback\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onClick\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"onClick\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"map \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"OverlayView\\"})]}),`\\n`]})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"position\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            lat\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"location\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"latitude\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"as\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"number\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            lng\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" hotel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"location\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"longitude\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"as\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"number\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"map\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// when users select it, move the marker to the foreground\\"}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"zIndex\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"highlight \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"99\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"          \\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/* appearance transition */\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"          \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"motion.div\\"]}),`\\n`]})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"initial\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" opacity\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"animate\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" opacity\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"exit\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" opacity\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"transition\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"              type\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'spring\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"              stiffness\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"400\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"              damping\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"20\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"              delay\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token known-class-name class-name\\",children:\\"Math\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"random\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0.3\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"          \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"            \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"button\\"]}),`\\n`]})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"              \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onClick\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleClick\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"              \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// button state toggle\\"}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"              \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"styles\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]})]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"                backgorundColor\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" highlight \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'white\'\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'DarkGray\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"                color\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" highlight \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'black\'\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'white\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[\\"              \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"              \\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"price\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"            \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"button\\"]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"          \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"motion.div\\"]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"        \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"OverlayView\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The animation looks like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/articles/custom-google-maps-marker/animation-demo.gif\\",alt:\\"Full user interaction with custom Marker\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"The button state toggle and the card toggle are also in place:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/articles/custom-google-maps-marker/demo.gif\\",alt:\\"Full user interaction with custom Marker\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"final-thoughts\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"It looks like a lot of code to create a custom marker but the mental model is actually straightforward:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"We render a DOM element as the container in the map through an overlay instance.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"In the overlay, we can position the container at the right place on the map.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"The container is also the destination of a React portal.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"When a React marker component is ready to render, we portal the component to the container in the map.\\"}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"references\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/react-map\\",children:\\"Website: Adding a Map and Markers to a React Application\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/markers\\",children:\\"Website: Google Maps JavaScript API - Markers\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/custom-markers\\",children:\\"Website: Google Maps JavaScript API - Custom Markers\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView\\",children:\\"Website: Google Maps JavaScript API - OverlayView class\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/customoverlays\\",children:\\"Website: Google Maps JavaScript API - Custom Overlays\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes\\",children:\\"Website: Google Maps JavaScript API - MapPanes interface\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab&refinement_paths%5B%5D=%2Fhomes&flexible_trip_lengths%5B%5D=one_week&query=San%20Francisco%2C%20CA%2C%20USA&place_id=ChIJIQBpAG2ahYAR_6128GcTUEo&date_picker_type=calendar&checkin=2022-08-27&checkout=2022-08-31&adults=2&source=structured_search_input_header&search_type=user_map_move&ne_lat=37.8053501277308&ne_lng=-122.37779937848381&sw_lat=37.77496292220189&sw_lng=-122.44955383405022&zoom=15&search_by_map=true\\",children:\\"Website: Airbnb\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/\\",children:\\"Website: Designing States for Buttons & UI Interactions - Adobe XD Ideas\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.framer.com/motion/\\",children:\\"Website: Framer Motion\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://reactjs.org/docs/portals.html\\",children:\\"Website: React Portals\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://vercel.com/solutions/nextjs\\",children:\\"Website: Next.js\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://rapidapi.com/tipsters/api/priceline-com-provider/\\",children:\\"Website: RapidAPI - Priceline com Provider\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.patterns.dev/posts/factory-pattern/\\",children:\\"Website: Factory Pattern - patterns\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/googlemaps/react-wrapper\\",children:\\"GitHub: Google Maps JavaScript API React Wrapper\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/react-google-maps-marker-demo\\",children:\\"GitHub: react-google-maps-marker-demo\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" Comments on \\",(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/javascript/comments/wvnx8q/building_a_custom_google_maps_marker_react/\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,e.jsx)(n.a,{href:\\"/articles/event-bus-for-react\\",children:(0,e.jsx)(n.strong,{children:\\"Event Bus for React\\"})})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var b=v;return w(x);})();\\n;return Component;"},"_id":"articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs.mdx","_raw":{"sourceFilePath":"articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs.mdx","sourceFileName":"building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"},"type":"Article","readingTime":{"text":"8 min read","minutes":7.55,"time":453000,"words":1510},"wordCount":1512,"slug":"building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"},{"title":"Deploying Like Vercel and Netlify with Cloud Run: Live, Preview, and Modern Workflow","publishedAt":"Nov 30, 2022","description":"The modern workflow that unlocks your team\'s potential to ship faster.","cover":"/optimized/articles/deploy-with-cloud-run/hero.webp","category":"Site Reliability","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- ☁️ We\'ll learn how to deploy on Google Cloud Run\\n- ✨ We\'ll learn how to design and implement a modern workflow with GitHub Actions\\n- \uD83E\uDD3F We\'ll see code snippets of real-world workflows\\n\\n---\\n\\nThis article is also available on\\n\\n- [Level Up Coding](https://medium.com/gitconnected/deploying-like-vercel-and-netlify-with-cloud-run-live-preview-and-modern-workflow-ea661e411136)\\n- [Hacker Noon](https://hackernoon.com/deploy-like-vercel-and-netlify-with-cloud-run-live-preview-and-modern-workflow)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nIf you want to learn how to deploy like [Vercel][3] or [Netlify][4] with [Google Cloud][8], this is the right place for you.\\n\\nVercel and Netlify both offer seamless transition from development to shipping your features and they make [continuous delivery][9] accessible out of the box. Today we\'ll be looking into how to design and re-create the live deployment and [Deploy Preview][3] with [Cloud Run][10] and [GitHub Actions][11].\\n\\nLet\'s go.\\n\\n## The Modern Workflow Design\\n\\nIf you are familiar with [Vercel][5] or [Netlify][6], you\'ll notice the [trunk-based development][12] principle by default. Your code changes directly go **live** when pushing your commits or merging a pull request to the _main_ branch. Whenever you work on a pull request, both platforms create **Deploy Previews** so that you can collect feedback from your reviewers and stakeholders during development. This type of workflow enables us to collaborate early, mitigate errors, and ship fast.\\n\\nTo design the workflow, we can break it down to two paths:\\n\\n- Production workflow: triggered by _push_ events in the _main_ branch.\\n- Preview workflow: triggered by _push_ and _pull_request_ events in all branches except _main_.\\n\\n<img\\n  src=\\"/optimized/articles/deploy-with-cloud-run/workflows.webp\\"\\n  alt=\\"workflows overview\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nLet\'s look into the _prod workflow_ first.\\n\\n## Production Workflow\\n\\n<img\\n  src=\\"/optimized/articles/deploy-with-cloud-run/workflows-main.webp\\"\\n  alt=\\"production workflow overview\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe production workflow does only one thing: live deployment. When a pull request merges into _main_, it triggers the workflow to deploy your production build to [Cloud Run][10].\\n\\nThe workflow looks like this:\\n\\nSet up Google Cloud\\n\\n- Authenticate to Google Cloud\\n- Setup Google [Cloud SDK][14]\\n- Authorize to push docker containers to [Artifact Registry][13]\\n\\nPush Docker Image to Artifact Registry\\n\\n- Generate image tag\\n- Build docker container\\n- push docker container to registry\\n\\nDeploy\\n\\n- Deploy to Cloud Run\\n\\n### Set up Google Cloud\\n\\n> If you don\'t have a project on Google Cloud yet, follow [this guide][19] to create one. I\'ll name my project _awesome-project_.\\n\\nTo authenticate the workflow to access Google Cloud, we can use the [_auth_][1] GitHub Action to create an access token:\\n\\n```yaml\\nenv:\\n  PROJECT_ID: \'awesome-project\'\\n  SERVICE: \'homepage\'\\n  REGION: \'us-west1\' # ☘️Low CO2\\n  REGISTRY: \'[YOUR_REGISTRY_ID]\'\\n  IMAGE_NAME: \'live\'\\n  WORKLOAD_IDENTITY_PROVIDER: \'[YOUR_WORKLOAD_PROVIDER_ID]\'\\n  SERVICE_ACCOUNT: \'[YOUR_SERVICE_ACCOUNT_ID]\'\\n\\njobs:\\n  deploy:\\n    runs-on: ubuntu-20.04\\n\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v3\\n\\n      - name: \'Authenticate to Google Cloud\'\\n        uses: \'google-github-actions/auth@v0.4.0\'\\n        id: \'auth\'\\n        with:\\n          token_format: \'access_token\'\\n          workload_identity_provider: ${{ env.WORKLOAD_IDENTITY_PROVIDER }}\\n          service_account: ${{ env.SERVICE_ACCOUNT }}\\n```\\n\\nHere we are authenticating via [Workload Identity Federation][15]. To make it work, we\'ll need\\n\\n- [a service account][16]\\n- [a workload identity provider][17]\\n- [to grand IAM roles to the Workload Identity Provider][2].\\n\\nCongratulations, you\'ve done it! It\'s the most difficult part of the workflow.\\n\\nNow we can set up Cloud SDK and authorize the workflow to be able to push Docker containers to Artifact Registry:\\n\\n```yaml\\nsteps:\\n  - name: Set up Cloud SDK\\n    uses: google-github-actions/setup-gcloud@v0\\n\\n  - name: Authorize Docker push\\n    run: gcloud auth configure-docker ${{ env.REGISTRY }}\\n```\\n\\nYou can follow [this guide][18] to set up Artifact Registry for storing Docker containers.\\n\\n### Push Docker Image to Artifact Registry\\n\\nWe are now able to push containers so let\'s dockerize your project and tag your image:\\n\\n```yaml\\nsteps:\\n  - name: Generate Image Tag\\n    id: image-tag\\n    run: |\\n      image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/$IMAGE_NAME:${GITHUB_SHA::8}\\"\\n      echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\\n\\n  - name: Build Docker Container\\n    run: |\\n      docker build -t ${{ steps.image-tag.outputs.tag }}\\n\\n  - name: Push Docker Container\\n    run: |\\n      docker push ${{ steps.image-tag.outputs.tag }}\\n```\\n\\n### Deploy\\n\\nNow you are ready to deploy to cloud run using the docker container:\\n\\n```yaml\\nsteps:\\n  - name: Deploy to Cloud Run\\n    run: |\\n      gcloud run deploy ${{ env.SERVICE }} \\\\\\n        --platform \\"managed\\"\\n        --region ${{ env.REGION }} \\\\\\n        --image ${{ steps.image-tag.outputs.tag }}\\n```\\n\\nCloud Run will assign 100% of the traffic to this deployment by default so all visitors will be directed to this revision.\\n\\nIn the Cloud Console, you\'ll find a URL to your Cloud Run deployment. It looks like this: _https://homepage-12345abcde-ez.a.run.app_. We\'ll need it later for our preview workflow.\\n\\n### The Complete Production Workflow\\n\\n```yaml:prod-ci.yaml\\nname: Production Workflow\\n\\non:\\n  push:\\n    branches:\\n      - main\\n\\nenv:\\n  PROJECT_ID: \'awesome-project\'\\n  SERVICE: \'homepage\'\\n  REGION: \'us-west1\' # ☘️Low CO2\\n  REGISTRY: \'[YOUR_REGISTRY_ID]\'\\n  IMAGE_NAME: \'live\'\\n  WORKLOAD_IDENTITY_PROVIDER: \'[YOUR_WORKLOAD_PROVIDER_ID]\'\\n  SERVICE_ACCOUNT: \'[YOUR_SERVICE_ACCOUNT_ID]\'\\n\\njobs:\\n  deploy:\\n    runs-on: ubuntu-20.04\\n\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v3\\n\\n      - name: \'Authenticate to Google Cloud\'\\n        uses: \'google-github-actions/auth@v0.4.0\'\\n        id: \'auth\'\\n        with:\\n          token_format: \'access_token\'\\n          workload_identity_provider: ${{ env.WORKLOAD_IDENTITY_PROVIDER }}\\n          service_account: ${{ env.SERVICE_ACCOUNT }}\\n\\n      - name: Set up Cloud SDK\\n        uses: google-github-actions/setup-gcloud@v0\\n\\n      - name: Authorize Docker push\\n        run: gcloud auth configure-docker ${{ env.REGISTRY }}\\n\\n      - name: Generate Image Tag\\n        id: image-tag\\n        run: |\\n          image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/$IMAGE_NAME:${GITHUB_SHA::8}\\"\\n          echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\\n\\n      - name: Build Docker Container\\n        run: |\\n          docker build -t ${{ steps.image-tag.outputs.tag }}\\n\\n      - name: Push Docker Container\\n        run: |\\n          docker push ${{ steps.image-tag.outputs.tag }}\\n\\n      - name: Deploy to Cloud Run\\n        run: |\\n          gcloud run deploy ${{ env.SERVICE }} \\\\\\n            --platform \\"managed\\"\\n            --region ${{ env.REGION }} \\\\\\n            --image ${{ steps.image-tag.outputs.tag }}\\n```\\n\\n## Preview Workflow\\n\\n<img\\n  src=\\"/optimized/articles/deploy-with-cloud-run/workflows-branch.webp\\"\\n  alt=\\"preview workflow overview\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe preview workflow is similar to production with a few modifications:\\n\\nSet up Google Cloud\\n\\n- Authenticate to Google Cloud\\n- Setup Google [Cloud SDK][14]\\n- Authorize to push docker containers to [Artifact Registry][13]\\n\\nPush Docker Image to Artifact Registry\\n\\n- **Get Task Id from Reference**\\n- Generate image tag\\n- Build docker container\\n- push docker container to registry\\n\\nDeploy\\n\\n- **Deploy revision with tag**\\n- **Comment preview URL in the pull request**\\n\\nLet\'s take a look at the differences.\\n\\n### Push Docker Image to Artifact Registry\\n\\nThe first difference is tagging the Docker image. In the production workflow, we use a constant `$IMAGE_NAME` in environment variables to tag the production image. However, for previews, we want to use an identifier that represents the pull request. We are using the first 8 characters of the branch name as the identifier:\\n\\n```yaml\\nsteps:\\n  - name: Get Task Id from Reference\\n  id: task\\n  run: |\\n    name=\\"${{ github.ref_name }}\\"\\n    lowercase=\\"${name,,}\\"\\n    echo \\"id=${lowercase:0:8}\\" >> $GITHUB_OUTPUT\\n```\\n\\nAs an example I\'ll name the branch _TASK-123-awesome-workflow_. The _task_ step will extract the task ID _task-123_ from the branch name.\\n\\n> If you are curious about the shell script syntax, check out [Shell Parameter Expansion][7].\\n\\nThe identifier is set to be in lowercase because we\'ll use it for tagging the Cloud Run revision later. The naming convention of [Cloud Run tags][20] is as follows:\\n\\n- it allows lowercase characters\\n- it allows numbers\\n- it allows \\"-\\"\\n- it has a maximum length limit of 63 characters\\n\\nNext we can use the task id to tag the image, build a container, and push to the registry:\\n\\n```yaml\\nsteps:\\n  - name: Generate Image Tag\\n    id: image-tag\\n    run: |\\n      image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/${{ steps.task.outputs.id }}:${GITHUB_SHA::8}\\"\\n      echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\\n\\n  - name: Build Docker Container\\n    run: |\\n      docker build -t ${{ steps.image-tag.outputs.tag }}\\n\\n  - name: Push Docker Container\\n    run: |\\n      docker push ${{ steps.image-tag.outputs.tag }}\\n```\\n\\n### Deploy\\n\\nNow we are ready to deploy the preview. The deployment is similar to live deployment with two differences:\\n\\n- Unlike live deployment, we want to assign 0% of the traffic to the preview revision.\\n- We want to give the deployment a different URL other than the live URL.\\n\\nWe can use _--tag_ and _--no-traffic_ parameters to achieve them:\\n\\n```yaml\\nsteps:\\n  - name: Deploy Revision with Tag\\n      run: |\\n        gcloud run deploy ${{ env.SERVICE }} \\\\\\n          --platform \\"managed\\" \\\\\\n          --region ${{ env.REGION }} \\\\\\n          --image ${{ steps.image-tag.outputs.tag }} \\\\\\n          --tag pr-${{ steps.task.outputs.id }} \\\\\\n          --no-traffic\\n```\\n\\nAfter running the step successfully, you\'ll get the preview URL like this: _https://pr-task-123---homepage-12345abcde-ez.a.run.app_.\\n\\nFinally, we can post a comment about the preview URL on the pull request:\\n\\n```yaml\\nsteps:\\n  - name: Comment Preview URL in PR\\n    uses: mshick/add-pr-comment@v2\\n    env:\\n      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n    with:\\n      message: |\\n        \uD83C\uDF7F Successfully deployed preview revision at https://pr-${{ steps.jira.outputs.id }}---homepage-12345abcde-ez.a.run.app\\n      allow-repeats: false\\n```\\n\\n### The Complete Preview Workflow\\n\\n```yaml:preview.yaml\\nname: Preview Workflow\\n\\non:\\n  push:\\n    branches-ignore:\\n      - main\\n  pull_request:\\n    branches-ignore:\\n      - main\\n  workflow_run:\\n    workflows: [\'Dev CI\']\\n    types: [completed]\\n\\nenv:\\n  PROJECT_ID: \'awesome-project\'\\n  SERVICE: \'homepage\'\\n  REGION: \'us-west1\'\\n  REGISTRY: \'[YOUR_REGISTRY_ID]\'\\n  WORKLOAD_IDENTITY_PROVIDER: \'[YOUR_WORKLOAD_PROVIDER_ID]\'\\n  SERVICE_ACCOUNT: \'[YOUR_SERVICE_ACCOUNT_ID]\'\\n\\njobs:\\n  preview:\\n    runs-on: ubuntu-20.04\\n\\n    permissions:\\n      pull-requests: \'write\'\\n\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v3\\n\\n      - name: \'Authenticate to Google Cloud\'\\n        uses: \'google-github-actions/auth@v0.4.0\'\\n        id: \'auth\'\\n        with:\\n          token_format: \'access_token\'\\n          workload_identity_provider: ${{ env.WORKLOAD_IDENTITY_PROVIDER }}\\n          service_account: ${{ env.SERVICE_ACCOUNT }}\\n\\n      - name: Set up Cloud SDK\\n        uses: google-github-actions/setup-gcloud@v0\\n\\n      - name: Authorize Docker push\\n        run: gcloud auth configure-docker ${{ env.REGISTRY }}\\n\\n      # Get task id in lowercase from branch name for docker image naming convention\\n      # More detail on base parameter expansion: https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\\n      - name: Get Task Id from Reference\\n        id: task\\n        run: |\\n          name=\\"${{ github.ref_name }}\\"\\n          lowercase=\\"${name,,}\\"\\n          echo \\"id=${lowercase:0:8}\\" >> $GITHUB_OUTPUT\\n\\n      - name: Generate Image Tag\\n        id: image-tag\\n        run: |\\n          image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/${{ steps.task.outputs.id }}:${GITHUB_SHA::8}\\"\\n          echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\\n\\n      - name: Build Docker Container\\n        run: |\\n          docker build -t ${{ steps.image-tag.outputs.tag }}\\n\\n      - name: Push Docker Container\\n        run: |\\n          docker push ${{ steps.image-tag.outputs.tag }}\\n\\n      - name: Deploy Revision with Tag\\n        run: |\\n          gcloud run deploy ${{ env.SERVICE }} \\\\\\n            --platform \\"managed\\" \\\\\\n            --region ${{ env.REGION }} \\\\\\n            --image ${{ steps.image-tag.outputs.tag }} \\\\\\n            --tag pr-${{ steps.jira.outputs.id }} \\\\\\n            --no-traffic\\n\\n      - name: Comment Preview URL in PR\\n        uses: mshick/add-pr-comment@v2\\n        env:\\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n        with:\\n          message: |\\n            \uD83C\uDF7F Successfully deployed preview revision at https://pr-${{ steps.jira.outputs.id }}---homepage-12345abcde-ez.a.run.app\\n          allow-repeats: false\\n```\\n\\n## Final Thoughts\\n\\nWe\'ve just re-created the modern workflow from Vercel and Netlify! There are a few improvements to make the workflow more robust:\\n\\n- use a short hash as the identifier to tag preview image and Cloud Run revision\\n- replace the hard coded live URL with a step output in the preview comment step\\n- add a workflow that cleans up the unused Cloud Run revisions and Docker containers\\n\\n## References\\n\\n- [GitHub: auth GitHub Action][1]\\n- [Article: Enabling keyless authentication from GitHub Actions - Google Cloud][2]\\n- [Website: Vercel Previews][3]\\n- [Website: Netlify Deploy Previews][4]\\n- [Website: Vercel][5]\\n- [Website: Netlify][6]\\n- [Document: Shell Parameter Expansion - GNU][7]\\n- [Google Cloud][8]\\n- [Article: Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery - Daw-Chih Liou][9]\\n- [Document: Cloud Run - Google Cloud][10]\\n- [Website: GitHub Actions][11]\\n- [Document: DevOps tech: Trunk-based development - Google Cloud][12]\\n- [Website: Artifact Registry - Google Cloud][13]\\n- [Website: Cloud SDK - Google Cloud][14]\\n- [Document: Workload identity federation - Google Cloud][15]\\n- [Document: Create and manage service account keys- Google Cloud][16]\\n- [Document: Configure workforce identity federation - Google Cloud][17]\\n- [Document: Store Docker container images in Artifact Registry - Google Cloud][18]\\n- [Document: Creating and managing projects - Google Cloud][19]\\n- [Document: Use tags for testing, traffic migration and rollbacks - Google Cloud][20]\\n- [GitHub: add-pr-comment][21]\\n- [Github: setup-gcloud GitHub Action][22]\\n\\n[1]: https://github.com/google-github-actions/auth\\n[2]: https://cloud.google.com/blog/products/identity-security/enabling-keyless-authentication-from-github-actions\\n[3]: https://vercel.com/features/previews\\n[4]: https://www.netlify.com/products/deploy-previews/\\n[5]: https://vercel.com/\\n[6]: https://www.netlify.com/\\n[7]: https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\\n[8]: https://cloud.google.com\\n[9]: /articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-delivery\\n[10]: https://cloud.google.com/run\\n[11]: https://github.com/features/actions\\n[12]: https://cloud.google.com/architecture/devops/devops-tech-trunk-based-development\\n[13]: https://cloud.google.com/artifact-registry\\n[14]: https://cloud.google.com/sdk\\n[15]: https://cloud.google.com/iam/docs/workload-identity-federation\\n[16]: https://cloud.google.com/iam/docs/creating-managing-service-account-keys\\n[17]: https://cloud.google.com/iam/docs/configuring-workforce-identity-federation\\n[18]: https://cloud.google.com/artifact-registry/docs/docker/store-docker-container-images\\n[19]: https://cloud.google.com/resource-manager/docs/creating-managing-projects\\n[20]: https://cloud.google.com/run/docs/rollouts-rollbacks-traffic-migration#tags\\n[21]: https://github.com/mshick/add-pr-comment\\n[22]: https://github.com/google-github-actions/setup-gcloud\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Easiest Way to Understand Rust Modules Across Multiple Files**](/articles/easiest-way-to-understand-rust-modules-across-multiple-files)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)c(a,s,{get:e[s],enumerable:!0})},t=(a,e,s,i)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let l of u(e))!k.call(a,l)&&l!==s&&c(a,l,{get:()=>e[l],enumerable:!(i=p(e,l))||i.enumerable});return a};var y=(a,e,s)=>(s=a!=null?h(m(a)):{},t(e||!a||!a.__esModule?c(s,\\"default\\",{value:a,enumerable:!0}):s,a)),f=a=>t(c({},\\"__esModule\\",{value:!0}),a);var r=N((C,o)=>{o.exports=_jsx_runtime});var b={};g(b,{default:()=>R,frontmatter:()=>w});var n=y(r()),w={title:\\"Deploying Like Vercel and Netlify with Cloud Run: Live, Preview, and Modern Workflow\\",publishedAt:\\"Nov 30, 2022\\",description:\\"The modern workflow that unlocks your team\'s potential to ship faster.\\",cover:\\"/optimized/articles/deploy-with-cloud-run/hero.webp\\",category:\\"Site Reliability\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function d(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",em:\\"em\\",h3:\\"h3\\",blockquote:\\"blockquote\\",pre:\\"pre\\",code:\\"code\\",div:\\"div\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cloud\\",children:\\"\\\\u2601\\\\uFE0F\\"}),\\" We\'ll learn how to deploy on Google Cloud Run\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"}),\\" We\'ll learn how to design and implement a modern workflow with GitHub Actions\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F93F}\\"}),\\" We\'ll see code snippets of real-world workflows\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://medium.com/gitconnected/deploying-like-vercel-and-netlify-with-cloud-run-live-preview-and-modern-workflow-ea661e411136\\",children:\\"Level Up Coding\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://hackernoon.com/deploy-like-vercel-and-netlify-with-cloud-run-live-preview-and-modern-workflow\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you want to learn how to deploy like \\",(0,n.jsx)(e.a,{href:\\"https://vercel.com/features/previews\\",children:\\"Vercel\\"}),\\" or \\",(0,n.jsx)(e.a,{href:\\"https://www.netlify.com/products/deploy-previews/\\",children:\\"Netlify\\"}),\\" with \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com\\",children:\\"Google Cloud\\"}),\\", this is the right place for you.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Vercel and Netlify both offer seamless transition from development to shipping your features and they make \\",(0,n.jsx)(e.a,{href:\\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-delivery\\",children:\\"continuous delivery\\"}),\\" accessible out of the box. Today we\'ll be looking into how to design and re-create the live deployment and \\",(0,n.jsx)(e.a,{href:\\"https://vercel.com/features/previews\\",children:\\"Deploy Preview\\"}),\\" with \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/run\\",children:\\"Cloud Run\\"}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://github.com/features/actions\\",children:\\"GitHub Actions\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"the-modern-workflow-design\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#the-modern-workflow-design\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"The Modern Workflow Design\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you are familiar with \\",(0,n.jsx)(e.a,{href:\\"https://vercel.com/\\",children:\\"Vercel\\"}),\\" or \\",(0,n.jsx)(e.a,{href:\\"https://www.netlify.com/\\",children:\\"Netlify\\"}),\\", you\'ll notice the \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/architecture/devops/devops-tech-trunk-based-development\\",children:\\"trunk-based development\\"}),\\" principle by default. Your code changes directly go \\",(0,n.jsx)(e.strong,{children:\\"live\\"}),\\" when pushing your commits or merging a pull request to the \\",(0,n.jsx)(e.em,{children:\\"main\\"}),\\" branch. Whenever you work on a pull request, both platforms create \\",(0,n.jsx)(e.strong,{children:\\"Deploy Previews\\"}),\\" so that you can collect feedback from your reviewers and stakeholders during development. This type of workflow enables us to collaborate early, mitigate errors, and ship fast.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"To design the workflow, we can break it down to two paths:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"Production workflow: triggered by \\",(0,n.jsx)(e.em,{children:\\"push\\"}),\\" events in the \\",(0,n.jsx)(e.em,{children:\\"main\\"}),\\" branch.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Preview workflow: triggered by \\",(0,n.jsx)(e.em,{children:\\"push\\"}),\\" and \\",(0,n.jsx)(e.em,{children:\\"pull_request\\"}),\\" events in all branches except \\",(0,n.jsx)(e.em,{children:\\"main\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/deploy-with-cloud-run/workflows.webp\\",alt:\\"workflows overview\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s look into the \\",(0,n.jsx)(e.em,{children:\\"prod workflow\\"}),\\" first.\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"production-workflow\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#production-workflow\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Production Workflow\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/deploy-with-cloud-run/workflows-main.webp\\",alt:\\"production workflow overview\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The production workflow does only one thing: live deployment. When a pull request merges into \\",(0,n.jsx)(e.em,{children:\\"main\\"}),\\", it triggers the workflow to deploy your production build to \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/run\\",children:\\"Cloud Run\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The workflow looks like this:\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Set up Google Cloud\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Authenticate to Google Cloud\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Setup Google \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/sdk\\",children:\\"Cloud SDK\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Authorize to push docker containers to \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry\\",children:\\"Artifact Registry\\"})]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Push Docker Image to Artifact Registry\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Generate image tag\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Build docker container\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"push docker container to registry\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Deploy\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Deploy to Cloud Run\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"set-up-google-cloud\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#set-up-google-cloud\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Set up Google Cloud\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you don\'t have a project on Google Cloud yet, follow \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/resource-manager/docs/creating-managing-projects\\",children:\\"this guide\\"}),\\" to create one. I\'ll name my project \\",(0,n.jsx)(e.em,{children:\\"awesome-project\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"To authenticate the workflow to access Google Cloud, we can use the \\",(0,n.jsx)(e.a,{href:\\"https://github.com/google-github-actions/auth\\",children:(0,n.jsx)(e.em,{children:\\"auth\\"})}),\\" GitHub Action to create an access token:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"env\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"PROJECT_ID\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'awesome-project\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"SERVICE\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'homepage\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"REGION\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'us-west1\'\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token comment\\",children:[\\"# \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"shamrock\\",children:\\"\\\\u2618\\\\uFE0F\\"}),\\"Low CO2\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"REGISTRY\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_REGISTRY_ID]\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"IMAGE_NAME\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'live\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"WORKLOAD_IDENTITY_PROVIDER\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_WORKLOAD_PROVIDER_ID]\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"SERVICE_ACCOUNT\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_SERVICE_ACCOUNT_ID]\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"jobs\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"deploy\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"runs-on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" ubuntu\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"20.04\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Checkout\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` actions/checkout@v3\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Authenticate to Google Cloud\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'google-github-actions/auth@v0.4.0\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'auth\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"token_format\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'access_token\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"workload_identity_provider\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.WORKLOAD_IDENTITY_PROVIDER \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"service_account\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.SERVICE_ACCOUNT \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here we are authenticating via \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/iam/docs/workload-identity-federation\\",children:\\"Workload Identity Federation\\"}),\\". To make it work, we\'ll need\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/iam/docs/creating-managing-service-account-keys\\",children:\\"a service account\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/iam/docs/configuring-workforce-identity-federation\\",children:\\"a workload identity provider\\"})}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/blog/products/identity-security/enabling-keyless-authentication-from-github-actions\\",children:\\"to grand IAM roles to the Workload Identity Provider\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Congratulations, you\'ve done it! It\'s the most difficult part of the workflow.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now we can set up Cloud SDK and authorize the workflow to be able to push Docker containers to Artifact Registry:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Set up Cloud SDK\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" google\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"github\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"actions/setup\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`gcloud@v0\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Authorize Docker push\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" gcloud auth configure\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"docker $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.REGISTRY \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can follow \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry/docs/docker/store-docker-container-images\\",children:\\"this guide\\"}),\\" to set up Artifact Registry for storing Docker containers.\\"]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"push-docker-image-to-artifact-registry\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#push-docker-image-to-artifact-registry\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Push Docker Image to Artifact Registry\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We are now able to push containers so let\'s dockerize your project and tag your image:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Generate Image Tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" image\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'      image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/$IMAGE_NAME:${GITHUB_SHA::8}\\"\\\\n\'})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'      echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Build Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"      docker build -t ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Push Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"      docker push ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"deploy\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#deploy\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Deploy\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now you are ready to deploy to cloud run using the docker container:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Deploy to Cloud Run\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"      gcloud run deploy ${{ env.SERVICE }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`        --platform \\"managed\\"\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"        --region ${{ env.REGION }} \\\\\\\\\\\\n\\"})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"        --image ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Cloud Run will assign 100% of the traffic to this deployment by default so all visitors will be directed to this revision.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In the Cloud Console, you\'ll find a URL to your Cloud Run deployment. It looks like this: \\",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.a,{href:\\"https://homepage-12345abcde-ez.a.run.app\\",children:\\"https://homepage-12345abcde-ez.a.run.app\\"})}),\\". We\'ll need it later for our preview workflow.\\"]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"the-complete-production-workflow\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#the-complete-production-workflow\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"The Complete Production Workflow\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"prod-ci.yaml\\"}),(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Production Workflow\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"push\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"branches\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),` main\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"env\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"PROJECT_ID\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'awesome-project\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"SERVICE\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'homepage\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"REGION\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'us-west1\'\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token comment\\",children:[\\"# \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"shamrock\\",children:\\"\\\\u2618\\\\uFE0F\\"}),\\"Low CO2\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"REGISTRY\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_REGISTRY_ID]\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"IMAGE_NAME\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'live\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"WORKLOAD_IDENTITY_PROVIDER\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_WORKLOAD_PROVIDER_ID]\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"SERVICE_ACCOUNT\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_SERVICE_ACCOUNT_ID]\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"jobs\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"deploy\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"runs-on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" ubuntu\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"20.04\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Checkout\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` actions/checkout@v3\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Authenticate to Google Cloud\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'google-github-actions/auth@v0.4.0\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'auth\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"token_format\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'access_token\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"workload_identity_provider\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.WORKLOAD_IDENTITY_PROVIDER \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"service_account\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.SERVICE_ACCOUNT \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Set up Cloud SDK\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" google\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"github\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"actions/setup\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`gcloud@v0\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Authorize Docker push\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" gcloud auth configure\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"docker $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.REGISTRY \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Generate Image Tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" image\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/$IMAGE_NAME:${GITHUB_SHA::8}\\"\\\\n\'})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Build Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          docker build -t ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Push Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          docker push ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Deploy to Cloud Run\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          gcloud run deploy ${{ env.SERVICE }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`            --platform \\"managed\\"\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"            --region ${{ env.REGION }} \\\\\\\\\\\\n\\"})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"            --image ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"preview-workflow\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#preview-workflow\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Preview Workflow\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/deploy-with-cloud-run/workflows-branch.webp\\",alt:\\"preview workflow overview\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The preview workflow is similar to production with a few modifications:\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Set up Google Cloud\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Authenticate to Google Cloud\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Setup Google \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/sdk\\",children:\\"Cloud SDK\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Authorize to push docker containers to \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry\\",children:\\"Artifact Registry\\"})]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Push Docker Image to Artifact Registry\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:\\"Get Task Id from Reference\\"})}),`\\n`,(0,n.jsx)(e.li,{children:\\"Generate image tag\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Build docker container\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"push docker container to registry\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Deploy\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:\\"Deploy revision with tag\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:\\"Comment preview URL in the pull request\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s take a look at the differences.\\"}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"push-docker-image-to-artifact-registry-1\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#push-docker-image-to-artifact-registry-1\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Push Docker Image to Artifact Registry\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The first difference is tagging the Docker image. In the production workflow, we use a constant \\",(0,n.jsx)(e.code,{children:\\"$IMAGE_NAME\\"}),\\" in environment variables to tag the production image. However, for previews, we want to use an identifier that represents the pull request. We are using the first 8 characters of the branch name as the identifier:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Get Task Id from Reference\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` task\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'    name=\\"${{ github.ref_name }}\\"\\\\n\'})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'    lowercase=\\"${name,,}\\"\\\\n\'})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'    echo \\"id=${lowercase:0:8}\\" >> $GITHUB_OUTPUT\'}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"As an example I\'ll name the branch \\",(0,n.jsx)(e.em,{children:\\"TASK-123-awesome-workflow\\"}),\\". The \\",(0,n.jsx)(e.em,{children:\\"task\\"}),\\" step will extract the task ID \\",(0,n.jsx)(e.em,{children:\\"task-123\\"}),\\" from the branch name.\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you are curious about the shell script syntax, check out \\",(0,n.jsx)(e.a,{href:\\"https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\\",children:\\"Shell Parameter Expansion\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The identifier is set to be in lowercase because we\'ll use it for tagging the Cloud Run revision later. The naming convention of \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/run/docs/rollouts-rollbacks-traffic-migration#tags\\",children:\\"Cloud Run tags\\"}),\\" is as follows:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"it allows lowercase characters\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"it allows numbers\\"}),`\\n`,(0,n.jsx)(e.li,{children:\'it allows \\"-\\"\'}),`\\n`,(0,n.jsx)(e.li,{children:\\"it has a maximum length limit of 63 characters\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Next we can use the task id to tag the image, build a container, and push to the registry:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Generate Image Tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" image\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'      image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/${{ steps.task.outputs.id }}:${GITHUB_SHA::8}\\"\\\\n\'})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'      echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Build Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"      docker build -t ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Push Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"      docker push ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"deploy-1\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#deploy-1\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Deploy\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now we are ready to deploy the preview. The deployment is similar to live deployment with two differences:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Unlike live deployment, we want to assign 0% of the traffic to the preview revision.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"We want to give the deployment a different URL other than the live URL.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We can use \\",(0,n.jsx)(e.em,{children:\\"--tag\\"}),\\" and \\",(0,n.jsx)(e.em,{children:\\"--no-traffic\\"}),\\" parameters to achieve them:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Deploy Revision with Tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"        gcloud run deploy ${{ env.SERVICE }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`          --platform \\"managed\\" \\\\\\\\\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          --region ${{ env.REGION }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          --image ${{ steps.image-tag.outputs.tag }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          --tag pr-${{ steps.task.outputs.id }} \\\\\\\\\\\\n\\"})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          --no-traffic\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"After running the step successfully, you\'ll get the preview URL like this: \\",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.a,{href:\\"https://pr-task-123---homepage-12345abcde-ez.a.run.app\\",children:\\"https://pr-task-123---homepage-12345abcde-ez.a.run.app\\"})}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Finally, we can post a comment about the preview URL on the pull request:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Comment Preview URL in PR\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" mshick/add\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"pr\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`comment@v2\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"env\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"GITHUB_TOKEN\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" secrets.GITHUB_TOKEN \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"message\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token scalar string\\",children:[\\"        \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"popcorn\\",children:\\"\\\\u{1F37F}\\"}),\\" Successfully deployed preview revision at https://pr-${{ steps.jira.outputs.id }}---homepage-12345abcde-ez.a.run.app\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"allow-repeats\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean important\\",children:\\"false\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"the-complete-preview-workflow\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#the-complete-preview-workflow\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"The Complete Preview Workflow\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"preview.yaml\\"}),(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Preview Workflow\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"push\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"branches-ignore\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),` main\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"pull_request\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"branches-ignore\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),` main\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"workflow_run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"workflows\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Dev CI\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"types\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"completed\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"env\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"PROJECT_ID\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'awesome-project\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"SERVICE\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'homepage\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"REGION\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'us-west1\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"REGISTRY\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_REGISTRY_ID]\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"WORKLOAD_IDENTITY_PROVIDER\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_WORKLOAD_PROVIDER_ID]\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"SERVICE_ACCOUNT\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'[YOUR_SERVICE_ACCOUNT_ID]\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"jobs\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"preview\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"runs-on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" ubuntu\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"20.04\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"permissions\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"pull-requests\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'write\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Checkout\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` actions/checkout@v3\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Authenticate to Google Cloud\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'google-github-actions/auth@v0.4.0\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'auth\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"token_format\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'access_token\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"workload_identity_provider\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.WORKLOAD_IDENTITY_PROVIDER \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"service_account\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.SERVICE_ACCOUNT \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Set up Cloud SDK\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" google\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"github\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"actions/setup\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`gcloud@v0\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Authorize Docker push\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" gcloud auth configure\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"docker $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" env.REGISTRY \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Get task id in lowercase from branch name for docker image naming convention\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# More detail on base parameter expansion: https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Get Task Id from Reference\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` task\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          name=\\"${{ github.ref_name }}\\"\\\\n\'})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          lowercase=\\"${name,,}\\"\\\\n\'})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          echo \\"id=${lowercase:0:8}\\" >> $GITHUB_OUTPUT\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Generate Image Tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" image\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          image_tag=\\"$REGISTRY/$PROJECT_ID/$SERVICE/${{ steps.task.outputs.id }}:${GITHUB_SHA::8}\\"\\\\n\'})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          echo \\"tag=$image_tag\\" >> $GITHUB_OUTPUT\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Build Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          docker build -t ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Push Docker Container\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          docker push ${{ steps.image-tag.outputs.tag }}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Deploy Revision with Tag\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"          gcloud run deploy ${{ env.SERVICE }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`            --platform \\"managed\\" \\\\\\\\\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"            --region ${{ env.REGION }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"            --image ${{ steps.image-tag.outputs.tag }} \\\\\\\\\\\\n\\"})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"            --tag pr-${{ steps.jira.outputs.id }} \\\\\\\\\\\\n\\"})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\\"            --no-traffic\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Comment Preview URL in PR\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" mshick/add\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"pr\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`comment@v2\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"env\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"GITHUB_TOKEN\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" secrets.GITHUB_TOKEN \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"message\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token scalar string\\",children:[\\"            \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"popcorn\\",children:\\"\\\\u{1F37F}\\"}),\\" Successfully deployed preview revision at https://pr-${{ steps.jira.outputs.id }}---homepage-12345abcde-ez.a.run.app\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"allow-repeats\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean important\\",children:\\"false\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We\'ve just re-created the modern workflow from Vercel and Netlify! There are a few improvements to make the workflow more robust:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"use a short hash as the identifier to tag preview image and Cloud Run revision\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"replace the hard coded live URL with a step output in the preview comment step\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"add a workflow that cleans up the unused Cloud Run revisions and Docker containers\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/google-github-actions/auth\\",children:\\"GitHub: auth GitHub Action\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/blog/products/identity-security/enabling-keyless-authentication-from-github-actions\\",children:\\"Article: Enabling keyless authentication from GitHub Actions - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://vercel.com/features/previews\\",children:\\"Website: Vercel Previews\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.netlify.com/products/deploy-previews/\\",children:\\"Website: Netlify Deploy Previews\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://vercel.com/\\",children:\\"Website: Vercel\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.netlify.com/\\",children:\\"Website: Netlify\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\\",children:\\"Document: Shell Parameter Expansion - GNU\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com\\",children:\\"Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-delivery\\",children:\\"Article: Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery - Daw-Chih Liou\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/run\\",children:\\"Document: Cloud Run - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/features/actions\\",children:\\"Website: GitHub Actions\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/architecture/devops/devops-tech-trunk-based-development\\",children:\\"Document: DevOps tech: Trunk-based development - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry\\",children:\\"Website: Artifact Registry - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/sdk\\",children:\\"Website: Cloud SDK - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/iam/docs/workload-identity-federation\\",children:\\"Document: Workload identity federation - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/iam/docs/creating-managing-service-account-keys\\",children:\\"Document: Create and manage service account keys- Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/iam/docs/configuring-workforce-identity-federation\\",children:\\"Document: Configure workforce identity federation - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry/docs/docker/store-docker-container-images\\",children:\\"Document: Store Docker container images in Artifact Registry - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/resource-manager/docs/creating-managing-projects\\",children:\\"Document: Creating and managing projects - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/run/docs/rollouts-rollbacks-traffic-migration#tags\\",children:\\"Document: Use tags for testing, traffic migration and rollbacks - Google Cloud\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/mshick/add-pr-comment\\",children:\\"GitHub: add-pr-comment\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/google-github-actions/setup-gcloud\\",children:\\"Github: setup-gcloud GitHub Action\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,n.jsx)(e.a,{href:\\"/articles/easiest-way-to-understand-rust-modules-across-multiple-files\\",children:(0,n.jsx)(e.strong,{children:\\"Easiest Way to Understand Rust Modules Across Multiple Files\\"})})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function v(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var R=v;return f(b);})();\\n;return Component;"},"_id":"articles/deploying-with-cloud-run-like-vercel-and-netlify.mdx","_raw":{"sourceFilePath":"articles/deploying-with-cloud-run-like-vercel-and-netlify.mdx","sourceFileName":"deploying-with-cloud-run-like-vercel-and-netlify.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/deploying-with-cloud-run-like-vercel-and-netlify"},"type":"Article","readingTime":{"text":"10 min read","minutes":9.555,"time":573300,"words":1911},"wordCount":1913,"slug":"deploying-with-cloud-run-like-vercel-and-netlify"},{"title":"Easiest Way to Understand Rust Modules Across Multiple Files","publishedAt":"Nov 17, 2022","description":"With a real-world example","cover":"/optimized/articles/rust-module/hero.webp","category":"Rust","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83D\uDCA1 Easy and simple explanation of Rust\'s modules across different files.\\n- \uD83E\uDD3F We\'ll deep dive into a real-world example to explore the module system.\\n- \uD83D\uDCC8 Tons of diagrams to help you understand.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Level Up Coding](https://levelup.gitconnected.com/easiest-way-to-understand-rust-modules-across-multiple-files-234b5018cbfd)\\n- [Hacker Noon](https://hackernoon.com/easily-understand-rust-modules-across-multiple-files-with-this-guide)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nThe module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.\\n\\nLet\'s go.\\n\\n## Rust Modules Across Files\\n\\nRust requires the developers to manually build module trees. The way to do it is by declaring modules with the **mod** keyword.\\n\\nThe module tree starts with the crate root, usually _src/lib.rs_ for a library crate or _src/main.rs_ for a binary crate. The Rust compiler will first look in the crate root for modules to compile.\\n\\nLet\'s say you want to import a module \\"a\\" in a binary crate, you can declare the module like this:\\n\\n```rust:main.rs\\nmod a;\\n\\nfn main() { /* do amazing things */ }\\n```\\n\\nThe compiler will look for the module in the _src_ directory in the following places:\\n\\nIn _src/a.rs_\\n\\n```bash\\n.\\n├── Cargo.lock\\n├── Cargo.toml\\n└── src\\n \xa0\xa0 ├── a.rs\\n \xa0\xa0 └── main.rs\\n```\\n\\nOr in _src/a/mod.rs_\\n\\n```bash\\n.\\n├── Cargo.lock\\n├── Cargo.toml\\n└── src\\n    ├── a\\n    │   └── mod.rs\\n    └── main.rs\\n```\\n\\nBy declaring **mod a** in _main.rs_, you\'ve built a module tree like this:\\n\\n<img\\n  src=\\"/optimized/articles/rust-module/tree-a.webp\\"\\n  alt=\\"Initial Rust module tree\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Rust Submodules Across Files\\n\\nWithin a module, you can create submodules to further organize your code. Let\'s say you want to declare module \\"b\\" and \\"c\\" in module \\"a\\":\\n\\n```rust:/src/a/mod.rs\\nmod b;\\nmod c;\\n```\\n\\nThe compiler will look for the submodules in _src/a_ directory:\\n\\n```bash\\n.\\n├── Cargo.lock\\n├── Cargo.toml\\n└── src\\n    ├── a\\n    │   ├── b.rs\\n    │   ├── c.rs\\n    │   └── mod.rs\\n    └── main.rs\\n```\\n\\nNow you\'ve build a tree like this:\\n\\n<img\\n  src=\\"/optimized/articles/rust-module/tree-abc.webp\\"\\n  alt=\\"Rust module tree with submodules\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Visibility with \\"pub\\"\\n\\nBy default, all the [items][3] in a module are private. They are only visible by the items in the same module.\\n\\n```rust:src/a/mod.rs\\nmod b;\\nmod c;\\n\\nfn do_a() {} // only the other functions in module a can use it\\n             // it\'s not visible to main.rs\\n```\\n\\nIn order for its parent modules to have access to the function _do_a_, we need to add the key word **pub**.\\n\\n```rust:src/a/mod.rs\\npub fn do_a() {} // now it\'s visible to main.rs\\n```\\n\\nWe can access _do_a_ using the [path qualifier _::_][5].\\n\\n```rust:src/main.rs\\nmod a;\\n\\nfn main() {\\n    a::do_a();\\n}\\n```\\n\\nWe can use the same pattern for submodules.\\n\\n```rust:src/a/b.rs\\npub fn do_b() {} // visible to module \\"a\\" and all the submodules of module \\"a\\"\\n```\\n\\nBy adding **pub** to _do_b_, the function now is accessible to module \\"a\\".\\n\\n```rust:src/a/mod.rs\\nmod b;\\nmod c;\\n\\npub fn do_a {\\n    b::do_b();\\n}\\n```\\n\\n_do_b_ is also accessible to the submodules of module \\"c\\". You can access it with either the absolute or relative path.\\n\\n```rust:src/a/c.rs\\npub fn do_c {\\n    crate::a::b::do_b(); // absolute path\\n    super::b::do_b(); // relative path\\n}\\n```\\n\\n## Re-exporting Items\\n\\nAn item of a submodule is not accessible to a non-parent module. For example, we can try to access _do_b_ in _main.rs_\\n\\n```rust:src/main.rs\\nmod:a;\\n\\nfn main() {\\n    a::b::do_b();\\n    // ^^^^ function `do_b` is private\\n}\\n```\\n\\nYou\'ll see an error message saying _do_b_ is private. That\'s because _do_b_ is only accessible within module \\"a\\" so far. To make it visible to the crate root, We need to re-export it by adding **pub** to the module \\"b\\" declaration from module \\"a\\".\\n\\n```rust:src/a/mod.rs\\npub mod b;\\n// --snip--\\n```\\n\\n## The \\"use\\" Declaration\\n\\nThe [**use**][2] declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule \\"c\\":\\n\\n```rust:src/a/c.rs\\nuse crate::a::b::do_b;\\n\\npub fn do_c {\\n    do_b();\\n}\\n```\\n\\nIt creates a local name binding to its path for _do_b_. **use** is very useful for long paths.\\n\\n## A Real World Example\\n\\nTo demonstrate the Rust\'s module system, I created a simple CLI called **affme**, short for \\"affirm me\\".\\n\\n<img\\n  src=\\"/articles/rust-module/demo.gif\\"\\n  alt=\\"affme demo\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n**affme** is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.\\n\\n> The demo is [available on GitHub][7]. Feel free to take a look at the repo and try it out✨\\n\\nThe code design is straightforward:\\n\\n<img\\n  src=\\"/optimized/articles/rust-module/program-design.webp\\"\\n  alt=\\"affme code design\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIn the \\"format\\" block,\\n\\n- It takes a user input,\\n- concatenates the input with a random affirmation and a random emoji,\\n- applies a random font color to the concatenated affirmation,\\n- and finally outputs the affirmation.\\n\\nTo showcase the module system across files, I design the module tree as following:\\n\\n<img\\n  src=\\"/optimized/articles/rust-module/module-tree.webp\\"\\n  alt=\\"affme module tree design\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nA few things worth mentioning:\\n\\n- This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.\\n- In the library crate root _src/lib.rs_, it accesses functions from the _affirmation_ and _formatter_ module.\\n- The _affirmation_ module and both of the submodules in the _formatter_ module are using the same function in the _random_ module to randomly pick an item. Because the _affirmation_ module and _formatter_ submodules are in different branches of the tree, we need to declare the _random_ module in the common ancestor of the module tree.\\n\\nIn the file system, it looks like this:\\n\\n```bash\\n.\\n├── Cargo.lock\\n├── Cargo.toml\\n├── src\\n│\xa0\xa0 ├── affirmation.rs\\n│\xa0\xa0 ├── formatter\\n│\xa0\xa0 │\xa0\xa0 ├── color.rs\\n│\xa0\xa0 │\xa0\xa0 ├── emoji.rs\\n│\xa0\xa0 │\xa0\xa0 └── mod.rs\\n│\xa0\xa0 ├── lib.rs\\n│\xa0\xa0 ├── main.rs\\n│\xa0\xa0 └── random.rs\\n└── target\\n```\\n\\nLet\'s dive into the library crate root to see how the code is structured.\\n\\n```rust:src/lib.rs\\nmod affirmation;\\nmod formatter;\\nmod random;\\n\\nuse affirmation::Affirmation;\\nuse formatter::format;\\n\\npub fn affirm(name: &str) -> String {\\n    let affirmation = Affirmation::new().random();\\n    format(affirmation, name)\\n}\\n```\\n\\nHere you can see the module declarations on the top. You can also find the _use_ declarations to create the local name binding for _Affirmation_ and _format_.\\n\\nThe random module is straightforward:\\n\\n```rust:src/random.rs\\nuse rand::Rng;\\n\\npub fn pick<\'a, T: ?Sized>(items: &[&\'a T]) -> &\'a T {\\n    let random_index: usize = rand::thread_rng().gen_range(0..items.len());\\n    items.get(random_index).unwrap()\\n}\\n```\\n\\nIt has a public _pick_ function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let\'s take a look at _affirmation_ module as an example:\\n\\n```rust:src/affirmation.rs\\nuse crate::random;\\n\\n#[derive(Debug)]\\npub struct Affirmation<\'a> {\\n    affirmations: [&\'a str; 6],\\n}\\n\\nimpl<\'a> Affirmation<\'a> {\\n    pub fn new() -> Self {\\n        let affirmations = [\\n            \\"You\'re beautiful\\",\\n            \\"You\'re awesome\\",\\n            \\"You\'re wonderful\\",\\n            \\"You\'ve got this\\",\\n            \\"You can do all things\\",\\n            \\"Go get it\\",\\n        ];\\n        Affirmation { affirmations }\\n    }\\n\\n    pub fn random(&self) -> &\'a str {\\n        random::pick(&self.affirmations)\\n    }\\n}\\n```\\n\\nYou can see the _use_ declaration for the _random_ module. The _affirmation_ module is able to access the _random_ module because the _random_ module was declared in the library crate root. I use the _pub_ keyword on the _Affirmation_ struct and its functions so that the crate root has visibility over them.\\n\\nYou can find the same coding pattern in the _emoji_ and _color_ submodule.\\n\\nTo bring it all together, let\'s take a look at the _format_ module.\\n\\n```rust:src/formatter/mod.rs\\nmod color;\\nmod emoji;\\n\\nuse color::Color;\\nuse colored::*;\\nuse emoji::Emoji;\\n\\npub fn format(affirmation: &str, name: &str) -> String {\\n    let emoji = Emoji::new();\\n    let color = Color::new();\\n\\n    let phrase = format!(\\"{}, {} {}\\", affirmation, name, emoji.random())\\n        .color(color.random())\\n        .bold()\\n        .to_string();\\n\\n    format!(\\n        \\"{}\\\\n{}\\\\n{}\\\\n{}\\\\n{}\\",\\n        \\"*\\".repeat(phrase.len() + 2).magenta(),\\n        format!(\\"*{}*\\", \\" \\".repeat(phrase.len())).magenta(),\\n        format!(\\"    ✏️  ...{}  \\", phrase,),\\n        format!(\\"*{}*\\", \\" \\".repeat(phrase.len())).magenta(),\\n        \\"*\\".repeat(phrase.len() + 2).magenta()\\n    )\\n}\\n```\\n\\nIt brings _color_ and _emoji_ submodules in scope so we can concatenate the full affirmation with random emoji and random font color.\\n\\n## Final Thoughts\\n\\nRust Modules across multiple files is a little different from other languages but once you understand **mod**, **use**, and **pub**, the module design becomes easier and intentional.\\n\\n**Rust Module Cheat Sheet**\\n\\n- A module tree starts from the crate root.\\n- Use **mod** to build your tree with modules and submodules.\\n- Use **pub** to make module items visible to the parent module.\\n- You can re-export with **pub mod** or **pub use**.\\n\\n**Special Thanks**\\n\\nThanks [Liang Chun][8] for reviewing the example code in [affme][7].\\n\\n## References\\n\\n- [Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language][1]\\n- [Book: Use declarations - The Rust Reference][2]\\n- [Book: Items - The Rust Reference][3]\\n- [Book: Modules - The Rust Reference][4]\\n- [Book: Paths - The Rust Reference][5]\\n- [Article: How to Use Rust Modules Across Different Files - Casey Falkowski][6]\\n- [GitHub: affme repository][7]\\n- [GitHub: Liang Chun\'s profile][8]\\n\\n[1]: https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html\\n[2]: https://doc.rust-lang.org/reference/items/use-declarations.html\\n[3]: https://doc.rust-lang.org/reference/items.html\\n[4]: https://doc.rust-lang.org/reference/items/modules.html\\n[5]: https://doc.rust-lang.org/reference/paths.html\\n[6]: https://spin.atomicobject.com/2022/01/24/rust-module-system/\\n[7]: https://github.com/DawChihLiou/affme\\n[8]: https://github.com/liangchunn\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery**](/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},t=(a,n,s,i)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let c of p(n))!N.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(i=m(n,c))||i.enumerable});return a};var g=(a,n,s)=>(s=a!=null?h(u(a)):{},t(n||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),b=a=>t(l({},\\"__esModule\\",{value:!0}),a);var r=k((x,o)=>{o.exports=_jsx_runtime});var T={};f(T,{default:()=>v,frontmatter:()=>y});var e=g(r()),y={title:\\"Easiest Way to Understand Rust Modules Across Multiple Files\\",publishedAt:\\"Nov 17, 2022\\",description:\\"With a real-world example\\",cover:\\"/optimized/articles/rust-module/hero.webp\\",category:\\"Rust\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function d(a){let n=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",em:\\"em\\",div:\\"div\\",pre:\\"pre\\",code:\\"code\\",blockquote:\\"blockquote\\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"light bulb\\",children:\\"\\\\u{1F4A1}\\"}),\\" Easy and simple explanation of Rust\'s modules across different files.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F93F}\\"}),\\" We\'ll deep dive into a real-world example to explore the module system.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"chart increasing\\",children:\\"\\\\u{1F4C8}\\"}),\\" Tons of diagrams to help you understand.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"This article is also available on\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://levelup.gitconnected.com/easiest-way-to-understand-rust-modules-across-multiple-files-234b5018cbfd\\",children:\\"Level Up Coding\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hackernoon.com/easily-understand-rust-modules-across-multiple-files-with-this-guide\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"The module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"rust-modules-across-files\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#rust-modules-across-files\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Rust Modules Across Files\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Rust requires the developers to manually build module trees. The way to do it is by declaring modules with the \\",(0,e.jsx)(n.strong,{children:\\"mod\\"}),\\" keyword.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The module tree starts with the crate root, usually \\",(0,e.jsx)(n.em,{children:\\"src/lib.rs\\"}),\\" for a library crate or \\",(0,e.jsx)(n.em,{children:\\"src/main.rs\\"}),\\" for a binary crate. The Rust compiler will first look in the crate root for modules to compile.\\"]}),`\\n`,(0,e.jsx)(n.p,{children:`Let\'s say you want to import a module \\"a\\" in a binary crate, you can declare the module like this:`}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"main.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"a\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"main\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"/* do amazing things */\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The compiler will look for the module in the \\",(0,e.jsx)(n.em,{children:\\"src\\"}),\\" directory in the following places:\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"In \\",(0,e.jsx)(n.em,{children:\\"src/a.rs\\"})]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-bash\\",children:(0,e.jsxs)(n.code,{className:\\"language-bash code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin class-name\\",children:\\".\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.lock\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.toml\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 src\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:` \\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 a.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:` \\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 main.rs\\n`})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Or in \\",(0,e.jsx)(n.em,{children:\\"src/a/mod.rs\\"})]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-bash\\",children:(0,e.jsxs)(n.code,{className:\\"language-bash code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin class-name\\",children:\\".\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.lock\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.toml\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 src\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u251C\\\\u2500\\\\u2500 a\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u2514\\\\u2500\\\\u2500 mod.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u2514\\\\u2500\\\\u2500 main.rs\\n`})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"By declaring \\",(0,e.jsx)(n.strong,{children:\\"mod a\\"}),\\" in \\",(0,e.jsx)(n.em,{children:\\"main.rs\\"}),\\", you\'ve built a module tree like this:\\"]}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-module/tree-a.webp\\",alt:\\"Initial Rust module tree\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"rust-submodules-across-files\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#rust-submodules-across-files\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Rust Submodules Across Files\\"]}),`\\n`,(0,e.jsx)(n.p,{children:`Within a module, you can create submodules to further organize your code. Let\'s say you want to declare module \\"b\\" and \\"c\\" in module \\"a\\":`}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"/src/a/mod.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"c\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The compiler will look for the submodules in \\",(0,e.jsx)(n.em,{children:\\"src/a\\"}),\\" directory:\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-bash\\",children:(0,e.jsxs)(n.code,{className:\\"language-bash code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin class-name\\",children:\\".\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.lock\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.toml\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 src\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u251C\\\\u2500\\\\u2500 a\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u251C\\\\u2500\\\\u2500 b.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u251C\\\\u2500\\\\u2500 c.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u2502   \\\\u2514\\\\u2500\\\\u2500 mod.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`    \\\\u2514\\\\u2500\\\\u2500 main.rs\\n`})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now you\'ve build a tree like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-module/tree-abc.webp\\",alt:\\"Rust module tree with submodules\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"visibility-with-pub\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#visibility-with-pub\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\'Visibility with \\"pub\\"\']}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"By default, all the \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/reference/items.html\\",children:\\"items\\"}),\\" in a module are private. They are only visible by the items in the same module.\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/mod.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"c\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"do_a\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// only the other functions in module a can use it\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"             \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// it\'s not visible to main.rs\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"In order for its parent modules to have access to the function \\",(0,e.jsx)(n.em,{children:\\"do_a\\"}),\\", we need to add the key word \\",(0,e.jsx)(n.strong,{children:\\"pub\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/mod.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsx)(n.code,{className:\\"language-rust code-highlight\\",children:(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"do_a\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// now it\'s visible to main.rs\\"}),`\\n`]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can access \\",(0,e.jsx)(n.em,{children:\\"do_a\\"}),\\" using the \\",(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/reference/paths.html\\",children:[\\"path qualifier \\",(0,e.jsx)(n.em,{children:\\"::\\"})]}),\\".\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/main.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"a\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"main\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"a\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"do_a\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"We can use the same pattern for submodules.\\"}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/b.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsx)(n.code,{className:\\"language-rust code-highlight\\",children:(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"do_b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\'// visible to module \\"a\\" and all the submodules of module \\"a\\"\'}),`\\n`]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"By adding \\",(0,e.jsx)(n.strong,{children:\\"pub\\"}),\\" to \\",(0,e.jsx)(n.em,{children:\\"do_b\\"}),\', the function now is accessible to module \\"a\\".\']}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/mod.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"c\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"do_a\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"b\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"do_b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.em,{children:\\"do_b\\"}),\' is also accessible to the submodules of module \\"c\\". You can access it with either the absolute or relative path.\']}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/c.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"do_c\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"crate\\"}),(0,e.jsxs)(n.span,{className:\\"token module-declaration namespace\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"a\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"b\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"do_b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// absolute path\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"super\\"}),(0,e.jsxs)(n.span,{className:\\"token module-declaration namespace\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"b\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"do_b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// relative path\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"re-exporting-items\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#re-exporting-items\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Re-exporting Items\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"An item of a submodule is not accessible to a non-parent module. For example, we can try to access \\",(0,e.jsx)(n.em,{children:\\"do_b\\"}),\\" in \\",(0,e.jsx)(n.em,{children:\\"main.rs\\"})]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/main.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\"a\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"main\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"a\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"b\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"do_b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// ^^^^ function `do_b` is private\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"You\'ll see an error message saying \\",(0,e.jsx)(n.em,{children:\\"do_b\\"}),\\" is private. That\'s because \\",(0,e.jsx)(n.em,{children:\\"do_b\\"}),\' is only accessible within module \\"a\\" so far. To make it visible to the crate root, We need to re-export it by adding \',(0,e.jsx)(n.strong,{children:\\"pub\\"}),\' to the module \\"b\\" declaration from module \\"a\\".\']}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/mod.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// --snip--\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"the-use-declaration\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-use-declaration\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\'The \\"use\\" Declaration\']}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/reference/items/use-declarations.html\\",children:(0,e.jsx)(n.strong,{children:\\"use\\"})}),\' declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule \\"c\\":\']}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/a/c.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"crate\\"}),(0,e.jsxs)(n.span,{className:\\"token module-declaration namespace\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"a\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"b\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),\\"do_b\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"do_c\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"do_b\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"It creates a local name binding to its path for \\",(0,e.jsx)(n.em,{children:\\"do_b\\"}),\\". \\",(0,e.jsx)(n.strong,{children:\\"use\\"}),\\" is very useful for long paths.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"a-real-world-example\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#a-real-world-example\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"A Real World Example\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"To demonstrate the Rust\'s module system, I created a simple CLI called \\",(0,e.jsx)(n.strong,{children:\\"affme\\"}),\', short for \\"affirm me\\".\']}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/articles/rust-module/demo.gif\\",alt:\\"affme demo\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\\"affme\\"}),\\" is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.\\"]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsxs)(n.p,{children:[\\"The demo is \\",(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/affme\\",children:\\"available on GitHub\\"}),\\". Feel free to take a look at the repo and try it out\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The code design is straightforward:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-module/program-design.webp\\",alt:\\"affme code design\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\'In the \\"format\\" block,\'}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"It takes a user input,\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"concatenates the input with a random affirmation and a random emoji,\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"applies a random font color to the concatenated affirmation,\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"and finally outputs the affirmation.\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"To showcase the module system across files, I design the module tree as following:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-module/module-tree.webp\\",alt:\\"affme module tree design\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"A few things worth mentioning:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"In the library crate root \\",(0,e.jsx)(n.em,{children:\\"src/lib.rs\\"}),\\", it accesses functions from the \\",(0,e.jsx)(n.em,{children:\\"affirmation\\"}),\\" and \\",(0,e.jsx)(n.em,{children:\\"formatter\\"}),\\" module.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"The \\",(0,e.jsx)(n.em,{children:\\"affirmation\\"}),\\" module and both of the submodules in the \\",(0,e.jsx)(n.em,{children:\\"formatter\\"}),\\" module are using the same function in the \\",(0,e.jsx)(n.em,{children:\\"random\\"}),\\" module to randomly pick an item. Because the \\",(0,e.jsx)(n.em,{children:\\"affirmation\\"}),\\" module and \\",(0,e.jsx)(n.em,{children:\\"formatter\\"}),\\" submodules are in different branches of the tree, we need to declare the \\",(0,e.jsx)(n.em,{children:\\"random\\"}),\\" module in the common ancestor of the module tree.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"In the file system, it looks like this:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-bash\\",children:(0,e.jsxs)(n.code,{className:\\"language-bash code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin class-name\\",children:\\".\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.lock\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 Cargo.toml\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 src\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 affirmation.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 formatter\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 color.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 emoji.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 mod.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 lib.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 main.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 random.rs\\n`}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 target\\n`})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s dive into the library crate root to see how the code is structured.\\"}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/lib.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"affirmation\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"formatter\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"random\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"affirmation\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Affirmation\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"formatter\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),\\"format\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"affirm\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"name\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" affirmation \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Affirmation\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"random\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"format\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"affirmation\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" name\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you can see the module declarations on the top. You can also find the \\",(0,e.jsx)(n.em,{children:\\"use\\"}),\\" declarations to create the local name binding for \\",(0,e.jsx)(n.em,{children:\\"Affirmation\\"}),\\" and \\",(0,e.jsx)(n.em,{children:\\"format\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The random module is straightforward:\\"}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/random.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"rand\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Rng\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"pick\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Sized\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"items\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"T\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" random_index\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"usize\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"rand\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"thread_rng\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"gen_range\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"..\\"}),\\"items\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    items\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"get\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"random_index\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unwrap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"It has a public \\",(0,e.jsx)(n.em,{children:\\"pick\\"}),\\" function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let\'s take a look at \\",(0,e.jsx)(n.em,{children:\\"affirmation\\"}),\\" module as an example:\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/affirmation.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"crate\\"}),(0,e.jsxs)(n.span,{className:\\"token module-declaration namespace\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"random\\"]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token attribute attr-name\\",children:\\"#[derive(Debug)]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"struct\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token type-definition class-name\\",children:\\"Affirmation\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    affirmations\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"6\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"impl\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Affirmation\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"Self\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" affirmations \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:`\\"You\'re beautiful\\"`}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:`\\"You\'re awesome\\"`}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:`\\"You\'re wonderful\\"`}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:`\\"You\'ve got this\\"`}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"You can do all things\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"Go get it\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Affirmation\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" affirmations \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"random\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token lifetime-annotation symbol\\",children:\\"\'a\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"random\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"pick\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"self\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"affirmations\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"You can see the \\",(0,e.jsx)(n.em,{children:\\"use\\"}),\\" declaration for the \\",(0,e.jsx)(n.em,{children:\\"random\\"}),\\" module. The \\",(0,e.jsx)(n.em,{children:\\"affirmation\\"}),\\" module is able to access the \\",(0,e.jsx)(n.em,{children:\\"random\\"}),\\" module because the \\",(0,e.jsx)(n.em,{children:\\"random\\"}),\\" module was declared in the library crate root. I use the \\",(0,e.jsx)(n.em,{children:\\"pub\\"}),\\" keyword on the \\",(0,e.jsx)(n.em,{children:\\"Affirmation\\"}),\\" struct and its functions so that the crate root has visibility over them.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"You can find the same coding pattern in the \\",(0,e.jsx)(n.em,{children:\\"emoji\\"}),\\" and \\",(0,e.jsx)(n.em,{children:\\"color\\"}),\\" submodule.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"To bring it all together, let\'s take a look at the \\",(0,e.jsx)(n.em,{children:\\"format\\"}),\\" module.\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"src/formatter/mod.rs\\"}),(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"color\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token module-declaration namespace\\",children:\\"emoji\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"color\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Color\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"colored\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"*\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token namespace\\",children:[\\"emoji\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Emoji\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"pub\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"format\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"affirmation\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" name\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" emoji \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Emoji\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" color \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Color\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"new\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" phrase \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"format!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"{}, {} {}\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" affirmation\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" name\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" emoji\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"random\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"color\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"color\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"random\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"bold\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"to_string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"format!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"{}\\\\\\\\n{}\\\\\\\\n{}\\\\\\\\n{}\\\\\\\\n{}\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"*\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"repeat\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"phrase\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"+\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"magenta\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"format!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"*{}*\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\" \\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"repeat\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"phrase\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"magenta\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"format!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsxs)(n.span,{className:\\"token string\\",children:[\'\\"    \',(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"pencil\\",children:\\"\\\\u270F\\\\uFE0F\\"}),\'  ...{}  \\"\']}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" phrase\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"format!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"*{}*\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\" \\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"repeat\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"phrase\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"magenta\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"*\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"repeat\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"phrase\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"+\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"magenta\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"It brings \\",(0,e.jsx)(n.em,{children:\\"color\\"}),\\" and \\",(0,e.jsx)(n.em,{children:\\"emoji\\"}),\\" submodules in scope so we can concatenate the full affirmation with random emoji and random font color.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"final-thoughts\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Rust Modules across multiple files is a little different from other languages but once you understand \\",(0,e.jsx)(n.strong,{children:\\"mod\\"}),\\", \\",(0,e.jsx)(n.strong,{children:\\"use\\"}),\\", and \\",(0,e.jsx)(n.strong,{children:\\"pub\\"}),\\", the module design becomes easier and intentional.\\"]}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\\"Rust Module Cheat Sheet\\"})}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"A module tree starts from the crate root.\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"Use \\",(0,e.jsx)(n.strong,{children:\\"mod\\"}),\\" to build your tree with modules and submodules.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"Use \\",(0,e.jsx)(n.strong,{children:\\"pub\\"}),\\" to make module items visible to the parent module.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"You can re-export with \\",(0,e.jsx)(n.strong,{children:\\"pub mod\\"}),\\" or \\",(0,e.jsx)(n.strong,{children:\\"pub use\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\\"Special Thanks\\"})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Thanks \\",(0,e.jsx)(n.a,{href:\\"https://github.com/liangchunn\\",children:\\"Liang Chun\\"}),\\" for reviewing the example code in \\",(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/affme\\",children:\\"affme\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"references\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html\\",children:\\"Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/reference/items/use-declarations.html\\",children:\\"Book: Use declarations - The Rust Reference\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/reference/items.html\\",children:\\"Book: Items - The Rust Reference\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/reference/items/modules.html\\",children:\\"Book: Modules - The Rust Reference\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/reference/paths.html\\",children:\\"Book: Paths - The Rust Reference\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://spin.atomicobject.com/2022/01/24/rust-module-system/\\",children:\\"Article: How to Use Rust Modules Across Different Files - Casey Falkowski\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/affme\\",children:\\"GitHub: affme repository\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/liangchunn\\",children:\\"GitHub: Liang Chun\'s profile\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,e.jsx)(n.a,{href:\\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery\\",children:(0,e.jsx)(n.strong,{children:\\"Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery\\"})})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(d,a)})):d(a)}var v=w;return b(T);})();\\n;return Component;"},"_id":"articles/easiest-way-to-understand-rust-modules-across-multiple-files.mdx","_raw":{"sourceFilePath":"articles/easiest-way-to-understand-rust-modules-across-multiple-files.mdx","sourceFileName":"easiest-way-to-understand-rust-modules-across-multiple-files.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/easiest-way-to-understand-rust-modules-across-multiple-files"},"type":"Article","readingTime":{"text":"8 min read","minutes":7.86,"time":471600,"words":1572},"wordCount":1572,"slug":"easiest-way-to-understand-rust-modules-across-multiple-files"},{"title":"Event Bus for React","publishedAt":"Aug 2, 2022","description":"Event Bus is an interesting design pattern to build a lightweight event system. We will discover its use cases in React and build a type-safe Event Bus from scratch with TypeScript.","cover":"/optimized/articles/react-event-bus/hero.webp","category":"React","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83D\uDE8C We\'ll write a lightweight Event Bus from scratch in just 60 lines!\\n- \uD83C\uDF31 We\'ll learn the use case to best utilize Event Bus in React.\\n- \uD83C\uDFCB️‍♀️ We\'ll apply Event Bus in a demo with Google Maps API.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/how-to-use-event-bus-in-react-architecture-f90485477647)\\n- [Hacker Noon](https://hackernoon.com/writing-an-event-bus-for-react)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nI recently came across an interesting use case of Event Bus at work. It\'s a very lean module to organize logging for analytics in a global-scale web application. It creates great clarity in a large code base so I want to share with you my case study of this useful design pattern.\\n\\nLet\'s go.\\n\\n## What Is An Event Bus?\\n\\nAn Event Bus is a design pattern that allows PubSub-style communication between components while the components remain loosely coupled.\\n\\nA component can send a message to an Event Bus without knowing where the message is sent to. On the other hand, a component can listen to a message on an Event Bus and decide what to do with the message without knowing where the message comes from. With this design, independent components can communicate without knowing each other.\\n\\nThe visualization looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/react-event-bus/bus.webp\\"\\n  alt=\\"Event Bus illustration\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n- Event: The message being sent and received on an Event Bus.\\n- Publisher: The sender that **emits** an event.\\n- Subscriber: The receiver that **listens** to an event.\\n\\nLet\'s take a closer look at Event Bus.\\n\\n## Building An Event Bus from Scratch\\n\\nInspired by [Vue\'s legacy Events API](https://v3-migration.vuejs.org/breaking-changes/events-api.html), we\'ll implement the following APIs for our Event Bus:\\n\\n```ts\\ntype EventHandler = (payload: any) => void\\n\\ninterface EventBus {\\n  on(key: string, handler: EventHandler): () => void\\n  off(key: string, handler: EventHandler): void\\n  emit(key: string, ...payload: Parameters<EventHandler>): void\\n  once(key: string, handler: EventHandler): void\\n}\\n```\\n\\n- **on**: for a subscriber to listen (subscribe) to an event and register its event handler.\\n- **off**: for a subscriber to remove (unsubscribe) an event and its event handler.\\n- **once**: for a subscriber to listen to an event only once.\\n- **emit**: for a publisher to send an event to the event bus.\\n\\nNow, the data structure for our Event Bus should be capable of two things:\\n\\n- For publishers: to be able to fire the registered event handlers associated with the event key when **emit** is called.\\n- For subscribers: to be able to add or remove event handlers when **on**, **once**, or **off** is called\\n\\nWe can use a key-value structure for it:\\n\\n```ts\\ntype Bus = Record<string, EventHandler[]>\\n```\\n\\nTo implement the **on** method, all we need to do is to add the event key to the bus and append the event handler to the handler array. We also want to return an unsubscribe function to remove the event handler.\\n\\n```ts\\nexport function eventbus(config?: {\\n  // error handler for later\\n  onError: (...params: any[]) => void\\n}): EventBus {\\n  const bus: Bus = {}\\n\\n  const on: EventBus[\'on\'] = (key, handler) => {\\n    if (bus[key] === undefined) {\\n      bus[key] = []\\n    }\\n    bus[key]?.push(handler)\\n\\n    // unsubscribe function\\n    return () => {\\n      off(key, handler)\\n    }\\n  }\\n\\n  return { on }\\n}\\n```\\n\\nTo implement **off**, we can simply remove the event handler from the bus.\\n\\n```ts\\nconst off: EventBus[\'off\'] = (key, handler) => {\\n  const index = bus[key]?.indexOf(handler) ?? -1\\n  bus[key]?.splice(index >>> 0, 1)\\n}\\n```\\n\\nWhen **emit** is called, what we want to do is to fire all the event handlers that associate with the event. We\'ll add error handling here to make sure all the event handlers will be fired despite errors.\\n\\n```ts\\nconst emit: EventBus[\'emit\'] = (key, payload) => {\\n  bus[key]?.forEach((fn) => {\\n    try {\\n      fn(payload)\\n    } catch (e) {\\n      config?.onError(e)\\n    }\\n  })\\n}\\n```\\n\\nSince **once** will only listen to an event exactly once, we can think of it as a method that registers a handler that deregisters itself after firing. One way to do it is to create a higher order function **handleOnce**:\\n\\n```ts\\nconst once: EventBus[\'once\'] = (key, handler) => {\\n  const handleOnce = (payload: Parameters<typeof handler>) => {\\n    handler(payload)\\n    off(key, handleOnce as typeof handler)\\n  }\\n\\n  on(key, handleOnce as typeof handler)\\n}\\n```\\n\\nNow we have all the methods in our Event Bus!\\n\\n### Improve TypeScript Typing\\n\\nThe current typing for the Event Bus is quite open ended. The event key could be any string and the event handler could be any function. To make it safer to use, we can add type checking to add the event key and handler association to the **EventBus**.\\n\\n```ts\\ntype EventKey = string | symbol\\ntype EventHandler<T = any> = (payload: T) => void\\ntype EventMap = Record<EventKey, EventHandler>\\n\\ninterface EventBus<T extends EventMap> {\\n  on<Key extends keyof T>(key: Key, handler: T[Key]): () => void\\n  off<Key extends keyof T>(key: Key, handler: T[Key]): void\\n  emit<Key extends keyof T>(key: Key, ...payload: Parameters<T[Key]>): void\\n  once<Key extends keyof T>(key: Key, handler: T[Key]): void\\n}\\n```\\n\\n```diff\\n- type Bus = Record<string, EventHandler[]>\\n+ type Bus<E> = Record<keyof E, E[keyof E][]>\\n\\n\\n- export function eventbus(config?: {\\n+ export function eventbus<E extends EventMap>(config?: {\\n  onError: (...params: any[]) => void\\n- }): EventBus {\\n+ }): EventBus<E> {\\n- const bus: Bus = {}\\n+ const bus: Partial<Bus<E>> = {}\\n\\n- const on: EventBus[\'on\'] = (key, handler) => {\\n+ const on: EventBus<E>[\'on\'] = (key, handler) => {\\n\\n- const off: EventBus[\'off\'] = (key, handler) => {\\n+ const off: EventBus<E>[\'off\'] = (key, handler) => {\\n\\n- const emit: EventBus[\'emit\'] = (key, payload) => {\\n+ const emit: EventBus<E>[\'emit\'] = (key, payload) => {\\n\\n- const once: EventBus[\'once\'] = (key, handler) => {\\n+ const once: EventBus<E>[\'once\'] = (key, handler) => {\\n\\n  return { on, off, once, emit }\\n}\\n```\\n\\nNow we are instructing TypeScript that the **key** has to be one of the **keyof T** and the handler should have the corresponding handler type. For example:\\n\\n```ts\\ninterface MyBus {\\n  \'on-event-1\': (payload: { data: string }) => void\\n}\\n\\nconst myBus = eventbus<MyBus>()\\n```\\n\\nYou should be able to see a clear type definition when developing.\\n\\n<img\\n  src=\\"/optimized/articles/react-event-bus/type-checking.webp\\"\\n  alt=\\"Typing screenshot\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Use The Event Bus in React\\n\\nI created a [Remix](https://remix.run) application to demonstrate how to use the Event Bus we just built.\\n\\n<img\\n  src=\\"/articles/react-event-bus/demo.gif\\"\\n  alt=\\"Typing screenshot\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n> You can find the [GitHub repository for the demo here](https://github.com/DawChihLiou/eventbus-demo).\\n\\nThe demo showcases how to organize logging with the Event Bus in an isomorphic React application. I picked three events to log:\\n\\n- **onMapIdle**: the event happens when the map finishes instantiating or a user finishes dragging or zooming the map.\\n- **onMapClick**: the event happens when a user clicks on the map.\\n- **onMarkerClick**: the event happens when a user clicks on a map marker.\\n\\nLet\'s create two **event channels**. One for the map, and one for the marker.\\n\\n```ts:app/eventChannels/map.ts\\nimport { eventbus } from \'eventbus\'\\n\\nexport const mapEventChannel = eventbus<{\\n  onMapIdle: () => void\\n  onMapClick: (payload: google.maps.MapMouseEvent) => void\\n}>()\\n```\\n\\n```ts:app/eventChannels/marker.ts\\nimport { eventbus } from \'eventbus\'\\nimport type { MarkerData } from \'~/data/markers\'\\n\\nexport const markerEventChannel = eventbus<{\\n  onMarkerClick: (payload: MarkerData) => void\\n}>()\\n```\\n\\nThe reason to separate event channels is to create a clear separation of concerns. This pattern can grow horizontally when your application grows.\\n\\nNow, let\'s use the event channels in React components.\\n\\n```tsx:app/routes/index.tsx\\nimport { markers } from \'~/data/marker\'\\nimport { logUserInteraction } from \'~/utils/logger\'\\nimport { mapEventChannel } from \'~/eventChannels/map\'\\nimport { markerEventChannel } from \'~/eventChannels/marker\'\\n\\nexport async function loader() {\\n  return json({\\n    GOOGLE_MAPS_API_KEY: process.env.GOOGLE_MAPS_API_KEY,\\n  })\\n}\\n\\nexport default function Index() {\\n  const data = useLoaderData()\\n  const portal = useRef<HTMLDivElement>(null)\\n  const [selectedMarker, setSelectedMarker] = useState<MarkerData>()\\n\\n  useEffect(() => {\\n    // subscribe to events when mounting\\n    const unsubscribeOnMapIdle = mapEventChannel.on(\'onMapIdle\', () => {\\n      logUserInteraction(\'on map idle.\')\\n    })\\n    const unsubscribeOnMapClick = mapEventChannel.on(\\n      \'onMapClick\',\\n      (payload) => {\\n        logUserInteraction(\'on map click.\', payload)\\n      }\\n    )\\n    const unsubscribeOnMarkerClick = markerEventChannel.on(\\n      \'onMarkerClick\',\\n      (payload) => {\\n        logUserInteraction(\'on marker click.\', payload)\\n      }\\n    )\\n\\n    // unsubscribe events when unmounting\\n    return () => {\\n      unsubscribeOnMapIdle()\\n      unsubscribeOnMapClick()\\n      unsubscribeOnMarkerClick()\\n    }\\n  }, [])\\n\\n  const onMapIdle = (map: google.maps.Map) => {\\n    mapEventChannel.emit(\'onMapIdle\')\\n\\n    setZoom(map.getZoom()!)\\n    const nextCenter = map.getCenter()\\n    if (nextCenter) {\\n      setCenter(nextCenter.toJSON())\\n    }\\n  }\\n\\n  const onMapClick = (e: google.maps.MapMouseEvent) => {\\n    mapEventChannel.emit(\'onMapClick\', e)\\n  }\\n\\n  const onMarkerClick = (marker: MarkerData) => {\\n    markerEventChannel.emit(\'onMarkerClick\', marker)\\n    setSelectedMarker(marker)\\n  }\\n\\n  return (\\n    <>\\n      <GoogleMap\\n        apiKey={data.GOOGLE_MAPS_API_KEY}\\n        markers={markers}\\n        onClick={onMapClick}\\n        onIdle={onMapIdle}\\n        onMarkerClick={onMarkerClick}\\n      />\\n\\n      <Portal container={portal.current}>\\n        {selectedMarker && <Card {...selectedMarker} />}\\n      </Portal>\\n\\n      <div ref={portal} />\\n    </>\\n  )\\n}\\n```\\n\\nWhat we did was to subscribe to the events in the **Index** component and emit the events when the map and markers are interacted. Moreover, By subscribing and unsubscribing with the component\'s lifecycle, we are able to register only the necessary event handlers at the given moment of the user journey.\\n\\n## Final Thoughts\\n\\nIf you are looking for an Event Bus library, there are a [couple of choices recommended by Vue.js](https://v3-migration.vuejs.org/breaking-changes/events-api.html#event-bus):\\n\\n- [Mitt](https://github.com/developit/mitt)\\n- [tiny-emitter](https://github.com/scottcorgan/tiny-emitter)\\n\\nThere\'s also an interesting [discussion on Reddit about using Redux as an Event Bus](https://www.reddit.com/r/javascript/comments/qrpvsq/askjs_thoughts_on_using_redux_actions_as_an_event/). One of the Redux maintainers suggested a few Redux based tools to handle events:\\n\\n- [redux-toolkit\'s new Listener Middleware](https://github.com/reduxjs/redux-toolkit/releases/tag/v1.8.0)\\n- [redux-observable](https://github.com/redux-observable/redux-observable/)\\n- [Redux-Saga](https://github.com/redux-saga/redux-saga)\\n\\n## References\\n\\n- [GitHub: Mitt](https://github.com/developit/mitt)\\n- [GitHub: tiny-emitter](https://github.com/scottcorgan/tiny-emitter)\\n- [GitHub: redux-observable](https://github.com/redux-observable/redux-observable/)\\n- [GitHub: Redux-Saga](https://github.com/redux-saga/redux-saga)\\n- [GitHub: eventbus-demo](https://github.com/DawChihLiou/eventbus-demo)\\n- [Documentation: Vue 3 Migration Guide - Events API](https://v3-migration.vuejs.org/breaking-changes/events-api.html)\\n- [Documentation: redux-toolkit\'s new Listener Middleware](https://github.com/reduxjs/redux-toolkit/releases/tag/v1.8.0)\\n- [Documentation: Remix](https://remix.run)\\n\\n---\\n\\n\uD83D\uDCAC Comments on [Reddit](https://www.reddit.com/r/javascript/comments/wed4qc/event_bus_for_react/).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Stress Testing Concurrent Features in React 18: A Case Study of startTransition & 3D Rendering**](/articles/stress-testing-concurrent-features-in-react-18)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let c of m(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=h(n,c))||t.enumerable});return a};var y=(a,n,s)=>(s=a!=null?p(u(a)):{},i(n||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),f=a=>i(l({},\\"__esModule\\",{value:!0}),a);var r=N((M,o)=>{o.exports=_jsx_runtime});var x={};g(x,{default:()=>b,frontmatter:()=>v});var e=y(r()),v={title:\\"Event Bus for React\\",publishedAt:\\"Aug 2, 2022\\",description:\\"Event Bus is an interesting design pattern to build a lightweight event system. We will discover its use cases in React and build a type-safe Event Bus from scratch with TypeScript.\\",cover:\\"/optimized/articles/react-event-bus/hero.webp\\",category:\\"React\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function d(a){let n=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",pre:\\"pre\\",code:\\"code\\",h3:\\"h3\\",blockquote:\\"blockquote\\",div:\\"div\\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"bus\\",children:\\"\\\\u{1F68C}\\"}),\\" We\'ll write a lightweight Event Bus from scratch in just 60 lines!\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"seedling\\",children:\\"\\\\u{1F331}\\"}),\\" We\'ll learn the use case to best utilize Event Bus in React.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"woman lifting weights\\",children:\\"\\\\u{1F3CB}\\\\uFE0F\\\\u200D\\\\u2640\\\\uFE0F\\"}),\\" We\'ll apply Event Bus in a demo with Google Maps API.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"This article is also available on\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://betterprogramming.pub/how-to-use-event-bus-in-react-architecture-f90485477647\\",children:\\"Better Programming\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hackernoon.com/writing-an-event-bus-for-react\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"I recently came across an interesting use case of Event Bus at work. It\'s a very lean module to organize logging for analytics in a global-scale web application. It creates great clarity in a large code base so I want to share with you my case study of this useful design pattern.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"what-is-an-event-bus\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#what-is-an-event-bus\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"What Is An Event Bus?\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"An Event Bus is a design pattern that allows PubSub-style communication between components while the components remain loosely coupled.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"A component can send a message to an Event Bus without knowing where the message is sent to. On the other hand, a component can listen to a message on an Event Bus and decide what to do with the message without knowing where the message comes from. With this design, independent components can communicate without knowing each other.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"The visualization looks like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/react-event-bus/bus.webp\\",alt:\\"Event Bus illustration\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"Event: The message being sent and received on an Event Bus.\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"Publisher: The sender that \\",(0,e.jsx)(n.strong,{children:\\"emits\\"}),\\" an event.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"Subscriber: The receiver that \\",(0,e.jsx)(n.strong,{children:\\"listens\\"}),\\" to an event.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s take a closer look at Event Bus.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"building-an-event-bus-from-scratch\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#building-an-event-bus-from-scratch\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Building An Event Bus from Scratch\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Inspired by \\",(0,e.jsx)(n.a,{href:\\"https://v3-migration.vuejs.org/breaking-changes/events-api.html\\",children:\\"Vue\'s legacy Events API\\"}),\\", we\'ll implement the following APIs for our Event Bus:\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"EventHandler\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"any\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"interface\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"EventBus\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"on\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventHandler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"off\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventHandler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"emit\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"...\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Parameters\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"EventHandler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"once\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventHandler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"on\\"}),\\": for a subscriber to listen (subscribe) to an event and register its event handler.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"off\\"}),\\": for a subscriber to remove (unsubscribe) an event and its event handler.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"once\\"}),\\": for a subscriber to listen to an event only once.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"emit\\"}),\\": for a publisher to send an event to the event bus.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now, the data structure for our Event Bus should be capable of two things:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[\\"For publishers: to be able to fire the registered event handlers associated with the event key when \\",(0,e.jsx)(n.strong,{children:\\"emit\\"}),\\" is called.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"For subscribers: to be able to add or remove event handlers when \\",(0,e.jsx)(n.strong,{children:\\"on\\"}),\\", \\",(0,e.jsx)(n.strong,{children:\\"once\\"}),\\", or \\",(0,e.jsx)(n.strong,{children:\\"off\\"}),\\" is called\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"We can use a key-value structure for it:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsx)(n.code,{className:\\"language-ts code-highlight\\",children:(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Bus\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" Record\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" EventHandler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"To implement the \\",(0,e.jsx)(n.strong,{children:\\"on\\"}),\\" method, all we need to do is to add the event key to the bus and append the event handler to the handler array. We also want to return an unsubscribe function to remove the event handler.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"eventbus\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"config\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// error handler for later\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onError\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"...\\"}),\\"params\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"any\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventBus \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" bus\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Bus \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" on\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventBus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'on\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"bus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"undefined\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      bus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    bus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"push\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// unsubscribe function\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"off\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" on \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"To implement \\",(0,e.jsx)(n.strong,{children:\\"off\\"}),\\", we can simply remove the event handler from the bus.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" off\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventBus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'off\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" index \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" bus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"indexOf\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"??\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  bus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"splice\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"index \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">>>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"When \\",(0,e.jsx)(n.strong,{children:\\"emit\\"}),\\" is called, what we want to do is to fire all the event handlers that associate with the event. We\'ll add error handling here to make sure all the event handlers will be fired despite errors.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" emit\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventBus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'emit\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  bus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"forEach\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"fn\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"try\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"fn\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"catch\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"e\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      config\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"?.\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onError\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"e\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Since \\",(0,e.jsx)(n.strong,{children:\\"once\\"}),\\" will only listen to an event exactly once, we can think of it as a method that registers a handler that deregisters itself after firing. One way to do it is to create a higher order function \\",(0,e.jsx)(n.strong,{children:\\"handleOnce\\"}),\\":\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" once\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" EventBus\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'once\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleOnce\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Parameters\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"typeof\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"handler\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"off\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handleOnce \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"as\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"typeof\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"on\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handleOnce \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"as\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"typeof\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now we have all the methods in our Event Bus!\\"}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"improve-typescript-typing\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#improve-typescript-typing\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Improve TypeScript Typing\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The current typing for the Event Bus is quite open ended. The event key could be any string and the event handler could be any function. To make it safer to use, we can add type checking to add the event key and handler association to the \\",(0,e.jsx)(n.strong,{children:\\"EventBus\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"EventKey\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"|\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"symbol\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token class-name\\",children:[\\"EventHandler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"any\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"EventMap\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" Record\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"EventKey\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" EventHandler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"interface\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token class-name\\",children:[\\"EventBus\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" EventMap\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"on\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Key \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"off\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Key \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"emit\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Key \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"...\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Parameters\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"once\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Key \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"extends\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"keyof\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"key\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" handler\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"T\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"Key\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-diff\\",children:(0,e.jsxs)(n.code,{className:\\"language-diff code-highlight\\",children:[(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` type Bus = Record<string, EventHandler[]>\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` type Bus<E> = Record<keyof E, E[keyof E][]>\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` export function eventbus(config?: {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` export function eventbus<E extends EventMap>(config?: {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` onError: (...params: any[]) => void\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token unchanged\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` }): EventBus {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` }): EventBus<E> {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const bus: Bus = {}\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const bus: Partial<Bus<E>> = {}\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const on: EventBus[\'on\'] = (key, handler) => {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const on: EventBus<E>[\'on\'] = (key, handler) => {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const off: EventBus[\'off\'] = (key, handler) => {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const off: EventBus<E>[\'off\'] = (key, handler) => {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const emit: EventBus[\'emit\'] = (key, payload) => {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const emit: EventBus<E>[\'emit\'] = (key, payload) => {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line deleted\\",children:(0,e.jsxs)(n.span,{className:\\"token deleted-sign deleted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const once: EventBus[\'once\'] = (key, handler) => {\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token deleted-sign deleted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),(0,e.jsxs)(n.span,{className:\\"token inserted-sign inserted\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` const once: EventBus<E>[\'once\'] = (key, handler) => {\\n`})]})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token inserted-sign inserted\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token unchanged\\",children:[(0,e.jsx)(n.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,e.jsx)(n.span,{className:\\"token line\\",children:` return { on, off, once, emit }\\n`})]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token unchanged\\",children:(0,e.jsx)(n.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Now we are instructing TypeScript that the \\",(0,e.jsx)(n.strong,{children:\\"key\\"}),\\" has to be one of the \\",(0,e.jsx)(n.strong,{children:\\"keyof T\\"}),\\" and the handler should have the corresponding handler type. For example:\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"interface\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"MyBus\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token string-property property\\",children:\\"\'on-event-1\'\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" data\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" myBus \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"eventbus\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"MyBus\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"You should be able to see a clear type definition when developing.\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/react-event-bus/type-checking.webp\\",alt:\\"Typing screenshot\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"use-the-event-bus-in-react\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#use-the-event-bus-in-react\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Use The Event Bus in React\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"I created a \\",(0,e.jsx)(n.a,{href:\\"https://remix.run\\",children:\\"Remix\\"}),\\" application to demonstrate how to use the Event Bus we just built.\\"]}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/articles/react-event-bus/demo.gif\\",alt:\\"Typing screenshot\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsxs)(n.p,{children:[\\"You can find the \\",(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/eventbus-demo\\",children:\\"GitHub repository for the demo here\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The demo showcases how to organize logging with the Event Bus in an isomorphic React application. I picked three events to log:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"onMapIdle\\"}),\\": the event happens when the map finishes instantiating or a user finishes dragging or zooming the map.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"onMapClick\\"}),\\": the event happens when a user clicks on the map.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"onMarkerClick\\"}),\\": the event happens when a user clicks on a map marker.\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s create two \\",(0,e.jsx)(n.strong,{children:\\"event channels\\"}),\\". One for the map, and one for the marker.\\"]}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"app/eventChannels/map.ts\\"}),(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" eventbus \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'eventbus\'\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" mapEventChannel \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" eventbus\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onMapIdle\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onMapClick\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"maps\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"MapMouseEvent\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"app/eventChannels/marker.ts\\"}),(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" eventbus \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'eventbus\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" MarkerData \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'~/data/markers\'\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" markerEventChannel \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" eventbus\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onMarkerClick\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" MarkerData\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The reason to separate event channels is to create a clear separation of concerns. This pattern can grow horizontally when your application grows.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now, let\'s use the event channels in React components.\\"}),`\\n`,(0,e.jsx)(n.div,{className:\\"rehype-code-title\\",children:\\"app/routes/index.tsx\\"}),(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" markers \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'~/data/marker\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" logUserInteraction \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'~/utils/logger\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" mapEventChannel \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'~/eventChannels/map\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" markerEventChannel \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'~/eventChannels/marker\'\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"loader\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"json\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"GOOGLE_MAPS_API_KEY\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" process\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"env\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"GOOGLE_MAPS_API_KEY\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"Index\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" data \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useLoaderData\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" portal \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useRef\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"HTMLDivElement\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"null\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"selectedMarker\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setSelectedMarker\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"MarkerData\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useEffect\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// subscribe to events when mounting\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" unsubscribeOnMapIdle \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" mapEventChannel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"on\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'onMapIdle\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"logUserInteraction\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'on map idle.\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" unsubscribeOnMapClick \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" mapEventChannel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"on\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'onMapClick\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"logUserInteraction\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'on map click.\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" unsubscribeOnMarkerClick \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" markerEventChannel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"on\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'onMarkerClick\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"logUserInteraction\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'on marker click.\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" payload\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// unsubscribe events when unmounting\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unsubscribeOnMapIdle\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unsubscribeOnMapClick\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unsubscribeOnMarkerClick\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onMapIdle\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"map\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token known-class-name class-name\\",children:\\"Map\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    mapEventChannel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"emit\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'onMapIdle\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setZoom\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"getZoom\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" nextCenter \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" map\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"getCenter\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"nextCenter\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setCenter\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"nextCenter\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"toJSON\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onMapClick\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"e\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" google\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"maps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"MapMouseEvent\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    mapEventChannel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"emit\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'onMapClick\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" e\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onMarkerClick\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"marker\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"MarkerData\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    markerEventChannel\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token method function property-access\\",children:\\"emit\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'onMarkerClick\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" marker\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setSelectedMarker\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"marker\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"GoogleMap\\"})]}),`\\n`]})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"apiKey\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"data\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token constant\\",children:\\"GOOGLE_MAPS_API_KEY\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"markers\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"markers\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onClick\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"onMapClick\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onIdle\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"onMapIdle\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onMarkerClick\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"onMarkerClick\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Portal\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"container\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"portal\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"current\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"        \\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"selectedMarker \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Card\\"})]}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token spread\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,e.jsx)(n.span,{className:\\"token spread operator\\",children:\\"...\\"}),\\"selectedMarker\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Portal\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"div\\"]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"ref\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"portal\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"What we did was to subscribe to the events in the \\",(0,e.jsx)(n.strong,{children:\\"Index\\"}),\\" component and emit the events when the map and markers are interacted. Moreover, By subscribing and unsubscribing with the component\'s lifecycle, we are able to register only the necessary event handlers at the given moment of the user journey.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"final-thoughts\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you are looking for an Event Bus library, there are a \\",(0,e.jsx)(n.a,{href:\\"https://v3-migration.vuejs.org/breaking-changes/events-api.html#event-bus\\",children:\\"couple of choices recommended by Vue.js\\"}),\\":\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/developit/mitt\\",children:\\"Mitt\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/scottcorgan/tiny-emitter\\",children:\\"tiny-emitter\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"There\'s also an interesting \\",(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/javascript/comments/qrpvsq/askjs_thoughts_on_using_redux_actions_as_an_event/\\",children:\\"discussion on Reddit about using Redux as an Event Bus\\"}),\\". One of the Redux maintainers suggested a few Redux based tools to handle events:\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/reduxjs/redux-toolkit/releases/tag/v1.8.0\\",children:\\"redux-toolkit\'s new Listener Middleware\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/redux-observable/redux-observable/\\",children:\\"redux-observable\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/redux-saga/redux-saga\\",children:\\"Redux-Saga\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"references\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/developit/mitt\\",children:\\"GitHub: Mitt\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/scottcorgan/tiny-emitter\\",children:\\"GitHub: tiny-emitter\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/redux-observable/redux-observable/\\",children:\\"GitHub: redux-observable\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/redux-saga/redux-saga\\",children:\\"GitHub: Redux-Saga\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/eventbus-demo\\",children:\\"GitHub: eventbus-demo\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://v3-migration.vuejs.org/breaking-changes/events-api.html\\",children:\\"Documentation: Vue 3 Migration Guide - Events API\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/reduxjs/redux-toolkit/releases/tag/v1.8.0\\",children:\\"Documentation: redux-toolkit\'s new Listener Middleware\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://remix.run\\",children:\\"Documentation: Remix\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" Comments on \\",(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/javascript/comments/wed4qc/event_bus_for_react/\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,e.jsx)(n.a,{href:\\"/articles/stress-testing-concurrent-features-in-react-18\\",children:(0,e.jsx)(n.strong,{children:\\"Stress Testing Concurrent Features in React 18: A Case Study of startTransition & 3D Rendering\\"})})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(d,a)})):d(a)}var b=w;return f(x);})();\\n;return Component;"},"_id":"articles/event-bus-for-react.mdx","_raw":{"sourceFilePath":"articles/event-bus-for-react.mdx","sourceFileName":"event-bus-for-react.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/event-bus-for-react"},"type":"Article","readingTime":{"text":"9 min read","minutes":8.12,"time":487200,"words":1624},"wordCount":1626,"slug":"event-bus-for-react"},{"title":"Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery","publishedAt":"Sep 12, 2022","description":"How do the big tech companies and unicorn startups succeed in agile product development while maintaining code quality.","cover":"/optimized/articles/design-thinking-cd/hero.webp","category":"Leadership","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83C\uDFA8 We\'ll discuss what is design thinking.\\n- \uD83E\uDD16 We\'ll discuss what is continuous delivery.\\n- \uD83C\uDFCE We\'ll uncover how to utilize design thinking and continuous delivery to build products with agility and quality.\\n- \uD83D\uDCDA Tons of learning materials!\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/ex-principal-engineers-guide-to-design-thinking-and-continuous-delivery-c4381196467f)\\n- [Hacker Noon](https://hackernoon.com/a-guide-to-design-thinking-and-continuous-delivery-from-an-ex-principal-engineer)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nDesign thinking and continuous delivery are amazing approaches to product innovation. They are not widely discussed in the agile context, but the synergy between them is crucial to build products that people love.\\n\\n## What is Design Thinking\\n\\nDesign thinking is about problem solving. Companies like [Airbnb, Netflix, and Uber](https://online.hbs.edu/blog/post/design-thinking-examples) used design thinking to form deep understanding of their users and built features to address the user needs.\\n\\n> \\"Design thinking is a human-centered approach to innovation that draws from the designer’s toolkit to integrate the needs of people, the possibilities of technology, and the requirements for business success.\\" - [Tim Brown, Executive Chair of Ideo](https://designthinking.ideo.com)\\n\\nI like it a lot because it\'s inclusive in the innovation process. It starts with understanding the users. The goal is to solve a problem with a solution that\'s desirable from the human point of view and technically feasible while capturing market opportunities.\\n\\n<img\\n  src=\\"/optimized/articles/design-thinking-cd/functions.webp\\"\\n  alt=\\"Design thinking is a human-centered approach to innovation.\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n### How to Practice Design Thinking\\n\\nDesign thinking follows the flow of **understand**, **explore**, and **materialize**. There are six phases:\\n\\n- **Empathize**: Conduct research and develop an understanding of your users.\\n- **Define**: Combine the research and identify where problems exist.\\n- **Ideate**: Brainstorm wild and creative ideas to address the problems and the business goals.\\n- **Prototype**: Build lean solutions from a subset of the ideas.\\n- **Test**: Return to your users and collect feedback.\\n- **Implement**: Deliver your solution incrementally to your users.\\n\\n<img\\n  src=\\"/optimized/articles/design-thinking-cd/design-thinking.webp\\"\\n  alt=\\"Design thinking involves 6 phases.\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nAs you can see, design thinking iterates through [product discovery](https://www.producttalk.org/2018/08/effective-product-discovery/), [testing](https://hbr.org/1975/05/when-where-and-how-to-test-market), and [building](https://www.mojotech.com/blog/building-the-right-product-vs-building-the-product-right/). You have the flexibility to run it as lean as in just one week with [the design sprint](https://www.thesprintbook.com/the-design-sprint), or you can iterate and repeat through the phases until you find your [product market fit](https://pmarchive.com/guide_to_startups_part4.html).\\n\\nYou can read more about the design thinking process:\\n\\n- [Design Thinking 101](https://www.nngroup.com/articles/design-thinking/) by Nielsen Norman Group\\n- [Design thinking, explained](https://mitsloan.mit.edu/ideas-made-to-matter/design-thinking-explained) by MIT SLOAN SCHOOL OF MANAGEMENT\\n- [Why Design Thinking Works](https://hbr.org/2018/09/why-design-thinking-works) by Harvard Business Review\\n- [Design thinking](https://designthinking.ideo.com) by IDEO\\n\\nNow, in engineering, what we want to achieve is to have the infrastructure and workflow to enable such rapid product iterations so that multiple teams can prototype, test, and implement in your product **with speed and at scale**. This is where continuous delivery can help us.\\n\\n## What is Continuous Delivery\\n\\nContinuous delivery puts **working software** first. It\'s a practice to release software [quickly, safely, and sustainably](https://cloud.google.com/architecture/devops/devops-tech-continuous-delivery).\\n\\n> \\"Continuous delivery (CD) is a software engineering approach in which teams produce software in short cycles, ensuring that the software can be reliably released at any time and, when releasing the software, without doing so manually. It aims at building, testing, and releasing software with greater speed and frequency. The approach helps reduce the cost, time, and risk of delivering changes by allowing for more incremental updates to applications in production.\\" - [Wikipedia](https://en.wikipedia.org/wiki/Continuous_delivery)\\n\\nThere are several benefits by integrating continuous delivery. From the [DORA State of DevOps research program](https://www.devops-research.com/research.html), which summarizes a 7 years of research on high performance technical delivery and organizational outcomes, we can see a clear benefit in performance and culture. Here\'s the screenshot:\\n\\n<img\\n  src=\\"/optimized/articles/design-thinking-cd/cd-research.webp\\"\\n  alt=\\"DORA DevOps Research & Assessment\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe idea is to have an automatic process that builds, tests, analyzes, integrates, and deploys continuously throughout your product cycle. In the case of any error occurring in the process, the process will stop your product changes being integrated in production so that it won\'t impact your users. It leads to a greater level of [psychological safety](https://rework.withgoogle.com/print/guides/5721312655835136/) that enables us to test our prototypes and collect feedback and data without worrying about breaking the product.\\n\\n### How to Practice Continuous Delivery\\n\\nAccording to the [Accelerate State of DevOps 2021](https://services.google.com/fh/files/misc/state-of-devops-2021.pdf), there are [several capability factors](https://cloud.google.com/architecture/devops) that serve as indications to software delivery and organizational performance. In this article, I want to highlight a few technical capabilities in the context of agile product development:\\n\\n- Trunk-based development: developers work in small batches and merge into the trunk frequently.\\n- Continuous testing: QAs tests early and frequently throughout the delivery cycle.\\n- Continuous integration: triggers a series of automated tests that provide early feedback.\\n- Observability practices: monitor your system throughout the delivery cycle.\\n- Deployment automation: decreases lead time and reduces deployment errors.\\n\\nYou can read more about the concepts, best practices, and KPIs of continuous delivery:\\n\\n- [Accelerate: State of DevOps 2019 - DORA & Google Cloud](https://services.google.com/fh/files/misc/state-of-devops-2019.pdf)\\n- [Accelerate: State of DevOps 2021 - DORA & Google Cloud](https://services.google.com/fh/files/misc/state-of-devops-2021.pdf)\\n- [DevOps tech: Continuous delivery - Google Cloud](https://cloud.google.com/architecture/devops/devops-tech-continuous-delivery)\\n- [Software Delivery Guide - Martin Fowler](https://martinfowler.com/delivery.html)\\n- [School of SRE - LinkedIn](https://linkedin.github.io/school-of-sre/)\\n\\nNow that we have discussed both design thinking and continuous delivery, we are ready to see how they can work together to achieve higher speed and code quality.\\n\\n## Put Them Together in Product Development\\n\\nContinuous delivery comes into the picture in the **prototype, test, and implement** phase.\\n\\n<img\\n  src=\\"/optimized/articles/design-thinking-cd/cd-in-design-thinking.webp\\"\\n  alt=\\"Continuous delivery play a part in the prototype, test, and implement phase of design thinking.\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nLet\'s look at the phases separately.\\n\\n### During Prototype & Test Phase\\n\\nThe two most important focuses during the phases are **learning** and **speed**. You want to be able to put your prototype in front of your users as quickly as you can to test your ideas and hypotheses so you can design the next iterations based on your learning.\\n\\nTo prioritize learning and speed, we can design the continuous delivery process like this:\\n\\n<img\\n  src=\\"/optimized/articles/design-thinking-cd/prototype-test.webp\\"\\n  alt=\\"Continuous delivery for the prototyping & testing phase prioritize speed and learning.\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWe are keeping most of the best practices with a few modifications:\\n\\n**Dirty Pull Requests**\\n\\n✅ Dos\\n\\n- Put together the prototype as fast as possible.\\n- Modularize the code change.\\n- Mark your prototype module with an obvious prefix. Like **UNSAFE_EXPERIMENT\\\\_**.\\n- Writing tests is not necessary.\\n- Focus on functionality in code review.\\n\\n❌ Don\'ts\\n\\n- Don\'t code to perfection.\\n- Don\'t block releases with lengthy code reviews.\\n- Don\'t break the build.\\n\\n**Regression Testing & Continuous Integration**\\n\\n✅ Dos\\n\\n- Guard the main user journey. For example: Checkout flow in an E-Commerce site.\\n- Run only the baseline regression tests in favor of speed.\\n- Notify there are warnings in the continuous delivery process.\\n\\n❌ Don\'ts\\n\\n- Don\'t let the prototypes that failed the tests go into production.\\n- Don\'t lower the test coverage.\\n\\n**Analytics and Feature Toggles**\\n\\nWhen your prototypes are designed for [quantitative research](https://www.nngroup.com/articles/quant-vs-qual/), it requires code changes in the product so that you can analyze the data on a larger scale. This is where analytics and [feature toggles](https://www.martinfowler.com/articles/feature-toggles.html) are useful.\\n\\nFeature toggles gives you the flexibility to target the user segments for your tests and analytics provides you aggregated data to track your KPIs.\\n\\nThe purpose of feature toggles in these phases is to collect data and learn from the intended user segments. Make sure you don\'t use toggles to hide prototypes or features from your users. It defeats the purpose of learning.\\n\\n### During Implement Phase\\n\\nWhen you are in the **implement** phase, it means that you have tested the prototypes and you are officially going with one of your ideas. Congratulations!\\n\\nUnlike in the prototype and test phase, we want to prioritize the best practices of continuous delivery over speed:\\n\\n<img\\n  src=\\"/optimized/articles/design-thinking-cd/implementation.webp\\"\\n  alt=\\"Continuous delivery for the implementation phase prioritize continuous integration.\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n**Stacked Pull Requests**\\n\\n✅ Dos\\n\\n- Commit [small code change](https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md) (< 400 lines).\\n- Use a [series of pull requests](https://www.michaelagreiler.com/stacked-pull-requests/) instead of a large pull request to implement your product or feature.\\n- Write good PR descriptions. [System or design diagram is a plus](https://engineering.atspotify.com/2022/07/software-visualization-challenge-accepted/).\\n- Make sure you have a shared [code review standard](https://google.github.io/eng-practices/).\\n- Write comprehensive tests.\\n- Standardize and automate [coding style](https://en.wikipedia.org/wiki/Programming_style).\\n\\n❌ Don\'ts\\n\\n- Don\'t commit large code changes. It makes code review harder and slower.\\n- Don\'t prolong code review as a reviewer. Act (accept, reject, or resign) ASAP.\\n- Don\'t form an elite group that does gatekeeping and blocks the code review.\\n\\nYou can find more about the best practices for pull request authors and reviewers:\\n\\n- [Best Practices for Code Review - SmartBear](https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/)\\n- [Good Code Reviews, Better Code Reviews - Gergely Orosz](https://blog.pragmaticengineer.com/good-code-reviews-better-code-reviews/)\\n- [How Google Does Code Reviews – Quality Assurance Tips from Google\'s Documentation - Kealan Parr](https://www.freecodecamp.org/news/what-google-taught-me-about-code-reviews/)\\n- [Respectful Code Reviews - Google Chrome](https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md)\\n- [Aggressive Code Review - Bodi](https://blog.devgenius.io/aggressive-code-review-e5f8869f3967)\\n- [Using research to make code review more equitable - Google](https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html)\\n\\n**Continuous Testing and Continuous Integration**\\n\\n✅ Dos\\n\\n- Set a high test coverage threshold.\\n- Standardize and automate [coding style](https://en.wikipedia.org/wiki/Programming_style).\\n- Write end-to-end tests to guard major user journeys.\\n\\n❌ Don\'ts\\n\\n- Don\'t lower code coverage.\\n- Don\'t skip steps in continuous delivery automation.\\n- Don\'t settle for slow automation. Lead time is crucial for product delivery and your business.\\n\\n## Final Thoughts\\n\\nDesign thinking provides us a human-centric framework to iterate on product innovation, whereas continuous delivery creates a effective and predictable baseline to protect the code quality.\\n\\nCode quality often lose its priority to lead time in many companies. By following design thinking, we are able to ideate and test the prototypes quickly to learn about the market and users. By integrating continuous delivery, we have a technical capability to collaborate and test on a large scale without breaking our products.\\n\\n## References\\n\\n- Article: [Design Thinking 101 - Nielsen Norman Group](https://www.nngroup.com/articles/design-thinking/)\\n- Article: [Design thinking, explained - MIT SLOAN SCHOOL OF MANAGEMENT](https://mitsloan.mit.edu/ideas-made-to-matter/design-thinking-explained)\\n- Article: [Why Design Thinking Works - Harvard Business Review](https://hbr.org/2018/09/why-design-thinking-works)\\n- Article: [Design thinking - IDEO](https://designthinking.ideo.com)\\n- Article: [5 EXAMPLES OF DESIGN THINKING IN BUSINESS - Harvard Business School](https://online.hbs.edu/blog/post/design-thinking-examples)\\n- Article: [Principles behind the Agile Manifesto - Manifesto for Agile Software Development](https://agilemanifesto.org/principles.html)\\n- Article: [6 Guiding Principles for Effective Product Discovery](https://www.producttalk.org/2018/08/effective-product-discovery/)\\n- Article: [When, Where, and How to Test Market - Harvard Business Review](https://hbr.org/1975/05/when-where-and-how-to-test-market)\\n- Article: [Don’t “Validate” Designs; Test Them - Nielsen Norman Group](https://www.nngroup.com/articles/no-validate-in-ux/)\\n- Article: [Building the Right Product vs. Building the Product Right - MojoTech](https://www.mojotech.com/blog/building-the-right-product-vs-building-the-product-right/)\\n- Article: [The only thing that matters - Marc Andreessen](https://pmarchive.com/guide_to_startups_part4.html)\\n- Book: [The Design Sprint - Jake Knapp & John Zeratsky](https://www.thesprintbook.com/the-design-sprint)\\n- Book: [Inspired: How to Create Tech Products Customers Love - Marty Cagan](https://www.goodreads.com/book/show/35249663-inspired)\\n- Article: [DevOps tech: Continuous delivery - Google Architecture Center](https://cloud.google.com/architecture/devops/devops-tech-continuous-delivery)\\n- Wikipedia: [Continuous delivery](https://en.wikipedia.org/wiki/Continuous_delivery)\\n- Article: [Accelerate State of DevOps 2019 - DORA & Google Cloud](https://services.google.com/fh/files/misc/state-of-devops-2019.pdf)\\n- Article: [Accelerate State of DevOps 2021 - DORA & Google Cloud](https://services.google.com/fh/files/misc/state-of-devops-2021.pdf)\\n- Article: [School of SRE - LinkedLn](https://linkedin.github.io/school-of-sre/)\\n- Article: [Project Aristotle: Understand team effectiveness - re:Work](https://rework.withgoogle.com/print/guides/5721312655835136/)\\n- Article: [Quantitative vs. Qualitative Usability Testing - Nielsen Norman Group](https://www.nngroup.com/articles/quant-vs-qual/)\\n- Article: [Feature Toggles (aka Feature Flags) - Pete Hodgson](https://www.martinfowler.com/articles/feature-toggles.html)\\n- Article: [Stacked pull requests: make code reviews faster, easier, and more effective - Dr. Michaela Greiler](https://www.michaelagreiler.com/stacked-pull-requests/)\\n- Article: [Software Visualization — Challenge, Accepted - Spotify](https://engineering.atspotify.com/2022/07/software-visualization-challenge-accepted/)\\n- Article: [Google Engineering Practices Documentation - Google](https://google.github.io/eng-practices/)\\n- Wikipedia: [Programming style](https://en.wikipedia.org/wiki/Programming_style)\\n- Article: [Good Code Reviews, Better Code Reviews - Gergely Orosz](https://blog.pragmaticengineer.com/good-code-reviews-better-code-reviews/)\\n- Article: [How Google Does Code Reviews – Quality Assurance Tips from Google\'s Documentation - Kealan Parr](https://www.freecodecamp.org/news/what-google-taught-me-about-code-reviews/)\\n- Article: [Respectful Code Reviews - Google Chrome](https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md)\\n- Article: [Aggressive Code Review - Bodi](https://blog.devgenius.io/aggressive-code-review-e5f8869f3967)\\n- Article: [Using research to make code review more equitable - Google](https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html)\\n- Article: [Best Practices for Code Review - SmartBear](https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/)\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Building A Custom Google Maps Marker React Component Like Airbnb in Next.js**](/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var t in e)o(n,t,{get:e[t],enumerable:!0})},a=(n,e,t,s)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let r of g(e))!m.call(n,r)&&r!==t&&o(n,r,{get:()=>e[r],enumerable:!(s=p(e,r))||s.enumerable});return n};var y=(n,e,t)=>(t=n!=null?d(u(n)):{},a(e||!n||!n.__esModule?o(t,\\"default\\",{value:n,enumerable:!0}):t,n)),v=n=>a(o({},\\"__esModule\\",{value:!0}),n);var c=f((N,l)=>{l.exports=_jsx_runtime});var A={};w(A,{default:()=>D,frontmatter:()=>k});var i=y(c()),k={title:\\"Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery\\",publishedAt:\\"Sep 12, 2022\\",description:\\"How do the big tech companies and unicorn startups succeed in agile product development while maintaining code quality.\\",cover:\\"/optimized/articles/design-thinking-cd/hero.webp\\",category:\\"Leadership\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function h(n){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",blockquote:\\"blockquote\\",h3:\\"h3\\",strong:\\"strong\\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"artist palette\\",children:\\"\\\\u{1F3A8}\\"}),\\" We\'ll discuss what is design thinking.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"robot face\\",children:\\"\\\\u{1F916}\\"}),\\" We\'ll discuss what is continuous delivery.\\"]}),`\\n`,(0,i.jsx)(e.li,{children:\\"\\\\u{1F3CE} We\'ll uncover how to utilize design thinking and continuous delivery to build products with agility and quality.\\"}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"books\\",children:\\"\\\\u{1F4DA}\\"}),\\" Tons of learning materials!\\"]}),`\\n`]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://betterprogramming.pub/ex-principal-engineers-guide-to-design-thinking-and-continuous-delivery-c4381196467f\\",children:\\"Better Programming\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://hackernoon.com/a-guide-to-design-thinking-and-continuous-delivery-from-an-ex-principal-engineer\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsx)(e.p,{children:\\"Design thinking and continuous delivery are amazing approaches to product innovation. They are not widely discussed in the agile context, but the synergy between them is crucial to build products that people love.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"what-is-design-thinking\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-is-design-thinking\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What is Design Thinking\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Design thinking is about problem solving. Companies like \\",(0,i.jsx)(e.a,{href:\\"https://online.hbs.edu/blog/post/design-thinking-examples\\",children:\\"Airbnb, Netflix, and Uber\\"}),\\" used design thinking to form deep understanding of their users and built features to address the user needs.\\"]}),`\\n`,(0,i.jsxs)(e.blockquote,{children:[`\\n`,(0,i.jsxs)(e.p,{children:[\'\\"Design thinking is a human-centered approach to innovation that draws from the designer\\\\u2019s toolkit to integrate the needs of people, the possibilities of technology, and the requirements for business success.\\" - \',(0,i.jsx)(e.a,{href:\\"https://designthinking.ideo.com\\",children:\\"Tim Brown, Executive Chair of Ideo\\"})]}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"I like it a lot because it\'s inclusive in the innovation process. It starts with understanding the users. The goal is to solve a problem with a solution that\'s desirable from the human point of view and technically feasible while capturing market opportunities.\\"}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/design-thinking-cd/functions.webp\\",alt:\\"Design thinking is a human-centered approach to innovation.\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"how-to-practice-design-thinking\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-to-practice-design-thinking\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How to Practice Design Thinking\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Design thinking follows the flow of \\",(0,i.jsx)(e.strong,{children:\\"understand\\"}),\\", \\",(0,i.jsx)(e.strong,{children:\\"explore\\"}),\\", and \\",(0,i.jsx)(e.strong,{children:\\"materialize\\"}),\\". There are six phases:\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Empathize\\"}),\\": Conduct research and develop an understanding of your users.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Define\\"}),\\": Combine the research and identify where problems exist.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Ideate\\"}),\\": Brainstorm wild and creative ideas to address the problems and the business goals.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Prototype\\"}),\\": Build lean solutions from a subset of the ideas.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Test\\"}),\\": Return to your users and collect feedback.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Implement\\"}),\\": Deliver your solution incrementally to your users.\\"]}),`\\n`]}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/design-thinking-cd/design-thinking.webp\\",alt:\\"Design thinking involves 6 phases.\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"As you can see, design thinking iterates through \\",(0,i.jsx)(e.a,{href:\\"https://www.producttalk.org/2018/08/effective-product-discovery/\\",children:\\"product discovery\\"}),\\", \\",(0,i.jsx)(e.a,{href:\\"https://hbr.org/1975/05/when-where-and-how-to-test-market\\",children:\\"testing\\"}),\\", and \\",(0,i.jsx)(e.a,{href:\\"https://www.mojotech.com/blog/building-the-right-product-vs-building-the-product-right/\\",children:\\"building\\"}),\\". You have the flexibility to run it as lean as in just one week with \\",(0,i.jsx)(e.a,{href:\\"https://www.thesprintbook.com/the-design-sprint\\",children:\\"the design sprint\\"}),\\", or you can iterate and repeat through the phases until you find your \\",(0,i.jsx)(e.a,{href:\\"https://pmarchive.com/guide_to_startups_part4.html\\",children:\\"product market fit\\"}),\\".\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"You can read more about the design thinking process:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/design-thinking/\\",children:\\"Design Thinking 101\\"}),\\" by Nielsen Norman Group\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://mitsloan.mit.edu/ideas-made-to-matter/design-thinking-explained\\",children:\\"Design thinking, explained\\"}),\\" by MIT SLOAN SCHOOL OF MANAGEMENT\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://hbr.org/2018/09/why-design-thinking-works\\",children:\\"Why Design Thinking Works\\"}),\\" by Harvard Business Review\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://designthinking.ideo.com\\",children:\\"Design thinking\\"}),\\" by IDEO\\"]}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Now, in engineering, what we want to achieve is to have the infrastructure and workflow to enable such rapid product iterations so that multiple teams can prototype, test, and implement in your product \\",(0,i.jsx)(e.strong,{children:\\"with speed and at scale\\"}),\\". This is where continuous delivery can help us.\\"]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"what-is-continuous-delivery\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-is-continuous-delivery\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What is Continuous Delivery\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Continuous delivery puts \\",(0,i.jsx)(e.strong,{children:\\"working software\\"}),\\" first. It\'s a practice to release software \\",(0,i.jsx)(e.a,{href:\\"https://cloud.google.com/architecture/devops/devops-tech-continuous-delivery\\",children:\\"quickly, safely, and sustainably\\"}),\\".\\"]}),`\\n`,(0,i.jsxs)(e.blockquote,{children:[`\\n`,(0,i.jsxs)(e.p,{children:[\'\\"Continuous delivery (CD) is a software engineering approach in which teams produce software in short cycles, ensuring that the software can be reliably released at any time and, when releasing the software, without doing so manually. It aims at building, testing, and releasing software with greater speed and frequency. The approach helps reduce the cost, time, and risk of delivering changes by allowing for more incremental updates to applications in production.\\" - \',(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Continuous_delivery\\",children:\\"Wikipedia\\"})]}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"There are several benefits by integrating continuous delivery. From the \\",(0,i.jsx)(e.a,{href:\\"https://www.devops-research.com/research.html\\",children:\\"DORA State of DevOps research program\\"}),\\", which summarizes a 7 years of research on high performance technical delivery and organizational outcomes, we can see a clear benefit in performance and culture. Here\'s the screenshot:\\"]}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/design-thinking-cd/cd-research.webp\\",alt:\\"DORA DevOps Research & Assessment\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"The idea is to have an automatic process that builds, tests, analyzes, integrates, and deploys continuously throughout your product cycle. In the case of any error occurring in the process, the process will stop your product changes being integrated in production so that it won\'t impact your users. It leads to a greater level of \\",(0,i.jsx)(e.a,{href:\\"https://rework.withgoogle.com/print/guides/5721312655835136/\\",children:\\"psychological safety\\"}),\\" that enables us to test our prototypes and collect feedback and data without worrying about breaking the product.\\"]}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"how-to-practice-continuous-delivery\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-to-practice-continuous-delivery\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How to Practice Continuous Delivery\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"According to the \\",(0,i.jsx)(e.a,{href:\\"https://services.google.com/fh/files/misc/state-of-devops-2021.pdf\\",children:\\"Accelerate State of DevOps 2021\\"}),\\", there are \\",(0,i.jsx)(e.a,{href:\\"https://cloud.google.com/architecture/devops\\",children:\\"several capability factors\\"}),\\" that serve as indications to software delivery and organizational performance. In this article, I want to highlight a few technical capabilities in the context of agile product development:\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Trunk-based development: developers work in small batches and merge into the trunk frequently.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Continuous testing: QAs tests early and frequently throughout the delivery cycle.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Continuous integration: triggers a series of automated tests that provide early feedback.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Observability practices: monitor your system throughout the delivery cycle.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Deployment automation: decreases lead time and reduces deployment errors.\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"You can read more about the concepts, best practices, and KPIs of continuous delivery:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://services.google.com/fh/files/misc/state-of-devops-2019.pdf\\",children:\\"Accelerate: State of DevOps 2019 - DORA & Google Cloud\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://services.google.com/fh/files/misc/state-of-devops-2021.pdf\\",children:\\"Accelerate: State of DevOps 2021 - DORA & Google Cloud\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://cloud.google.com/architecture/devops/devops-tech-continuous-delivery\\",children:\\"DevOps tech: Continuous delivery - Google Cloud\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://martinfowler.com/delivery.html\\",children:\\"Software Delivery Guide - Martin Fowler\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://linkedin.github.io/school-of-sre/\\",children:\\"School of SRE - LinkedIn\\"})}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Now that we have discussed both design thinking and continuous delivery, we are ready to see how they can work together to achieve higher speed and code quality.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"put-them-together-in-product-development\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#put-them-together-in-product-development\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Put Them Together in Product Development\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Continuous delivery comes into the picture in the \\",(0,i.jsx)(e.strong,{children:\\"prototype, test, and implement\\"}),\\" phase.\\"]}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/design-thinking-cd/cd-in-design-thinking.webp\\",alt:\\"Continuous delivery play a part in the prototype, test, and implement phase of design thinking.\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"Let\'s look at the phases separately.\\"}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"during-prototype--test-phase\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#during-prototype--test-phase\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"During Prototype & Test Phase\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"The two most important focuses during the phases are \\",(0,i.jsx)(e.strong,{children:\\"learning\\"}),\\" and \\",(0,i.jsx)(e.strong,{children:\\"speed\\"}),\\". You want to be able to put your prototype in front of your users as quickly as you can to test your ideas and hypotheses so you can design the next iterations based on your learning.\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"To prioritize learning and speed, we can design the continuous delivery process like this:\\"}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/design-thinking-cd/prototype-test.webp\\",alt:\\"Continuous delivery for the prototyping & testing phase prioritize speed and learning.\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"We are keeping most of the best practices with a few modifications:\\"}),`\\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\\"Dirty Pull Requests\\"})}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"white heavy check mark\\",children:\\"\\\\u2705\\"}),\\" Dos\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Put together the prototype as fast as possible.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Modularize the code change.\\"}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Mark your prototype module with an obvious prefix. Like \\",(0,i.jsx)(e.strong,{children:\\"UNSAFE_EXPERIMENT_\\"}),\\".\\"]}),`\\n`,(0,i.jsx)(e.li,{children:\\"Writing tests is not necessary.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Focus on functionality in code review.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cross mark\\",children:\\"\\\\u274C\\"}),\\" Don\'ts\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t code to perfection.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t block releases with lengthy code reviews.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t break the build.\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\\"Regression Testing & Continuous Integration\\"})}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"white heavy check mark\\",children:\\"\\\\u2705\\"}),\\" Dos\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Guard the main user journey. For example: Checkout flow in an E-Commerce site.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Run only the baseline regression tests in favor of speed.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Notify there are warnings in the continuous delivery process.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cross mark\\",children:\\"\\\\u274C\\"}),\\" Don\'ts\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t let the prototypes that failed the tests go into production.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t lower the test coverage.\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\\"Analytics and Feature Toggles\\"})}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"When your prototypes are designed for \\",(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/quant-vs-qual/\\",children:\\"quantitative research\\"}),\\", it requires code changes in the product so that you can analyze the data on a larger scale. This is where analytics and \\",(0,i.jsx)(e.a,{href:\\"https://www.martinfowler.com/articles/feature-toggles.html\\",children:\\"feature toggles\\"}),\\" are useful.\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Feature toggles gives you the flexibility to target the user segments for your tests and analytics provides you aggregated data to track your KPIs.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"The purpose of feature toggles in these phases is to collect data and learn from the intended user segments. Make sure you don\'t use toggles to hide prototypes or features from your users. It defeats the purpose of learning.\\"}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"during-implement-phase\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#during-implement-phase\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"During Implement Phase\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"When you are in the \\",(0,i.jsx)(e.strong,{children:\\"implement\\"}),\\" phase, it means that you have tested the prototypes and you are officially going with one of your ideas. Congratulations!\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Unlike in the prototype and test phase, we want to prioritize the best practices of continuous delivery over speed:\\"}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/design-thinking-cd/implementation.webp\\",alt:\\"Continuous delivery for the implementation phase prioritize continuous integration.\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\\"Stacked Pull Requests\\"})}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"white heavy check mark\\",children:\\"\\\\u2705\\"}),\\" Dos\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[\\"Commit \\",(0,i.jsx)(e.a,{href:\\"https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md\\",children:\\"small code change\\"}),\\" (< 400 lines).\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Use a \\",(0,i.jsx)(e.a,{href:\\"https://www.michaelagreiler.com/stacked-pull-requests/\\",children:\\"series of pull requests\\"}),\\" instead of a large pull request to implement your product or feature.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Write good PR descriptions. \\",(0,i.jsx)(e.a,{href:\\"https://engineering.atspotify.com/2022/07/software-visualization-challenge-accepted/\\",children:\\"System or design diagram is a plus\\"}),\\".\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Make sure you have a shared \\",(0,i.jsx)(e.a,{href:\\"https://google.github.io/eng-practices/\\",children:\\"code review standard\\"}),\\".\\"]}),`\\n`,(0,i.jsx)(e.li,{children:\\"Write comprehensive tests.\\"}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Standardize and automate \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Programming_style\\",children:\\"coding style\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cross mark\\",children:\\"\\\\u274C\\"}),\\" Don\'ts\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t commit large code changes. It makes code review harder and slower.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t prolong code review as a reviewer. Act (accept, reject, or resign) ASAP.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t form an elite group that does gatekeeping and blocks the code review.\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"You can find more about the best practices for pull request authors and reviewers:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/\\",children:\\"Best Practices for Code Review - SmartBear\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://blog.pragmaticengineer.com/good-code-reviews-better-code-reviews/\\",children:\\"Good Code Reviews, Better Code Reviews - Gergely Orosz\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.freecodecamp.org/news/what-google-taught-me-about-code-reviews/\\",children:\\"How Google Does Code Reviews \\\\u2013 Quality Assurance Tips from Google\'s Documentation - Kealan Parr\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md\\",children:\\"Respectful Code Reviews - Google Chrome\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://blog.devgenius.io/aggressive-code-review-e5f8869f3967\\",children:\\"Aggressive Code Review - Bodi\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html\\",children:\\"Using research to make code review more equitable - Google\\"})}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\\"Continuous Testing and Continuous Integration\\"})}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"white heavy check mark\\",children:\\"\\\\u2705\\"}),\\" Dos\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Set a high test coverage threshold.\\"}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Standardize and automate \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Programming_style\\",children:\\"coding style\\"}),\\".\\"]}),`\\n`,(0,i.jsx)(e.li,{children:\\"Write end-to-end tests to guard major user journeys.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cross mark\\",children:\\"\\\\u274C\\"}),\\" Don\'ts\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t lower code coverage.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t skip steps in continuous delivery automation.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Don\'t settle for slow automation. Lead time is crucial for product delivery and your business.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Design thinking provides us a human-centric framework to iterate on product innovation, whereas continuous delivery creates a effective and predictable baseline to protect the code quality.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"Code quality often lose its priority to lead time in many companies. By following design thinking, we are able to ideate and test the prototypes quickly to learn about the market and users. By integrating continuous delivery, we have a technical capability to collaborate and test on a large scale without breaking our products.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"references\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/design-thinking/\\",children:\\"Design Thinking 101 - Nielsen Norman Group\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://mitsloan.mit.edu/ideas-made-to-matter/design-thinking-explained\\",children:\\"Design thinking, explained - MIT SLOAN SCHOOL OF MANAGEMENT\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://hbr.org/2018/09/why-design-thinking-works\\",children:\\"Why Design Thinking Works - Harvard Business Review\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://designthinking.ideo.com\\",children:\\"Design thinking - IDEO\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://online.hbs.edu/blog/post/design-thinking-examples\\",children:\\"5 EXAMPLES OF DESIGN THINKING IN BUSINESS - Harvard Business School\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://agilemanifesto.org/principles.html\\",children:\\"Principles behind the Agile Manifesto - Manifesto for Agile Software Development\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.producttalk.org/2018/08/effective-product-discovery/\\",children:\\"6 Guiding Principles for Effective Product Discovery\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://hbr.org/1975/05/when-where-and-how-to-test-market\\",children:\\"When, Where, and How to Test Market - Harvard Business Review\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/no-validate-in-ux/\\",children:\\"Don\\\\u2019t \\\\u201CValidate\\\\u201D Designs; Test Them - Nielsen Norman Group\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.mojotech.com/blog/building-the-right-product-vs-building-the-product-right/\\",children:\\"Building the Right Product vs. Building the Product Right - MojoTech\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://pmarchive.com/guide_to_startups_part4.html\\",children:\\"The only thing that matters - Marc Andreessen\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Book: \\",(0,i.jsx)(e.a,{href:\\"https://www.thesprintbook.com/the-design-sprint\\",children:\\"The Design Sprint - Jake Knapp & John Zeratsky\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Book: \\",(0,i.jsx)(e.a,{href:\\"https://www.goodreads.com/book/show/35249663-inspired\\",children:\\"Inspired: How to Create Tech Products Customers Love - Marty Cagan\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://cloud.google.com/architecture/devops/devops-tech-continuous-delivery\\",children:\\"DevOps tech: Continuous delivery - Google Architecture Center\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Wikipedia: \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Continuous_delivery\\",children:\\"Continuous delivery\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://services.google.com/fh/files/misc/state-of-devops-2019.pdf\\",children:\\"Accelerate State of DevOps 2019 - DORA & Google Cloud\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://services.google.com/fh/files/misc/state-of-devops-2021.pdf\\",children:\\"Accelerate State of DevOps 2021 - DORA & Google Cloud\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://linkedin.github.io/school-of-sre/\\",children:\\"School of SRE - LinkedLn\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://rework.withgoogle.com/print/guides/5721312655835136/\\",children:\\"Project Aristotle: Understand team effectiveness - re:Work\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/quant-vs-qual/\\",children:\\"Quantitative vs. Qualitative Usability Testing - Nielsen Norman Group\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.martinfowler.com/articles/feature-toggles.html\\",children:\\"Feature Toggles (aka Feature Flags) - Pete Hodgson\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.michaelagreiler.com/stacked-pull-requests/\\",children:\\"Stacked pull requests: make code reviews faster, easier, and more effective - Dr. Michaela Greiler\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://engineering.atspotify.com/2022/07/software-visualization-challenge-accepted/\\",children:\\"Software Visualization \\\\u2014 Challenge, Accepted - Spotify\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://google.github.io/eng-practices/\\",children:\\"Google Engineering Practices Documentation - Google\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Wikipedia: \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Programming_style\\",children:\\"Programming style\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://blog.pragmaticengineer.com/good-code-reviews-better-code-reviews/\\",children:\\"Good Code Reviews, Better Code Reviews - Gergely Orosz\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://www.freecodecamp.org/news/what-google-taught-me-about-code-reviews/\\",children:\\"How Google Does Code Reviews \\\\u2013 Quality Assurance Tips from Google\'s Documentation - Kealan Parr\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md\\",children:\\"Respectful Code Reviews - Google Chrome\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://blog.devgenius.io/aggressive-code-review-e5f8869f3967\\",children:\\"Aggressive Code Review - Bodi\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html\\",children:\\"Using research to make code review more equitable - Google\\"})]}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Article: \\",(0,i.jsx)(e.a,{href:\\"https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/\\",children:\\"Best Practices for Code Review - SmartBear\\"})]}),`\\n`]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,i.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,i.jsx)(e.a,{href:\\"/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs\\",children:(0,i.jsx)(e.strong,{children:\\"Building A Custom Google Maps Marker React Component Like Airbnb in Next.js\\"})})]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function b(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(h,n)})):h(n)}var D=b;return v(A);})();\\n;return Component;"},"_id":"articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery.mdx","_raw":{"sourceFilePath":"articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery.mdx","sourceFileName":"ex-principal-engineers-guide-to-design-thinking-and-continous-delivery.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery"},"type":"Article","readingTime":{"text":"11 min read","minutes":10.08,"time":604800,"words":2016},"wordCount":2018,"slug":"ex-principal-engineers-guide-to-design-thinking-and-continous-delivery"},{"title":"From Frontend Developer to Principal Software Engineer","publishedAt":"January 20, 2022","description":"I recently joined a European public company as a Lead Software Engineer. The role has a combined responsibility of Principal Software Engineer and Senior Engineering Manager. It is challenging but I was prepared. I want to share with you 50+ books and resources that help me in my journey.","cover":"/optimized/articles/frontend-developer-to-principal-engineer/hero.webp","category":"Leadership","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\nMy journey is a bit of a bumpy one and full of learnings.\\nI\'m so grateful for the experience and the people that help me along the way.\\n\\nI recently joined a European public company as a Lead Software Engineer.\\nThe role is part of the leadership model in the company with a responsibility of Principal Software Engineer and Senior Engineering Manager.\\nIt\'s as challenging as it sounds to shift from being an individual contributor to having a duo responsibility, but I was prepared.\\nI want to share all the resources that have a tremendous impact on my road to tech leadership with you.\\n\\nMy hope is that regardless of your background or where you are in your career, some of these resources here can help unblock you or offer you inspiration when you need them.\\n\\n## TL;DR\\n\\n- \uD83D\uDC6F Value relationships. Not just with others, but with yourself too.\\n- \uD83D\uDE80 Find your leadership style. It multiplies your impact.\\n- \uD83E\uDD84 Stay true to your craft. It\'s the cornerstone of your value proposition.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/my-journey-from-frontend-developer-to-principal-software-engineer-61d86e88cb70)\\n- [Hacker Noon](https://hackernoon.com/tech-career-stories-from-frontend-developer-to-principal-software-engineer)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\n## Valuing Relationships\\n\\nYour relationship with yourself is as important, if not more, as your relationships with others.\\n\\nAfter I found my center, I noticed a clarity to communicate authentically.\\nIt helps me discuss without arguing from ego, and provide candid feedback during 1:1s with my peers and talents.\\nI\'m able to form more meaningful relationships and communicate more effectively.\\n\\n<img\\n  src=\\"/optimized/articles/frontend-developer-to-principal-engineer/books.webp\\"\\n  alt=\\"Some of the books at home\\"\\n  width=\\"100%\\"\\n  className=\\"rounded\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n### The books that helps me understand myself\\n\\n- [The Chimp Paradox: The Acclaimed Mind Management Programme to Help You Achieve Success, Confidence and Happiness](https://www.goodreads.com/book/show/12228097-the-chimp-paradox) <span className=\\"text-secondary\\">by Steve Peters</span>\\n- [Quiet](https://www.goodreads.com/book/show/8520610-quiet) <span className=\\"text-secondary\\">by Susan Cain</span>\\n- [Outliers: The Story of Success](https://www.goodreads.com/book/show/3228917-outliers) <span className=\\"text-secondary\\">by Malcolm Gladwell</span>\\n- [Grit](https://www.goodreads.com/book/show/27213329-grit) <span className=\\"text-secondary\\">by Angela Duckworth</span>\\n- [How Champions Think: In Sports and in Life](https://www.goodreads.com/book/show/25305085-how-champions-think) <span className=\\"text-secondary\\">by Bob Rotella, and Bob Cullen (Contributor)</span>\\n- [Mindset: The New Psychology of Success](https://www.goodreads.com/book/show/40745.Mindset) <span className=\\"text-secondary\\">by Carol S. Dweck</span>\\n- [Daring Greatly: How the Courage to Be Vulnerable Transforms the Way We Live, Love, Parent, and Lead](https://www.goodreads.com/book/show/13588356-daring-greatly) <span className=\\"text-secondary\\">by Bren\xe9 Brown</span>\\n- [The Willpower Instinct: How Self-Control Works, Why It Matters, and What You Can Do to Get More of It](https://www.goodreads.com/book/show/10865206-the-willpower-instinct) <span className=\\"text-secondary\\">by Kelly McGonigal</span>\\n\\n### The books that helps me stay consistent\\n\\n- [Atomic Habits: An Easy & Proven Way to Build Good Habits & Break Bad Ones](https://www.goodreads.com/book/show/40121378-atomic-habits) <span className=\\"text-secondary\\">by James Clear</span>\\n- [The Headspace Guide to Meditation & Mindfulness](https://www.goodreads.com/book/show/27414493-the-headspace-guide-to-meditation-mindfulness) <span className=\\"text-secondary\\">by Andy Puddicombe</span>\\n- [The Life-Changing Magic of Tidying Up: The Japanese Art of Decluttering and Organizing](https://www.goodreads.com/book/show/22318578-the-life-changing-magic-of-tidying-up) <span className=\\"text-secondary\\">by Marie Kondō</span>\\n- [The Power of Habit: Why We Do What We Do in Life and Business](https://www.goodreads.com/book/show/12609433-the-power-of-habit) <span className=\\"text-secondary\\">by Charles Duhigg</span>\\n- [Why We Sleep: Unlocking the Power of Sleep and Dreams](https://www.goodreads.com/book/show/34466963-why-we-sleep) <span className=\\"text-secondary\\">by Matthew Walker</span>\\n\\n### The resources that helps me stay consistent\\n\\n- [Huberman Lab](https://hubermanlab.com/)\\n- [Headspace](https://www.headspace.com/)\\n\\n### The books that helps me forming meaningful relationship with others\\n\\n- [The Chimp Paradox: The Acclaimed Mind Management Programme to Help You Achieve Success, Confidence and Happiness](https://www.goodreads.com/book/show/12228097-the-chimp-paradox) <span className=\\"text-secondary\\">by Steve Peters</span>\\n- [Radical Candor: Be a Kickass Boss Without Losing Your Humanity](https://www.goodreads.com/book/show/29939161-radical-candor) <span className=\\"text-secondary\\">by Kim Malone Scott</span>\\n- [Daring Greatly: How the Courage to Be Vulnerable Transforms the Way We Live, Love, Parent, and Lead](https://www.goodreads.com/book/show/13588356-daring-greatly) <span className=\\"text-secondary\\">by Bren\xe9 Brown</span>\\n- [15 Commitments of Conscious Leadership](https://www.goodreads.com/book/show/23275060-15-commitments-of-conscious-leadership) <span className=\\"text-secondary\\">by Jim Dethmer, Diana Chapman, Kaley Warner Klemp</span>\\n\\n## Finding Your Style\\n\\nIt\'s important to think about your way of scaling your influence and impact.\\n\\nI started off my leadership journey by helping a small but important project without a lead title.\\nI took care of the tedious work no one wanted to do like organizing documentations, taking meeting minutes, and following up on actions.\\nAs I got more years under my belt, I was involved in bigger projects.\\nMore teams, higher stakes, longer time budgets, higher complexities.\\nMy focus turned to how to empower all parties involved to iterate and deliver, and at the same time be helpful in alignment on tech excellence.\\n\\nTech leadership is not one size fits all to me at all.\\nI\'m not the most outspoken engineer.\\nI listen.\\nI\'m empathetic, thorough, and unwavering, and I believe my best work comes from solitude.\\n\\nI have no doubt that you can be true to who you are and be an outstanding leader.\\n\\n### The books that helps me find my leadership foundation\\n\\n- [15 Commitments of Conscious Leadership](https://www.goodreads.com/book/show/23275060-15-commitments-of-conscious-leadership) <span className=\\"text-secondary\\">by Jim Dethmer, Diana Chapman, Kaley Warner Klemp</span>\\n- [Quiet](https://www.goodreads.com/book/show/8520610-quiet) <span className=\\"text-secondary\\">by Susan Cain</span>\\n- [No Rules Rules: Netflix and the Culture of Reinvention](https://www.goodreads.com/book/show/49099937-no-rules-rules) <span className=\\"text-secondary\\">by Reed Hastings, Erin Meyer</span>\\n- [Discover Your True North](https://www.goodreads.com/book/show/25957932-discover-your-true-north) <span className=\\"text-secondary\\">by Bill George, David Gergen (Foreword)</span>\\n- [Extreme Ownership: How U.S. Navy SEALs Lead and Win](https://www.goodreads.com/book/show/23848190-extreme-ownership) <span className=\\"text-secondary\\">by Jocko Willink, Leif Babin</span>\\n- [Trillion Dollar Coach: The Leadership Playbook of Silicon Valley\'s Bill Campbell](https://www.goodreads.com/book/show/42118073-trillion-dollar-coach) <span className=\\"text-secondary\\">by Eric Schmidt, Jonathan Rosenberg, Alan Eagle</span>\\n- [The One Thing: The Surprisingly Simple Truth Behind Extraordinary Results](https://www.goodreads.com/book/show/16256798-the-one-thing) <span className=\\"text-secondary\\">by Gary Keller, Jay Papasan</span>\\n- [Principles: Life and Work](https://www.goodreads.com/book/show/34536488-principles) <span className=\\"text-secondary\\">by Ray Dalio</span>\\n- [Inspired: How to Create Tech Products Customers Love](https://www.goodreads.com/book/show/35249663-inspired?ac=1&from_search=true&qid=1o6CU5ZS61&rank=2) <span className=\\"text-secondary\\">by Marty Cagan</span>\\n\\n## Staying True to Craft\\n\\nIt\'s clear to me that building a consistent product people love correlates a company culture that values tech excellence.\\nAri Balogh, CTO at Airbnb, wrote the article [\\"Commitment to Craft\\"](https://medium.com/airbnb-engineering/commitment-to-craft-e36d5a8efe2a) and it captured my notion.\\nI believe the pursuit of craft not only facilitates an individual\'s lateral and vertical growth, but also equips a company\'s economic growth.\\n\\n> Always learning\uD83D\uDE0E\\n\\nMy curiosity took me on a wild ride in tech.\\n\\n- I started out wanting to make beautiful websites, and now I\'m building packages, release pipelines, API gateways and services, and CLI applications.\\n- I was trained to be an UX researcher, and now I\'m doing performance monitoring and optimization, SEO, CDN integration, and performance marketing.\\n- I was told that I wasn\'t good enough, and now I\'m mentoring, coaching, and sharing my learnings in the tech community.\\n\\nCommit to your craft.\\n\\n### The resources about web architecture & infrastructure\\n\\n- [Is High Quality Software Worth the Cost?](https://martinfowler.com/articles/is-quality-worth-cost.html) <span className=\\"text-secondary\\">by Martin Fowler</span>\\n- [AirbnbEng: Commitment to Craft](https://medium.com/airbnb-engineering/commitment-to-craft-e36d5a8efe2a)\\n- [Domain Driven Design](https://en.wikipedia.org/wiki/Domain-driven_design)\\n- [OSI Model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/) <span className=\\"text-secondary\\">by Cloudflare</span>\\n- [System Design Interview – An Insider\'s Guide](https://www.goodreads.com/book/show/54109255-system-design-interview-an-insider-s-guide) <span className=\\"text-secondary\\">by Alex Xu</span>\\n- [Netflix Tech Blog](https://netflixtechblog.com)\\n- [The Airbnb Tech Blog](https://medium.com/airbnb-engineering)\\n- [Uber Engineering](https://eng.uber.com)\\n- [Tech at trivago](https://tech.trivago.com)\\n- [The System Design Primer](https://github.com/donnemartin/system-design-primer)\\n- [Making Architecture Matter - Martin Fowler Keynote](https://youtu.be/DngAZyWMGR0) <span className=\\"text-secondary\\">by Martin Fowler</span>\\n- [Learning SEO – A Roadmap with Free Guides & Tools](https://learningseo.io)\\n- [Akamai EdgeWorkers](https://developer.akamai.com/akamai-edgeworkers-overview)\\n- [GitHub Actions](https://docs.github.com/en/actions)\\n- [Synthetic & Real User Monitoring Explained](https://www.catchpoint.com/guide-to-synthetic-monitoring/rum-vs-synthetic-monitoring) <span className=\\"text-secondary\\">by Catchpoint</span>\\n- [How Netflix Scales its API with GraphQL Federation (Part 1)](https://netflixtechblog.com/how-netflix-scales-its-api-with-graphql-federation-part-1-ae3557c187e2) <span className=\\"text-secondary\\">by Tejas Shikhare</span>\\n\\n### The resources about programming languages\\n\\n- [JavaScript Allong\xe9, the \\"Six\\" Edition](https://leanpub.com/javascriptallongesix/read#leanpub-auto-about-the-author) <span className=\\"text-secondary\\">by Reg “raganwald” Braithwaite</span>\\n- [TC39 Proposals](https://github.com/tc39/proposals)\\n- [V8](https://v8.dev)\\n- [The Rust Programming Language](https://doc.rust-lang.org/book/)\\n- [Learn Rust With Entirely Too Many Linked Lists](https://rust-unofficial.github.io/too-many-lists/)\\n- [Rust by Example](https://doc.rust-lang.org/stable/rust-by-example/)\\n\\n### The resources about UI/UX\\n\\n- [52 Weeks of UX](https://52weeksofux.com)\\n- [Material Design](https://material.io)\\n- [WAI-ARIA basics](https://developer.mozilla.org/en-US/docs/Learn/Accessibility/WAI-ARIA_basics)\\n\\n## Final Thoughts\\n\\nThe potential in tech is limitless.\\nSometimes your journey might be rough, but don\'t be discouraged.\\nThere are so many amazing wisdom in books and articles within your reach to help you accomplish your vision.\\n\\nLet\'s get it\uD83D\uDE80\\n\\n## References\\n\\n### Books\\n\\n- [15 Commitments of Conscious Leadership](https://www.goodreads.com/book/show/23275060-15-commitments-of-conscious-leadership) <span className=\\"text-secondary\\">by Jim Dethmer, Diana Chapman, Kaley Warner Klemp</span>\\n- [Atomic Habits: An Easy & Proven Way to Build Good Habits & Break Bad Ones](https://www.goodreads.com/book/show/40121378-atomic-habits) <span className=\\"text-secondary\\">by James Clear</span>\\n- [Daring Greatly: How the Courage to Be Vulnerable Transforms the Way We Live, Love, Parent, and Lead](https://www.goodreads.com/book/show/13588356-daring-greatly) <span className=\\"text-secondary\\">by Bren\xe9 Brown</span>\\n- [Discover Your True North](https://www.goodreads.com/book/show/25957932-discover-your-true-north) <span className=\\"text-secondary\\">by Bill George, David Gergen (Foreword)</span>\\n- [Extreme Ownership: How U.S. Navy SEALs Lead and Win](https://www.goodreads.com/book/show/23848190-extreme-ownership) <span className=\\"text-secondary\\">by Jocko Willink, Leif Babin</span>\\n- [Grit](https://www.goodreads.com/book/show/27213329-grit) <span className=\\"text-secondary\\">by Angela Duckworth</span>\\n- [How Champions Think: In Sports and in Life](https://www.goodreads.com/book/show/25305085-how-champions-think) <span className=\\"text-secondary\\">by Bob Rotella, and Bob Cullen (Contributor)</span>\\n- [Inspired: How to Create Tech Products Customers Love](https://www.goodreads.com/book/show/35249663-inspired?ac=1&from_search=true&qid=1o6CU5ZS61&rank=2) <span className=\\"text-secondary\\">by Marty Cagan</span>\\n- [Mindset: The New Psychology of Success](https://www.goodreads.com/book/show/40745.Mindset) <span className=\\"text-secondary\\">by Carol S. Dweck</span>\\n- [No Rules Rules: Netflix and the Culture of Reinvention](https://www.goodreads.com/book/show/49099937-no-rules-rules) <span className=\\"text-secondary\\">by Reed Hastings, Erin Meyer</span>\\n- [Outliers: The Story of Success](https://www.goodreads.com/book/show/3228917-outliers) <span className=\\"text-secondary\\">by Malcolm Gladwell</span>\\n- [On Writing Well: The Classic Guide to Writing Nonfiction](https://www.goodreads.com/book/show/53343.On_Writing_Well) <span className=\\"text-secondary\\">by William Zinsser</span>\\n- [Principles: Life and Work](https://www.goodreads.com/book/show/34536488-principles) <span className=\\"text-secondary\\">by Ray Dalio</span>\\n- [Quiet](https://www.goodreads.com/book/show/8520610-quiet) <span className=\\"text-secondary\\">by Susan Cain</span>\\n- [Radical Candor: Be a Kickass Boss Without Losing Your Humanity](https://www.goodreads.com/book/show/29939161-radical-candor) <span className=\\"text-secondary\\">by Kim Malone Scott</span>\\n- [The Rust Programming Language](https://doc.rust-lang.org/book/) <span className=\\"text-secondary\\">by Steve Klabnik, Carol Nichols, with contributions from the Rust Community</span>\\n- [So Good They Can\'t Ignore You: Why Skills Trump Passion in the Quest for Work You Love](https://www.goodreads.com/book/show/13525945-so-good-they-can-t-ignore-you) <span className=\\"text-secondary\\">by Cal Newport</span>\\n- [System Design Interview – An Insider\'s Guide](https://www.goodreads.com/book/show/54109255-system-design-interview-an-insider-s-guide) <span className=\\"text-secondary\\">by Alex Xu</span>\\n- [The Chimp Paradox: The Acclaimed Mind Management Programme to Help You Achieve Success, Confidence and Happiness](https://www.goodreads.com/book/show/12228097-the-chimp-paradox) <span className=\\"text-secondary\\">by Steve Peters</span>\\n- [The Headspace Guide to Meditation & Mindfulness](https://www.goodreads.com/book/show/27414493-the-headspace-guide-to-meditation-mindfulness) <span className=\\"text-secondary\\">by Andy Puddicombe</span>\\n- [The Life-Changing Magic of Tidying Up: The Japanese Art of Decluttering and Organizing](https://www.goodreads.com/book/show/22318578-the-life-changing-magic-of-tidying-up) <span className=\\"text-secondary\\">by Marie Kondō</span>\\n- [The One Thing: The Surprisingly Simple Truth Behind Extraordinary Results](https://www.goodreads.com/book/show/16256798-the-one-thing) <span className=\\"text-secondary\\">by Gary Keller, Jay Papasan</span>\\n- [The Power of Habit: Why We Do What We Do in Life and Business](https://www.goodreads.com/book/show/12609433-the-power-of-habit) <span className=\\"text-secondary\\">by Charles Duhigg</span>\\n- [The Start-Up of You: Adapt to the Future, Invest in Yourself, and Transform Your Career](https://www.goodreads.com/book/show/12030438-the-start-up-of-you) <span className=\\"text-secondary\\">by Reid Hoffman, Ben Casnocha</span>\\n- [The Willpower Instinct: How Self-Control Works, Why It Matters, and What You Can Do to Get More of It](https://www.goodreads.com/book/show/10865206-the-willpower-instinct) <span className=\\"text-secondary\\">by Kelly McGonigal</span>\\n- [Trillion Dollar Coach: The Leadership Playbook of Silicon Valley\'s Bill Campbell](https://www.goodreads.com/book/show/42118073-trillion-dollar-coach) <span className=\\"text-secondary\\">by Eric Schmidt, Jonathan Rosenberg, Alan Eagle</span>\\n- [Why We Sleep: Unlocking the Power of Sleep and Dreams](https://www.goodreads.com/book/show/34466963-why-we-sleep) <span className=\\"text-secondary\\">by Matthew Walker</span>\\n\\n### Online Resources\\n\\n- [52 Weeks of UX](https://52weeksofux.com)\\n- [AirbnbEng: Commitment to Craft](https://medium.com/airbnb-engineering/commitment-to-craft-e36d5a8efe2a)\\n- [Akamai EdgeWorkers](https://developer.akamai.com/akamai-edgeworkers-overview)\\n- [Career Ladder](https://career-ladders.dev) <span className=\\"text-secondary\\">by Sarah Drasner</span>\\n- [GitHub Actions](https://docs.github.com/en/actions)\\n- [Cloudflare](https://www.cloudflare.com/)\\n- [Domain Driven Design](https://en.wikipedia.org/wiki/Domain-driven_design)\\n- [Headspace](https://www.headspace.com/)\\n- [How Netflix Scales its API with GraphQL Federation (Part 1)](https://netflixtechblog.com/how-netflix-scales-its-api-with-graphql-federation-part-1-ae3557c187e2) <span className=\\"text-secondary\\">by Tejas Shikhare</span>\\n- [Huberman Lab](https://hubermanlab.com/)\\n- [Is High Quality Software Worth the Cost?](https://martinfowler.com/articles/is-quality-worth-cost.html) <span className=\\"text-secondary\\">by Martin Fowler</span>\\n- [JavaScript Allong\xe9, the \\"Six\\" Edition](https://leanpub.com/javascriptallongesix/read#leanpub-auto-about-the-author) <span className=\\"text-secondary\\">by Reg “raganwald” Braithwaite</span>\\n- [Learn Rust With Entirely Too Many Linked Lists](https://rust-unofficial.github.io/too-many-lists/)\\n- [Learning SEO – A Roadmap with Free Guides & Tools](https://learningseo.io)\\n- [Making Architecture Matter - Martin Fowler Keynote](https://youtu.be/DngAZyWMGR0) <span className=\\"text-secondary\\">by Martin Fowler</span>\\n- [Material Design](https://material.io)\\n- [Netflix Tech Blog](https://netflixtechblog.com)\\n- [OSI Model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/) <span className=\\"text-secondary\\">by Cloudflare</span>\\n- [Rust by Example](https://doc.rust-lang.org/stable/rust-by-example/)\\n- [Synthetic & Real User Monitoring Explained](https://www.catchpoint.com/guide-to-synthetic-monitoring/rum-vs-synthetic-monitoring) <span className=\\"text-secondary\\">by Catchpoint</span>\\n- [Tech at trivago](https://tech.trivago.com)\\n- [The Airbnb Tech Blog](https://medium.com/airbnb-engineering)\\n- [The System Design Primer](https://github.com/donnemartin/system-design-primer)\\n- [TC39 Proposals](https://github.com/tc39/proposals)\\n- [Uber Engineering](https://eng.uber.com)\\n- [V8](https://v8.dev)\\n- [WAI-ARIA basics](https://developer.mozilla.org/en-US/docs/Learn/Accessibility/WAI-ARIA_basics)\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\n\\nIf you find it useful, please share this article to help more people in their engineering journey.\\n\\nFeel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nMy previous article [\\"Binary Tree Insertion in Rust\\"](/articles/binary-tree-insertion-in-rust) shared my struggle when I was implementing a Binary Tree.\\nIt took me some time to have a grasp on Rust\'s ownership.\\n\\nIf you\'re interested in Unicode in Rust and JavaScript, I wrote an article [\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"](/articles/indexing-strings-in-rust-and-typescript).\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.\\n\\nIf you\'re interested in writing a CLI with TypeScript and implementing a real-world CLI application with Google Lighthouse integration, check out my previous article [\\"Writing Your Own TypeScript CLI\\"](/articles/writing-your-own-typescript-cli).\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var g=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),y=(i,n)=>{for(var r in n)o(i,r,{get:n[r],enumerable:!0})},s=(i,n,r,t)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let a of p(n))!w.call(i,a)&&a!==r&&o(i,a,{get:()=>n[a],enumerable:!(t=m(n,a))||t.enumerable});return i};var f=(i,n,r)=>(r=i!=null?d(u(i)):{},s(n||!i||!i.__esModule?o(r,\\"default\\",{value:i,enumerable:!0}):r,i)),b=i=>s(o({},\\"__esModule\\",{value:!0}),i);var h=g((C,l)=>{l.exports=_jsx_runtime});var v={};y(v,{default:()=>N,frontmatter:()=>k});var e=f(h()),k={title:\\"From Frontend Developer to Principal Software Engineer\\",publishedAt:\\"January 20, 2022\\",description:\\"I recently joined a European public company as a Lead Software Engineer. The role has a combined responsibility of Principal Software Engineer and Senior Engineering Manager. It is challenging but I was prepared. I want to share with you 50+ books and resources that help me in my journey.\\",cover:\\"/optimized/articles/frontend-developer-to-principal-engineer/hero.webp\\",category:\\"Leadership\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function c(i){let n=Object.assign({p:\\"p\\",h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",h3:\\"h3\\",blockquote:\\"blockquote\\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:`My journey is a bit of a bumpy one and full of learnings.\\nI\'m so grateful for the experience and the people that help me along the way.`}),`\\n`,(0,e.jsx)(n.p,{children:`I recently joined a European public company as a Lead Software Engineer.\\nThe role is part of the leadership model in the company with a responsibility of Principal Software Engineer and Senior Engineering Manager.\\nIt\'s as challenging as it sounds to shift from being an individual contributor to having a duo responsibility, but I was prepared.\\nI want to share all the resources that have a tremendous impact on my road to tech leadership with you.`}),`\\n`,(0,e.jsx)(n.p,{children:\\"My hope is that regardless of your background or where you are in your career, some of these resources here can help unblock you or offer you inspiration when you need them.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"people with bunny ears partying\\",children:\\"\\\\u{1F46F}\\"}),\\" Value relationships. Not just with others, but with yourself too.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\" Find your leadership style. It multiplies your impact.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"unicorn face\\",children:\\"\\\\u{1F984}\\"}),\\" Stay true to your craft. It\'s the cornerstone of your value proposition.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"This article is also available on\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://betterprogramming.pub/my-journey-from-frontend-developer-to-principal-software-engineer-61d86e88cb70\\",children:\\"Better Programming\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hackernoon.com/tech-career-stories-from-frontend-developer-to-principal-software-engineer\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"valuing-relationships\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#valuing-relationships\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Valuing Relationships\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Your relationship with yourself is as important, if not more, as your relationships with others.\\"}),`\\n`,(0,e.jsx)(n.p,{children:`After I found my center, I noticed a clarity to communicate authentically.\\nIt helps me discuss without arguing from ego, and provide candid feedback during 1:1s with my peers and talents.\\nI\'m able to form more meaningful relationships and communicate more effectively.`}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/frontend-developer-to-principal-engineer/books.webp\\",alt:\\"Some of the books at home\\",width:\\"100%\\",className:\\"rounded\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-books-that-helps-me-understand-myself\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-books-that-helps-me-understand-myself\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The books that helps me understand myself\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/12228097-the-chimp-paradox\\",children:\\"The Chimp Paradox: The Acclaimed Mind Management Programme to Help You Achieve Success, Confidence and Happiness\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Steve Peters\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/8520610-quiet\\",children:\\"Quiet\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Susan Cain\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/3228917-outliers\\",children:\\"Outliers: The Story of Success\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Malcolm Gladwell\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/27213329-grit\\",children:\\"Grit\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Angela Duckworth\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/25305085-how-champions-think\\",children:\\"How Champions Think: In Sports and in Life\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bob Rotella, and Bob Cullen (Contributor)\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/40745.Mindset\\",children:\\"Mindset: The New Psychology of Success\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Carol S. Dweck\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/13588356-daring-greatly\\",children:\\"Daring Greatly: How the Courage to Be Vulnerable Transforms the Way We Live, Love, Parent, and Lead\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bren\\\\xE9 Brown\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/10865206-the-willpower-instinct\\",children:\\"The Willpower Instinct: How Self-Control Works, Why It Matters, and What You Can Do to Get More of It\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Kelly McGonigal\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-books-that-helps-me-stay-consistent\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-books-that-helps-me-stay-consistent\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The books that helps me stay consistent\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/40121378-atomic-habits\\",children:\\"Atomic Habits: An Easy & Proven Way to Build Good Habits & Break Bad Ones\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by James Clear\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/27414493-the-headspace-guide-to-meditation-mindfulness\\",children:\\"The Headspace Guide to Meditation & Mindfulness\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Andy Puddicombe\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/22318578-the-life-changing-magic-of-tidying-up\\",children:\\"The Life-Changing Magic of Tidying Up: The Japanese Art of Decluttering and Organizing\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Marie Kond\\\\u014D\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/12609433-the-power-of-habit\\",children:\\"The Power of Habit: Why We Do What We Do in Life and Business\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Charles Duhigg\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/34466963-why-we-sleep\\",children:\\"Why We Sleep: Unlocking the Power of Sleep and Dreams\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Matthew Walker\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-resources-that-helps-me-stay-consistent\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-resources-that-helps-me-stay-consistent\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The resources that helps me stay consistent\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hubermanlab.com/\\",children:\\"Huberman Lab\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.headspace.com/\\",children:\\"Headspace\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-books-that-helps-me-forming-meaningful-relationship-with-others\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-books-that-helps-me-forming-meaningful-relationship-with-others\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The books that helps me forming meaningful relationship with others\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/12228097-the-chimp-paradox\\",children:\\"The Chimp Paradox: The Acclaimed Mind Management Programme to Help You Achieve Success, Confidence and Happiness\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Steve Peters\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/29939161-radical-candor\\",children:\\"Radical Candor: Be a Kickass Boss Without Losing Your Humanity\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Kim Malone Scott\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/13588356-daring-greatly\\",children:\\"Daring Greatly: How the Courage to Be Vulnerable Transforms the Way We Live, Love, Parent, and Lead\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bren\\\\xE9 Brown\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/23275060-15-commitments-of-conscious-leadership\\",children:\\"15 Commitments of Conscious Leadership\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Jim Dethmer, Diana Chapman, Kaley Warner Klemp\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"finding-your-style\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#finding-your-style\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Finding Your Style\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"It\'s important to think about your way of scaling your influence and impact.\\"}),`\\n`,(0,e.jsx)(n.p,{children:`I started off my leadership journey by helping a small but important project without a lead title.\\nI took care of the tedious work no one wanted to do like organizing documentations, taking meeting minutes, and following up on actions.\\nAs I got more years under my belt, I was involved in bigger projects.\\nMore teams, higher stakes, longer time budgets, higher complexities.\\nMy focus turned to how to empower all parties involved to iterate and deliver, and at the same time be helpful in alignment on tech excellence.`}),`\\n`,(0,e.jsx)(n.p,{children:`Tech leadership is not one size fits all to me at all.\\nI\'m not the most outspoken engineer.\\nI listen.\\nI\'m empathetic, thorough, and unwavering, and I believe my best work comes from solitude.`}),`\\n`,(0,e.jsx)(n.p,{children:\\"I have no doubt that you can be true to who you are and be an outstanding leader.\\"}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-books-that-helps-me-find-my-leadership-foundation\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-books-that-helps-me-find-my-leadership-foundation\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The books that helps me find my leadership foundation\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/23275060-15-commitments-of-conscious-leadership\\",children:\\"15 Commitments of Conscious Leadership\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Jim Dethmer, Diana Chapman, Kaley Warner Klemp\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/8520610-quiet\\",children:\\"Quiet\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Susan Cain\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/49099937-no-rules-rules\\",children:\\"No Rules Rules: Netflix and the Culture of Reinvention\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Reed Hastings, Erin Meyer\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/25957932-discover-your-true-north\\",children:\\"Discover Your True North\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bill George, David Gergen (Foreword)\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/23848190-extreme-ownership\\",children:\\"Extreme Ownership: How U.S. Navy SEALs Lead and Win\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Jocko Willink, Leif Babin\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/42118073-trillion-dollar-coach\\",children:\\"Trillion Dollar Coach: The Leadership Playbook of Silicon Valley\'s Bill Campbell\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Eric Schmidt, Jonathan Rosenberg, Alan Eagle\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/16256798-the-one-thing\\",children:\\"The One Thing: The Surprisingly Simple Truth Behind Extraordinary Results\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Gary Keller, Jay Papasan\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/34536488-principles\\",children:\\"Principles: Life and Work\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Ray Dalio\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/35249663-inspired?ac=1&from_search=true&qid=1o6CU5ZS61&rank=2\\",children:\\"Inspired: How to Create Tech Products Customers Love\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Marty Cagan\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"staying-true-to-craft\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#staying-true-to-craft\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Staying True to Craft\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[`It\'s clear to me that building a consistent product people love correlates a company culture that values tech excellence.\\nAri Balogh, CTO at Airbnb, wrote the article `,(0,e.jsx)(n.a,{href:\\"https://medium.com/airbnb-engineering/commitment-to-craft-e36d5a8efe2a\\",children:\'\\"Commitment to Craft\\"\'}),` and it captured my notion.\\nI believe the pursuit of craft not only facilitates an individual\'s lateral and vertical growth, but also equips a company\'s economic growth.`]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsxs)(n.p,{children:[\\"Always learning\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with sunglasses\\",children:\\"\\\\u{1F60E}\\"})]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"My curiosity took me on a wild ride in tech.\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"I started out wanting to make beautiful websites, and now I\'m building packages, release pipelines, API gateways and services, and CLI applications.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"I was trained to be an UX researcher, and now I\'m doing performance monitoring and optimization, SEO, CDN integration, and performance marketing.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"I was told that I wasn\'t good enough, and now I\'m mentoring, coaching, and sharing my learnings in the tech community.\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Commit to your craft.\\"}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-resources-about-web-architecture--infrastructure\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-resources-about-web-architecture--infrastructure\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The resources about web architecture & infrastructure\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://martinfowler.com/articles/is-quality-worth-cost.html\\",children:\\"Is High Quality Software Worth the Cost?\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Martin Fowler\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://medium.com/airbnb-engineering/commitment-to-craft-e36d5a8efe2a\\",children:\\"AirbnbEng: Commitment to Craft\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Domain-driven_design\\",children:\\"Domain Driven Design\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/\\",children:\\"OSI Model\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Cloudflare\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/54109255-system-design-interview-an-insider-s-guide\\",children:\\"System Design Interview \\\\u2013 An Insider\'s Guide\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Alex Xu\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://netflixtechblog.com\\",children:\\"Netflix Tech Blog\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://medium.com/airbnb-engineering\\",children:\\"The Airbnb Tech Blog\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://eng.uber.com\\",children:\\"Uber Engineering\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://tech.trivago.com\\",children:\\"Tech at trivago\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/donnemartin/system-design-primer\\",children:\\"The System Design Primer\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://youtu.be/DngAZyWMGR0\\",children:\\"Making Architecture Matter - Martin Fowler Keynote\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Martin Fowler\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://learningseo.io\\",children:\\"Learning SEO \\\\u2013 A Roadmap with Free Guides & Tools\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.akamai.com/akamai-edgeworkers-overview\\",children:\\"Akamai EdgeWorkers\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://docs.github.com/en/actions\\",children:\\"GitHub Actions\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.catchpoint.com/guide-to-synthetic-monitoring/rum-vs-synthetic-monitoring\\",children:\\"Synthetic & Real User Monitoring Explained\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Catchpoint\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://netflixtechblog.com/how-netflix-scales-its-api-with-graphql-federation-part-1-ae3557c187e2\\",children:\\"How Netflix Scales its API with GraphQL Federation (Part 1)\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Tejas Shikhare\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-resources-about-programming-languages\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-resources-about-programming-languages\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The resources about programming languages\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://leanpub.com/javascriptallongesix/read#leanpub-auto-about-the-author\\",children:\'JavaScript Allong\\\\xE9, the \\"Six\\" Edition\'}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Reg \\\\u201Craganwald\\\\u201D Braithwaite\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/tc39/proposals\\",children:\\"TC39 Proposals\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://v8.dev\\",children:\\"V8\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/\\",children:\\"The Rust Programming Language\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://rust-unofficial.github.io/too-many-lists/\\",children:\\"Learn Rust With Entirely Too Many Linked Lists\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/stable/rust-by-example/\\",children:\\"Rust by Example\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"the-resources-about-uiux\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-resources-about-uiux\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The resources about UI/UX\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://52weeksofux.com\\",children:\\"52 Weeks of UX\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://material.io\\",children:\\"Material Design\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Learn/Accessibility/WAI-ARIA_basics\\",children:\\"WAI-ARIA basics\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"final-thoughts\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,e.jsx)(n.p,{children:`The potential in tech is limitless.\\nSometimes your journey might be rough, but don\'t be discouraged.\\nThere are so many amazing wisdom in books and articles within your reach to help you accomplish your vision.`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s get it\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"})]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"references\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"books\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#books\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Books\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/23275060-15-commitments-of-conscious-leadership\\",children:\\"15 Commitments of Conscious Leadership\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Jim Dethmer, Diana Chapman, Kaley Warner Klemp\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/40121378-atomic-habits\\",children:\\"Atomic Habits: An Easy & Proven Way to Build Good Habits & Break Bad Ones\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by James Clear\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/13588356-daring-greatly\\",children:\\"Daring Greatly: How the Courage to Be Vulnerable Transforms the Way We Live, Love, Parent, and Lead\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bren\\\\xE9 Brown\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/25957932-discover-your-true-north\\",children:\\"Discover Your True North\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bill George, David Gergen (Foreword)\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/23848190-extreme-ownership\\",children:\\"Extreme Ownership: How U.S. Navy SEALs Lead and Win\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Jocko Willink, Leif Babin\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/27213329-grit\\",children:\\"Grit\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Angela Duckworth\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/25305085-how-champions-think\\",children:\\"How Champions Think: In Sports and in Life\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Bob Rotella, and Bob Cullen (Contributor)\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/35249663-inspired?ac=1&from_search=true&qid=1o6CU5ZS61&rank=2\\",children:\\"Inspired: How to Create Tech Products Customers Love\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Marty Cagan\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/40745.Mindset\\",children:\\"Mindset: The New Psychology of Success\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Carol S. Dweck\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/49099937-no-rules-rules\\",children:\\"No Rules Rules: Netflix and the Culture of Reinvention\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Reed Hastings, Erin Meyer\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/3228917-outliers\\",children:\\"Outliers: The Story of Success\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Malcolm Gladwell\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/53343.On_Writing_Well\\",children:\\"On Writing Well: The Classic Guide to Writing Nonfiction\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by William Zinsser\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/34536488-principles\\",children:\\"Principles: Life and Work\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Ray Dalio\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/8520610-quiet\\",children:\\"Quiet\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Susan Cain\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/29939161-radical-candor\\",children:\\"Radical Candor: Be a Kickass Boss Without Losing Your Humanity\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Kim Malone Scott\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/\\",children:\\"The Rust Programming Language\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Steve Klabnik, Carol Nichols, with contributions from the Rust Community\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/13525945-so-good-they-can-t-ignore-you\\",children:\\"So Good They Can\'t Ignore You: Why Skills Trump Passion in the Quest for Work You Love\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Cal Newport\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/54109255-system-design-interview-an-insider-s-guide\\",children:\\"System Design Interview \\\\u2013 An Insider\'s Guide\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Alex Xu\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/12228097-the-chimp-paradox\\",children:\\"The Chimp Paradox: The Acclaimed Mind Management Programme to Help You Achieve Success, Confidence and Happiness\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Steve Peters\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/27414493-the-headspace-guide-to-meditation-mindfulness\\",children:\\"The Headspace Guide to Meditation & Mindfulness\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Andy Puddicombe\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/22318578-the-life-changing-magic-of-tidying-up\\",children:\\"The Life-Changing Magic of Tidying Up: The Japanese Art of Decluttering and Organizing\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Marie Kond\\\\u014D\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/16256798-the-one-thing\\",children:\\"The One Thing: The Surprisingly Simple Truth Behind Extraordinary Results\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Gary Keller, Jay Papasan\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/12609433-the-power-of-habit\\",children:\\"The Power of Habit: Why We Do What We Do in Life and Business\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Charles Duhigg\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/12030438-the-start-up-of-you\\",children:\\"The Start-Up of You: Adapt to the Future, Invest in Yourself, and Transform Your Career\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Reid Hoffman, Ben Casnocha\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/10865206-the-willpower-instinct\\",children:\\"The Willpower Instinct: How Self-Control Works, Why It Matters, and What You Can Do to Get More of It\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Kelly McGonigal\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/42118073-trillion-dollar-coach\\",children:\\"Trillion Dollar Coach: The Leadership Playbook of Silicon Valley\'s Bill Campbell\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Eric Schmidt, Jonathan Rosenberg, Alan Eagle\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.goodreads.com/book/show/34466963-why-we-sleep\\",children:\\"Why We Sleep: Unlocking the Power of Sleep and Dreams\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Matthew Walker\\"})]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"online-resources\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#online-resources\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Online Resources\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://52weeksofux.com\\",children:\\"52 Weeks of UX\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://medium.com/airbnb-engineering/commitment-to-craft-e36d5a8efe2a\\",children:\\"AirbnbEng: Commitment to Craft\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.akamai.com/akamai-edgeworkers-overview\\",children:\\"Akamai EdgeWorkers\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://career-ladders.dev\\",children:\\"Career Ladder\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Sarah Drasner\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://docs.github.com/en/actions\\",children:\\"GitHub Actions\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.cloudflare.com/\\",children:\\"Cloudflare\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Domain-driven_design\\",children:\\"Domain Driven Design\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://www.headspace.com/\\",children:\\"Headspace\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://netflixtechblog.com/how-netflix-scales-its-api-with-graphql-federation-part-1-ae3557c187e2\\",children:\\"How Netflix Scales its API with GraphQL Federation (Part 1)\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Tejas Shikhare\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hubermanlab.com/\\",children:\\"Huberman Lab\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://martinfowler.com/articles/is-quality-worth-cost.html\\",children:\\"Is High Quality Software Worth the Cost?\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Martin Fowler\\"})]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://leanpub.com/javascriptallongesix/read#leanpub-auto-about-the-author\\",children:\'JavaScript Allong\\\\xE9, the \\"Six\\" Edition\'}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Reg \\\\u201Craganwald\\\\u201D Braithwaite\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://rust-unofficial.github.io/too-many-lists/\\",children:\\"Learn Rust With Entirely Too Many Linked Lists\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://learningseo.io\\",children:\\"Learning SEO \\\\u2013 A Roadmap with Free Guides & Tools\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://youtu.be/DngAZyWMGR0\\",children:\\"Making Architecture Matter - Martin Fowler Keynote\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Martin Fowler\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://material.io\\",children:\\"Material Design\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://netflixtechblog.com\\",children:\\"Netflix Tech Blog\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/\\",children:\\"OSI Model\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Cloudflare\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/stable/rust-by-example/\\",children:\\"Rust by Example\\"})}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\"https://www.catchpoint.com/guide-to-synthetic-monitoring/rum-vs-synthetic-monitoring\\",children:\\"Synthetic & Real User Monitoring Explained\\"}),\\" \\",(0,e.jsx)(\\"span\\",{className:\\"text-secondary\\",children:\\"by Catchpoint\\"})]}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://tech.trivago.com\\",children:\\"Tech at trivago\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://medium.com/airbnb-engineering\\",children:\\"The Airbnb Tech Blog\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/donnemartin/system-design-primer\\",children:\\"The System Design Primer\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/tc39/proposals\\",children:\\"TC39 Proposals\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://eng.uber.com\\",children:\\"Uber Engineering\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://v8.dev\\",children:\\"V8\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Learn/Accessibility/WAI-ARIA_basics\\",children:\\"WAI-ARIA basics\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"If you find it useful, please share this article to help more people in their engineering journey.\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"My previous article \\",(0,e.jsx)(n.a,{href:\\"/articles/binary-tree-insertion-in-rust\\",children:\'\\"Binary Tree Insertion in Rust\\"\'}),` shared my struggle when I was implementing a Binary Tree.\\nIt took me some time to have a grasp on Rust\'s ownership.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re interested in Unicode in Rust and JavaScript, I wrote an article \\",(0,e.jsx)(n.a,{href:\\"/articles/indexing-strings-in-rust-and-typescript\\",children:\'\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"\'}),`.\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re interested in writing a CLI with TypeScript and implementing a real-world CLI application with Google Lighthouse integration, check out my previous article \\",(0,e.jsx)(n.a,{href:\\"/articles/writing-your-own-typescript-cli\\",children:\'\\"Writing Your Own TypeScript CLI\\"\'}),\\".\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function x(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(c,i)})):c(i)}var N=x;return b(v);})();\\n;return Component;"},"_id":"articles/from-frontend-developer-to-principal-software-engineer.mdx","_raw":{"sourceFilePath":"articles/from-frontend-developer-to-principal-software-engineer.mdx","sourceFileName":"from-frontend-developer-to-principal-software-engineer.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/from-frontend-developer-to-principal-software-engineer"},"type":"Article","readingTime":{"text":"10 min read","minutes":9.805,"time":588300,"words":1961},"wordCount":1963,"slug":"from-frontend-developer-to-principal-software-engineer"},{"title":"How to Plan A Project as A Principal Software Engineer: A Human-centered Approach","publishedAt":"March 7, 2022","description":"Operating as a principal software engineer is all about bringing engineering, business, and people close together. There are many things to consider in terms of time budget, resources, and even your own involvement when it comes to planning. I want to share with you how I think about the important questions to ask in the planning phase of the project.","cover":"/optimized/articles/plan-as-principal-swe/hero.webp","category":"Leadership","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83D\uDC51 Shipping is queen.\\n- \uD83D\uDD2D Visualize and define success early on.\\n- \uD83E\uDD39 Don\'t forget to include performance monitoring and KPI analysis.\\n- \uD83C\uDFAF Principal engineer is a leadership role. Think about your involvement in the project.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/how-to-plan-projects-as-a-principal-software-engineer-1b1caefdf02c)\\n- [Hacker Noon](https://hackernoon.com/a-principal-software-engineers-guide-to-planning-projects-painlessly)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nFor me, operating as a principal software engineer is all about bringing engineering, business, and people close together.\\n\\n<img\\n  src=\\"/optimized/articles/plan-as-principal-swe/structure.webp\\"\\n  alt=\\"Principal engineer is about bringing engineering, business, and people together\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nUsually you\'re one of the first technical representatives in the organization to hear about a project as a principal engineer, and you need to make an internal dialog to either pursue or discard it. There are many things to consider in terms of time budget, resources, stakeholder communication, and even your own involvement when it comes to planning.\\n\\nSo I want to share with you how I think about planning as a principal engineer and what are the important questions to ask in the planning phase of the project.\\n\\n## Is It The Right Project?\\n\\nYou\'ll hear about the project in different maturities depending on how your organization normally generates business ideas. It could range from a observation of a potential user need to \\"we need it in three months\\". Regardless, a simplified train of thought looks like this:\\n\\n- Do or don\'t do?\\n- If \\"do\\", is it the right timing?\\n- What\'s the engineering complexity?\\n- How\'s the effort?\\n- Do we have the resources?\\n- Do or don\'t do?\\n\\nThere are many more factors. What I\'m suggesting is simply:\\n\\n> Follow your gut\uD83D\uDE0E\\n\\nUsually you\'ll have an intuition, an excitement or an energetic feeling, to say yes to the project. To develop the intuition over time, there are a few exercises I find very useful to formulate my engineering opinion:\\n\\n- Learn your industry and the competitive landscape.\\n- Learn your organization\'s strategy. (If you\'re like me not really knowing what \\"strategy\\" means in the business world, I highly recommend the book \\"[Playing to Win: How Strategy Really Works](https://www.goodreads.com/book/show/13586928-playing-to-win)\\" by A.G. Lafley and Roger L. Martin.)\\n- Align the project with organization\'s [OKR](https://rework.withgoogle.com/guides/set-goals-with-okrs/steps/introduction/)s.\\n- Talk to the designers about the user needs and pain points in their research.\\n- Talk to the project managers(PM) or product owners(PO) about the market research.\\n- Visualize your organization\'s project portfolio. Just by looking at it, you\'ll get a better sense of the balance between short term and long term commitments, team/project allocation, and buffer for adaption.\\n\\nIf you are not sure about how to prioritize it, you can work on a [Prioritization Matrix](https://www.nngroup.com/articles/prioritization-matrices/) with your team to figure out where the project stands. A Prioritization Matrix looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/plan-as-principal-swe/prioritization-matrix.webp\\"\\n  alt=\\"Prioritization matrix\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nNote that **Voting based on expertise** is critical in the process because it will reveal how people in different disciplines think about the importance and urgency of the projects. It\'s a invisible third axis of the matrix.\\n\\n## What Does Success Look Like?\\n\\nVisualizing what success looks like early on helps you in many ways:\\n\\n- Solidify your gut feeling about the project.\\n- Communicate the goal and alignment with OKRs to others more clearly.\\n- Design KPIs to measure the progress and impact.\\n\\nI like to use [Amazon\'s \\"Working Backwards\\" approach](https://www.quora.com/What-is-Amazons-approach-to-product-development-and-product-management/answer/Ian-McAllister) to put my thoughts in a **press release**. It is a great way to put people in the same frame of mind just by \\"seeing\\" what happens after the finish line.\\n\\nI use the press release as the starting point to invite conversations and consolidate the references to the documentations. Usually includes:\\n\\n- Project epics or overview.\\n- UI Design mockups.\\n- Engineering system designs.\\n- KPI analytics.\\n\\n## How to Ship It ASAP?\\n\\n> \\"Ship to learn.\\"\\n\\nIt became my guiding principle ever since I read about this quote. [GitHub](https://dev.to/mscccc/how-we-use-ship-small-to-rapidly-build-new-features-at-github-5cl9) shares the same idea in their leadership principles and I think the mindset is the foundation of lean and agile software development because it\'s:\\n\\n- human-centered and user-focused.\\n- powered by iterations of feedback and learning.\\n- measurable.\\n\\nI like to use [Design Thinking](https://www.nngroup.com/articles/design-thinking/) as a framework to think about the problems and how to iterate throughout the project. Combining with the press release and KPIs, it\'s a great way to validate your assumptions and stay in the course.\\n\\n[Design Sprint](https://www.gv.com/sprint/) is another great tool to crack a problem and kick start the exploration. Most importantly, it\'s fun\uD83E\uDD29\\n\\nWhen you\'re facing a complex project, make sure your system design proposals include alternatives that are simpler and quicker to build. It\'ll allow the teams to iterate faster.\\n\\nThe takeaway here is to really focus on **delivering the project to the users\' hands**, instead of implementing a complete solution.\\n\\n## What about KPI Analysis?\\n\\nIt\'s very useful to look at business KPIs and UX KPIs side by side to get a better sense of the data. It\'s important to dive into the analysis with PMs and designers to find out the direction of the next iteration.\\n\\nThere are a few basic concepts in statistics I learned that are useful to collaborate with Business Intelligence and Design teams.\\n\\n- [Permutation Testing](https://www.jwilber.me/permutationtest/)\\n- [p-value](https://en.wikipedia.org/wiki/P-value)\\n- [A/B Testing](https://www.optimizely.com/optimization-glossary/ab-testing/)\\n- [A/B/n Testing](https://www.optimizely.com/optimization-glossary/abn-testing/)\\n- [Multivariate testing](https://www.optimizely.com/optimization-glossary/multivariate-testing/)\\n- [Multi-armed bandit](https://www.optimizely.com/optimization-glossary/multi-armed-bandit/)\\n- [When To Do Multivariate Tests Instead of A/B/n Tests](https://cxl.com/blog/multivariate-tests/)\\n- [The Multi-Armed Bandit Problem and Its Solutions](https://lilianweng.github.io/posts/2018-01-23-multi-armed-bandit/)\\n\\n## Is Performance Monitoring in Place?\\n\\nTechnical performance is another opportunity to inject engineering context into discussions for the next iterations.\\n\\nIn general, there are [two types of monitoring](https://developer.mozilla.org/en-US/docs/Web/Performance/Rum-vs-Synthetic):\\n\\n- Real User Monitoring (RUM)\\n- Synthetic Monitoring\\n\\nRUM is about live data. It tells a story of real user behavior and how your system performs over time. Synthetic monitoring reports data of your system in a controlled environment so it\'s suitable for [static analysis](https://en.wikipedia.org/wiki/Static_program_analysis), [regressions testing](https://en.wikipedia.org/wiki/Regression_testing), and [performance testing](https://en.wikipedia.org/wiki/Software_performance_testing).\\n\\nHere are some useful tools for monitoring:\\n\\n- [Grafana](https://grafana.com)\\n- [Google Lighthouse](https://developers.google.com/web/tools/lighthouse)\\n- [autocannon](https://github.com/mcollina/autocannon)\\n- [Cypress](https://www.cypress.io)\\n- [K6](https://github.com/grafana/k6)\\n- [Performance API](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API)\\n- [Clinic.js](https://clinicjs.org)\\n\\n## Should I code as A Principal Software Engineer?\\n\\nI believe you should, but the bottom line is to empower engineers and make sure your involvement doesn\'t block or interfere the iterations.\\n\\nMany principal engineers have [different opinions and experiences](https://staffeng.com/guides/what-do-staff-engineers-actually-do) but I truly believe that if [coding is your craft](https://dawchihliou.github.io/articles/from-frontend-developer-to-principal-software-engineer#staying-true-to-craft) and you love it, you should code. The question is more about **when and where** you should be coding.\\n\\nMy [leadership coach](https://www.keyplay-consulting.com) introduced a model to me called [Situational Leadership](https://asana.com/resources/situational-leadership). I use it to think about my involvement in projects. It looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/plan-as-principal-swe/situational-leadership.webp\\"\\n  alt=\\"Situational leadership\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe model suggests that there are 4 types of leadership styles and you can fluidly choose the styles to lead based on the situations.\\n\\nFor situations of supporting and coaching, I think the best place and time to code are:\\n\\n- Prototyping.\\n- Hackathon.\\n- Tooling for developer experience.\\n- Data visualization.\\n\\nYour intention is to maintain a certain level of involvement and visibility to the projects to provide support when needed. The situations happens usually in important projects with a longer time frame. They are also the type of projects that you spend time on mentoring and sponsoring engineers.\\n\\nFor situations of directing, I think it\'s better not to code because you\'re highly invested in the direction of the project. You\'ll be doing a lot of analyses and communications. Hands-on work often distracts you from your focus.\\n\\n## Final Thoughts\\n\\nWe touched on the questions I find useful in planning:\\n\\n- Is it the right project?\\n- What does success look like?\\n- How to ship it ASAP?\\n- What about KPI analysis?\\n- Is performance monitoring in place?\\n- Should I code as a principal software engineer?\\n\\nIt\'s important to know that there\'s no specific order to these questions. You can think about them in different sequence depending on your situation.\\n\\n<img\\n  src=\\"/optimized/articles/plan-as-principal-swe/flow.webp\\"\\n  alt=\\"Situational leadership\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWhat\'s important is that at the end of the planning, you have a clear idea how to iterate through your assumptions and bring the project live to the users.\\n\\n## References\\n\\nArticles\\n\\n- [Amazon\'s Working Backwards approach - Quora](https://www.quora.com/What-is-Amazons-approach-to-product-development-and-product-management/answer/Ian-McAllister)\\n- [Amazon\'s Working Backwards Press Release Template and Example - Ian McAllister](https://www.linkedin.com/pulse/working-backwards-press-release-template-example-ian-mcallister/)\\n- [Design Thinking 101 - Nielsen Norman Group](https://www.nngroup.com/articles/design-thinking/)\\n- [Why Design Thinking Works - HBR](https://hbr.org/2018/09/why-design-thinking-works)\\n- [Design thinking, explained - MIT](https://mitsloan.mit.edu/ideas-made-to-matter/design-thinking-explained)\\n- [The Design Sprint - GV](https://www.gv.com/sprint/)\\n- [How we use \\"ship small\\" to rapidly build new features at GitHub - Dev Community](https://dev.to/mscccc/how-we-use-ship-small-to-rapidly-build-new-features-at-github-5cl9)\\n- [The Permutation Test: A Visual Explanation of Statistical Testing - Jared Wilber](https://www.jwilber.me/permutationtest/)\\n- [Multi-armed bandit - Optimizely](https://www.optimizely.com/optimization-glossary/multi-armed-bandit/)\\n- [The Multi-Armed Bandit Problem and Its Solutions - Lilian Weng](https://lilianweng.github.io/posts/2018-01-23-multi-armed-bandit/)\\n- [A/B Testing - Optimizely](https://www.optimizely.com/optimization-glossary/ab-testing/)\\n- [A/B/n Testing -Optimizely](https://www.optimizely.com/optimization-glossary/abn-testing/)\\n- [Multivariate testing - Optimizely](https://www.optimizely.com/optimization-glossary/multivariate-testing/)\\n- [When To Do Multivariate Tests Instead of A/B/n Tests - CXL](https://cxl.com/blog/multivariate-tests/)\\n- [p-value - Wikipedia](https://en.wikipedia.org/wiki/P-value)\\n- [Situational leadership: 4 styles and qualities](https://asana.com/resources/situational-leadership)\\n- [Real-time monitoring of Formula 1 telemetry data on Kubernetes with Grafana, Apache Kafka, and Strimzi - Paolo Patierno](https://grafana.com/blog/2021/02/02/real-time-monitoring-of-formula-1-telemetry-data-on-kubernetes-with-grafana-apache-kafka-and-strimzi/)\\n- [Set Goals with OKR - re:Work](https://rework.withgoogle.com/guides/set-goals-with-okrs/steps/introduction/)\\n- [Using Prioritization Matrices to Inform UX Decisions - Nielsen Norman Group](https://www.nngroup.com/articles/prioritization-matrices/)\\n- [What are objectives and key results (OKRs)? - asana](https://asana.com/resources/okr-meaning)\\n- [Objectives and Key Results (OKRs) - GitLab](https://about.gitlab.com/organization/okrs/)\\n- [What metrics and KPIs do the experts use to measure UX effectiveness? - UserZoom](https://www.userzoom.com/ux-library/what-metrics-and-kpis-do-the-experts-use-to-measure/)\\n- [Key Performance Indicators (KPIs) for Optimization](https://cxl.com/blog/key-performance-indicators-kpi/)\\n- [Engineering Function Performance Indicators - GitLab](https://about.gitlab.com/handbook/engineering/performance-indicators/)\\n- [Being Glue - Tanya Reilly](https://noidea.dog/glue)\\n- [What do Staff engineers actually do? - StaffEng](https://staffeng.com/guides/what-do-staff-engineers-actually-do)\\n- [Performance Monitoring: RUM vs synthetic monitoring - MDN](https://developer.mozilla.org/en-US/docs/Web/Performance/Rum-vs-Synthetic)\\n- [Software performance testing - Wikipedia](https://en.wikipedia.org/wiki/Software_performance_testing)\\n- [Performance Testing vs. Load Testing vs. Stress Testing - Blazemeter](https://www.blazemeter.com/blog/performance-testing-vs-load-testing-vs-stress-testing)\\n- [Everything You Need To Know About Stress Testing Your Software - DZone](https://dzone.com/articles/everything-you-need-to-know-about-stress-testing-y)\\n- [Regressions Testing - Wikipedia](https://en.wikipedia.org/wiki/Regression_testing)\\n- [Static Program Analysis - Wikipedia](https://en.wikipedia.org/wiki/Static_program_analysis)\\n- [From Frontend Developer to Principal Software Engineer - Daw-Chih Liou](https://dawchihliou.github.io/articles/from-frontend-developer-to-principal-software-engineer#staying-true-to-craft)\\n- [Time management - Wikipedia](https://en.wikipedia.org/wiki/Time_management)\\n\\nBooks\\n\\n- [Staff Engineer: Leadership beyond the management track - Will Larson](https://staffeng.com/book)\\n- [Playing to Win: How Strategy Really Works - A.G. Lafley, Roger L. Martin](https://www.goodreads.com/book/show/13586928-playing-to-win)\\n\\nTools\\n\\n- [Clinic.js](https://clinicjs.org)\\n- [autocannon - GitHub](https://github.com/mcollina/autocannon)\\n- [Performance API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API)\\n- [Cypress.io](https://www.cypress.io)\\n- [Testing Library](https://testing-library.com)\\n- [Grafana](https://grafana.com)\\n- [Google Lighthouse](https://developers.google.com/web/tools/lighthouse)\\n- [K6 - GitHub](https://github.com/grafana/k6)\\n\\n---\\n\\n\uD83D\uDCAC Comments on [Reddit](https://www.reddit.com/r/ExperiencedDevs/comments/ta22ua/whats_your_experience_in_the_staffprincipal/).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\n\\nIf you find it useful, please share this article to help more people in their engineering journey.\\n\\nFeel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nIf you\'re interested in shipping Static site with Next.js and MDX seamlessly, check out my latest article [\\"Building Better Next.js Static Sites with MDX and Contentlayer\\"](/articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer).\\n\\nIn my previous article [\\"From Frontend Developer to Principal Software Engineer\\"](/articles/from-frontend-developer-to-principal-software-engineer), I shared 50+ books and online resources that helped me in my engineering journey.\\n\\nIf you\'re interested in implementing Binary Trees in Rust, my previous article [\\"Binary Tree Insertion in Rust\\"](/articles/binary-tree-insertion-in-rust) shared my struggle when I was implementing a Binary Tree.\\nIt took me some time to have a grasp on Rust\'s ownership.\\n\\nIf you\'re interested in Unicode in Rust and JavaScript, I wrote an article [\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"](/articles/indexing-strings-in-rust-and-typescript).\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var t in e)a(n,t,{get:e[t],enumerable:!0})},l=(n,e,t,o)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let r of u(e))!m.call(n,r)&&r!==t&&a(n,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return n};var y=(n,e,t)=>(t=n!=null?d(g(n)):{},l(e||!n||!n.__esModule?a(t,\\"default\\",{value:n,enumerable:!0}):t,n)),b=n=>l(a({},\\"__esModule\\",{value:!0}),n);var h=f((T,s)=>{s.exports=_jsx_runtime});var z={};w(z,{default:()=>I,frontmatter:()=>k});var i=y(h()),k={title:\\"How to Plan A Project as A Principal Software Engineer: A Human-centered Approach\\",publishedAt:\\"March 7, 2022\\",description:\\"Operating as a principal software engineer is all about bringing engineering, business, and people close together. There are many things to consider in terms of time budget, resources, and even your own involvement when it comes to planning. I want to share with you how I think about the important questions to ask in the planning phase of the project.\\",cover:\\"/optimized/articles/plan-as-principal-swe/hero.webp\\",category:\\"Leadership\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function c(n){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",blockquote:\\"blockquote\\",strong:\\"strong\\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"crown\\",children:\\"\\\\u{1F451}\\"}),\\" Shipping is queen.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"telescope\\",children:\\"\\\\u{1F52D}\\"}),\\" Visualize and define success early on.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F939}\\"}),\\" Don\'t forget to include performance monitoring and KPI analysis.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"direct hit\\",children:\\"\\\\u{1F3AF}\\"}),\\" Principal engineer is a leadership role. Think about your involvement in the project.\\"]}),`\\n`]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://betterprogramming.pub/how-to-plan-projects-as-a-principal-software-engineer-1b1caefdf02c\\",children:\\"Better Programming\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://hackernoon.com/a-principal-software-engineers-guide-to-planning-projects-painlessly\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsx)(e.p,{children:\\"For me, operating as a principal software engineer is all about bringing engineering, business, and people close together.\\"}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/plan-as-principal-swe/structure.webp\\",alt:\\"Principal engineer is about bringing engineering, business, and people together\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"Usually you\'re one of the first technical representatives in the organization to hear about a project as a principal engineer, and you need to make an internal dialog to either pursue or discard it. There are many things to consider in terms of time budget, resources, stakeholder communication, and even your own involvement when it comes to planning.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"So I want to share with you how I think about planning as a principal engineer and what are the important questions to ask in the planning phase of the project.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"is-it-the-right-project\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#is-it-the-right-project\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Is It The Right Project?\\"]}),`\\n`,(0,i.jsx)(e.p,{children:`You\'ll hear about the project in different maturities depending on how your organization normally generates business ideas. It could range from a observation of a potential user need to \\"we need it in three months\\". Regardless, a simplified train of thought looks like this:`}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Do or don\'t do?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\'If \\"do\\", is it the right timing?\'}),`\\n`,(0,i.jsx)(e.li,{children:\\"What\'s the engineering complexity?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"How\'s the effort?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Do we have the resources?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Do or don\'t do?\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"There are many more factors. What I\'m suggesting is simply:\\"}),`\\n`,(0,i.jsxs)(e.blockquote,{children:[`\\n`,(0,i.jsxs)(e.p,{children:[\\"Follow your gut\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with sunglasses\\",children:\\"\\\\u{1F60E}\\"})]}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Usually you\'ll have an intuition, an excitement or an energetic feeling, to say yes to the project. To develop the intuition over time, there are a few exercises I find very useful to formulate my engineering opinion:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Learn your industry and the competitive landscape.\\"}),`\\n`,(0,i.jsxs)(e.li,{children:[`Learn your organization\'s strategy. (If you\'re like me not really knowing what \\"strategy\\" means in the business world, I highly recommend the book \\"`,(0,i.jsx)(e.a,{href:\\"https://www.goodreads.com/book/show/13586928-playing-to-win\\",children:\\"Playing to Win: How Strategy Really Works\\"}),\'\\" by A.G. Lafley and Roger L. Martin.)\']}),`\\n`,(0,i.jsxs)(e.li,{children:[\\"Align the project with organization\'s \\",(0,i.jsx)(e.a,{href:\\"https://rework.withgoogle.com/guides/set-goals-with-okrs/steps/introduction/\\",children:\\"OKR\\"}),\\"s.\\"]}),`\\n`,(0,i.jsx)(e.li,{children:\\"Talk to the designers about the user needs and pain points in their research.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Talk to the project managers(PM) or product owners(PO) about the market research.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Visualize your organization\'s project portfolio. Just by looking at it, you\'ll get a better sense of the balance between short term and long term commitments, team/project allocation, and buffer for adaption.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"If you are not sure about how to prioritize it, you can work on a \\",(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/prioritization-matrices/\\",children:\\"Prioritization Matrix\\"}),\\" with your team to figure out where the project stands. A Prioritization Matrix looks like this:\\"]}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/plan-as-principal-swe/prioritization-matrix.webp\\",alt:\\"Prioritization matrix\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Note that \\",(0,i.jsx)(e.strong,{children:\\"Voting based on expertise\\"}),\\" is critical in the process because it will reveal how people in different disciplines think about the importance and urgency of the projects. It\'s a invisible third axis of the matrix.\\"]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"what-does-success-look-like\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-does-success-look-like\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What Does Success Look Like?\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Visualizing what success looks like early on helps you in many ways:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Solidify your gut feeling about the project.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Communicate the goal and alignment with OKRs to others more clearly.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Design KPIs to measure the progress and impact.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"I like to use \\",(0,i.jsx)(e.a,{href:\\"https://www.quora.com/What-is-Amazons-approach-to-product-development-and-product-management/answer/Ian-McAllister\\",children:`Amazon\'s \\"Working Backwards\\" approach`}),\\" to put my thoughts in a \\",(0,i.jsx)(e.strong,{children:\\"press release\\"}),\'. It is a great way to put people in the same frame of mind just by \\"seeing\\" what happens after the finish line.\']}),`\\n`,(0,i.jsx)(e.p,{children:\\"I use the press release as the starting point to invite conversations and consolidate the references to the documentations. Usually includes:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Project epics or overview.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"UI Design mockups.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Engineering system designs.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"KPI analytics.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"how-to-ship-it-asap\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-to-ship-it-asap\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How to Ship It ASAP?\\"]}),`\\n`,(0,i.jsxs)(e.blockquote,{children:[`\\n`,(0,i.jsx)(e.p,{children:\'\\"Ship to learn.\\"\'}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"It became my guiding principle ever since I read about this quote. \\",(0,i.jsx)(e.a,{href:\\"https://dev.to/mscccc/how-we-use-ship-small-to-rapidly-build-new-features-at-github-5cl9\\",children:\\"GitHub\\"}),\\" shares the same idea in their leadership principles and I think the mindset is the foundation of lean and agile software development because it\'s:\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"human-centered and user-focused.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"powered by iterations of feedback and learning.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"measurable.\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"I like to use \\",(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/design-thinking/\\",children:\\"Design Thinking\\"}),\\" as a framework to think about the problems and how to iterate throughout the project. Combining with the press release and KPIs, it\'s a great way to validate your assumptions and stay in the course.\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:\\"https://www.gv.com/sprint/\\",children:\\"Design Sprint\\"}),\\" is another great tool to crack a problem and kick start the exploration. Most importantly, it\'s fun\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F929}\\"})]}),`\\n`,(0,i.jsx)(e.p,{children:\\"When you\'re facing a complex project, make sure your system design proposals include alternatives that are simpler and quicker to build. It\'ll allow the teams to iterate faster.\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"The takeaway here is to really focus on \\",(0,i.jsx)(e.strong,{children:\\"delivering the project to the users\' hands\\"}),\\", instead of implementing a complete solution.\\"]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"what-about-kpi-analysis\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-about-kpi-analysis\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What about KPI Analysis?\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"It\'s very useful to look at business KPIs and UX KPIs side by side to get a better sense of the data. It\'s important to dive into the analysis with PMs and designers to find out the direction of the next iteration.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"There are a few basic concepts in statistics I learned that are useful to collaborate with Business Intelligence and Design teams.\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.jwilber.me/permutationtest/\\",children:\\"Permutation Testing\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/P-value\\",children:\\"p-value\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/ab-testing/\\",children:\\"A/B Testing\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/abn-testing/\\",children:\\"A/B/n Testing\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/multivariate-testing/\\",children:\\"Multivariate testing\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/multi-armed-bandit/\\",children:\\"Multi-armed bandit\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://cxl.com/blog/multivariate-tests/\\",children:\\"When To Do Multivariate Tests Instead of A/B/n Tests\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://lilianweng.github.io/posts/2018-01-23-multi-armed-bandit/\\",children:\\"The Multi-Armed Bandit Problem and Its Solutions\\"})}),`\\n`]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"is-performance-monitoring-in-place\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#is-performance-monitoring-in-place\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Is Performance Monitoring in Place?\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Technical performance is another opportunity to inject engineering context into discussions for the next iterations.\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"In general, there are \\",(0,i.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/Performance/Rum-vs-Synthetic\\",children:\\"two types of monitoring\\"}),\\":\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Real User Monitoring (RUM)\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Synthetic Monitoring\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"RUM is about live data. It tells a story of real user behavior and how your system performs over time. Synthetic monitoring reports data of your system in a controlled environment so it\'s suitable for \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Static_program_analysis\\",children:\\"static analysis\\"}),\\", \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Regression_testing\\",children:\\"regressions testing\\"}),\\", and \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Software_performance_testing\\",children:\\"performance testing\\"}),\\".\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Here are some useful tools for monitoring:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://grafana.com\\",children:\\"Grafana\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://developers.google.com/web/tools/lighthouse\\",children:\\"Google Lighthouse\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://github.com/mcollina/autocannon\\",children:\\"autocannon\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.cypress.io\\",children:\\"Cypress\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://github.com/grafana/k6\\",children:\\"K6\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/Performance_API\\",children:\\"Performance API\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://clinicjs.org\\",children:\\"Clinic.js\\"})}),`\\n`]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"should-i-code-as-a-principal-software-engineer\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#should-i-code-as-a-principal-software-engineer\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Should I code as A Principal Software Engineer?\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"I believe you should, but the bottom line is to empower engineers and make sure your involvement doesn\'t block or interfere the iterations.\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Many principal engineers have \\",(0,i.jsx)(e.a,{href:\\"https://staffeng.com/guides/what-do-staff-engineers-actually-do\\",children:\\"different opinions and experiences\\"}),\\" but I truly believe that if \\",(0,i.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/from-frontend-developer-to-principal-software-engineer#staying-true-to-craft\\",children:\\"coding is your craft\\"}),\\" and you love it, you should code. The question is more about \\",(0,i.jsx)(e.strong,{children:\\"when and where\\"}),\\" you should be coding.\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"My \\",(0,i.jsx)(e.a,{href:\\"https://www.keyplay-consulting.com\\",children:\\"leadership coach\\"}),\\" introduced a model to me called \\",(0,i.jsx)(e.a,{href:\\"https://asana.com/resources/situational-leadership\\",children:\\"Situational Leadership\\"}),\\". I use it to think about my involvement in projects. It looks like this:\\"]}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/plan-as-principal-swe/situational-leadership.webp\\",alt:\\"Situational leadership\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"The model suggests that there are 4 types of leadership styles and you can fluidly choose the styles to lead based on the situations.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"For situations of supporting and coaching, I think the best place and time to code are:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Prototyping.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Hackathon.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Tooling for developer experience.\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Data visualization.\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Your intention is to maintain a certain level of involvement and visibility to the projects to provide support when needed. The situations happens usually in important projects with a longer time frame. They are also the type of projects that you spend time on mentoring and sponsoring engineers.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"For situations of directing, I think it\'s better not to code because you\'re highly invested in the direction of the project. You\'ll be doing a lot of analyses and communications. Hands-on work often distracts you from your focus.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"We touched on the questions I find useful in planning:\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Is it the right project?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"What does success look like?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"How to ship it ASAP?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"What about KPI analysis?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Is performance monitoring in place?\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Should I code as a principal software engineer?\\"}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"It\'s important to know that there\'s no specific order to these questions. You can think about them in different sequence depending on your situation.\\"}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/plan-as-principal-swe/flow.webp\\",alt:\\"Situational leadership\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"What\'s important is that at the end of the planning, you have a clear idea how to iterate through your assumptions and bring the project live to the users.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"references\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Articles\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.quora.com/What-is-Amazons-approach-to-product-development-and-product-management/answer/Ian-McAllister\\",children:\\"Amazon\'s Working Backwards approach - Quora\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.linkedin.com/pulse/working-backwards-press-release-template-example-ian-mcallister/\\",children:\\"Amazon\'s Working Backwards Press Release Template and Example - Ian McAllister\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/design-thinking/\\",children:\\"Design Thinking 101 - Nielsen Norman Group\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://hbr.org/2018/09/why-design-thinking-works\\",children:\\"Why Design Thinking Works - HBR\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://mitsloan.mit.edu/ideas-made-to-matter/design-thinking-explained\\",children:\\"Design thinking, explained - MIT\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.gv.com/sprint/\\",children:\\"The Design Sprint - GV\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://dev.to/mscccc/how-we-use-ship-small-to-rapidly-build-new-features-at-github-5cl9\\",children:\'How we use \\"ship small\\" to rapidly build new features at GitHub - Dev Community\'})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.jwilber.me/permutationtest/\\",children:\\"The Permutation Test: A Visual Explanation of Statistical Testing - Jared Wilber\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/multi-armed-bandit/\\",children:\\"Multi-armed bandit - Optimizely\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://lilianweng.github.io/posts/2018-01-23-multi-armed-bandit/\\",children:\\"The Multi-Armed Bandit Problem and Its Solutions - Lilian Weng\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/ab-testing/\\",children:\\"A/B Testing - Optimizely\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/abn-testing/\\",children:\\"A/B/n Testing -Optimizely\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.optimizely.com/optimization-glossary/multivariate-testing/\\",children:\\"Multivariate testing - Optimizely\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://cxl.com/blog/multivariate-tests/\\",children:\\"When To Do Multivariate Tests Instead of A/B/n Tests - CXL\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/P-value\\",children:\\"p-value - Wikipedia\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://asana.com/resources/situational-leadership\\",children:\\"Situational leadership: 4 styles and qualities\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://grafana.com/blog/2021/02/02/real-time-monitoring-of-formula-1-telemetry-data-on-kubernetes-with-grafana-apache-kafka-and-strimzi/\\",children:\\"Real-time monitoring of Formula 1 telemetry data on Kubernetes with Grafana, Apache Kafka, and Strimzi - Paolo Patierno\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://rework.withgoogle.com/guides/set-goals-with-okrs/steps/introduction/\\",children:\\"Set Goals with OKR - re:Work\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.nngroup.com/articles/prioritization-matrices/\\",children:\\"Using Prioritization Matrices to Inform UX Decisions - Nielsen Norman Group\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://asana.com/resources/okr-meaning\\",children:\\"What are objectives and key results (OKRs)? - asana\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://about.gitlab.com/organization/okrs/\\",children:\\"Objectives and Key Results (OKRs) - GitLab\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.userzoom.com/ux-library/what-metrics-and-kpis-do-the-experts-use-to-measure/\\",children:\\"What metrics and KPIs do the experts use to measure UX effectiveness? - UserZoom\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://cxl.com/blog/key-performance-indicators-kpi/\\",children:\\"Key Performance Indicators (KPIs) for Optimization\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://about.gitlab.com/handbook/engineering/performance-indicators/\\",children:\\"Engineering Function Performance Indicators - GitLab\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://noidea.dog/glue\\",children:\\"Being Glue - Tanya Reilly\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://staffeng.com/guides/what-do-staff-engineers-actually-do\\",children:\\"What do Staff engineers actually do? - StaffEng\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/Performance/Rum-vs-Synthetic\\",children:\\"Performance Monitoring: RUM vs synthetic monitoring - MDN\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Software_performance_testing\\",children:\\"Software performance testing - Wikipedia\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.blazemeter.com/blog/performance-testing-vs-load-testing-vs-stress-testing\\",children:\\"Performance Testing vs. Load Testing vs. Stress Testing - Blazemeter\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://dzone.com/articles/everything-you-need-to-know-about-stress-testing-y\\",children:\\"Everything You Need To Know About Stress Testing Your Software - DZone\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Regression_testing\\",children:\\"Regressions Testing - Wikipedia\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Static_program_analysis\\",children:\\"Static Program Analysis - Wikipedia\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/from-frontend-developer-to-principal-software-engineer#staying-true-to-craft\\",children:\\"From Frontend Developer to Principal Software Engineer - Daw-Chih Liou\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Time_management\\",children:\\"Time management - Wikipedia\\"})}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Books\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://staffeng.com/book\\",children:\\"Staff Engineer: Leadership beyond the management track - Will Larson\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.goodreads.com/book/show/13586928-playing-to-win\\",children:\\"Playing to Win: How Strategy Really Works - A.G. Lafley, Roger L. Martin\\"})}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Tools\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://clinicjs.org\\",children:\\"Clinic.js\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://github.com/mcollina/autocannon\\",children:\\"autocannon - GitHub\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/Performance_API\\",children:\\"Performance API - MDN\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://www.cypress.io\\",children:\\"Cypress.io\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://testing-library.com\\",children:\\"Testing Library\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://grafana.com\\",children:\\"Grafana\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://developers.google.com/web/tools/lighthouse\\",children:\\"Google Lighthouse\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://github.com/grafana/k6\\",children:\\"K6 - GitHub\\"})}),`\\n`]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" Comments on \\",(0,i.jsx)(e.a,{href:\\"https://www.reddit.com/r/ExperiencedDevs/comments/ta22ua/whats_your_experience_in_the_staffprincipal/\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"})]}),`\\n`,(0,i.jsx)(e.p,{children:\\"If you find it useful, please share this article to help more people in their engineering journey.\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Feel free to connect with me on \\",(0,i.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"If you\'re interested in shipping Static site with Next.js and MDX seamlessly, check out my latest article \\",(0,i.jsx)(e.a,{href:\\"/articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer\\",children:\'\\"Building Better Next.js Static Sites with MDX and Contentlayer\\"\'}),\\".\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"In my previous article \\",(0,i.jsx)(e.a,{href:\\"/articles/from-frontend-developer-to-principal-software-engineer\\",children:\'\\"From Frontend Developer to Principal Software Engineer\\"\'}),\\", I shared 50+ books and online resources that helped me in my engineering journey.\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"If you\'re interested in implementing Binary Trees in Rust, my previous article \\",(0,i.jsx)(e.a,{href:\\"/articles/binary-tree-insertion-in-rust\\",children:\'\\"Binary Tree Insertion in Rust\\"\'}),` shared my struggle when I was implementing a Binary Tree.\\nIt took me some time to have a grasp on Rust\'s ownership.`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"If you\'re interested in Unicode in Rust and JavaScript, I wrote an article \\",(0,i.jsx)(e.a,{href:\\"/articles/indexing-strings-in-rust-and-typescript\\",children:\'\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\"\'}),`.\\nThere we discussed how Rust and JavaScript handle strings with a classic algorithm.`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function v(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(c,n)})):c(n)}var I=v;return b(z);})();\\n;return Component;"},"_id":"articles/how-to-plan-a-project-as-a-principal-software-engineer.mdx","_raw":{"sourceFilePath":"articles/how-to-plan-a-project-as-a-principal-software-engineer.mdx","sourceFileName":"how-to-plan-a-project-as-a-principal-software-engineer.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/how-to-plan-a-project-as-a-principal-software-engineer"},"type":"Article","readingTime":{"text":"10 min read","minutes":9.375,"time":562500,"words":1875},"wordCount":1877,"slug":"how-to-plan-a-project-as-a-principal-software-engineer"},{"title":"How to Run A Tech Community in Your Company: An Ex-Principal Engineer’s Guide","publishedAt":"Mar 23, 2023","description":"5 easy steps to create a sustainable tech community in your company that everyone loves.","cover":"/optimized/articles/rust-guild/hero.webp","category":"Leadership","coverWidth":"1400","coverHeight":"700","body":{"raw":"\\n## In this article\\n\\n- \uD83C\uDF31 We’ll discuss the principles of founding a tech community in detail.\\n- \uD83D\uDD75️ We’ll see real examples of how I organize a Rust community.\\n- \uD83C\uDFCE️ You’ll get an open source template to jump start your community.\\n\\n---\\n\\nSix months ago, I started a tech community at [trivago][4], a [Nasdaq][5] company that helps more than 25 million travelers a month around the world find their stays.\\n\\nThe community is called the Rust Guild. It’s centered around [the Rust programming language][8]. Since its launch, I’ve received a tremendous amount of love and support. So in this article, I’ll share with you how I conceptualize, execute, and sustain a community so that you can run your own tech community in your organization.\\n\\nLet’s go.\\n\\n---\\n\\n## Find Your Core Value around People\\n\\nFirst thing to know about communities is that it’s all about the people.\\n\\nIt’s very easy to approach a tech community like it’s only about a piece of tech or a programming language. You might think offering a space where people can share information about tech is enough to attract developers to join and stick around, but it’s not. Many communities declined or eventually faded away because there were no engagements. They were boring.\\n\\nIn fact, tech or programming languages are just subjects. They are nothing more than topics in your exchange with your peers. So what tech community founders need to do before creating a community is to think about how the community can have an impact on developers.\\n\\nFor the Rust Guild, the community is built on the concept of **“Play. Learn. Share. Repeat.”**. We encourage everyone to share what they learned regardless of level of experience, job function, or department. It’s an inclusive space for learning together as a group. There’s no learning that’s too small. We want our community members to give talks about simple concepts in Rust, one line of code, or painful experience with the language. I believe that simple, tiny talks are seeds in someone else to learn and grow.\\n\\n## Get Help\\n\\nDon’t do it by yourself. It’s a bit much. There’s an operational side of communities:\\n\\n- Looking for speakers.\\n- Scheduling meet-ups.\\n- Engaging in Slack.\\n- Sending meet-up invitations.\\n- Moderating meet-ups.\\n- Collecting feedback.\\n- Communicating with legal teams if you’re inviting guest speakers.\\n- Coordinating with accounting teams for guest speakers’ expenses on on-site visits.\\n- Managing food and drinks for on-site meet-ups.\\n- Handling recordings and archives.\\n- Uploading signed agreements from guest speakers\\n\\nThe list goes on and on. It’s time consuming for just one person.\\n\\nA better way is to find people that can run your community with you from the jump. In the Rust Guild, I designed a few community roles:\\n\\n- Moderators: organize and moderate meet-ups. Currently it’s me.\\n- Coordinators: assist moderators with operations.\\n- Mentors: engage in discussions on Slack and provide technical guidance to members that have questions.\\n\\nIt’s also helpful to identify stakeholders and contact persons for:\\n\\n- **Company technology strategy and budget**: to explore framework and event opportunities.\\n- **Event organization: to help with space**, food and drinks for on-site events.\\n- **IT support**: to help with on-site events.\\n- **Legal agreement**: to draft agreements with guest speakers.\\n- **Expense reimbursement**: to handle guest speakers’ on-site visit.\\n\\nSo far we have 1 moderator, 1 coordinator, and 2 mentors that serve a community of 30 developers. You can expand the community roles according to your situation. The key is to find help to provide your community members with the best experience.\\n\\n## Write A Community Guideline\\n\\nNow that you have a core value and support group, time to write things down.\\n\\nIt helps you formulate an actionable community format and transform your raw concept into a sharable experience. It’s important to document the following aspects:\\n\\n- **The core value**: what is the expectation and code of conduct.\\n- **The format**: how do you want to structure the peer discussions and meet-ups.\\n- **The support channel**: where can the members find help and support.\\n\\nBy expressing the core value, you’re clarifying why your community exists and how the community members are expected to interact with each other. It gives a clear framework and mental model for the members and it attracts like minded developers to join. They help shape the future of the community.\\n\\nBy standardizing the format, you’re aligning the expectations. It’s not only helpful to the developers, but also benefits the moderators and coordinators to run the operations. It’s a stress reducer.\\n\\nBy communicating with the support channel, you’re creating a feedback loop . Needless to say, feedback culture is an essential component of a successful community when done right. It’s also very important for people outside of the community to contact the organizers.\\n\\nThe community guideline doesn’t have to be long. A one-pager will do. I’ll share the community guideline of the Rust Guild with you. You’re more than welcome to [use it as a template][3]:\\n\\n> # Rust Guild\\n>\\n> The Rust Guild centres around the principle of:\\n>\\n> ### Play. Learn. Share♻️.\\n>\\n> The company-wide community is for everyone who’s interested in the Rust language, regardless of your level of experience. We encourage you to try things and share your epic learnings. We welcome all kinds of topics about Rust. It could be a language feature you just learned, a passion project of yours, or a web framework you enjoyed working with, just to name a few. The goal is to learn collectively and provide a helpful community to offer support in your Rust journey.\\n>\\n> ## Guild Format\\n>\\n> | Title                 | Detail                                                                 |\\n> | :-------------------- | :--------------------------------------------------------------------- |\\n> | **Duration**          | 1 hour                                                                 |\\n> | **Frequency**         | Monthly                                                                |\\n> | **Agenda**            | 1x 25min Talk\uD83C\uDF99 + 10min Q&A,<br/> 1x 10min Lightning Talk⚡️ + 5min Q&A |\\n> | **Slack Channel**     | #guild-rust                                                            |\\n> | **Talk Submissions**  | [FORM]                                                                 |\\n> | **Scheduled Meetups** | [SCHEDULE]                                                             |\\n>\\n> ## Talk Topics\\n>\\n> We will open up the floor to talks, live coding, and learning sessions. The talk topics are not limited to your work at trivago. In fact, we encourage you to talk about your learning or work from OSS community, online resources, or courses. This is a great opportunity for you to share what you are passionate about to the community; so don’t miss out! You’re more than welcome to submit your talks and we can’t wait to hear from you.\\n>\\n> ## Code of Conduct\\n>\\n> The guild generally follows the [Code of Conduct of the Rust community][coc]. Some key points to note:\\n>\\n> 1. We are committed to providing a friendly, safe and welcoming environment for all, regardless of level of experience, gender identity and expression, sexual orientation, disability, personal appearance, body size, race, ethnicity, age, religion, nationality, or other similar characteristic.\\n> 2. Please avoid using overtly sexual aliases or other nicknames that might detract from a friendly, safe and welcoming environment for all.\\n> 3. Please be kind and courteous. There’s no need to be mean or rude.\\n> 4. Respect that people have differences of opinion and that every design or implementation choice carries a trade-off and numerous costs. There is seldom a right answer.\\n> 5. Please keep unstructured critique to a minimum. If you have solid ideas you want to experiment with, make a fork and see how it works.\\n> 6. Spamming, trolling, flaming, baiting or other attention-stealing behavior is not welcome.\\n>\\n> ## Community Mentors\\n>\\n> The Rust community mentors are the members in the guild who volunteer to help answer questions about the language, and provide guidance for people who just started on learning Rust.\\n>\\n> Currently our mentors are:\\n>\\n> - [MENTOR_NAME]\\n> - [MENTOR_NAME]\\n>\\n> We are looking for more Rust mentors in the community! If you’re interested in being a mentor, please contact [MODERATOR_NAME]. There\'s no hard requirement. As long as you:\\n>\\n> - enjoy teaching\\n> - love learning\\n> - are having fun coding & finding solutions in the language\\n> - are willing to spend a little portion of your working time answering Rust questions and direct developers to the right resources\\n>\\n> Then the community role is for you \uD83E\uDD80\\n>\\n> ## Contact\\n>\\n> - Moderator: [MODERATOR_NAME]\\n> - Coordinators: [COORDINATOR_NAME], [COORDINATOR_NAME]\\n> - Slack Channel: #guild-rust\\n>\\n> [coc]: https://www.rust-lang.org/policies/code-of-conduct\\n\\n## Don’t Cancel Meet-ups\\n\\nCanceling meet-ups diminishes your credibility and everyone’s commitment to the community.\\n\\nDevelopers want to engage in a community where they feel safe. It’s just like installing a package in your software. Before you commit to a library, you want to make sure it has enough stars, weekly downloads, and the maintainers are consistently responding to issues and discussions. Same for communities, you as community founders and coordinators want to establish your commitment by keeping a regular schedule according to your community guideline. You can structure your schedule with breaks upfront, but try not to cancel events.\\n\\nWhat if there’s no speakers for a meet-up? Be creative. There’re many ways you can make it happen:\\n\\n- Turn it into a live coding session where developers work on a piece of code together and share knowledge.\\n- Turn it into a storytelling session where developers share painful or funny stories with the tech.\\n- Turn it into a tech cinema session where you watch a course or online talk together.\\n- You can jump in and give a talk.\\n\\nBe creative. Have fun with it. Show your commitment.\\n\\n## Create A Wow Moment\\n\\nIt’s nice to surprise your community with something cool once in a while. It helps rejuvenate developers’ interest in the community and make them feel that they’re part of something cool and eventful.\\n\\nIn the Rust Guild, we invite guest speakers. So far, we were very honored to have:\\n\\n- [Tobias Koppers][1]: creator of [Turbopack][6]\\n- [Miško Hevery][2]: creator of [Qwik][7]\\n\\nto talk to us about their innovations and experiences working with Rust.\\n\\n<img\\n  src=\\"/optimized/articles/rust-guild/speakers.webp\\"\\n  alt=\\"Guest speakers at the Rust Guild\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe wow moments we designed were very well aligned with our core values. The guest speakers shared the learnings from what they’ve built. The community members got a chance to immerse themselves in the learning experiences from different fields and applications of the Rust programming language. I want to use these special moments to spark the interests in learning and experimenting.\\n\\nRegardless of the outcome of the learning, we had fun playing, learning, sharing, and repeating the process as a group.\\n\\n## References\\n\\n- [Tobias Koppers][1] - Twitter\\n- [Miško Hevery][2] - Twitter\\n- [DawChihLiou/community-guideline.md][3] - GitHub\\n- [trivago][4] - trivago.com\\n- [Nasdaq][5] - Nasdaq.com\\n- [Turbo][6] - Vercel\\n- [Qwik][7] - builder.io\\n- [Rust][8] - rust-lang.org\\n\\n[1]: https://twitter.com/wSokra\\n[2]: https://twitter.com/mhevery\\n[3]: https://gist.github.com/DawChihLiou/c9153ba91a3bd7d4b163481b05553756\\n[4]: https://www.trivago.com\\n[5]: https://www.nasdaq.com\\n[6]: https://turbo.build\\n[7]: https://qwik.builder.io\\n[8]: https://www.rust-lang.org\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭️ Ready for the next article? \uD83D\uDC49 [**WASM Semantic Search in Rust**](/articles/wasm-semantic-search-in-rust)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),y=(i,e)=>{for(var t in e)o(i,t,{get:e[t],enumerable:!0})},l=(i,e,t,a)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let r of m(e))!g.call(i,r)&&r!==t&&o(i,r,{get:()=>e[r],enumerable:!(a=u(e,r))||a.enumerable});return i};var w=(i,e,t)=>(t=i!=null?d(p(i)):{},l(e||!i||!i.__esModule?o(t,\\"default\\",{value:i,enumerable:!0}):t,i)),b=i=>l(o({},\\"__esModule\\",{value:!0}),i);var c=f((R,s)=>{s.exports=_jsx_runtime});var N={};y(N,{default:()=>T,frontmatter:()=>k});var n=w(c()),k={title:\\"How to Run A Tech Community in Your Company: An Ex-Principal Engineer\\\\u2019s Guide\\",publishedAt:\\"Mar 23, 2023\\",description:\\"5 easy steps to create a sustainable tech community in your company that everyone loves.\\",cover:\\"/optimized/articles/rust-guild/hero.webp\\",category:\\"Leadership\\",coverWidth:\\"1400\\",coverHeight:\\"700\\"};function h(i){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",blockquote:\\"blockquote\\",h1:\\"h1\\",h3:\\"h3\\",table:\\"table\\",thead:\\"thead\\",tr:\\"tr\\",th:\\"th\\",tbody:\\"tbody\\",td:\\"td\\",ol:\\"ol\\"},i.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"in-this-article\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#in-this-article\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"In this article\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"seedling\\",children:\\"\\\\u{1F331}\\"}),\\" We\\\\u2019ll discuss the principles of founding a tech community in detail.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F575}\\\\uFE0F\\"}),\\" We\\\\u2019ll see real examples of how I organize a Rust community.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F3CE}\\\\uFE0F\\"}),\\" You\\\\u2019ll get an open source template to jump start your community.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Six months ago, I started a tech community at \\",(0,n.jsx)(e.a,{href:\\"https://www.trivago.com\\",children:\\"trivago\\"}),\\", a \\",(0,n.jsx)(e.a,{href:\\"https://www.nasdaq.com\\",children:\\"Nasdaq\\"}),\\" company that helps more than 25 million travelers a month around the world find their stays.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The community is called the Rust Guild. It\\\\u2019s centered around \\",(0,n.jsx)(e.a,{href:\\"https://www.rust-lang.org\\",children:\\"the Rust programming language\\"}),\\". Since its launch, I\\\\u2019ve received a tremendous amount of love and support. So in this article, I\\\\u2019ll share with you how I conceptualize, execute, and sustain a community so that you can run your own tech community in your organization.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\\\\u2019s go.\\"}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"find-your-core-value-around-people\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#find-your-core-value-around-people\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Find Your Core Value around People\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"First thing to know about communities is that it\\\\u2019s all about the people.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"It\\\\u2019s very easy to approach a tech community like it\\\\u2019s only about a piece of tech or a programming language. You might think offering a space where people can share information about tech is enough to attract developers to join and stick around, but it\\\\u2019s not. Many communities declined or eventually faded away because there were no engagements. They were boring.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"In fact, tech or programming languages are just subjects. They are nothing more than topics in your exchange with your peers. So what tech community founders need to do before creating a community is to think about how the community can have an impact on developers.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"For the Rust Guild, the community is built on the concept of \\",(0,n.jsx)(e.strong,{children:\\"\\\\u201CPlay. Learn. Share. Repeat.\\\\u201D\\"}),\\". We encourage everyone to share what they learned regardless of level of experience, job function, or department. It\\\\u2019s an inclusive space for learning together as a group. There\\\\u2019s no learning that\\\\u2019s too small. We want our community members to give talks about simple concepts in Rust, one line of code, or painful experience with the language. I believe that simple, tiny talks are seeds in someone else to learn and grow.\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"get-help\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#get-help\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Get Help\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Don\\\\u2019t do it by yourself. It\\\\u2019s a bit much. There\\\\u2019s an operational side of communities:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Looking for speakers.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Scheduling meet-ups.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Engaging in Slack.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Sending meet-up invitations.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Moderating meet-ups.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Collecting feedback.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Communicating with legal teams if you\\\\u2019re inviting guest speakers.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Coordinating with accounting teams for guest speakers\\\\u2019 expenses on on-site visits.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Managing food and drinks for on-site meet-ups.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Handling recordings and archives.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Uploading signed agreements from guest speakers\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The list goes on and on. It\\\\u2019s time consuming for just one person.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"A better way is to find people that can run your community with you from the jump. In the Rust Guild, I designed a few community roles:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Moderators: organize and moderate meet-ups. Currently it\\\\u2019s me.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Coordinators: assist moderators with operations.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Mentors: engage in discussions on Slack and provide technical guidance to members that have questions.\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"It\\\\u2019s also helpful to identify stakeholders and contact persons for:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"Company technology strategy and budget\\"}),\\": to explore framework and event opportunities.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"Event organization: to help with space\\"}),\\", food and drinks for on-site events.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"IT support\\"}),\\": to help with on-site events.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"Legal agreement\\"}),\\": to draft agreements with guest speakers.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"Expense reimbursement\\"}),\\": to handle guest speakers\\\\u2019 on-site visit.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"So far we have 1 moderator, 1 coordinator, and 2 mentors that serve a community of 30 developers. You can expand the community roles according to your situation. The key is to find help to provide your community members with the best experience.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"write-a-community-guideline\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#write-a-community-guideline\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Write A Community Guideline\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now that you have a core value and support group, time to write things down.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"It helps you formulate an actionable community format and transform your raw concept into a sharable experience. It\\\\u2019s important to document the following aspects:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"The core value\\"}),\\": what is the expectation and code of conduct.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"The format\\"}),\\": how do you want to structure the peer discussions and meet-ups.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"The support channel\\"}),\\": where can the members find help and support.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"By expressing the core value, you\\\\u2019re clarifying why your community exists and how the community members are expected to interact with each other. It gives a clear framework and mental model for the members and it attracts like minded developers to join. They help shape the future of the community.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"By standardizing the format, you\\\\u2019re aligning the expectations. It\\\\u2019s not only helpful to the developers, but also benefits the moderators and coordinators to run the operations. It\\\\u2019s a stress reducer.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"By communicating with the support channel, you\\\\u2019re creating a feedback loop . Needless to say, feedback culture is an essential component of a successful community when done right. It\\\\u2019s also very important for people outside of the community to contact the organizers.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The community guideline doesn\\\\u2019t have to be long. A one-pager will do. I\\\\u2019ll share the community guideline of the Rust Guild with you. You\\\\u2019re more than welcome to \\",(0,n.jsx)(e.a,{href:\\"https://gist.github.com/DawChihLiou/c9153ba91a3bd7d4b163481b05553756\\",children:\\"use it as a template\\"}),\\":\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.h1,{id:\\"rust-guild\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#rust-guild\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Rust Guild\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The Rust Guild centres around the principle of:\\"}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"play-learn-share\\\\uFE0F\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#play-learn-share\\\\uFE0F\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Play. Learn. Share\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"recycling symbol\\",children:\\"\\\\u267B\\\\uFE0F\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The company-wide community is for everyone who\\\\u2019s interested in the Rust language, regardless of your level of experience. We encourage you to try things and share your epic learnings. We welcome all kinds of topics about Rust. It could be a language feature you just learned, a passion project of yours, or a web framework you enjoyed working with, just to name a few. The goal is to learn collectively and provide a helpful community to offer support in your Rust journey.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"guild-format\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#guild-format\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Guild Format\\"]}),`\\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{align:\\"left\\",children:\\"Title\\"}),(0,n.jsx)(e.th,{align:\\"left\\",children:\\"Detail\\"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\\"left\\",children:(0,n.jsx)(e.strong,{children:\\"Duration\\"})}),(0,n.jsx)(e.td,{align:\\"left\\",children:\\"1 hour\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\\"left\\",children:(0,n.jsx)(e.strong,{children:\\"Frequency\\"})}),(0,n.jsx)(e.td,{align:\\"left\\",children:\\"Monthly\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\\"left\\",children:(0,n.jsx)(e.strong,{children:\\"Agenda\\"})}),(0,n.jsxs)(e.td,{align:\\"left\\",children:[\\"1x 25min Talk\\\\u{1F399} + 10min Q&A,\\",(0,n.jsx)(\\"br\\",{}),\\" 1x 10min Lightning Talk\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u26A1\\"}),\\"\\\\uFE0F + 5min Q&A\\"]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\\"left\\",children:(0,n.jsx)(e.strong,{children:\\"Slack Channel\\"})}),(0,n.jsx)(e.td,{align:\\"left\\",children:\\"#guild-rust\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\\"left\\",children:(0,n.jsx)(e.strong,{children:\\"Talk Submissions\\"})}),(0,n.jsx)(e.td,{align:\\"left\\",children:\\"[FORM]\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{align:\\"left\\",children:(0,n.jsx)(e.strong,{children:\\"Scheduled Meetups\\"})}),(0,n.jsx)(e.td,{align:\\"left\\",children:\\"[SCHEDULE]\\"})]})]})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"talk-topics\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#talk-topics\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Talk Topics\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We will open up the floor to talks, live coding, and learning sessions. The talk topics are not limited to your work at trivago. In fact, we encourage you to talk about your learning or work from OSS community, online resources, or courses. This is a great opportunity for you to share what you are passionate about to the community; so don\\\\u2019t miss out! You\\\\u2019re more than welcome to submit your talks and we can\\\\u2019t wait to hear from you.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"code-of-conduct\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#code-of-conduct\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Code of Conduct\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The guild generally follows the \\",(0,n.jsx)(e.a,{href:\\"https://www.rust-lang.org/policies/code-of-conduct\\",children:\\"Code of Conduct of the Rust community\\"}),\\". Some key points to note:\\"]}),`\\n`,(0,n.jsxs)(e.ol,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"We are committed to providing a friendly, safe and welcoming environment for all, regardless of level of experience, gender identity and expression, sexual orientation, disability, personal appearance, body size, race, ethnicity, age, religion, nationality, or other similar characteristic.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Please avoid using overtly sexual aliases or other nicknames that might detract from a friendly, safe and welcoming environment for all.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Please be kind and courteous. There\\\\u2019s no need to be mean or rude.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Respect that people have differences of opinion and that every design or implementation choice carries a trade-off and numerous costs. There is seldom a right answer.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Please keep unstructured critique to a minimum. If you have solid ideas you want to experiment with, make a fork and see how it works.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Spamming, trolling, flaming, baiting or other attention-stealing behavior is not welcome.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"community-mentors\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#community-mentors\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Community Mentors\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The Rust community mentors are the members in the guild who volunteer to help answer questions about the language, and provide guidance for people who just started on learning Rust.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Currently our mentors are:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"[MENTOR_NAME]\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"[MENTOR_NAME]\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We are looking for more Rust mentors in the community! If you\\\\u2019re interested in being a mentor, please contact [MODERATOR_NAME]. There\'s no hard requirement. As long as you:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"enjoy teaching\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"love learning\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"are having fun coding & finding solutions in the language\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"are willing to spend a little portion of your working time answering Rust questions and direct developers to the right resources\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Then the community role is for you \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"crab\\",children:\\"\\\\u{1F980}\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"contact\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#contact\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Contact\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Moderator: [MODERATOR_NAME]\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Coordinators: [COORDINATOR_NAME], [COORDINATOR_NAME]\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Slack Channel: #guild-rust\\"}),`\\n`]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"dont-cancel-meet-ups\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#dont-cancel-meet-ups\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Don\\\\u2019t Cancel Meet-ups\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Canceling meet-ups diminishes your credibility and everyone\\\\u2019s commitment to the community.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Developers want to engage in a community where they feel safe. It\\\\u2019s just like installing a package in your software. Before you commit to a library, you want to make sure it has enough stars, weekly downloads, and the maintainers are consistently responding to issues and discussions. Same for communities, you as community founders and coordinators want to establish your commitment by keeping a regular schedule according to your community guideline. You can structure your schedule with breaks upfront, but try not to cancel events.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"What if there\\\\u2019s no speakers for a meet-up? Be creative. There\\\\u2019re many ways you can make it happen:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Turn it into a live coding session where developers work on a piece of code together and share knowledge.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Turn it into a storytelling session where developers share painful or funny stories with the tech.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Turn it into a tech cinema session where you watch a course or online talk together.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"You can jump in and give a talk.\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Be creative. Have fun with it. Show your commitment.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"create-a-wow-moment\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#create-a-wow-moment\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Create A Wow Moment\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"It\\\\u2019s nice to surprise your community with something cool once in a while. It helps rejuvenate developers\\\\u2019 interest in the community and make them feel that they\\\\u2019re part of something cool and eventful.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"In the Rust Guild, we invite guest speakers. So far, we were very honored to have:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://twitter.com/wSokra\\",children:\\"Tobias Koppers\\"}),\\": creator of \\",(0,n.jsx)(e.a,{href:\\"https://turbo.build\\",children:\\"Turbopack\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://twitter.com/mhevery\\",children:\\"Mi\\\\u0161ko Hevery\\"}),\\": creator of \\",(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io\\",children:\\"Qwik\\"})]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"to talk to us about their innovations and experiences working with Rust.\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/rust-guild/speakers.webp\\",alt:\\"Guest speakers at the Rust Guild\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The wow moments we designed were very well aligned with our core values. The guest speakers shared the learnings from what they\\\\u2019ve built. The community members got a chance to immerse themselves in the learning experiences from different fields and applications of the Rust programming language. I want to use these special moments to spark the interests in learning and experimenting.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Regardless of the outcome of the learning, we had fun playing, learning, sharing, and repeating the process as a group.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://twitter.com/wSokra\\",children:\\"Tobias Koppers\\"}),\\" - Twitter\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://twitter.com/mhevery\\",children:\\"Mi\\\\u0161ko Hevery\\"}),\\" - Twitter\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://gist.github.com/DawChihLiou/c9153ba91a3bd7d4b163481b05553756\\",children:\\"DawChihLiou/community-guideline.md\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.trivago.com\\",children:\\"trivago\\"}),\\" - trivago.com\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.nasdaq.com\\",children:\\"Nasdaq\\"}),\\" - Nasdaq.com\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://turbo.build\\",children:\\"Turbo\\"}),\\" - Vercel\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io\\",children:\\"Qwik\\"}),\\" - builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.rust-lang.org\\",children:\\"Rust\\"}),\\" - rust-lang.org\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u23ED\\\\uFE0F\\"}),\\" Ready for the next article? \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,n.jsx)(e.a,{href:\\"/articles/wasm-semantic-search-in-rust\\",children:(0,n.jsx)(e.strong,{children:\\"WASM Semantic Search in Rust\\"})})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function v(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,Object.assign({},i,{children:(0,n.jsx)(h,i)})):h(i)}var T=v;return b(N);})();\\n;return Component;"},"_id":"articles/how-to-run-a-tech-community-in-your-company.mdx","_raw":{"sourceFilePath":"articles/how-to-run-a-tech-community-in-your-company.mdx","sourceFileName":"how-to-run-a-tech-community-in-your-company.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/how-to-run-a-tech-community-in-your-company"},"type":"Article","readingTime":{"text":"10 min read","minutes":9.445,"time":566700,"words":1889},"wordCount":1891,"slug":"how-to-run-a-tech-community-in-your-company"},{"title":"I Built A Snappy Static Full-text Search with WebAssembly, Rust, Next.js, and Xor Filters","publishedAt":"March 30, 2022","description":"After migrating to Contentlayer, I started exploring how to use the content data to roll out a search feature for my portfolio. Inspired by some of the amazing open-source projects, I built my own full-text search engine in Rust and WebAssembly. It is fast, lightweight, and tons of fun to build!","cover":"/optimized/articles/wasm-fulltext-search/hero.webp","category":"Rust","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83E\uDD80 There is a rich toolkit for developing WebAssembly with Rust. It\'s fun!\\n- \uD83E\uDD1D WebAssembly and Next.js play fairly well together, but be aware of the known issues.\\n- \uD83E\uDDD1‍\uD83D\uDD2C Xor filters are data structures that provides great memory efficiency and fast lookup for value existence.\\n- \uD83E\uDDD1‍\uD83C\uDF73 WebAssembly\'s performance and code size is not guaranteed. Make sure to measure and benchmark.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/i-built-a-snappy-static-full-text-search-with-webassembly-rust-next-js-and-xor-filters-a21a4824832e)\\n- [Hacker Noon](https://hackernoon.com/static-full-text-search-in-nextjs-with-webassembly-rust-and-xor-filters-tldr)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nI always knew I wanted a full-text search feature for the articles in my [portfolio](https://dawchihliou.github.io) to provide the visitors with a quick access to the content they are interested in. After [migrating to Contentlayer](https://dawchihliou.github.io/articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer), it doesn\'t seemed to be so far-fetched anymore. So I started exploring\uD83D\uDE80\\n\\n## Inspired by `tinysearch`: A WebAssembly Full-text Search Engine\\n\\nAfter some researching, I found a search engine called [`tinysearch`](https://github.com/tinysearch/tinysearch). It\'s a static search engine built with [Rust](https://www.rust-lang.org) and [WebAssembly](https://webassembly.org) (Wasm). The author Matthias Endler wrote [an amazing blog post](https://endler.dev/2019/tinysearch) about how `tinysearch` came about.\\n\\nI loved the idea of constructing a minimalistic search engine at build time and shipping it in optimized low-level code to the browsers. So I decided to use `tinysearch` as the blueprint and write my own search engine to integrate with my [Next.js static site](https://nextjs.org/).\\n\\n_I highly recommend reading [`tinysearch`\'s codebase](https://github.com/tinysearch/tinysearch). It\'s very well-written. My search engine\'s implementation is a simplified version of it. The core logic is the same._\\n\\n## What Does The Search Feature Looks Like?\\n\\n<img\\n  src=\\"/articles/wasm-fulltext-search/recording.gif\\"\\n  alt=\\"Search demo\\"\\n  width=\\"auto\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nVery simple:\\n\\n- Users type anything in the search input.\\n- Search engine searches the key words in all the contents and finds the most relevant articles.\\n- UI displays a ranked search result list.\\n\\nYou can try out the search function at the [Articles page](/articles)!\\n\\n## A Little Bit of Stats\\n\\nAt the time of writing this article, there are:\\n\\n- 7 articles (more to come\uD83D\uDE80)\\n- 13,925 words\\n- 682KB of data files (generated by Contentlayer)\\n\\n> For the full-text search to work for static sites that are priming for speed, the code size has to be small.\\n\\n## How Does WebAssembly Full-text Search Function Work?\\n\\nMost of the [modern browsers now support WebAssembly](https://caniuse.com/?search=webassembly). They are able to run native WebAssembly code and binary alongside JavaScript.\\n\\nThe concept for the search function is straightforward. It takes in a query string as parameter. In the function, we tokenize the query into search terms. We then give a ranking score to each article based on how many search terms does it contain. Finally, we rank the articles by relevancy. The higher the score, the more relevant it is.\\n\\nThe flow looks like this:\\n\\n```bash\\n+--------------+               +--------------+\\n|              |               |              |\\n| Query String | - tokenize -> | Search Terms |\\n|              |               |              |\\n+--------------+               +--------------+\\n                                      |\\n+--------------+                      |      +-----------------------+           +-----------------------+              +--------------+\\n|              |                      |      |                       |           |                       |              |              |\\n| Vec<Article> | ------------------ score -> | Vec<(Article, Score)> | - rank -> | Vec<(Article, Score)> | - take(n) -> | Vec<Article> |\\n|              |                             |                       |           |                       |              |              |\\n+--------------+                             +-----------------------+           +-----------------------+              +--------------+\\n\\n```\\n\\nScoring the articles is where the most computing comes in. A naive approach would be transforming each article into a hash set that contains all the unique words in the article. We can calculate the score by simply counting how many search terms are in the hash set.\\n\\nYou can image that this is not the most memory efficient approach with hash set. There are better data structures to replace it: **xor filters**.\\n\\n## What are Xor Filters?\\n\\n[Xor filters](https://arxiv.org/abs/1912.08258) are relatively new data structures that allow us to estimate whether a value exists or not. It\'s fast and memory efficient so it\'s very suitable for the full-text search.\\n\\nInstead of storing the actual input values like hash set, xor filters store fingerprints (L-bit hashed sequence) of input values [in a specific way](https://web.stanford.edu/class/archive/cs/cs166/cs166.1216/lectures/13/Slides13.pdf#page=49). When looking for whether a value exists in the filter, it checks if the fingerprint of the value is present.\\n\\nHowever, Xor filters have a couple of trade-offs:\\n\\n- Xor filters are probabilistic and there\'s a chance false-positive can happen.\\n- Xor filters are not able to estimate the existence of partial values. So in my use case, the full-text search will only be able to search for complete words.\\n\\n## How Did I Build the Xor Filters with Rust?\\n\\nSince I had the article data generated by Contentlayer, I constructed the xor filters by feeding them with the data before the WebAssembly is built. I then serialized the xor filters and stored them in a file. To use the filters in the WebAssembly, all I needed to do was to read from the storage file and deserialize the filters.\\n\\nThe filter generation flow looks like this:\\n\\n```bash\\n+-------------------+               +---------------+                +----------------------------+                +-------------+\\n|                   |               |               |                |                            |                |             |\\n| Contentlayer Data | - generate -> | Article Index | - construct -> | Vec<(Article, Xor Filter)> | - serialize -> | storage.txt |\\n|                   |               |               |                |                            |                |             |\\n+-------------------+               +---------------+                +----------------------------+                +-------------+\\n```\\n\\n[`xorf`](https://github.com/ayazhafiz/xorf) crate is a good choice for xor filters implementation because it offers serialization/deserialization and a few features that improve memory efficiency and false-positive rate. It also provides a very handy [`HashProxy`](https://docs.rs/xorf/latest/xorf/struct.HashProxy.html) struct for my use case to construct a xor filter with a slice of strings. The construction written in Rust roughly look like this:\\n\\n```rust\\nuse std::collections::hash_map::DefaultHasher;\\nuse xorf::{Filter, HashProxy, Xor8};\\n\\nmod utils;\\n\\nfn build_filter(title: String, body: String) -> HashProxy<String, DefaultHasher, Xor8> {\\n  let title_tokens: HashSet<String> = utils::tokenize(&title);\\n  let body_tokens: HashSet<String> = utils::tokenize(&body);\\n  let tokens: Vec<String> = body_tokens.union(&title_tokens).cloned().collect();\\n\\n  HashProxy::from(&tokens)\\n}\\n```\\n\\nIf you are interested in the actual implementation, you can [read more in the repository](https://github.com/DawChihLiou/dawchihliou.github.io/blob/main/scripts/fulltext-search/src/storage.rs).\\n\\n## Putting It All Together\\n\\n```bash\\n\\n        \uD83D\uDC7EBuild-Time                      \uD83C\uDFC3‍♀️Run-Time\\n\\n    +-------------------+                +------------+\\n    | Contentlayer Data |                | User Input |\\n    +-------------------+                +------------+\\n              |                                |\\n           generate                 call wasm.search(query)\\n              |                                |\\n      +---------------+                +---------------+\\n      | Article Index |                | Query String  |\\n      +---------------+                +---------------+\\n              |                                |\\n          construct                         tokenize\\n              |                                |\\n+----------------------------+          +--------------+\\n| Vec<(Article, Xor Filter)> |          | Search Terms |\\n+----------------------------+          +--------------+\\n              |                                |\\n          serialize                            |\\n              |                                |\\n       +-------------+                         |\\n       | storage.txt | - deserialize ------> score\\n       +-------------+                         |\\n                                   +-----------------------+\\n                                   | Vec<(Article, Score)> |\\n                                   +-----------------------+\\n                                               |\\n                                              rank\\n                                               |\\n                                   +-----------------------+\\n                                   | Vec<(Article, Score)> |\\n                                   +-----------------------+\\n                                               |\\n                                             take(n)\\n                                               |\\n                                        +--------------+\\n                                        | Vec<Article> |\\n                                        +--------------+\\n                                               |\\n                                             return\\n                                               |\\n                                        +--------------+\\n                                        | Vec<Article> |\\n                                        +--------------+\\n                                               |\\n                                            display\\n                                               |\\n                                       +---------------+\\n                                       | Search Result |\\n                                       +---------------+\\n```\\n\\n## Integrating WebAssembly in Next.js\\n\\nHere\'s how I integrated the xor filter generation script and WebAssembly inside Next.js.\\n\\nThe file structure looks like this:\\n\\n```bash\\nmy-portfolio\\n├── next.config.js\\n├── pages\\n├── scripts\\n│   └── fulltext-search\\n├── components\\n│   └── Search.tsx\\n└── wasm\\n    └── fulltext-search\\n```\\n\\nTo support WebAssembly, I updated my Webpack configuration to load WebAssembly modules as async modules. To make it work for static site generation, I needed [a workaround](https://github.com/vercel/next.js/issues/25852) to generate the WebAssembly module in `.next/server` directory so that the static pages can pre-render successfully when running the `next build` script.\\n\\n```js:next.config.js\\nwebpack: function (config, { isServer }) {\\n  // it makes a WebAssembly modules async modules\\n  config.experiments = { asyncWebAssembly: true }\\n\\n  // generate wasm module in \\".next/server\\" for ssr & ssg\\n  if (isServer) {\\n    config.output.webassemblyModuleFilename =\\n      \'./../static/wasm/[modulehash].wasm\'\\n  } else {\\n    config.output.webassemblyModuleFilename = \'static/wasm/[modulehash].wasm\'\\n  }\\n\\n  return config\\n},\\n```\\n\\nThat\'s all there is for the integration✨\\n\\n## Using The WebAssembly in The React Component\\n\\nTo build the WebAssembly module from the Rust code, I use [`wasm-pack`](https://github.com/rustwasm/wasm-pack).\\n\\nThe generated `.wasm` file and the glue code for JavaScript are located in `wasm/fulltext-search/pkg`. All I needed to do was to use [`next/dynamic`](https://nextjs.org/docs/advanced-features/dynamic-import) to dynamically import the them. Like this:\\n\\n```ts:components/Search.tsx\\nimport React, { useState, useCallback, ChangeEvent, useEffect } from \'react\'\\nimport dynamic from \'next/dynamic\'\\n\\ntype Title = string;\\ntype Url = string;\\ntype SearchResult = [Title, Url][];\\n\\nconst Search = dynamic({\\n  loader: async () => {\\n    const wasm = await import(\'../../wasm/fulltext-search/pkg\')\\n\\n    return () => {\\n      const [term, setTerm] = useState(\'\')\\n      const [results, setResults] = useState<SearchResult>([])\\n\\n      const onChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\\n        setTerm(e.target.value)\\n      }, [])\\n\\n      useEffect(() => {\\n        const pending = wasm.search(term, 5)\\n        setResults(pending)\\n      }, [term])\\n\\n      return (\\n        <div>\\n          <input\\n            value={term}\\n            onChange={onChange}\\n            placeholder=\\"\uD83D\uDD2D search...\\"\\n          />\\n          {results.map(([title, url]) => (\\n            <a key={url} href={url}>{title}</a>\\n          ))}\\n        </div>\\n      )\\n    }\\n  },\\n})\\n\\nexport default Search\\n```\\n\\n## Optimizing The WebAssembly Code Size\\n\\nWithout any optimization, the original Wasm file size was `114.56KB`. I used [Twiggy](https://github.com/rustwasm/twiggy) to find out the code size.\\n\\n```bash\\nShallow Bytes  │ Shallow % │ Item\\n───────────────┼───────────┼─────────────────────\\n        117314 ┊   100.00% ┊ Σ [1670 Total Rows]\\n```\\n\\nCompared with the `628KB` of raw data files, it was so much smaller than I expected. I was happy to ship it to the production already but I was curious to see how much code size I could trim off with [The Rust And WebAssembly Working Group\'s optimization recommendation](https://rustwasm.github.io/docs/book/reference/code-size.html).\\n\\nThe first experiment was toggling LTO and trying out different `opt-level`s. The following configuration yields the smallest `.wasm` code size:\\n\\n```diff:Cargo.toml\\n[profile.release]\\n+ opt-level = \'s\'\\n+ lto = true\\n```\\n\\n```bash\\nShallow Bytes  │ Shallow % │ Item\\n───────────────┼───────────┼─────────────────────\\n        111319 ┊   100.00% ┊ Σ [1604 Total Rows]\\n```\\n\\nNext I replaced the default allocator with [`wee_alloc`](https://github.com/rustwasm/wee_alloc).\\n\\n```diff:wasm/fulltext-search/src/lib.rs\\n+ #[global_allocator]\\n+ static ALLOC: wee_alloc::WeeAlloc = wee_alloc::WeeAlloc::INIT;\\n```\\n\\n```bash\\nShallow Bytes  │ Shallow % │ Item\\n───────────────┼───────────┼─────────────────────\\n        100483 ┊   100.00% ┊ Σ [1625 Total Rows]\\n```\\n\\nThen I tried the `wasm-opt` tool in [Binaryen](https://github.com/WebAssembly/binaryen).\\n\\n```bash\\nwasm-opt -Oz -o wasm/fulltext-search/pkg/fulltext_search_core_bg.wasm wasm/fulltext-search/pkg/fulltext_search_core_bg.wasm\\n```\\n\\n```bash\\nShallow Bytes  │ Shallow % │ Item\\n───────────────┼───────────┼─────────────────────\\n        100390 ┊   100.00% ┊ Σ [1625 Total Rows]\\n```\\n\\nThat\'s a `14.4%` off from the original code size.\\n\\nAt the end, I was able to ship a full-text search engine in:\\n\\n- 98.04 KB raw\\n- 45.92 KB gzipped\\n\\nNot bad\uD83D\uDE0E\\n\\n## Is It Really Snappy?\\n\\n<img\\n  src=\\"/optimized/articles/wasm-fulltext-search/perf.webp\\"\\n  alt=\\"Performance profiling\\"\\n  width=\\"100%\\"\\n  className=\\"rounded\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nI profiled the performance with [`web-sys`](https://github.com/rustwasm/wasm-bindgen/tree/main/crates/web-sys) and collected some data:\\n\\n- number of searches: 208\\n- min: 0.046 ms\\n- max: 0.814 ms\\n- mean: 0.0994 ms ✨\\n- standard deviation: 0.0678\\n\\nOn average, it takes less than 0.1 ms to perform a full-text search.\\n\\nIt\'s pretty snappy\uD83D\uDE0E\\n\\n## Final Thoughts\\n\\nAfter some experiment, I was able to build a fast and lightweight full-text search with WebAssembly, Rust, and xor filters. It integrates well with Next.js and static site generation.\\n\\nThe speed and size come with a few trade-offs but they don\'t have a big impact on the user experience. If you are looking for a more comprehensive search functionality, here are a few cool products available:\\n\\n**SaaS Search Engines**\\n\\n- [Algolia](https://www.algolia.com)\\n\\n**Static Search Engines**\\n\\n- [tinysearch](https://github.com/tinysearch/tinysearch)\\n\\n**Server-based Search Engines**\\n\\n- [Meilisearch](https://www.meilisearch.com)\\n- [Typesense](https://typesense.org)\\n\\n**In-browser Search Engines**\\n\\n- [FlexSearch](https://github.com/nextapps-de/flexsearch)\\n- [MiniSearch](https://github.com/lucaong/minisearch)\\n- [Elasticlunr.js](http://elasticlunr.com)\\n\\n## References\\n\\n- Article: [A Tiny, Static, Full-Text Search Engine using Rust and WebAssembly - Matthias Endler](https://endler.dev/2019/tinysearch)\\n- Article: [Writing a full-text search engine using Bloom filters - Stavros Korokithakis](https://www.stavros.io/posts/bloom-filter-search-engine/)\\n- Article: [Xor Filters: Faster and Smaller Than Bloom Filters - Daniel Lemire](https://lemire.me/blog/2019/12/19/xor-filters-faster-and-smaller-than-bloom-filters/)\\n- Article: [Shrinking .wasm Code Size - The Rust and WebAssembly Working Group](https://rustwasm.github.io/docs/book/reference/code-size.html)\\n- Article: [Building Better Next.js Static Sites with MDX and Contentlayer - Daw-Chih Liou](https://dawchihliou.github.io/articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer)\\n- Article: [Next.js - Dynamic Import](https://nextjs.org/docs/advanced-features/dynamic-import)\\n- Website: [Xor Filters: Faster and Smaller Than Bloom and Cuckoo Filters](https://arxiv.org/abs/1912.08258)\\n- Website: [Daw-Chih Liou\'s Portfolio](https://dawchihliou.github.io)\\n- Website: [Meilisearch](https://www.meilisearch.com)\\n- Website: [Typesense](https://typesense.org)\\n- Website: [Algolia](https://www.algolia.com)\\n- Website: [Elasticlunr.js](http://elasticlunr.com)\\n- Website: [Rust](https://www.rust-lang.org)\\n- Website: [WebAssembly](https://webassembly.org)\\n- Website: [MDN WebAssembly](https://developer.mozilla.org/en-US/docs/WebAssembly)\\n- Website: [Next.js](https://nextjs.org/)\\n- Website: [Can I use WebAssembly?](https://caniuse.com/?search=webassembly)\\n- Lecture: [Approximate Membership Queries - Stanford](https://web.stanford.edu/class/archive/cs/cs166/cs166.1216/lectures/13/Slides13.pdf#page=49)\\n- Wiki: [Full-text Search](https://en.wikipedia.org/wiki/Full-text_search)\\n- GitHub: [Next.js & WebAssembly example](https://github.com/vercel/next.js/tree/canary/examples/with-webassembly)\\n- GitHub: [Minimizing Rust Binary Size](https://github.com/johnthagen/min-sized-rust)\\n- GitHub: [dawchihliou.github.io](https://github.com/DawChihLiou/dawchihliou.github.io/blob/main/scripts/fulltext-search/src/storage.rs)\\n- GitHub: [Webpack 5 breaks dynamic wasm import for SSR](https://github.com/vercel/next.js/issues/25852)\\n- Github: [tinysearch](https://github.com/tinysearch/tinysearch)\\n- GitHub: [Meilisearch](https://github.com/meilisearch/meilisearch)\\n- GitHub: [xorf](https://github.com/ayazhafiz/xorf)\\n- GitHub: [wasm-pack](https://github.com/rustwasm/wasm-pack)\\n- GitHub: [Binaryen](https://github.com/WebAssembly/binaryen)\\n- GitHub: [Twiggy](https://github.com/rustwasm/twiggy)\\n- GitHub: [Clippy](https://github.com/rust-lang/rust-clippy)\\n- GitHub: [web-sys](https://github.com/rustwasm/wasm-bindgen/tree/main/crates/web-sys)\\n- GitHub: [once_cell](https://github.com/matklad/once_cell)\\n- GitHub: [Bincode](https://github.com/bincode-org/bincode)\\n- GitHub: [wee_alloc](https://github.com/rustwasm/wee_alloc)\\n- GitHub: [Serde](https://github.com/serde-rs/serde)\\n- GitHub: [Anyhow](https://github.com/dtolnay/anyhow)\\n- GitHub: [Contentlayer](https://github.com/contentlayerdev/contentlayer)\\n- GitHub: [FlexSearch](https://github.com/nextapps-de/flexsearch)\\n- GitHub: [MiniSearch](https://github.com/lucaong/minisearch)\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Read the next article: [How to Plan A Project as A Principal Software Engineer: A Human-centered Approach](/articles/how-to-plan-a-project-as-a-principal-software-engineer)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},i=(a,e,s,t)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let c of m(e))!N.call(a,c)&&c!==s&&l(a,c,{get:()=>e[c],enumerable:!(t=p(e,c))||t.enumerable});return a};var f=(a,e,s)=>(s=a!=null?d(u(a)):{},i(e||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),b=a=>i(l({},\\"__esModule\\",{value:!0}),a);var o=k((A,r)=>{r.exports=_jsx_runtime});var S={};g(S,{default:()=>x,frontmatter:()=>w});var n=f(o()),w={title:\\"I Built A Snappy Static Full-text Search with WebAssembly, Rust, Next.js, and Xor Filters\\",publishedAt:\\"March 30, 2022\\",description:\\"After migrating to Contentlayer, I started exploring how to use the content data to roll out a search feature for my portfolio. Inspired by some of the amazing open-source projects, I built my own full-text search engine in Rust and WebAssembly. It is fast, lightweight, and tons of fun to build!\\",cover:\\"/optimized/articles/wasm-fulltext-search/hero.webp\\",category:\\"Rust\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function h(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",code:\\"code\\",em:\\"em\\",blockquote:\\"blockquote\\",pre:\\"pre\\",strong:\\"strong\\",div:\\"div\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"crab\\",children:\\"\\\\u{1F980}\\"}),\\" There is a rich toolkit for developing WebAssembly with Rust. It\'s fun!\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"handshake\\",children:\\"\\\\u{1F91D}\\"}),\\" WebAssembly and Next.js play fairly well together, but be aware of the known issues.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" Xor filters are data structures that provides great memory efficiency and fast lookup for value existence.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cooking\\",children:\\"\\\\u{1F373}\\"}),\\" WebAssembly\'s performance and code size is not guaranteed. Make sure to measure and benchmark.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://betterprogramming.pub/i-built-a-snappy-static-full-text-search-with-webassembly-rust-next-js-and-xor-filters-a21a4824832e\\",children:\\"Better Programming\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://hackernoon.com/static-full-text-search-in-nextjs-with-webassembly-rust-and-xor-filters-tldr\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I always knew I wanted a full-text search feature for the articles in my \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io\\",children:\\"portfolio\\"}),\\" to provide the visitors with a quick access to the content they are interested in. After \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer\\",children:\\"migrating to Contentlayer\\"}),\\", it doesn\'t seemed to be so far-fetched anymore. So I started exploring\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"inspired-by-tinysearch-a-webassembly-full-text-search-engine\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#inspired-by-tinysearch-a-webassembly-full-text-search-engine\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Inspired by \\",(0,n.jsx)(e.code,{children:\\"tinysearch\\"}),\\": A WebAssembly Full-text Search Engine\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"After some researching, I found a search engine called \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tinysearch/tinysearch\\",children:(0,n.jsx)(e.code,{children:\\"tinysearch\\"})}),\\". It\'s a static search engine built with \\",(0,n.jsx)(e.a,{href:\\"https://www.rust-lang.org\\",children:\\"Rust\\"}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://webassembly.org\\",children:\\"WebAssembly\\"}),\\" (Wasm). The author Matthias Endler wrote \\",(0,n.jsx)(e.a,{href:\\"https://endler.dev/2019/tinysearch\\",children:\\"an amazing blog post\\"}),\\" about how \\",(0,n.jsx)(e.code,{children:\\"tinysearch\\"}),\\" came about.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I loved the idea of constructing a minimalistic search engine at build time and shipping it in optimized low-level code to the browsers. So I decided to use \\",(0,n.jsx)(e.code,{children:\\"tinysearch\\"}),\\" as the blueprint and write my own search engine to integrate with my \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/\\",children:\\"Next.js static site\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.em,{children:[\\"I highly recommend reading \\",(0,n.jsxs)(e.a,{href:\\"https://github.com/tinysearch/tinysearch\\",children:[(0,n.jsx)(e.code,{children:\\"tinysearch\\"}),\\"\'s codebase\\"]}),\\". It\'s very well-written. My search engine\'s implementation is a simplified version of it. The core logic is the same.\\"]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"what-does-the-search-feature-looks-like\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-does-the-search-feature-looks-like\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What Does The Search Feature Looks Like?\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/articles/wasm-fulltext-search/recording.gif\\",alt:\\"Search demo\\",width:\\"auto\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Very simple:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Users type anything in the search input.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Search engine searches the key words in all the contents and finds the most relevant articles.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"UI displays a ranked search result list.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can try out the search function at the \\",(0,n.jsx)(e.a,{href:\\"/articles\\",children:\\"Articles page\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"a-little-bit-of-stats\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#a-little-bit-of-stats\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"A Little Bit of Stats\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"At the time of writing this article, there are:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"7 articles (more to come\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\")\\"]}),`\\n`,(0,n.jsx)(e.li,{children:\\"13,925 words\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"682KB of data files (generated by Contentlayer)\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:\\"For the full-text search to work for static sites that are priming for speed, the code size has to be small.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"how-does-webassembly-full-text-search-function-work\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-does-webassembly-full-text-search-function-work\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How Does WebAssembly Full-text Search Function Work?\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Most of the \\",(0,n.jsx)(e.a,{href:\\"https://caniuse.com/?search=webassembly\\",children:\\"modern browsers now support WebAssembly\\"}),\\". They are able to run native WebAssembly code and binary alongside JavaScript.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The concept for the search function is straightforward. It takes in a query string as parameter. In the function, we tokenize the query into search terms. We then give a ranking score to each article based on how many search terms does it contain. Finally, we rank the articles by relevancy. The higher the score, the more relevant it is.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The flow looks like this:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+--------------+               +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Query String \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - tokenize -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Search Terms \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+--------------+               +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                      \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"+--------------+                      \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`      +-----------------------+           +-----------------------+              +--------------+\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                      \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"      \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                       \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"           \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                       \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Article\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" ------------------ score -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"Article, Score\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - rank -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"Article, Score\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - take\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"n\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Article\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                             \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                       \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"           \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                       \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+--------------+                             +-----------------------+           +-----------------------+              +--------------+\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Scoring the articles is where the most computing comes in. A naive approach would be transforming each article into a hash set that contains all the unique words in the article. We can calculate the score by simply counting how many search terms are in the hash set.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can image that this is not the most memory efficient approach with hash set. There are better data structures to replace it: \\",(0,n.jsx)(e.strong,{children:\\"xor filters\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"what-are-xor-filters\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-are-xor-filters\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What are Xor Filters?\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://arxiv.org/abs/1912.08258\\",children:\\"Xor filters\\"}),\\" are relatively new data structures that allow us to estimate whether a value exists or not. It\'s fast and memory efficient so it\'s very suitable for the full-text search.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Instead of storing the actual input values like hash set, xor filters store fingerprints (L-bit hashed sequence) of input values \\",(0,n.jsx)(e.a,{href:\\"https://web.stanford.edu/class/archive/cs/cs166/cs166.1216/lectures/13/Slides13.pdf#page=49\\",children:\\"in a specific way\\"}),\\". When looking for whether a value exists in the filter, it checks if the fingerprint of the value is present.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"However, Xor filters have a couple of trade-offs:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Xor filters are probabilistic and there\'s a chance false-positive can happen.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Xor filters are not able to estimate the existence of partial values. So in my use case, the full-text search will only be able to search for complete words.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"how-did-i-build-the-xor-filters-with-rust\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-did-i-build-the-xor-filters-with-rust\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How Did I Build the Xor Filters with Rust?\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Since I had the article data generated by Contentlayer, I constructed the xor filters by feeding them with the data before the WebAssembly is built. I then serialized the xor filters and stored them in a file. To use the filters in the WebAssembly, all I needed to do was to read from the storage file and deserialize the filters.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The filter generation flow looks like this:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+-------------------+               +---------------+                +----------------------------+                +-------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                   \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                            \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"             \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Contentlayer Data \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - generate -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Article Index \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - construct -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"Article, Xor Filter\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - serialize -\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" storage.txt \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                   \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                            \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"             \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+-------------------+               +---------------+                +----------------------------+                +-------------+\\n`})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/ayazhafiz/xorf\\",children:(0,n.jsx)(e.code,{children:\\"xorf\\"})}),\\" crate is a good choice for xor filters implementation because it offers serialization/deserialization and a few features that improve memory efficiency and false-positive rate. It also provides a very handy \\",(0,n.jsx)(e.a,{href:\\"https://docs.rs/xorf/latest/xorf/struct.HashProxy.html\\",children:(0,n.jsx)(e.code,{children:\\"HashProxy\\"})}),\\" struct for my use case to construct a xor filter with a slice of strings. The construction written in Rust roughly look like this:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-rust\\",children:(0,n.jsxs)(e.code,{className:\\"language-rust code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token namespace\\",children:[\\"std\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"collections\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"}),\\"hash_map\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"DefaultHasher\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"use\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token namespace\\",children:[\\"xorf\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Filter\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"HashProxy\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Xor8\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"mod\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token module-declaration namespace\\",children:\\"utils\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function-definition function\\",children:\\"build_filter\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"title\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" body\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"HashProxy\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"DefaultHasher\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Xor8\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" title_tokens\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"HashSet\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token namespace\\",children:[\\"utils\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"tokenize\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&\\"}),\\"title\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" body_tokens\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"HashSet\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token namespace\\",children:[\\"utils\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"})]}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"tokenize\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&\\"}),\\"body\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" tokens\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Vec\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" body_tokens\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"union\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&\\"}),\\"title_tokens\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"cloned\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"collect\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"HashProxy\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"from\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&\\"}),\\"tokens\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you are interested in the actual implementation, you can \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dawchihliou.github.io/blob/main/scripts/fulltext-search/src/storage.rs\\",children:\\"read more in the repository\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"putting-it-all-together\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#putting-it-all-together\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Putting It All Together\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"alien monster\\",children:\\"\\\\u{1F47E}\\"}),\\"Build-Time                      \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F3C3}\\\\u200D\\\\u2640\\\\uFE0F\\"}),`Run-Time\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    +-------------------+                +------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Contentlayer Data \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" User Input \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    +-------------------+                +------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"           generate                 call wasm.search\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"query\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`      +---------------+                +---------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Article Index \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Query String  \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`      +---------------+                +---------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`          construct                         tokenize\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+----------------------------+          +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"Article, Xor Filter\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"          \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Search Terms \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`+----------------------------+          +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          serialize                            \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"              \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\"                                \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"       +-------------+                         \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"       \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" storage.txt \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" - deserialize ------\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),` score\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"       +-------------+                         \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                   +-----------------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                   \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"Article, Score\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                   +-----------------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                              rank\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                   +-----------------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                   \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"Article, Score\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                   +-----------------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                             take\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"n\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                        +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                        \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Article\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                        +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                             \\",(0,n.jsx)(e.span,{className:\\"token builtin class-name\\",children:\\"return\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                        +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                        \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Vec\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"Article\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                        +--------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                            display\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                               \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                       +---------------+\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"                                       \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),\\" Search Result \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"|\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`                                       +---------------+\\n`})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"integrating-webassembly-in-nextjs\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#integrating-webassembly-in-nextjs\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Integrating WebAssembly in Next.js\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Here\'s how I integrated the xor filter generation script and WebAssembly inside Next.js.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The file structure looks like this:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`my-portfolio\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 next.config.js\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 pages\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 scripts\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u2514\\\\u2500\\\\u2500 fulltext-search\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 components\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2502   \\\\u2514\\\\u2500\\\\u2500 Search.tsx\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 wasm\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2514\\\\u2500\\\\u2500 fulltext-search\\n`})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"To support WebAssembly, I updated my Webpack configuration to load WebAssembly modules as async modules. To make it work for static site generation, I needed \\",(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/next.js/issues/25852\\",children:\\"a workaround\\"}),\\" to generate the WebAssembly module in \\",(0,n.jsx)(e.code,{children:\\".next/server\\"}),\\" directory so that the static pages can pre-render successfully when running the \\",(0,n.jsx)(e.code,{children:\\"next build\\"}),\\" script.\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"next.config.js\\"}),(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function-variable function\\",children:\\"webpack\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token parameter\\",children:[\\"config\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" isServer \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// it makes a WebAssembly modules async modules\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  config\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"experiments\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"asyncWebAssembly\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\'// generate wasm module in \\".next/server\\" for ssr & ssg\'}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword control-flow\\",children:\\"if\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"isServer\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    config\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"output\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"webassemblyModuleFilename\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'./../static/wasm/[modulehash].wasm\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword control-flow\\",children:\\"else\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    config\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"output\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"webassemblyModuleFilename\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'static/wasm/[modulehash].wasm\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword control-flow\\",children:\\"return\\"}),` config\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"That\'s all there is for the integration\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"using-the-webassembly-in-the-react-component\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#using-the-webassembly-in-the-react-component\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Using The WebAssembly in The React Component\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"To build the WebAssembly module from the Rust code, I use \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/wasm-pack\\",children:(0,n.jsx)(e.code,{children:\\"wasm-pack\\"})}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The generated \\",(0,n.jsx)(e.code,{children:\\".wasm\\"}),\\" file and the glue code for JavaScript are located in \\",(0,n.jsx)(e.code,{children:\\"wasm/fulltext-search/pkg\\"}),\\". All I needed to do was to use \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/dynamic-import\\",children:(0,n.jsx)(e.code,{children:\\"next/dynamic\\"})}),\\" to dynamically import the them. Like this:\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"components/Search.tsx\\"}),(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" React\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" useState\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" useCallback\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" ChangeEvent\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" useEffect \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'react\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" dynamic \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'next/dynamic\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Title\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Url\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"SearchResult\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"Title\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" Url\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" Search \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"dynamic\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token function-variable function\\",children:\\"loader\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" wasm \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'../../wasm/fulltext-search/pkg\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"term\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setTerm\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"useState\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"results\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setResults\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token generic-function\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"useState\\"}),(0,n.jsxs)(e.span,{className:\\"token generic class-name\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"SearchResult\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" onChange \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"useCallback\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"e\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" ChangeEvent\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"HTMLInputElement\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"setTerm\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"e\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"target\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"value\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"useEffect\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" pending \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" wasm\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"search\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"term\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"5\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"setResults\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"pending\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"term\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"div\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),`input\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"            value\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"term\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"            onChange\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"onChange\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"            placeholder\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsxs)(e.span,{className:\\"token string\\",children:[\'\\"\',(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"telescope\\",children:\\"\\\\u{1F52D}\\"}),\' search...\\"\']}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"/\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"results\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"title\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" url\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"            \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"a key\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"url\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" href\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"url\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"title\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"/\\"}),\\"a\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"/\\"}),\\"div\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"default\\"}),` Search\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"optimizing-the-webassembly-code-size\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#optimizing-the-webassembly-code-size\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Optimizing The WebAssembly Code Size\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Without any optimization, the original Wasm file size was \\",(0,n.jsx)(e.code,{children:\\"114.56KB\\"}),\\". I used \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/twiggy\\",children:\\"Twiggy\\"}),\\" to find out the code size.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`Shallow Bytes  \\\\u2502 Shallow % \\\\u2502 Item\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"117314\\"}),\\" \\\\u250A   \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"100.00\\"}),\\"% \\\\u250A \\\\u03A3 \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"1670\\"}),\\" Total Rows\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Compared with the \\",(0,n.jsx)(e.code,{children:\\"628KB\\"}),\\" of raw data files, it was so much smaller than I expected. I was happy to ship it to the production already but I was curious to see how much code size I could trim off with \\",(0,n.jsx)(e.a,{href:\\"https://rustwasm.github.io/docs/book/reference/code-size.html\\",children:\\"The Rust And WebAssembly Working Group\'s optimization recommendation\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The first experiment was toggling LTO and trying out different \\",(0,n.jsx)(e.code,{children:\\"opt-level\\"}),\\"s. The following configuration yields the smallest \\",(0,n.jsx)(e.code,{children:\\".wasm\\"}),\\" code size:\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"Cargo.toml\\"}),(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`[profile.release]\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` opt-level = \'s\'\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` lto = true\\n`})]})})]})}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`Shallow Bytes  \\\\u2502 Shallow % \\\\u2502 Item\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"111319\\"}),\\" \\\\u250A   \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"100.00\\"}),\\"% \\\\u250A \\\\u03A3 \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"1604\\"}),\\" Total Rows\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Next I replaced the default allocator with \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/wee_alloc\\",children:(0,n.jsx)(e.code,{children:\\"wee_alloc\\"})}),\\".\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"wasm/fulltext-search/src/lib.rs\\"}),(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` #[global_allocator]\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` static ALLOC: wee_alloc::WeeAlloc = wee_alloc::WeeAlloc::INIT;\\n`})]})})]})}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`Shallow Bytes  \\\\u2502 Shallow % \\\\u2502 Item\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"100483\\"}),\\" \\\\u250A   \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"100.00\\"}),\\"% \\\\u250A \\\\u03A3 \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"1625\\"}),\\" Total Rows\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Then I tried the \\",(0,n.jsx)(e.code,{children:\\"wasm-opt\\"}),\\" tool in \\",(0,n.jsx)(e.a,{href:\\"https://github.com/WebAssembly/binaryen\\",children:\\"Binaryen\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"wasm-opt \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"-Oz\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"-o\\"}),` wasm/fulltext-search/pkg/fulltext_search_core_bg.wasm wasm/fulltext-search/pkg/fulltext_search_core_bg.wasm\\n`]})})}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`Shallow Bytes  \\\\u2502 Shallow % \\\\u2502 Item\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u253C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"100390\\"}),\\" \\\\u250A   \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"100.00\\"}),\\"% \\\\u250A \\\\u03A3 \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"1625\\"}),\\" Total Rows\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"That\'s a \\",(0,n.jsx)(e.code,{children:\\"14.4%\\"}),\\" off from the original code size.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"At the end, I was able to ship a full-text search engine in:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"98.04 KB raw\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"45.92 KB gzipped\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Not bad\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with sunglasses\\",children:\\"\\\\u{1F60E}\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"is-it-really-snappy\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#is-it-really-snappy\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Is It Really Snappy?\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/wasm-fulltext-search/perf.webp\\",alt:\\"Performance profiling\\",width:\\"100%\\",className:\\"rounded\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I profiled the performance with \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/wasm-bindgen/tree/main/crates/web-sys\\",children:(0,n.jsx)(e.code,{children:\\"web-sys\\"})}),\\" and collected some data:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"number of searches: 208\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"min: 0.046 ms\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"max: 0.814 ms\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"mean: 0.0994 ms \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.li,{children:\\"standard deviation: 0.0678\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"On average, it takes less than 0.1 ms to perform a full-text search.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"It\'s pretty snappy\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with sunglasses\\",children:\\"\\\\u{1F60E}\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"After some experiment, I was able to build a fast and lightweight full-text search with WebAssembly, Rust, and xor filters. It integrates well with Next.js and static site generation.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The speed and size come with a few trade-offs but they don\'t have a big impact on the user experience. If you are looking for a more comprehensive search functionality, here are a few cool products available:\\"}),`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\\"SaaS Search Engines\\"})}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.algolia.com\\",children:\\"Algolia\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\\"Static Search Engines\\"})}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/tinysearch/tinysearch\\",children:\\"tinysearch\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\\"Server-based Search Engines\\"})}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://www.meilisearch.com\\",children:\\"Meilisearch\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://typesense.org\\",children:\\"Typesense\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\\"In-browser Search Engines\\"})}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/nextapps-de/flexsearch\\",children:\\"FlexSearch\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/lucaong/minisearch\\",children:\\"MiniSearch\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"http://elasticlunr.com\\",children:\\"Elasticlunr.js\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"Article: \\",(0,n.jsx)(e.a,{href:\\"https://endler.dev/2019/tinysearch\\",children:\\"A Tiny, Static, Full-Text Search Engine using Rust and WebAssembly - Matthias Endler\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Article: \\",(0,n.jsx)(e.a,{href:\\"https://www.stavros.io/posts/bloom-filter-search-engine/\\",children:\\"Writing a full-text search engine using Bloom filters - Stavros Korokithakis\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Article: \\",(0,n.jsx)(e.a,{href:\\"https://lemire.me/blog/2019/12/19/xor-filters-faster-and-smaller-than-bloom-filters/\\",children:\\"Xor Filters: Faster and Smaller Than Bloom Filters - Daniel Lemire\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Article: \\",(0,n.jsx)(e.a,{href:\\"https://rustwasm.github.io/docs/book/reference/code-size.html\\",children:\\"Shrinking .wasm Code Size - The Rust and WebAssembly Working Group\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Article: \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/build-better-nextjs-static-sites-with-mdx-and-contentlayer\\",children:\\"Building Better Next.js Static Sites with MDX and Contentlayer - Daw-Chih Liou\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Article: \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/dynamic-import\\",children:\\"Next.js - Dynamic Import\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://arxiv.org/abs/1912.08258\\",children:\\"Xor Filters: Faster and Smaller Than Bloom and Cuckoo Filters\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io\\",children:\\"Daw-Chih Liou\'s Portfolio\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://www.meilisearch.com\\",children:\\"Meilisearch\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://typesense.org\\",children:\\"Typesense\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://www.algolia.com\\",children:\\"Algolia\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"http://elasticlunr.com\\",children:\\"Elasticlunr.js\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://www.rust-lang.org\\",children:\\"Rust\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://webassembly.org\\",children:\\"WebAssembly\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/WebAssembly\\",children:\\"MDN WebAssembly\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org/\\",children:\\"Next.js\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Website: \\",(0,n.jsx)(e.a,{href:\\"https://caniuse.com/?search=webassembly\\",children:\\"Can I use WebAssembly?\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Lecture: \\",(0,n.jsx)(e.a,{href:\\"https://web.stanford.edu/class/archive/cs/cs166/cs166.1216/lectures/13/Slides13.pdf#page=49\\",children:\\"Approximate Membership Queries - Stanford\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Wiki: \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Full-text_search\\",children:\\"Full-text Search\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/next.js/tree/canary/examples/with-webassembly\\",children:\\"Next.js & WebAssembly example\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/johnthagen/min-sized-rust\\",children:\\"Minimizing Rust Binary Size\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dawchihliou.github.io/blob/main/scripts/fulltext-search/src/storage.rs\\",children:\\"dawchihliou.github.io\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/next.js/issues/25852\\",children:\\"Webpack 5 breaks dynamic wasm import for SSR\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Github: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tinysearch/tinysearch\\",children:\\"tinysearch\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/meilisearch/meilisearch\\",children:\\"Meilisearch\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/ayazhafiz/xorf\\",children:\\"xorf\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/wasm-pack\\",children:\\"wasm-pack\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/WebAssembly/binaryen\\",children:\\"Binaryen\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/twiggy\\",children:\\"Twiggy\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rust-lang/rust-clippy\\",children:\\"Clippy\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/wasm-bindgen/tree/main/crates/web-sys\\",children:\\"web-sys\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/matklad/once_cell\\",children:\\"once_cell\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/bincode-org/bincode\\",children:\\"Bincode\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/rustwasm/wee_alloc\\",children:\\"wee_alloc\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/serde-rs/serde\\",children:\\"Serde\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/dtolnay/anyhow\\",children:\\"Anyhow\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/contentlayerdev/contentlayer\\",children:\\"Contentlayer\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/nextapps-de/flexsearch\\",children:\\"FlexSearch\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"GitHub: \\",(0,n.jsx)(e.a,{href:\\"https://github.com/lucaong/minisearch\\",children:\\"MiniSearch\\"})]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"\\\\u23ED Read the next article: \\",(0,n.jsx)(e.a,{href:\\"/articles/how-to-plan-a-project-as-a-principal-software-engineer\\",children:\\"How to Plan A Project as A Principal Software Engineer: A Human-centered Approach\\"})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(h,a)})):h(a)}var x=y;return b(S);})();\\n;return Component;"},"_id":"articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters.mdx","_raw":{"sourceFilePath":"articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters.mdx","sourceFileName":"i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters"},"type":"Article","readingTime":{"text":"11 min read","minutes":10.265,"time":615900,"words":2053},"wordCount":2055,"slug":"i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters"},{"title":"Indexing Strings in Rust and TypeScript: A Case Study of String","publishedAt":"December 28, 2021","description":"Text is essential in programming languages. String is the Rust\'s and JavaScript\'s definition to process text in written languages around the world. Through the simple concept of string indexing, we\'ll discuss how Rust and JavaScript process strings and how they handle the nuances in strings such as grapheme, or even emojis.","cover":"/optimized/articles/indexing-strings-in-rust/hero.webp","category":"Rust","coverWidth":"1411","coverHeight":"682","body":{"raw":"\\n## TL;DR\\n\\n- \uD83E\uDEA2 Accessing characters in strings with index is not compilable in Rust.\\n- \uD83C\uDFB8 We\'ll discuss how Rust think about strings.\\n- \uD83E\uDD16 We\'ll discuss how JavaScript handles strings.\\n- \uD83E\uDDD1‍\uD83D\uDD2C We\'ll compare a classic algorithm `is_palindrome` in Rust and TypeScript.\\n\\n---\\n\\nText is essential in programming languages.\\nString is the Rust\'s and JavaScript\'s definition to process text in written languages around the world.\\nThrough the simple concept of string indexing, we\'ll discuss how Rust and JavaScript process strings and how they handle the nuances in strings such as grapheme, or even emojis.\\n\\nLet\'s use a classic algorithm `is_palindrome` to introduce the concept of string indexing.\\n\\n## `is_palindrome` in Rust\\n\\nA [palindrome](https://en.wikipedia.org/wiki/Palindrome), in a very general way of explaining it, is a string that reads the same forward and backward.\\n\\"**Ana**\\" is a palindrome, \\"**A dog! A panic in a pagoda!**\\" is a palindrome, or even \\"**02/02/2020**\\" is a palindrome.\\n\\nFor the purpose of this article, we\'ll use a more narrowed definition to keep the algorithm simple.\\nA palindrome here is defined as a \\"continuous sequence of lowercase ASCII characters without whitespace\\".\\n\\nOne intuitive approach would be using two pointers.\\nOne starts from the beginning of the given string moving toward the end, and the other from the end toward the beginning.\\nWhile moving the pointers, compare the pointing characters.\\nThe given string is a palindrome if all the comparisons are equal. Like this:\\n\\n```rust\\n// ❌ It won\'t compile\\nfn is_palindrome(str: String) -> bool {\\n  //        lp       rp\\n  //        |        |\\n  //        v →    ← v\\n  // str = \\"aabbccbbaa\\"\\n  let mut lp = 0;\\n  let mut rp = str.len() - 1;\\n\\n  while lp < rp {\\n    if str[lp] != str[rp] {\\n    // ^^^^^^^ `String` cannot be indexed by `usize`\\n      return false;\\n    }\\n    lp += 1;\\n    rp -= 1;\\n  }\\n\\n  true\\n}\\n```\\n\\nIf you try to compile the program, you\'ll notice that the Rust compiler won\'t let us access characters by index.\\nIt\'s a very interesting constraint because many languages like JavaScript, Go, and Python offer the feature.\\n\\nAs we dig a little deeper, there are some string methods from the standard library like [`chars()`](https://doc.rust-lang.org/stable/std/string/struct.String.html#method.chars) to access the characters in a string.\\n`chars()` returns an iterator over the `char`s of a string slice. So we\'ll have to iterate through a string slice to access characters by index.\\nLike this:\\n\\n```rust\\nlet left = str.as_str().chars().nth(lp).unwrap();\\n```\\n\\nThe simple task of accessing a character in a string has the time complexity of `O(n)` instead of `O(1)`.\\n\\nWhy is that?\\n\\n## Rust\'s Strings Are in Unicode And UTF-8 Encoded\\n\\nWe can find the [internal representaion](https://doc.rust-lang.org/book/ch08-02-strings.html#internal-representation) of Rust\'s String from the [official Rust book](https://doc.rust-lang.org/book/).\\n\\n> A String is a wrapper over a `Vec<u8>`.\\n\\nFor strings in [ASCII](https://en.wikipedia.org/wiki/ASCII), each character is represented by 1 byte encoded in [UTF-8](https://en.wikipedia.org/wiki/UTF-8).\\nHowever, for strings in other written languages, like [\\"नमस्ते\\" in the Devanagari script](https://doc.rust-lang.org/book/ch08-02-strings.html#bytes-and-scalar-values-and-grapheme-clusters-oh-my) from the Rust book,\\neach character is encoded in UTF-8 with multiple [Unicode](https://en.wikipedia.org/wiki/Unicode) value (code unit).\\n\\nSo in the Rust book, it says:\\n\\n> Indexing into a string is often a bad idea because it’s not clear what the return type of the string-indexing operation should be: a byte value, a character, a grapheme cluster, or a string slice.\\n\\nIt\'s one of the reasons why the Rust compiler does not allows the direct access to characters in strings.\\nI really recommend you to read more about it in the [Rust book](https://doc.rust-lang.org/book/ch08-02-strings.html).\\nIt\'s very easy to read and insightful\uD83D\uDC4F.\\n\\n### Correcting `is_palindrome`\\n\\nWe can iterate over [bytes](https://doc.rust-lang.org/stable/std/string/struct.String.html#method.bytes) and compare the first half of the string with the reversed second half.\\nIt\'s a palindrome if they were equal:\\n\\n```rust\\n// ✅\\nfn is_palindrome(str: String) -> bool {\\n    let half = str.len() / 2;\\n    let forward = str.bytes().take(half);\\n    let backward = str.bytes().rev().take(half);\\n\\n    forward.eq(backward)\\n}\\n\\nfn main() {\\n    assert_eq!(is_palindrome(String::from(\\"\\")), true);\\n    assert_eq!(is_palindrome(String::from(\\"aabbccbbaa\\")), true);\\n    assert_eq!(is_palindrome(String::from(\\"aabbccbbab\\")), false);\\n}\\n```\\n\\nThe time and space complexity:\\n\\n- O(n) time, where n is the length of the string.\\n- O(1) space.\\n\\nThe space complexity is `O(1)` because each iterator creates a pointer and a counter.\\n\\nAnother approach would be using the [DoubleEndedIterator](https://doc.rust-lang.org/std/iter/trait.DoubleEndedIterator.html) trait and combining the forward and backward iterators with [`zip()`](https://doc.rust-lang.org/std/iter/fn.zip.html):\\n\\n```rust\\nfn is_palindrome(str: String) -> bool {\\n    let mut chars = string.bytes();\\n    while let Some((front, back)) = chars.next().zip(chars.next_back()) {\\n        if front != back {\\n            return false;\\n        }\\n    }\\n    true\\n}\\n```\\n\\nThe time and space complexity:\\n\\n- O(n) time, where n is the length of the string.\\n- O(1) space.\\n\\n[This approach is suggested on Reddit](https://www.reddit.com/r/programming/comments/rr9dlw/indexing_strings_in_rust_and_typescript_a_case/).\\nThanks a lot!\\n\\n## `isPalindrome` in TypeScript\\n\\nJavaScript allows string index. So we can actually translate the two pointer algorithm that didn\'t compile in rust.\\n\\n```ts\\n/*\\n *  lp       rp\\n *  |        |\\n *  v →    ← v\\n * \\"aabbccbbaa\\"\\n */\\nfunction isPalindrome(str: string): boolean {\\n  let lp = 0\\n  let rp = str.length - 1\\n\\n  while (lp < rp) {\\n    if (str[lp] !== str[rp]) {\\n      return false\\n    }\\n    lp += 1\\n    rp -= 1\\n  }\\n  return true\\n}\\n\\nisPalindrome(\'\') // true\\nisPalindrome(\'aabbccbbaa\') // true\\nisPalindrome(\'aabbccbbab\') // false\\n```\\n\\nThe time and space complexity are:\\n\\n- O(n) time, where n is the length of the string\\n- O(1) space. Constant space for the two pointers.\\n\\nOr just compare the string forward and backward:\\n\\n```ts\\nfunction isPalindrome(str: string): boolean {\\n  return str === str.split(\'\').reverse().join(\'\')\\n}\\n```\\n\\nThe time and space complexity:\\n\\n- O(n) time, where n is the length of the input string\\n- O(n) space, where n is the length of the input string\\n\\nIt\'s fairly easy in JavaScript. Does it mean that JavaScript treat strings differently than Rust does?\\n\\n## JavaScript Strings are UTF-16 encoded\\n\\nWe can find the definition of string primitive value in [ECMAScript Standard](https://tc39.es/ecma262/#sec-terms-and-definitions-string-value):\\n\\n> primitive value that is a finite ordered sequence of zero or more 16-bit unsigned integer values\\n\\n> A String value is a member of the String type. Each integer value in the sequence usually represents a single 16-bit unit of UTF-16 text.\\n\\nIn other word, each JavaScript character is represented in Unicode with two bytes and it\'s encoded in UTF-16.\\n\\nLet\'s have a look at some examples. We can use one or two code units to create a character:\\n\\n```ts\\nconst s1: string = \'\\\\u00E1\' // \xe1\\nconst s2: string = \'\\\\u0061\\\\u0301\' // \xe1\\n```\\n\\nBoth `s1` and `s2` makes up a `\xe1`. If we check the length of both strings:\\n\\n```ts\\nconsole.log(s1.length) // 1\\nconsole.log(s2.length) // 2\\n```\\n\\nThe lengths are different even though they both are representing the same character.\\nLet\'s look inside the string with string indexing to find out what are elements in the strings:\\n\\n```ts\\nconsole.log(s1[0]) // \xe1\\nconsole.log(s1[1]) // undefined\\n\\nconsole.log(s2[0]) // a\\nconsole.log(s2[1]) //  ́\\nconsole.log(s2[2]) //  undefined\\n```\\n\\nWe can see that `s2` is composed with two independent elements, `a` and ` ́`.\\n\\nJust by seeing the same character can be represented differently, it\'s obvious that string indexing in JavaScript is not reliable either.\\n\\nLet\'s check for equality:\\n\\n```ts\\nconsole.log(s1 === s2) // false \uD83E\uDDD0\\n```\\n\\nTo make it even more interesting, there is another way to compose the character `\xe1`:\\n\\n```ts\\nconst s3: string = \'a\\\\u0301\' // \xe1\\n```\\n\\nIn `s3`, we substitute the code unit `\\\\u0061` with its representing character `a`.\\nLet\'s run some checks:\\n\\n```ts\\nconsole.log(s3.length === 2) // true\\nconsole.log(s2 === s3) // true \uD83E\uDDD0\\nconsole.log(s1 === s3) // false\\n```\\n\\nSo far what we see is that there are multiple code unit compositions to represent the same character.\\nThe equality is defined by the code unit compositions.\\n\\nIt can be highly inconvenient so JavaScript introduced a string method [`normalize()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize) to return the Unicode Normalization Form of a given string.\\nLet\'s try it with `s1`, `s2`, and `s3`:\\n\\n```ts\\nconsole.log(s1.normalize() === s2.normalize()) // true\\nconsole.log(s1.normalize() === s3.normalize()) // true\\n```\\n\\nLet\'s peek inside the normalized forms of `\xe1`:\\n\\n```ts\\n// `escape` is deprecated.\\nescape(s1.normalize()) // \'%E1\'\\nescape(s2.normalize()) // \'%E1\'\\nescape(s3.normalize()) // \'%E1\'\\n```\\n\\nNote that [`escape()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape) is been removed from the ECMAScript standard.\\n\\nThanks to the normalization, handling strings is more predictable now.\\n\\nJavaScript actually provides an official [Encoding API](https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API).\\nWe can use [TextEncoder](https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder) and [TextDecoder](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder) to handle string encoding and decoding.\\n\\n```ts\\nconst encoder = new TextEncoder()\\nconst decoder = new TextDecoder()\\n\\nconst bytes = encoder.encode(\'\\\\u0061\\\\u0301\')\\ndecoder.decode(bytes) // \'\xe1\'\\n```\\n\\n## To Sum up\\n\\nString is complicated. Rust offers a robust system to handle strings and a strict complier to encourage us to think about string handling upfront.\\nOn the other hand, JavaScript provides convenient APIs to handle simple use cases like ASCII.\\nUnder the hood, they both implement Unicode standard and encoding to support written languages internationally.\\n\\n## Reference\\n\\n- [ASCII](https://en.wikipedia.org/wiki/ASCII)\\n- [Unicode](https://en.wikipedia.org/wiki/Unicode)\\n- [UTF-8](https://en.wikipedia.org/wiki/UTF-8)\\n- [UTF-16](https://en.wikipedia.org/wiki/UTF-16)\\n- [Palindrome](https://en.wikipedia.org/wiki/Palindrome)\\n- [The Rust Programming Language](https://doc.rust-lang.org/book/)\\n- [Rust\'s String Internal Representation](https://doc.rust-lang.org/book/ch08-02-strings.html#internal-representation)\\n- [Rust String method `chars()`](https://doc.rust-lang.org/stable/std/string/struct.String.html#method.chars)\\n- [Rust String method `bytes()`](https://doc.rust-lang.org/stable/std/string/struct.String.html#method.bytes)\\n- [Rust String method `zip()`](https://doc.rust-lang.org/std/iter/fn.zip.html)\\n- [Rust String Trait `DoubleEndedIterator`](https://doc.rust-lang.org/std/iter/trait.DoubleEndedIterator.html)\\n- [ECMAScript 2022 Language Specification](https://tc39.es/ecma262/#sec-terms-and-definitions-string-value)\\n- [JavaScript `normalize()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)\\n- [JavaScript `escape()`](https://developer.mozlla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)\\n- [JavaScript Encoding API](https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API)\\n- [JavaScript TextEncoder](https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder)\\n- [JavaScript TextDecoder](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder)\\n- [What every JavaScript developer should know about Unicode](https://dmitripavlutin.com/what-every-javascript-developer-should-know-about-unicode/)\\n\\n---\\n\\n\uD83D\uDCAC Comments on [Reddit](https://www.reddit.com/r/rust/comments/rrc0gg/indexing_strings_in_rust_and_typescript_a_case/).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\n\\nIf you find it useful, please share this article to help more people in their engineering journey.\\n\\nFeel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nIf you\'re interested in writing a CLI with TypeScript and implementing a real-world CLI application with Google Lighthouse integration, check out my previous article [\\"Writing Your Own TypeScript CLI\\"](/articles/writing-your-own-typescript-cli).\\n\\nIf you\'re interested in reading more about image optimization to boost your performance score, take a look at [\\"Using WebP for Better User Experience\\"](/articles/use-webp-for-better-ux).\\nThere we discussed one of the modern image formats that greatly reduces the size of your images without sacrificing quality.\\n\\nIf you\'re wondering how to test Redux Observable, I wrote an article [\\"Writing Better Marble Tests for Redux Observable and TypeScript\\"](https://itnext.io/better-marble-test-70c7676a1e2) just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.\\n\\nHappy coding!\\n","code":"var Component=(()=>{var h=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},l=(a,n,s,i)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let c of m(n))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>n[c],enumerable:!(i=p(n,c))||i.enumerable});return a};var f=(a,n,s)=>(s=a!=null?h(u(a)):{},l(n||!a||!a.__esModule?t(s,\\"default\\",{value:a,enumerable:!0}):s,a)),b=a=>l(t({},\\"__esModule\\",{value:!0}),a);var r=k((I,o)=>{o.exports=_jsx_runtime});var S={};g(S,{default:()=>v,frontmatter:()=>w});var e=f(r()),w={title:\\"Indexing Strings in Rust and TypeScript: A Case Study of String\\",publishedAt:\\"December 28, 2021\\",description:\\"Text is essential in programming languages. String is the Rust\'s and JavaScript\'s definition to process text in written languages around the world. Through the simple concept of string indexing, we\'ll discuss how Rust and JavaScript process strings and how they handle the nuances in strings such as grapheme, or even emojis.\\",cover:\\"/optimized/articles/indexing-strings-in-rust/hero.webp\\",category:\\"Rust\\",coverWidth:\\"1411\\",coverHeight:\\"682\\"};function d(a){let n=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",code:\\"code\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",pre:\\"pre\\",blockquote:\\"blockquote\\",h3:\\"h3\\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"\\\\u{1FAA2} Accessing characters in strings with index is not compilable in Rust.\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"guitar\\",children:\\"\\\\u{1F3B8}\\"}),\\" We\'ll discuss how Rust think about strings.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"robot face\\",children:\\"\\\\u{1F916}\\"}),\\" We\'ll discuss how JavaScript handles strings.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" We\'ll compare a classic algorithm \\",(0,e.jsx)(n.code,{children:\\"is_palindrome\\"}),\\" in Rust and TypeScript.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:`Text is essential in programming languages.\\nString is the Rust\'s and JavaScript\'s definition to process text in written languages around the world.\\nThrough the simple concept of string indexing, we\'ll discuss how Rust and JavaScript process strings and how they handle the nuances in strings such as grapheme, or even emojis.`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s use a classic algorithm \\",(0,e.jsx)(n.code,{children:\\"is_palindrome\\"}),\\" to introduce the concept of string indexing.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"is_palindrome-in-rust\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#is_palindrome-in-rust\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),(0,e.jsx)(n.code,{children:\\"is_palindrome\\"}),\\" in Rust\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"A \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Palindrome\\",children:\\"palindrome\\"}),`, in a very general way of explaining it, is a string that reads the same forward and backward.\\n\\"`,(0,e.jsx)(n.strong,{children:\\"Ana\\"}),\'\\" is a palindrome, \\"\',(0,e.jsx)(n.strong,{children:\\"A dog! A panic in a pagoda!\\"}),\'\\" is a palindrome, or even \\"\',(0,e.jsx)(n.strong,{children:\\"02/02/2020\\"}),\'\\" is a palindrome.\']}),`\\n`,(0,e.jsx)(n.p,{children:`For the purpose of this article, we\'ll use a more narrowed definition to keep the algorithm simple.\\nA palindrome here is defined as a \\"continuous sequence of lowercase ASCII characters without whitespace\\".`}),`\\n`,(0,e.jsx)(n.p,{children:`One intuitive approach would be using two pointers.\\nOne starts from the beginning of the given string moving toward the end, and the other from the end toward the beginning.\\nWhile moving the pointers, compare the pointing characters.\\nThe given string is a palindrome if all the comparisons are equal. Like this:`}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token comment\\",children:[\\"// \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"cross mark\\",children:\\"\\\\u274C\\"}),\\" It won\'t compile\\"]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"is_palindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"bool\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"//        lp       rp\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"//        |        |\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"//        v \\\\u2192    \\\\u2190 v\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\'// str = \\"aabbccbbaa\\"\'}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" lp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" rp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"-\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"while\\"}),\\" lp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\" rp \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"lp\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"!=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"rp\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// ^^^^^^^ `String` cannot be indexed by `usize`\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"false\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    lp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"+=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    rp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"-=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:`If you try to compile the program, you\'ll notice that the Rust compiler won\'t let us access characters by index.\\nIt\'s a very interesting constraint because many languages like JavaScript, Go, and Python offer the feature.`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"As we dig a little deeper, there are some string methods from the standard library like \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/stable/std/string/struct.String.html#method.chars\\",children:(0,e.jsx)(n.code,{children:\\"chars()\\"})}),` to access the characters in a string.\\n`,(0,e.jsx)(n.code,{children:\\"chars()\\"}),\\" returns an iterator over the \\",(0,e.jsx)(n.code,{children:\\"char\\"}),`s of a string slice. So we\'ll have to iterate through a string slice to access characters by index.\\nLike this:`]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsx)(n.code,{className:\\"language-rust code-highlight\\",children:(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" left \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"as_str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"chars\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"nth\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"lp\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"unwrap\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The simple task of accessing a character in a string has the time complexity of \\",(0,e.jsx)(n.code,{children:\\"O(n)\\"}),\\" instead of \\",(0,e.jsx)(n.code,{children:\\"O(1)\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Why is that?\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"rusts-strings-are-in-unicode-and-utf-8-encoded\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#rusts-strings-are-in-unicode-and-utf-8-encoded\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Rust\'s Strings Are in Unicode And UTF-8 Encoded\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can find the \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch08-02-strings.html#internal-representation\\",children:\\"internal representaion\\"}),\\" of Rust\'s String from the \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/\\",children:\\"official Rust book\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsxs)(n.p,{children:[\\"A String is a wrapper over a \\",(0,e.jsx)(n.code,{children:\\"Vec<u8>\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"For strings in \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/ASCII\\",children:\\"ASCII\\"}),\\", each character is represented by 1 byte encoded in \\",(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/UTF-8\\",children:\\"UTF-8\\"}),`.\\nHowever, for strings in other written languages, like `,(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch08-02-strings.html#bytes-and-scalar-values-and-grapheme-clusters-oh-my\\",children:\'\\"\\\\u0928\\\\u092E\\\\u0938\\\\u094D\\\\u0924\\\\u0947\\" in the Devanagari script\'}),` from the Rust book,\\neach character is encoded in UTF-8 with multiple `,(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Unicode\\",children:\\"Unicode\\"}),\\" value (code unit).\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"So in the Rust book, it says:\\"}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsx)(n.p,{children:\\"Indexing into a string is often a bad idea because it\\\\u2019s not clear what the return type of the string-indexing operation should be: a byte value, a character, a grapheme cluster, or a string slice.\\"}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[`It\'s one of the reasons why the Rust compiler does not allows the direct access to characters in strings.\\nI really recommend you to read more about it in the `,(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch08-02-strings.html\\",children:\\"Rust book\\"}),`.\\nIt\'s very easy to read and insightful`,(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"clapping hands\\",children:\\"\\\\u{1F44F}\\"}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"correcting-is_palindrome\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#correcting-is_palindrome\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Correcting \\",(0,e.jsx)(n.code,{children:\\"is_palindrome\\"})]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can iterate over \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/stable/std/string/struct.String.html#method.bytes\\",children:\\"bytes\\"}),` and compare the first half of the string with the reversed second half.\\nIt\'s a palindrome if they were equal:`]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsxs)(n.span,{className:\\"token comment\\",children:[\\"// \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"white heavy check mark\\",children:\\"\\\\u2705\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"is_palindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"bool\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" half \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"len\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"/\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" forward \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"bytes\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"take\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"half\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" backward \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"bytes\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"rev\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"take\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"half\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    forward\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"eq\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"backward\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"main\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"is_palindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"true\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"is_palindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"aabbccbbaa\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"true\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token macro property\\",children:\\"assert_eq!\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"is_palindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"::\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"from\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\'\\"aabbccbbab\\"\'}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"false\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The time and space complexity:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"O(n) time, where n is the length of the string.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"O(1) space.\\"}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The space complexity is \\",(0,e.jsx)(n.code,{children:\\"O(1)\\"}),\\" because each iterator creates a pointer and a counter.\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Another approach would be using the \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/std/iter/trait.DoubleEndedIterator.html\\",children:\\"DoubleEndedIterator\\"}),\\" trait and combining the forward and backward iterators with \\",(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/std/iter/fn.zip.html\\",children:(0,e.jsx)(n.code,{children:\\"zip()\\"})}),\\":\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-rust\\",children:(0,e.jsxs)(n.code,{className:\\"language-rust code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"fn\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-definition function\\",children:\\"is_palindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"str\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"String\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"->\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"bool\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"mut\\"}),\\" chars \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" string\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"bytes\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"while\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Some\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"front\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" back\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" chars\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"next\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"zip\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"chars\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"next_back\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" front \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"!=\\"}),\\" back \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"            \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"false\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"        \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The time and space complexity:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"O(n) time, where n is the length of the string.\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"O(1) space.\\"}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/programming/comments/rr9dlw/indexing_strings_in_rust_and_typescript_a_case/\\",children:\\"This approach is suggested on Reddit\\"}),`.\\nThanks a lot!`]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"ispalindrome-in-typescript\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#ispalindrome-in-typescript\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),(0,e.jsx)(n.code,{children:\\"isPalindrome\\"}),\\" in TypeScript\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"JavaScript allows string index. So we can actually translate the two pointer algorithm that didn\'t compile in rust.\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token comment\\",children:`/*\\n`})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token comment\\",children:` *  lp       rp\\n`})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token comment\\",children:` *  |        |\\n`})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token comment\\",children:` *  v \\\\u2192    \\\\u2190 v\\n`})}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:(0,e.jsx)(n.span,{className:\\"token comment\\",children:` * \\"aabbccbbaa\\"\\n`})}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\" */\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"isPalindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"str\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"boolean\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" lp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"let\\"}),\\" rp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" str\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"length \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"-\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"while\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"lp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\" rp\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"str\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"lp\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"!==\\"}),\\" str\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"rp\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"false\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    lp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"+=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    rp \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"-=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token boolean\\",children:\\"true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"isPalindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"isPalindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'aabbccbbaa\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"isPalindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'aabbccbbab\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// false\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The time and space complexity are:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"O(n) time, where n is the length of the string\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"O(1) space. Constant space for the two pointers.\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Or just compare the string forward and backward:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"isPalindrome\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"str\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"boolean\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" str \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" str\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"split\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"reverse\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"join\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"The time and space complexity:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"O(n) time, where n is the length of the input string\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"O(n) space, where n is the length of the input string\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"It\'s fairly easy in JavaScript. Does it mean that JavaScript treat strings differently than Rust does?\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"javascript-strings-are-utf-16-encoded\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#javascript-strings-are-utf-16-encoded\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"JavaScript Strings are UTF-16 encoded\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can find the definition of string primitive value in \\",(0,e.jsx)(n.a,{href:\\"https://tc39.es/ecma262/#sec-terms-and-definitions-string-value\\",children:\\"ECMAScript Standard\\"}),\\":\\"]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsx)(n.p,{children:\\"primitive value that is a finite ordered sequence of zero or more 16-bit unsigned integer values\\"}),`\\n`]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsx)(n.p,{children:\\"A String value is a member of the String type. Each integer value in the sequence usually represents a single 16-bit unit of UTF-16 text.\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"In other word, each JavaScript character is represented in Unicode with two bytes and it\'s encoded in UTF-16.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s have a look at some examples. We can use one or two code units to create a character:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" s1\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\\\\\\\\u00E1\'\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \\\\xE1\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" s2\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\\\\\\\\u0061\\\\\\\\u0301\'\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \\\\xE1\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Both \\",(0,e.jsx)(n.code,{children:\\"s1\\"}),\\" and \\",(0,e.jsx)(n.code,{children:\\"s2\\"}),\\" makes up a \\",(0,e.jsx)(n.code,{children:\\"\\\\xE1\\"}),\\". If we check the length of both strings:\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"length\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// 1\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"length\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// 2\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:`The lengths are different even though they both are representing the same character.\\nLet\'s look inside the string with string indexing to find out what are elements in the strings:`}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \\\\xE1\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// undefined\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// a\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"1\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"//  \\\\u0301\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"//  undefined\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We can see that \\",(0,e.jsx)(n.code,{children:\\"s2\\"}),\\" is composed with two independent elements, \\",(0,e.jsx)(n.code,{children:\\"a\\"}),\\" and \\",(0,e.jsx)(n.code,{children:\\" \\\\u0301\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Just by seeing the same character can be represented differently, it\'s obvious that string indexing in JavaScript is not reliable either.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s check for equality:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsx)(n.code,{className:\\"language-ts code-highlight\\",children:(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1 \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token comment\\",children:[\\"// false \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D0}\\"})]}),`\\n`]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"To make it even more interesting, there is another way to compose the character \\",(0,e.jsx)(n.code,{children:\\"\\\\xE1\\"}),\\":\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsx)(n.code,{className:\\"language-ts code-highlight\\",children:(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" s3\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'a\\\\\\\\u0301\'\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \\\\xE1\\"}),`\\n`]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"In \\",(0,e.jsx)(n.code,{children:\\"s3\\"}),\\", we substitute the code unit \\",(0,e.jsx)(n.code,{children:\\"\\\\\\\\u0061\\"}),\\" with its representing character \\",(0,e.jsx)(n.code,{children:\\"a\\"}),`.\\nLet\'s run some checks:`]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s3\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"length \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"2\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s2 \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" s3\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token comment\\",children:[\\"// true \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D0}\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1 \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" s3\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// false\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:`So far what we see is that there are multiple code unit compositions to represent the same character.\\nThe equality is defined by the code unit compositions.`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"It can be highly inconvenient so JavaScript introduced a string method \\",(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\\",children:(0,e.jsx)(n.code,{children:\\"normalize()\\"})}),` to return the Unicode Normalization Form of a given string.\\nLet\'s try it with `,(0,e.jsx)(n.code,{children:\\"s1\\"}),\\", \\",(0,e.jsx)(n.code,{children:\\"s2\\"}),\\", and \\",(0,e.jsx)(n.code,{children:\\"s3\\"}),\\":\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// true\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"log\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"===\\"}),\\" s3\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// true\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Let\'s peek inside the normalized forms of \\",(0,e.jsx)(n.code,{children:\\"\\\\xE1\\"}),\\":\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// `escape` is deprecated.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"escape\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s1\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \'%E1\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"escape\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s2\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \'%E1\'\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"escape\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"s3\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"normalize\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \'%E1\'\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Note that \\",(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape\\",children:(0,e.jsx)(n.code,{children:\\"escape()\\"})}),\\" is been removed from the ECMAScript standard.\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Thanks to the normalization, handling strings is more predictable now.\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"JavaScript actually provides an official \\",(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API\\",children:\\"Encoding API\\"}),`.\\nWe can use `,(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder\\",children:\\"TextEncoder\\"}),\\" and \\",(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder\\",children:\\"TextDecoder\\"}),\\" to handle string encoding and decoding.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-ts\\",children:(0,e.jsxs)(n.code,{className:\\"language-ts code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" encoder \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"new\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"TextEncoder\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" decoder \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"new\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"TextDecoder\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" bytes \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" encoder\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"encode\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\\\\\\\\u0061\\\\\\\\u0301\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"decoder\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"decode\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"bytes\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// \'\\\\xE1\'\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"to-sum-up\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#to-sum-up\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"To Sum up\\"]}),`\\n`,(0,e.jsx)(n.p,{children:`String is complicated. Rust offers a robust system to handle strings and a strict complier to encourage us to think about string handling upfront.\\nOn the other hand, JavaScript provides convenient APIs to handle simple use cases like ASCII.\\nUnder the hood, they both implement Unicode standard and encoding to support written languages internationally.`}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"reference\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#reference\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Reference\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/ASCII\\",children:\\"ASCII\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Unicode\\",children:\\"Unicode\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/UTF-8\\",children:\\"UTF-8\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/UTF-16\\",children:\\"UTF-16\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://en.wikipedia.org/wiki/Palindrome\\",children:\\"Palindrome\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/\\",children:\\"The Rust Programming Language\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://doc.rust-lang.org/book/ch08-02-strings.html#internal-representation\\",children:\\"Rust\'s String Internal Representation\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/stable/std/string/struct.String.html#method.chars\\",children:[\\"Rust String method \\",(0,e.jsx)(n.code,{children:\\"chars()\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/stable/std/string/struct.String.html#method.bytes\\",children:[\\"Rust String method \\",(0,e.jsx)(n.code,{children:\\"bytes()\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/iter/fn.zip.html\\",children:[\\"Rust String method \\",(0,e.jsx)(n.code,{children:\\"zip()\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://doc.rust-lang.org/std/iter/trait.DoubleEndedIterator.html\\",children:[\\"Rust String Trait \\",(0,e.jsx)(n.code,{children:\\"DoubleEndedIterator\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://tc39.es/ecma262/#sec-terms-and-definitions-string-value\\",children:\\"ECMAScript 2022 Language Specification\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\\",children:[\\"JavaScript \\",(0,e.jsx)(n.code,{children:\\"normalize()\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.a,{href:\\"https://developer.mozlla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape\\",children:[\\"JavaScript \\",(0,e.jsx)(n.code,{children:\\"escape()\\"})]})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API\\",children:\\"JavaScript Encoding API\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder\\",children:\\"JavaScript TextEncoder\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder\\",children:\\"JavaScript TextDecoder\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://dmitripavlutin.com/what-every-javascript-developer-should-know-about-unicode/\\",children:\\"What every JavaScript developer should know about Unicode\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" Comments on \\",(0,e.jsx)(n.a,{href:\\"https://www.reddit.com/r/rust/comments/rrc0gg/indexing_strings_in_rust_and_typescript_a_case/\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"If you find it useful, please share this article to help more people in their engineering journey.\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re interested in writing a CLI with TypeScript and implementing a real-world CLI application with Google Lighthouse integration, check out my previous article \\",(0,e.jsx)(n.a,{href:\\"/articles/writing-your-own-typescript-cli\\",children:\'\\"Writing Your Own TypeScript CLI\\"\'}),\\".\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re interested in reading more about image optimization to boost your performance score, take a look at \\",(0,e.jsx)(n.a,{href:\\"/articles/use-webp-for-better-ux\\",children:\'\\"Using WebP for Better User Experience\\"\'}),`.\\nThere we discussed one of the modern image formats that greatly reduces the size of your images without sacrificing quality.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"If you\'re wondering how to test Redux Observable, I wrote an article \\",(0,e.jsx)(n.a,{href:\\"https://itnext.io/better-marble-test-70c7676a1e2\\",children:\'\\"Writing Better Marble Tests for Redux Observable and TypeScript\\"\'}),` just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function y(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(d,a)})):d(a)}var v=y;return b(S);})();\\n;return Component;"},"_id":"articles/indexing-strings-in-rust-and-typescript.mdx","_raw":{"sourceFilePath":"articles/indexing-strings-in-rust-and-typescript.mdx","sourceFileName":"indexing-strings-in-rust-and-typescript.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/indexing-strings-in-rust-and-typescript"},"type":"Article","readingTime":{"text":"9 min read","minutes":8.25,"time":495000,"words":1650},"wordCount":1652,"slug":"indexing-strings-in-rust-and-typescript"},{"title":"Is Qwik Faster than React Server Component?","publishedAt":"Jan 26, 2023","description":"A benchmark comparison and analysis between Qwik and Next.js 13.","cover":"/optimized/articles/qwik-vs-next/hero.webp","category":"Frontend","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83D\uDD25 We\'ll find out whether the trending framework Qwik is faster than Next.js\\n- \uD83E\uDD16 We\'ll look at a demo that generates with OpenAI\'s DALL-E and its performance benchmark.\\n- \uD83D\uDE80 We\'ll discuss how Next.js leverages React server component to achieve fast SSR.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://medium.com/better-programming/is-qwik-faster-than-react-server-component-822030a0b0e)\\n- [Hacker Noon](https://hackernoon.com/qwik-vs-nextjs-speed-comparison)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nPage speed matters. Faster website results in [better UX, better SEO, and more profit][9]. The [latest research done by Rekuten 24][27] shows that optimizing [Core Web Vitals][21] leads to:\\n\\n> - 53.37% in revenue per visitor.\\n> - 33.13% in conversion rate.\\n> - 15.20% in average order value.\\n> - 9.99% in average time spent.\\n> - A 35.12% reduction in exit rate.\\n\\nThe modern frameworks and frontend libraries address speed and help developers ship better user experience to the users. We\'ll be discussing two of the modern frameworks: [Qwik][3] and [Next.js][28]. We\'ll see an experiment benchmark and look into how each framework achieves optimal performance.\\n\\nLet\'s go.\\n\\n## How The Experiment Is Set Up\\n\\n- qwik v0.16\\n- Next.js v13\\n- React v18\\n\\n## Let\'s Peek The Result\\n\\nI built two identical applications with Qwik and Next.js and measured the performances. The demo look like this:\\n\\n<img\\n  src=\\"/articles/qwik-vs-next/demo.gif\\"\\n  alt=\\"DALL-E web app demo\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n> You can find [the demo on GitHub][18]. Feel free to take a look at the repo and try it out✨\\n\\nThe application lets users enter prompts to [DALL\xb7E][0], an AI image generator, and displays the generated AI images in the page. It also displays the latest Twitter feed about DALL\xb7E.\\n\\nThe key features are:\\n\\n- Server Side rendering the application.\\n- Client side fetching the image results with [DALL\xb7E\'s REST API][1].\\n- Server side fetching the Twitter feed with [Twitter\'s REST API][20].\\n\\nHere\'s the core Web Vitals by Lighthouse for Qwik:\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/qwik-lighthouse.webp\\"\\n  alt=\\"Qwik Lighthouse score\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nComparing to Next.js\'s Web Vitals:\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/sc-lighthouse.webp\\"\\n  alt=\\"Next with server component Lighthouse score\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWe can observe the following:\\n\\n- Qwik\'s [speed index][22] is 0.5 s faster than Next.js.\\n- Qwik\'s [time to interactive][24] is 0.3 s faster than Next.js.\\n- Next.js has a 0 ms [total blocking time][23], comparing to Qwik\'s 160 ms.\\n- Next.js has a slightly higher overall [performance score][10] by 5 points.\\n- Next.js\'s [largest contentful paint][25] is 0.8 s faster than Qwik.\\n\\nLet\'s take a closer look at the how the application in each framework is set up.\\n\\n## Qwik Server Side Rendering\\n\\nThe component structure:\\n\\n```tsx:qwik/src/routes/index.tsx\\nexport const onGet: RequestHandler<TwitterResponse> = async () => {\\n  const data = await fetchTweets();\\n  return data;\\n}\\n\\nexport default component$(() => {\\n  const tweets = useEndpoint<TwitterResponse>();\\n  return (\\n    <Layout>\\n      <DallePromptAndResult />\\n      <Resource\\n        value={tweets}\\n        onResolved={(result) => (\\n          <SSRTwitterCarousel data={result} />\\n        )}\\n      />\\n      <StaticPromptRecommendation />\\n    </Layout>\\n  )\\n})\\n```\\n\\nWhen the Qwik server receives a page request, it starts the rendering process on the server. The \\"useEndPoint\\" function invokes the \\"onGet\\" function on the server and fetches the twitter feed. The \\"Resource\\" component will pause the rendering until the twitter data is resolved or rejected. Once the rendering is completed, the server responds to the client with rendered HTML.\\n\\nWe can observe the server side rendering behavior in the performance profile:\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/qwik-perf.webp\\"\\n  alt=\\"Qwik performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe lead time to respond to the client is blocked by the server side data fetching and component rendering.\\n\\n## Next.js SSR and Streaming\\n\\nThe component structure:\\n\\n```tsx:next/app/page.tsx\\nexport default async function Page() {\\n  const tweets = await fetchTweets();\\n  return (\\n    <Layout>\\n      <DallePromptAndResult />\\n      <Suspense fallback={<Skeleton />}>\\n        <SSRTwitterCarousel data={tweets} />\\n      </Suspense>\\n      <StaticPromptRecommendation />\\n    </Layout>\\n  )\\n}\\n```\\n\\nThe \\"Page\\" component is a server component. It looks just like a normal component but it supports async/await.\\n\\nWhen the Next.js server receives a page request, it starts the rendering process and [streaming][26] the rendering result to the client so that the client can progressively render and display the UI to the users. While the server is fetching twitter feeds, React renders the suspense placeholder to indicate the pending state. Once the data is resolved or rejected, React reveals the suspense boundary and displays the final UI.\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/sc-perf.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nYou can see the client starts rendering while the server is streaming. It reduces the lead time for the users to start seeing the page.\\n\\n## Resumability v.s. React Server Component\\n\\n> Qwik embraces the \\"Get HTML and render\\" mental model.\\n\\n[Resumability][6] is Qwik\'s innovation. It allows an application to be rendered as much as possible on the server and resumes the rest of the rendering on the client.\\n\\nThe framework looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/qwik.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWhen receiving a request, the Qwik server starts the rendering process and generate\\n\\n- serialized application state,\\n- serialized event handlers,\\n- component HTMLs,\\n- and component code chunks.\\n\\nThe server then responds to the client with the page HTML and the serialized state.\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/qwik-network.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nOn the client, the browser processes the [critical rendering path][12] and displays the UI. Qwik deserializes the state after the page HTML is loaded. The state contains all the local states of each component. The lazy loaded components are able to be dynamically imported independently without knowing the parent\'s state because they can refer to the deserialized state for their local states when they are rendering on the client.\\n\\nQwik also serializes event handlers.\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/qwik-serd.webp\\"\\n  alt=\\"Qwik serialization\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIn the server-generated HTML, the event handlers are referenced as dynamic JavaScript chunks. When users interact with an interactive element, Qwik uses the reference to dynamically download the chunk from the server and fire the event with the event handler inside the chunk.\\n\\n<img\\n  src=\\"/articles/qwik-vs-next/qwik-dynamic-import.gif\\"\\n  alt=\\"Qwik dynamic import\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nOn the other hand, Next.js has a different approach to server side rendering.\\n\\n> Next.js and React server component promotes the \\"Render while fetching\\" mental model.\\n\\n[Next.js 13 introduces React server component as an experimental feature][13]. [Server component][14] is a special type of component that can only be rendered on the server. Combining with Suspense and Streaming, the framework is able to progressively render interactive UI while avoiding long data requests from blocking the page rendering.\\n\\nThe framework looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/next.webp\\"\\n  alt=\\"Next.js and React Server Component\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWhen Next.js server receives a request, it delegates React to handle rendering. On the server, React renders the component tree into a UI description in JSON instead of native HTML. The UI description describes the entire component tree. For the client components, React describes them as components for the client to handle with serialized props. For the server components, React renders them to native HTMLs and places them in the UI description.\\n\\nOn the client, React receives and reconciles the UI description in the response stream to progressively render the UI. When React sees a suspense boundary, it renders the suspense placeholder until the pending data is resolved and reveals the suspense boundary.\\n\\nBecause React receives a UI description instead of native HTML on the client, it needs to construct the component tree, render the UI, and attach event handlers on the client. It\'s known as hydration.\\n\\n<img\\n  src=\\"/optimized/articles/qwik-vs-next/sc-perf-2.webp\\"\\n  alt=\\"Next.js and React Server Component\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Final Thoughts\\n\\nQwik\'s concept of [serializing states and event handlers][4] is very innovative. The client is able to render the page with just HTML and minimal JavaScript. It reduces the amount of JavaScript the client needs to download for the initial load and leverages dynamic import to download event handlers and components on the fly. We can clearly observe the benefit from the benchmark and performance profile.\\n\\nHowever, the combination of React server component, suspense, and streaming has a profound impact on user experience. Users are able to see and interact with the content of the page without waiting for server side data fetching to complete.\\n\\nThe result of the experiment is not conclusive to me. Both frameworks performed well in the benchmarks. The differences in First Content Paint, Largest Content Paint, and Cumulative Layout Shift are likely a result of different Twitter images.\\n\\n## References\\n\\n- [API Reference: Create image][1] - OpenAI\\n- [Case Study][9] - web.dev\\n- [Critical rendering path][12] - MDN\\n- [DALL\xb7E 2][0] - OpenAI\\n- [Data Fetching Fundamentals][17] - Next.js\\n- [First class support for promises][19] - Andrew Clark\\n- [How Rakuten 24\'s investment in Core Web Vitals increased revenue per visitor by 53.37% and conversion rate by 33.13%][27] - web.dev\\n- [Hydration is Pure Overhead][4] - Builder.io\\n- [Lighthouse performance scoring][10] - Chrome Developers\\n- [Lazy loading][11] - MDN\\n- [Next.js][28] - Vercel\\n- [Node.js library][2] - OpenAI\\n- [Populating the page: how browsers work][16] - MDN\\n- [Progressively][7] - Builder.io\\n- [qwik][3] - Builder.io\\n- [qwik-vs-next][18] - Daw-Chih Liou\\n- [RFC: React Server Components][14] - React Community\\n- [Resumable vs. Hydration][6] - Builder.io\\n- [Reactivity][8] - Builder.io\\n- [Server and Client Components][13] - Next.js\\n- [The \\"why\\" of web performance][15] - MDN\\n- [Think Qwik][5] - Builder.io\\n- [Time to Interfactive][24] - Chrome Developers\\n- [Total Blocking Time][23] - Chrome Developers\\n- [Twitter API v2][20] - Twitter Developer Aplatform\\n- [Web Vitals][21] - web.dev\\n- [Speed Index][22] - Chrome Developers\\n- [Largest Contentful Paint][25] - Chrome Developers\\n\\n[0]: https://openai.com/dall-e-2/\\n[1]: https://beta.openai.com/docs/api-reference/images/create\\n[2]: https://beta.openai.com/docs/libraries/node-js-library\\n[3]: https://qwik.builder.io\\n[4]: https://www.builder.io/blog/hydration-is-pure-overhead\\n[5]: https://qwik.builder.io/docs/think-qwik/\\n[6]: https://qwik.builder.io/docs/concepts/resumable/\\n[7]: https://qwik.builder.io/docs/concepts/progressive/\\n[8]: https://qwik.builder.io/docs/concepts/reactivity/\\n[9]: https://web.dev/tags/case-study/\\n[10]: https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/\\n[11]: https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\\n[12]: https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\\n[13]: https://beta.nextjs.org/docs/rendering/server-and-client-components\\n[14]: https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md\\n[15]: https://developer.mozilla.org/en-US/docs/Learn/Performance/why_web_performance\\n[16]: https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work\\n[17]: https://beta.nextjs.org/docs/data-fetching/fundamentals#fetching-data-with-server-components\\n[18]: https://github.com/DawChihLiou/qwik-vs-next\\n[19]: https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md#seamless-integration-with-javascript-ecosystem\\n[20]: https://developer.twitter.com/en/docs/twitter-api\\n[21]: https://web.dev/vitals/\\n[22]: https://developer.chrome.com/en/docs/lighthouse/performance/speed-index/\\n[23]: https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time/\\n[24]: https://developer.chrome.com/docs/lighthouse/performance/interactive/\\n[25]: https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint/\\n[26]: https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense\\n[27]: https://web.dev/rakuten/\\n[28]: https://nextjs.org\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Tired of Slow Code Reviews? Read this**](/articles/tired-of-slow-code-reviews)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},c=(a,e,t,r)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let s of m(e))!k.call(a,s)&&s!==t&&i(a,s,{get:()=>e[s],enumerable:!(r=p(e,s))||r.enumerable});return a};var f=(a,e,t)=>(t=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?i(t,\\"default\\",{value:a,enumerable:!0}):t,a)),w=a=>c(i({},\\"__esModule\\",{value:!0}),a);var o=N((T,l)=>{l.exports=_jsx_runtime});var y={};g(y,{default:()=>x,frontmatter:()=>v});var n=f(o()),v={title:\\"Is Qwik Faster than React Server Component?\\",publishedAt:\\"Jan 26, 2023\\",description:\\"A benchmark comparison and analysis between Qwik and Next.js 13.\\",cover:\\"/optimized/articles/qwik-vs-next/hero.webp\\",category:\\"Frontend\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function h(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",blockquote:\\"blockquote\\",div:\\"div\\",pre:\\"pre\\",code:\\"code\\",strong:\\"strong\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"fire\\",children:\\"\\\\u{1F525}\\"}),\\" We\'ll find out whether the trending framework Qwik is faster than Next.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"robot face\\",children:\\"\\\\u{1F916}\\"}),\\" We\'ll look at a demo that generates with OpenAI\'s DALL-E and its performance benchmark.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\" We\'ll discuss how Next.js leverages React server component to achieve fast SSR.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://medium.com/better-programming/is-qwik-faster-than-react-server-component-822030a0b0e\\",children:\\"Better Programming\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://hackernoon.com/qwik-vs-nextjs-speed-comparison\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Page speed matters. Faster website results in \\",(0,n.jsx)(e.a,{href:\\"https://web.dev/tags/case-study/\\",children:\\"better UX, better SEO, and more profit\\"}),\\". The \\",(0,n.jsx)(e.a,{href:\\"https://web.dev/rakuten/\\",children:\\"latest research done by Rekuten 24\\"}),\\" shows that optimizing \\",(0,n.jsx)(e.a,{href:\\"https://web.dev/vitals/\\",children:\\"Core Web Vitals\\"}),\\" leads to:\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"53.37% in revenue per visitor.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"33.13% in conversion rate.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"15.20% in average order value.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"9.99% in average time spent.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"A 35.12% reduction in exit rate.\\"}),`\\n`]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The modern frameworks and frontend libraries address speed and help developers ship better user experience to the users. We\'ll be discussing two of the modern frameworks: \\",(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io\\",children:\\"Qwik\\"}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://nextjs.org\\",children:\\"Next.js\\"}),\\". We\'ll see an experiment benchmark and look into how each framework achieves optimal performance.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"how-the-experiment-is-set-up\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-the-experiment-is-set-up\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How The Experiment Is Set Up\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"qwik v0.16\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Next.js v13\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"React v18\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"lets-peek-the-result\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#lets-peek-the-result\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Let\'s Peek The Result\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"I built two identical applications with Qwik and Next.js and measured the performances. The demo look like this:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/articles/qwik-vs-next/demo.gif\\",alt:\\"DALL-E web app demo\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can find \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/qwik-vs-next\\",children:\\"the demo on GitHub\\"}),\\". Feel free to take a look at the repo and try it out\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The application lets users enter prompts to \\",(0,n.jsx)(e.a,{href:\\"https://openai.com/dall-e-2/\\",children:\\"DALL\\\\xB7E\\"}),\\", an AI image generator, and displays the generated AI images in the page. It also displays the latest Twitter feed about DALL\\\\xB7E.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The key features are:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Server Side rendering the application.\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Client side fetching the image results with \\",(0,n.jsx)(e.a,{href:\\"https://beta.openai.com/docs/api-reference/images/create\\",children:\\"DALL\\\\xB7E\'s REST API\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Server side fetching the Twitter feed with \\",(0,n.jsx)(e.a,{href:\\"https://developer.twitter.com/en/docs/twitter-api\\",children:\\"Twitter\'s REST API\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Here\'s the core Web Vitals by Lighthouse for Qwik:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/qwik-lighthouse.webp\\",alt:\\"Qwik Lighthouse score\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Comparing to Next.js\'s Web Vitals:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/sc-lighthouse.webp\\",alt:\\"Next with server component Lighthouse score\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"We can observe the following:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"Qwik\'s \\",(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/en/docs/lighthouse/performance/speed-index/\\",children:\\"speed index\\"}),\\" is 0.5 s faster than Next.js.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Qwik\'s \\",(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/interactive/\\",children:\\"time to interactive\\"}),\\" is 0.3 s faster than Next.js.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Next.js has a 0 ms \\",(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time/\\",children:\\"total blocking time\\"}),\\", comparing to Qwik\'s 160 ms.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Next.js has a slightly higher overall \\",(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/\\",children:\\"performance score\\"}),\\" by 5 points.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Next.js\'s \\",(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint/\\",children:\\"largest contentful paint\\"}),\\" is 0.8 s faster than Qwik.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s take a closer look at the how the application in each framework is set up.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"qwik-server-side-rendering\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#qwik-server-side-rendering\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Qwik Server Side Rendering\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The component structure:\\"}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"qwik/src/routes/index.tsx\\"}),(0,n.jsx)(e.pre,{className:\\"language-tsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-tsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" onGet\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"RequestHandler\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token maybe-class-name\\",children:\\"TwitterResponse\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" data \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"fetchTweets\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" data\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"component$\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" tweets \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token generic-function\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"useEndpoint\\"}),(0,n.jsxs)(e.span,{className:\\"token generic class-name\\",children:[(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\"TwitterResponse\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Layout\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"DallePromptAndResult\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Resource\\"})]}),`\\n`]})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"value\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"tweets\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"onResolved\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"result\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]})]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token tag\\",children:(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[\\"          \\",(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"SSRTwitterCarousel\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"data\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"result\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),`\\n`]})})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),`\\n`]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"StaticPromptRecommendation\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Layout\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\'When the Qwik server receives a page request, it starts the rendering process on the server. The \\"useEndPoint\\" function invokes the \\"onGet\\" function on the server and fetches the twitter feed. The \\"Resource\\" component will pause the rendering until the twitter data is resolved or rejected. Once the rendering is completed, the server responds to the client with rendered HTML.\'}),`\\n`,(0,n.jsx)(e.p,{children:\\"We can observe the server side rendering behavior in the performance profile:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/qwik-perf.webp\\",alt:\\"Qwik performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The lead time to respond to the client is blocked by the server side data fetching and component rendering.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"nextjs-ssr-and-streaming\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#nextjs-ssr-and-streaming\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Next.js SSR and Streaming\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The component structure:\\"}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"next/app/page.tsx\\"}),(0,n.jsx)(e.pre,{className:\\"language-tsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-tsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"default\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"Page\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" tweets \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"fetchTweets\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Layout\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"DallePromptAndResult\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Suspense\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"fallback\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Skeleton\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"        \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"SSRTwitterCarousel\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"data\\"}),(0,n.jsxs)(e.span,{className:\\"token script language-javascript\\",children:[(0,n.jsx)(e.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"tweets\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Suspense\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"StaticPromptRecommendation\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Layout\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\'The \\"Page\\" component is a server component. It looks just like a normal component but it supports async/await.\'}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"When the Next.js server receives a page request, it starts the rendering process and \\",(0,n.jsx)(e.a,{href:\\"https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense\\",children:\\"streaming\\"}),\\" the rendering result to the client so that the client can progressively render and display the UI to the users. While the server is fetching twitter feeds, React renders the suspense placeholder to indicate the pending state. Once the data is resolved or rejected, React reveals the suspense boundary and displays the final UI.\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/sc-perf.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"You can see the client starts rendering while the server is streaming. It reduces the lead time for the users to start seeing the page.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"resumability-vs-react-server-component\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#resumability-vs-react-server-component\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Resumability v.s. React Server Component\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:\'Qwik embraces the \\"Get HTML and render\\" mental model.\'}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io/docs/concepts/resumable/\\",children:\\"Resumability\\"}),\\" is Qwik\'s innovation. It allows an application to be rendered as much as possible on the server and resumes the rest of the rendering on the client.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The framework looks like this:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/qwik.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"When receiving a request, the Qwik server starts the rendering process and generate\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"serialized application state,\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"serialized event handlers,\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"component HTMLs,\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"and component code chunks.\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The server then responds to the client with the page HTML and the serialized state.\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/qwik-network.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"On the client, the browser processes the \\",(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\\",children:\\"critical rendering path\\"}),\\" and displays the UI. Qwik deserializes the state after the page HTML is loaded. The state contains all the local states of each component. The lazy loaded components are able to be dynamically imported independently without knowing the parent\'s state because they can refer to the deserialized state for their local states when they are rendering on the client.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Qwik also serializes event handlers.\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/qwik-serd.webp\\",alt:\\"Qwik serialization\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"In the server-generated HTML, the event handlers are referenced as dynamic JavaScript chunks. When users interact with an interactive element, Qwik uses the reference to dynamically download the chunk from the server and fire the event with the event handler inside the chunk.\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/articles/qwik-vs-next/qwik-dynamic-import.gif\\",alt:\\"Qwik dynamic import\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"On the other hand, Next.js has a different approach to server side rendering.\\"}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:\'Next.js and React server component promotes the \\"Render while fetching\\" mental model.\'}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://beta.nextjs.org/docs/rendering/server-and-client-components\\",children:\\"Next.js 13 introduces React server component as an experimental feature\\"}),\\". \\",(0,n.jsx)(e.a,{href:\\"https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md\\",children:\\"Server component\\"}),\\" is a special type of component that can only be rendered on the server. Combining with Suspense and Streaming, the framework is able to progressively render interactive UI while avoiding long data requests from blocking the page rendering.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The framework looks like this:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/next.webp\\",alt:\\"Next.js and React Server Component\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"When Next.js server receives a request, it delegates React to handle rendering. On the server, React renders the component tree into a UI description in JSON instead of native HTML. The UI description describes the entire component tree. For the client components, React describes them as components for the client to handle with serialized props. For the server components, React renders them to native HTMLs and places them in the UI description.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"On the client, React receives and reconciles the UI description in the response stream to progressively render the UI. When React sees a suspense boundary, it renders the suspense placeholder until the pending data is resolved and reveals the suspense boundary.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Because React receives a UI description instead of native HTML on the client, it needs to construct the component tree, render the UI, and attach event handlers on the client. It\'s known as hydration.\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/qwik-vs-next/sc-perf-2.webp\\",alt:\\"Next.js and React Server Component\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Qwik\'s concept of \\",(0,n.jsx)(e.a,{href:\\"https://www.builder.io/blog/hydration-is-pure-overhead\\",children:\\"serializing states and event handlers\\"}),\\" is very innovative. The client is able to render the page with just HTML and minimal JavaScript. It reduces the amount of JavaScript the client needs to download for the initial load and leverages dynamic import to download event handlers and components on the fly. We can clearly observe the benefit from the benchmark and performance profile.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"However, the combination of React server component, suspense, and streaming has a profound impact on user experience. Users are able to see and interact with the content of the page without waiting for server side data fetching to complete.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The result of the experiment is not conclusive to me. Both frameworks performed well in the benchmarks. The differences in First Content Paint, Largest Content Paint, and Cumulative Layout Shift are likely a result of different Twitter images.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://beta.openai.com/docs/api-reference/images/create\\",children:\\"API Reference: Create image\\"}),\\" - OpenAI\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://web.dev/tags/case-study/\\",children:\\"Case Study\\"}),\\" - web.dev\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path\\",children:\\"Critical rendering path\\"}),\\" - MDN\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://openai.com/dall-e-2/\\",children:\\"DALL\\\\xB7E 2\\"}),\\" - OpenAI\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://beta.nextjs.org/docs/data-fetching/fundamentals#fetching-data-with-server-components\\",children:\\"Data Fetching Fundamentals\\"}),\\" - Next.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md#seamless-integration-with-javascript-ecosystem\\",children:\\"First class support for promises\\"}),\\" - Andrew Clark\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://web.dev/rakuten/\\",children:\\"How Rakuten 24\'s investment in Core Web Vitals increased revenue per visitor by 53.37% and conversion rate by 33.13%\\"}),\\" - web.dev\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.builder.io/blog/hydration-is-pure-overhead\\",children:\\"Hydration is Pure Overhead\\"}),\\" - Builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/\\",children:\\"Lighthouse performance scoring\\"}),\\" - Chrome Developers\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\\",children:\\"Lazy loading\\"}),\\" - MDN\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://nextjs.org\\",children:\\"Next.js\\"}),\\" - Vercel\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://beta.openai.com/docs/libraries/node-js-library\\",children:\\"Node.js library\\"}),\\" - OpenAI\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work\\",children:\\"Populating the page: how browsers work\\"}),\\" - MDN\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io/docs/concepts/progressive/\\",children:\\"Progressively\\"}),\\" - Builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io\\",children:\\"qwik\\"}),\\" - Builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/qwik-vs-next\\",children:\\"qwik-vs-next\\"}),\\" - Daw-Chih Liou\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md\\",children:\\"RFC: React Server Components\\"}),\\" - React Community\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io/docs/concepts/resumable/\\",children:\\"Resumable vs. Hydration\\"}),\\" - Builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io/docs/concepts/reactivity/\\",children:\\"Reactivity\\"}),\\" - Builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://beta.nextjs.org/docs/rendering/server-and-client-components\\",children:\\"Server and Client Components\\"}),\\" - Next.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Learn/Performance/why_web_performance\\",children:\'The \\"why\\" of web performance\'}),\\" - MDN\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://qwik.builder.io/docs/think-qwik/\\",children:\\"Think Qwik\\"}),\\" - Builder.io\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/interactive/\\",children:\\"Time to Interfactive\\"}),\\" - Chrome Developers\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-total-blocking-time/\\",children:\\"Total Blocking Time\\"}),\\" - Chrome Developers\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.twitter.com/en/docs/twitter-api\\",children:\\"Twitter API v2\\"}),\\" - Twitter Developer Aplatform\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://web.dev/vitals/\\",children:\\"Web Vitals\\"}),\\" - web.dev\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/en/docs/lighthouse/performance/speed-index/\\",children:\\"Speed Index\\"}),\\" - Chrome Developers\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.chrome.com/docs/lighthouse/performance/lighthouse-largest-contentful-paint/\\",children:\\"Largest Contentful Paint\\"}),\\" - Chrome Developers\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,n.jsx)(e.a,{href:\\"/articles/tired-of-slow-code-reviews\\",children:(0,n.jsx)(e.strong,{children:\\"Tired of Slow Code Reviews? Read this\\"})})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function b(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(h,a)})):h(a)}var x=b;return w(y);})();\\n;return Component;"},"_id":"articles/is-qwik-faster-than-react-server-component.mdx","_raw":{"sourceFilePath":"articles/is-qwik-faster-than-react-server-component.mdx","sourceFileName":"is-qwik-faster-than-react-server-component.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/is-qwik-faster-than-react-server-component"},"type":"Article","readingTime":{"text":"9 min read","minutes":8.465,"time":507900,"words":1693},"wordCount":1695,"slug":"is-qwik-faster-than-react-server-component"},{"title":"Lean Docker Images for Next.JS","publishedAt":"Feb 2, 2023","description":"Using multi-stage builds to optimize production Docker image for faster deployment.","cover":"/optimized/articles/next-docker-image/hero.webp","category":"Cloud","coverWidth":"1400","coverHeight":"700","body":{"raw":"\\n## In this article\\n\\n- \uD83E\uDDD1‍\uD83D\uDD2C We\'ll discuss why and where optimizing docker image can be meaningful.\\n- \uD83D\uDE48 We\'ll explore how to dockerize Next.js project with a hidden feature.\\n- \uD83E\uDE84 We\'ll dive into the magic behind the docker image optimization.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Level Up Coding](https://medium.com/gitconnected/lean-docker-images-for-next-js-ea6a3215af8e)\\n- [Hacker Noon](https://hackernoon.com/docker-image-optimization-lean-docker-images-for-nextjs)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\n## The Problem\\n\\nAt work, I noticed our deployment pipeline was significantly slower than I expected. The simplified pipeline consist of the following jobs:\\n\\n<img\\n  src=\\"/optimized/articles/next-docker-image/workflow.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nAfter some investigation, we were able to identify the performance bottleneck. The task that consistently took the longest to complete was uploading production images to the [Google Cloud Artifact Registry][11]. It was because we were uploading large, un-optimized Docker images to the registry.\\n\\n[Image size][12] isn\'t an urgent concern like security or throughput in general. The storage and cost on the cloud are usually generous. However, it becomes problematic when it slows down the pipeline. It increases the [time to market][13] and affects our ability to [continuously deliver][14].\\n\\n## What\'s The Impact of Optimizing Docker Image?\\n\\nWe\'ll use the DALL-E demo I built for my [previous article][6] as an example. The demo looks like this:\\n\\n<img\\n  src=\\"/articles/qwik-vs-next/demo.gif\\"\\n  alt=\\"DALL-E web app demo\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n> You can find [the demo on GitHub][5]. Feel free to take a look at the repo and try it out✨\\n\\nWe\'ll create two docker files\\n\\n- **Dockerfile.local**: basic image without optimization\\n- **Dockerfile**: optimized image\\n\\nLet\'s build the images based on each docker file. The results are:\\n\\n<img\\n  src=\\"/optimized/articles/next-docker-image/sizes.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n- Un-optimized image: **2.85GB**\\n- Optimized image: **202MB**\\n\\nIt\'s a **92%** reduction in size. We can roughly interpret it as a 92% reduction in uploading time because the file transfer over HTTPS is linear. Now let\'s dive into how you can achieve the same result.\\n\\nLet\'s go.\\n\\n## Before Optimizing The Image\\n\\nWe can start off by creating a straightforward Dockerfile like this:\\n\\n```Dockerfile:Dockerfile.local\\nFROM node:18-alpine\\nRUN apk add --no-cache libc6-compat\\nWORKDIR /app\\n\\nCOPY . ./\\n\\n# Build the app\\nRUN yarn --frozen-lockfile\\nRUN yarn build\\n\\n# Serve the app\\nCMD [ \\"yarn\\", \\"start\\" ]\\n```\\n\\nIn this image, we use [Alpine Linux Node 18][3] as the base image because of its much smaller size compared to other base images. We also follow the recommendation and add [libc6-compat][10] to support the use of \\"process.dlopen\\". The rest is just like how we build and serve the project locally:\\n\\n- First, we install the dependencies based on yarn.lock file,\\n- we generate the production build,\\n- and lastly, we start the server with the \\"yarn start\\" script.\\n\\nLet\'s build the image using this docker file and this is generally what you can see in the command line:\\n\\n<img\\n  src=\\"/optimized/articles/next-docker-image/unopt.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe build was completed in **52.9s**.\\n\\n## The Optimized Docker Image\\n\\nThe optimization is based on two features from Docker and Next.js:\\n\\n- [Docker Multi-stage builds][1]\\n- [Next.js Output File Tracing][2]\\n\\nThe idea is to use a multi-stage build to [select only what we need in production, stage by stage][7]. Let\'s take a look at the docker file.\\n\\n```Dockerfile:Dockerfile\\nARG NODE=node:18-alpine\\n\\n# Stage 1: Install dependencies\\nFROM ${NODE} AS deps\\nRUN apk add --no-cache libc6-compat\\nWORKDIR /app\\n\\nCOPY package.json yarn.lock* ./\\nRUN yarn --frozen-lockfile\\n\\n# Stage 2: Build the app\\nFROM ${NODE} AS builder\\nWORKDIR /app\\nCOPY --from=deps /app/node_modules ./node_modules\\nCOPY . .\\n\\nRUN yarn build\\n\\n# Stage 3: Run the production\\nFROM ${NODE} AS runner\\nWORKDIR /app\\n\\nENV NODE_ENV production\\n\\nRUN addgroup --system --gid 1001 nodejs\\nRUN adduser --system --uid 1001 nextjs\\n\\n# copy assets and the generated standalone server\\nCOPY --from=builder /app/public ./public\\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\\n\\nUSER nextjs\\n\\nEXPOSE 3000\\n\\nENV PORT 3000\\n\\n# Serve the app\\nCMD [\\"node\\", \\"server.js\\"]\\n```\\n\\nWe used the same \\"node:18-alpine\\" as the base image.\\n\\n#### Stage 1: Install dependencies\\n\\nInstead of copying everything to the image, we were only copying the \\"package.json\\" and \\"yarn.lock\\" for the installation.\\n\\n#### Stage 2: Build the app\\n\\nIn order to build the project, we needed the installed dependencies, source code, and all the project configurations in the project root. So we copied the dependencies **from the previous stage** and everything from the project root.\\n\\n#### Stage 3: Run the production\\n\\n[Output file tracing][2] is a Next.js feature that is designed to help us reduce deployment size by tracing all the files that are needed for production in build time.\\n\\nOnce we enable the \\"standalone\\" output, Next.js will build and output a standalone Node server in \\".next/standalone\\" directory.\\n\\n```js:next.config.js\\nmodule.exports = {\\n  output: \'standalone\',\\n}\\n```\\n\\nThe build result looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/next-docker-image/files.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIn this stage, all we did was to copy the standalone server, the assets in the \\"./public\\" folder, the JavaScript and CSS chunks from the \\".next/static\\" folder to the working directory and start the server with port 3000.\\n\\nThe magic behind the output file tracing is [@vercel/nft][9]. It statically analyzes the dependency graph and outputs the list of modules in the graph. To illustrate, let\'s log the dependencies for our page, API, and the Node server:\\n\\n```js:file-tracing.mjs\\nimport { nodeFileTrace } from \\"@vercel/nft\\";\\n\\nconst files = [\\n  \\"./.next/server/app/sc/page.js\\",\\n  \\"./.next/server/pages/api/images.js\\",\\n  \\"node_modules/next/dist/server/next-server.js\\",\\n];\\nconst { fileList } = await nodeFileTrace(files);\\nconsole.log(fileList);\\n```\\n\\nThe output looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/next-docker-image/file-tracing.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Final Thoughts\\n\\nNow that we explored the stages and the standalone server, let\'s build the image and observe the result:\\n\\n<img\\n  src=\\"/optimized/articles/next-docker-image/opt.webp\\"\\n  alt=\\"Next with server component performance\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe build was completed in 41.3s. Compared to the un-optimized build, we didn\'t compromise the build time. It\'s a big win considering that we significantly reduced the build size by 92%.\\n\\n## References\\n\\n- [Multi-stage builds][1] - Docker docs\\n- [Output File Tracing][2] - Next.js\\n- [nodejs/docker-node][3] - Node.js\\n- [Docker run reference][4] - Docker docs\\n- [DawChihLiou/qwik-vs-next][5] - Daw-Chih Liou\\n- [Is Qwik Faster than React Server Component?][6] - Daw-Chih Liou\\n- [With Docker][7] - Next.js\\n- [Deployment][8] - Next.js\\n- [vercel/nft][9] - Vercel\\n- [libc6-compat][10] - alpine Linux\\n- [Artifact Registry][11] - Google Cloud\\n- [Super small Docker image based on Alpine Linux][12] - Hacker News\\n- [Time to market][13] - Wikipedia\\n- [Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery][14] - Daw-Chih Liou\\n\\n[1]: https://docs.docker.com/build/building/multi-stage/\\n[2]: https://nextjs.org/docs/advanced-features/output-file-tracing\\n[3]: https://github.com/nodejs/docker-node/tree/b4117f9333da4138b03a546ec926ef50a31506c3#nodealpine\\n[4]: https://docs.docker.com/engine/reference/run/\\n[5]: https://github.com/DawChihLiou/qwik-vs-next\\n[6]: https://dawchihliou.github.io/articles/is-qwik-faster-than-react-server-component\\n[7]: https://github.com/vercel/next.js/tree/canary/examples/with-docker\\n[8]: https://nextjs.org/docs/deployment\\n[9]: https://github.com/vercel/nft\\n[10]: https://pkgs.alpinelinux.org/package/edge/main/x86/libc6-compat\\n[11]: https://cloud.google.com/artifact-registry\\n[12]: https://news.ycombinator.com/item?id=10782897\\n[13]: https://en.wikipedia.org/wiki/Time_to_market\\n[14]: https://dawchihliou.github.io/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Is Qwik Faster than React Server Component?**](/articles/is-qwik-faster-than-react-server-component)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var i in e)c(a,i,{get:e[i],enumerable:!0})},t=(a,e,i,l)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let s of m(e))!k.call(a,s)&&s!==i&&c(a,s,{get:()=>e[s],enumerable:!(l=p(e,s))||l.enumerable});return a};var f=(a,e,i)=>(i=a!=null?h(u(a)):{},t(e||!a||!a.__esModule?c(i,\\"default\\",{value:a,enumerable:!0}):i,a)),w=a=>t(c({},\\"__esModule\\",{value:!0}),a);var o=N((z,r)=>{r.exports=_jsx_runtime});var v={};g(v,{default:()=>x,frontmatter:()=>y});var n=f(o()),y={title:\\"Lean Docker Images for Next.JS\\",publishedAt:\\"Feb 2, 2023\\",description:\\"Using multi-stage builds to optimize production Docker image for faster deployment.\\",cover:\\"/optimized/articles/next-docker-image/hero.webp\\",category:\\"Cloud\\",coverWidth:\\"1400\\",coverHeight:\\"700\\"};function d(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",blockquote:\\"blockquote\\",strong:\\"strong\\",div:\\"div\\",pre:\\"pre\\",code:\\"code\\",h4:\\"h4\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"in-this-article\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#in-this-article\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"In this article\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" We\'ll discuss why and where optimizing docker image can be meaningful.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"see-no-evil monkey\\",children:\\"\\\\u{1F648}\\"}),\\" We\'ll explore how to dockerize Next.js project with a hidden feature.\\"]}),`\\n`,(0,n.jsx)(e.li,{children:\\"\\\\u{1FA84} We\'ll dive into the magic behind the docker image optimization.\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://medium.com/gitconnected/lean-docker-images-for-next-js-ea6a3215af8e\\",children:\\"Level Up Coding\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://hackernoon.com/docker-image-optimization-lean-docker-images-for-nextjs\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"the-problem\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#the-problem\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"The Problem\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"At work, I noticed our deployment pipeline was significantly slower than I expected. The simplified pipeline consist of the following jobs:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/next-docker-image/workflow.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"After some investigation, we were able to identify the performance bottleneck. The task that consistently took the longest to complete was uploading production images to the \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry\\",children:\\"Google Cloud Artifact Registry\\"}),\\". It was because we were uploading large, un-optimized Docker images to the registry.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://news.ycombinator.com/item?id=10782897\\",children:\\"Image size\\"}),\\" isn\'t an urgent concern like security or throughput in general. The storage and cost on the cloud are usually generous. However, it becomes problematic when it slows down the pipeline. It increases the \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Time_to_market\\",children:\\"time to market\\"}),\\" and affects our ability to \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery\\",children:\\"continuously deliver\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"whats-the-impact-of-optimizing-docker-image\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#whats-the-impact-of-optimizing-docker-image\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What\'s The Impact of Optimizing Docker Image?\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We\'ll use the DALL-E demo I built for my \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/is-qwik-faster-than-react-server-component\\",children:\\"previous article\\"}),\\" as an example. The demo looks like this:\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/articles/qwik-vs-next/demo.gif\\",alt:\\"DALL-E web app demo\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can find \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/qwik-vs-next\\",children:\\"the demo on GitHub\\"}),\\". Feel free to take a look at the repo and try it out\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We\'ll create two docker files\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"Dockerfile.local\\"}),\\": basic image without optimization\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\\"Dockerfile\\"}),\\": optimized image\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s build the images based on each docker file. The results are:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/next-docker-image/sizes.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"Un-optimized image: \\",(0,n.jsx)(e.strong,{children:\\"2.85GB\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Optimized image: \\",(0,n.jsx)(e.strong,{children:\\"202MB\\"})]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"It\'s a \\",(0,n.jsx)(e.strong,{children:\\"92%\\"}),\\" reduction in size. We can roughly interpret it as a 92% reduction in uploading time because the file transfer over HTTPS is linear. Now let\'s dive into how you can achieve the same result.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"before-optimizing-the-image\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#before-optimizing-the-image\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Before Optimizing The Image\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We can start off by creating a straightforward Dockerfile like this:\\"}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"Dockerfile.local\\"}),(0,n.jsx)(e.pre,{className:\\"language-dockerfile\\",children:(0,n.jsxs)(e.code,{className:\\"language-Dockerfile code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"FROM\\"}),\\" node:18-alpine\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" apk add --no-cache libc6-compat\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"WORKDIR\\"}),\\" /app\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" . ./\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Build the app\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" yarn --frozen-lockfile\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" yarn build\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Serve the app\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"CMD\\"}),\\" [ \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"yarn\\"\'}),\\", \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"start\\"\'}),\\" ]\\"]}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In this image, we use \\",(0,n.jsx)(e.a,{href:\\"https://github.com/nodejs/docker-node/tree/b4117f9333da4138b03a546ec926ef50a31506c3#nodealpine\\",children:\\"Alpine Linux Node 18\\"}),\\" as the base image because of its much smaller size compared to other base images. We also follow the recommendation and add \\",(0,n.jsx)(e.a,{href:\\"https://pkgs.alpinelinux.org/package/edge/main/x86/libc6-compat\\",children:\\"libc6-compat\\"}),\' to support the use of \\"process.dlopen\\". The rest is just like how we build and serve the project locally:\']}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"First, we install the dependencies based on yarn.lock file,\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"we generate the production build,\\"}),`\\n`,(0,n.jsx)(e.li,{children:\'and lastly, we start the server with the \\"yarn start\\" script.\'}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s build the image using this docker file and this is generally what you can see in the command line:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/next-docker-image/unopt.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The build was completed in \\",(0,n.jsx)(e.strong,{children:\\"52.9s\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"the-optimized-docker-image\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#the-optimized-docker-image\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"The Optimized Docker Image\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"The optimization is based on two features from Docker and Next.js:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://docs.docker.com/build/building/multi-stage/\\",children:\\"Docker Multi-stage builds\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/output-file-tracing\\",children:\\"Next.js Output File Tracing\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The idea is to use a multi-stage build to \\",(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/next.js/tree/canary/examples/with-docker\\",children:\\"select only what we need in production, stage by stage\\"}),\\". Let\'s take a look at the docker file.\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"Dockerfile\\"}),(0,n.jsx)(e.pre,{className:\\"language-dockerfile\\",children:(0,n.jsxs)(e.code,{className:\\"language-Dockerfile code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"ARG\\"}),\\" NODE=node:18-alpine\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Stage 1: Install dependencies\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"FROM\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token variable\\",children:\\"${NODE}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"AS\\"}),\\" deps\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" apk add --no-cache libc6-compat\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"WORKDIR\\"}),\\" /app\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" package.json yarn.lock* ./\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" yarn --frozen-lockfile\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Stage 2: Build the app\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"FROM\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token variable\\",children:\\"${NODE}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"AS\\"}),\\" builder\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"WORKDIR\\"}),\\" /app\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token options\\",children:[(0,n.jsx)(e.span,{className:\\"token property\\",children:\\"--from\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"deps\\"})]}),\\" /app/node_modules ./node_modules\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" . .\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" yarn build\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Stage 3: Run the production\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"FROM\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token variable\\",children:\\"${NODE}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"AS\\"}),\\" runner\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"WORKDIR\\"}),\\" /app\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"ENV\\"}),\\" NODE_ENV production\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" addgroup --system --gid 1001 nodejs\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"RUN\\"}),\\" adduser --system --uid 1001 nextjs\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# copy assets and the generated standalone server\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token options\\",children:[(0,n.jsx)(e.span,{className:\\"token property\\",children:\\"--from\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"builder\\"})]}),\\" /app/public ./public\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token options\\",children:[(0,n.jsx)(e.span,{className:\\"token property\\",children:\\"--from\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"builder\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token property\\",children:\\"--chown\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"nextjs:nodejs\\"})]}),\\" /app/.next/standalone ./\\"]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"COPY\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token options\\",children:[(0,n.jsx)(e.span,{className:\\"token property\\",children:\\"--from\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"builder\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token property\\",children:\\"--chown\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"nextjs:nodejs\\"})]}),\\" /app/.next/static ./.next/static\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"USER\\"}),\\" nextjs\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"EXPOSE\\"}),\\" 3000\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"ENV\\"}),\\" PORT 3000\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# Serve the app\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token instruction\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"CMD\\"}),\\" [\\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"node\\"\'}),\\", \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"server.js\\"\'}),\\"]\\"]}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\'We used the same \\"node:18-alpine\\" as the base image.\'}),`\\n`,(0,n.jsxs)(e.h4,{id:\\"stage-1-install-dependencies\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#stage-1-install-dependencies\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Stage 1: Install dependencies\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\'Instead of copying everything to the image, we were only copying the \\"package.json\\" and \\"yarn.lock\\" for the installation.\'}),`\\n`,(0,n.jsxs)(e.h4,{id:\\"stage-2-build-the-app\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#stage-2-build-the-app\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Stage 2: Build the app\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In order to build the project, we needed the installed dependencies, source code, and all the project configurations in the project root. So we copied the dependencies \\",(0,n.jsx)(e.strong,{children:\\"from the previous stage\\"}),\\" and everything from the project root.\\"]}),`\\n`,(0,n.jsxs)(e.h4,{id:\\"stage-3-run-the-production\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#stage-3-run-the-production\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Stage 3: Run the production\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/output-file-tracing\\",children:\\"Output file tracing\\"}),\\" is a Next.js feature that is designed to help us reduce deployment size by tracing all the files that are needed for production in build time.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\'Once we enable the \\"standalone\\" output, Next.js will build and output a standalone Node server in \\".next/standalone\\" directory.\'}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"next.config.js\\"}),(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"module\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"exports\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"output\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'standalone\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"The build result looks like this:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/next-docker-image/files.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\'In this stage, all we did was to copy the standalone server, the assets in the \\"./public\\" folder, the JavaScript and CSS chunks from the \\".next/static\\" folder to the working directory and start the server with port 3000.\'}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The magic behind the output file tracing is \\",(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/nft\\",children:\\"@vercel/nft\\"}),\\". It statically analyzes the dependency graph and outputs the list of modules in the graph. To illustrate, let\'s log the dependencies for our page, API, and the Node server:\\"]}),`\\n`,(0,n.jsx)(e.div,{className:\\"rehype-code-title\\",children:\\"file-tracing.mjs\\"}),(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"import\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token imports\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" nodeFileTrace \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword module\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"@vercel/nft\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" files \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"./.next/server/app/sc/page.js\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"./.next/server/pages/api/images.js\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"node_modules/next/dist/server/next-server.js\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" fileList \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword control-flow\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"nodeFileTrace\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"files\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token console class-name\\",children:\\"console\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token method function property-access\\",children:\\"log\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"fileList\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\";\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"The output looks like this:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/next-docker-image/file-tracing.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now that we explored the stages and the standalone server, let\'s build the image and observe the result:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/next-docker-image/opt.webp\\",alt:\\"Next with server component performance\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"The build was completed in 41.3s. Compared to the un-optimized build, we didn\'t compromise the build time. It\'s a big win considering that we significantly reduced the build size by 92%.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://docs.docker.com/build/building/multi-stage/\\",children:\\"Multi-stage builds\\"}),\\" - Docker docs\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/advanced-features/output-file-tracing\\",children:\\"Output File Tracing\\"}),\\" - Next.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/nodejs/docker-node/tree/b4117f9333da4138b03a546ec926ef50a31506c3#nodealpine\\",children:\\"nodejs/docker-node\\"}),\\" - Node.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://docs.docker.com/engine/reference/run/\\",children:\\"Docker run reference\\"}),\\" - Docker docs\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/qwik-vs-next\\",children:\\"DawChihLiou/qwik-vs-next\\"}),\\" - Daw-Chih Liou\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/is-qwik-faster-than-react-server-component\\",children:\\"Is Qwik Faster than React Server Component?\\"}),\\" - Daw-Chih Liou\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/next.js/tree/canary/examples/with-docker\\",children:\\"With Docker\\"}),\\" - Next.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://nextjs.org/docs/deployment\\",children:\\"Deployment\\"}),\\" - Next.js\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/vercel/nft\\",children:\\"vercel/nft\\"}),\\" - Vercel\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://pkgs.alpinelinux.org/package/edge/main/x86/libc6-compat\\",children:\\"libc6-compat\\"}),\\" - alpine Linux\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/artifact-registry\\",children:\\"Artifact Registry\\"}),\\" - Google Cloud\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://news.ycombinator.com/item?id=10782897\\",children:\\"Super small Docker image based on Alpine Linux\\"}),\\" - Hacker News\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Time_to_market\\",children:\\"Time to market\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery\\",children:\\"Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery\\"}),\\" - Daw-Chih Liou\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,n.jsx)(e.a,{href:\\"/articles/is-qwik-faster-than-react-server-component\\",children:(0,n.jsx)(e.strong,{children:\\"Is Qwik Faster than React Server Component?\\"})})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function b(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var x=b;return w(v);})();\\n;return Component;"},"_id":"articles/lean-docker-images-for-nextjs.mdx","_raw":{"sourceFilePath":"articles/lean-docker-images-for-nextjs.mdx","sourceFileName":"lean-docker-images-for-nextjs.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/lean-docker-images-for-nextjs"},"type":"Article","readingTime":{"text":"6 min read","minutes":5.875,"time":352500,"words":1175},"wordCount":1177,"slug":"lean-docker-images-for-nextjs"},{"title":"Stress Testing Concurrent Features in React 18: A Case Study of startTransition & 3D Rendering","publishedAt":"May 30, 2022","description":"React 18 released the highly anticipated concurrent features. In this article, we are diving into a 3D visualization and discuss how to optimize its performance step by step with React 18\'s concurrent rendering.","cover":"/optimized/articles/concurrent-react-18/hero.webp","category":"Rust","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83D\uDE80 Concurrent rendering addresses the performance problem with rendering large UI updates while keeping the UI responsive.\\n- \uD83E\uDDD1‍\uD83D\uDD2C We\'ll use 3D rendering in the browser to stress test React 18.\\n- ⚖️ We\'ll look at the typical approaches alongside concurrent rendering and discuss their pros and cons.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://betterprogramming.pub/stress-testing-concurrent-features-in-react-18-a-case-study-of-starttransition-and-3d-rendering-9aecb4a479f8)\\n- [Hacker Noon](https://hackernoon.com/react-18s-concurrent-rendering-for-stress-testing-a-3d-rendering-case-study)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nIn this article, we are diving into a 3D visualization and discuss how to optimize its performance step by step with React 18\'s concurrent rendering. Here\'s the sneak peek.\\n\\n<video controls>\\n  <source src=\\"/articles/concurrent-react-18/demo.mp4\\" type=\\"video/mp4\\" />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\n## Concurrent Rendering with useTransition\\n\\n[React 18 introduces the concurrent features](https://reactjs.org/blog/2022/03/29/react-v18.html). The core idea is to classify state updates into two categories:\\n\\n- **Urgent updates**: they provide responsive feedback to user interactions, like typing and clicking.\\n- **Transition updates**: they provide non-urgent UI transitions, like displaying dataset.\\n\\nThe purpose is to create a snappier and more responsive experience for the users.\\n\\nBefore React 18, all updates are considered urgent and a simple click or typing can cause the screen to freeze when there\'s a larger rending. So in React 18, by deferring non-urgent updates to urgent updates, users are able to receive immediate feedback from their interaction while React is working on the non-urgent updates in the background and reflect the result when ready.\\n\\nReact Working Group published a couple great articles about transition updates:\\n\\n- [New feature: startTransition](https://github.com/reactwg/react-18/discussions/41)\\n- [Real world example: adding startTransition for slow renders](https://github.com/reactwg/react-18/discussions/65)\\n\\nAccording to the working group, the concurrent rendering is able to perform the following things:\\n\\n- **Yielding**: React will periodically stop working and let the browser fire one or more side effects.\\n- **Interrupting**: When React detects new urgent updates, it will interrupt and pause non-urgent updates and start working on incoming urgent updates so the page can stay responsive.\\n- **Skipping old results**: React will discard outdated transition updates and only render with the newest state.\\n\\nWe\'ll use the format and methods from the articles to test the 3D rendering demo and observe the impact on the performance and user experience.\\n\\n## 3D Rendering Demo Overview\\n\\nIn order to create heavy computations for rendering, I built a 3D visualization to show the connections between a GitHub user and the users she\'s connected with on GitHub.\\n\\nThe technology includes:\\n\\n- [three.js](https://github.com/mrdoob/three.js/)\\n- [react-three-fiber](https://github.com/pmndrs/react-three-fiber)\\n- [React 18](https://reactjs.org/blog/2022/03/29/react-v18.html)\\n\\nThe UI looks like this:\\n\\n<img\\n  src=\\"/optimized/articles/concurrent-react-18/screenshot.webp\\"\\n  alt=\\"Demo screen shot\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThe components we will be discussing today includes:\\n\\n- **Search Bar**: to search for a GitHub username and fetch the user info from the GitHub GraphQL API.\\n- **Scene**: to visualize the connections between the user and her connections in on a 3D globe.\\n\\n> **You can find [the repository on GitHub](https://github.com/DawChihLiou/concurrent-react-stress-testing) and [the demo on Netlify](https://sweaty-concurrent-react.netlify.app).**\\n>\\n> _Please note that the demo might crash due to a task timeout. The timeout is caused by the slow experimental API call to fetch the coordinates of the cities. If you\'d like to interact with the demo, it\'s recommended to fork the repository and run the development server locally._\\n\\nAs we type into the search bar, you\'ll see an increasing amount of stars in the scene to simulate the high rendering demand on the UI. The amount of stars is `100,000 * inputValue.length`. We\'ll use it to stress test concurrent rendering.\\n\\n## The Problem\\n\\nLet\'s start with our base case with the most basic implementation. The outcome looks like this:\\n\\n<video controls>\\n  <source src=\\"/articles/concurrent-react-18/perf-sync.mp4\\" type=\\"video/mp4\\" />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\n_You can see my typing on the bottom left corner of the video._\\n\\nAs I was typing, the search bar was frozen. It didn\'t display the input value until the very end. Not just the search bar, the scene was frozen too. The stars didn\'t get rendered until I finished typing. Ideally, we want to be able to observe immediate feedback from our typing.\\n\\nLet\'s look into the performance together. We\'ll slow down the CPU by 4x and run a performance profiling.\\n\\n<img\\n  src=\\"/optimized/articles/concurrent-react-18/perf-sync.webp\\"\\n  alt=\\"Performance profile for unoptimized rendering\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nYou can see the big chunks of tasks with keypress event in the flame chart. With each keypress, React computes the next rendering for the SearchBar and the Scene. As we see in the chart, the longest task takes almost 0.8 seconds to complete. That\'s why the page feels so slow.\\n\\n### So, what\'s happening?\\n\\nIn the Home page component, the SearchBar listens to the keypress event and update the `username` when changes happens.\\n\\n```tsx\\nconst Home: NextPage = () => {\\n  const [username, setUsername] = useState<string>(\'\')\\n\\n  const vertices = useMemo(() => computeVertices(username.length), [username])\\n\\n  const handleChange = (username: string) => {\\n    setUsername(username)\\n  }\\n\\n  return (\\n    <>\\n      <SearchBar value={username} onChange={handleChange} />\\n      <Scene vertices={vertices} />\\n    </>\\n  )\\n}\\n```\\n\\nWhenever there\'s a `username` update, React recomputes `vertices` by calling `computeVertices()` and pass the result in to the Scene component to render the stars. Since the number of vertices is `100,000 * username.length`, coupling the two state updates together is a very expensive rendering cycle.\\n\\n## How did We Fix It Before React 18?\\n\\nIdeally, we want to see what we typed in the search bar immediately. Knowing that updating both states in the same rendering cycle takes too long, we can simply split the two updates so that SearchBar and Scene gets rendered separately.\\n\\nLet\'s first add a new state for the SearchBar:\\n\\n```tsx\\ntype FastSearchBarProps = {\\n  defaultValue: string\\n  onChange: (value: string) => void\\n}\\n\\nfunction FastSearchBar({ defaultValue, onChange }: FastSearchBarProps) {\\n  // new state designated to SearchBar\\n  const [value, setValue] = useState(defaultValue)\\n\\n  const handleChange = (value: string) => {\\n    // update input value\\n    setValue(value)\\n\\n    // update vertices\\n    onChange(value)\\n  }\\n\\n  return <SearchBar value={value} onChange={handleChange} />\\n}\\n\\nconst Home: NextPage = () => {\\n  const [username, setUsername] = useState<string>(\'\')\\n\\n  const vertices = useMemo(() => computeVertices(username.length), [username])\\n\\n  const handleChange = (username: string) => {\\n    setUsername(username)\\n  }\\n\\n  return (\\n    <>\\n      <FastSearchBar defaultValue={username} onChange={handleChange} />\\n      <Scene vertices={vertices} />\\n    </>\\n  )\\n}\\n```\\n\\nNow we have a `value` state for SearchBar and a `username` state for computing `vertices`. We\'ll need additional work to separate the renderings because React will batch the state updates together in the same event to avoid additional rendering. Let\'s take a look at some of the typical approaches.\\n\\n### Approach #1: setTimeout\\n\\nWe can simply defer the slower update by adding setTimeout to put the it in the event loop.\\n\\n```tsx\\nfunction FastSearchBar({ defaultValue, onChange }: FastSearchBarProps) {\\n  const [value, setValue] = useState(defaultValue)\\n\\n  const handleChange = (value: string) => {\\n    setValue(value)\\n\\n    setTimeout(() => {\\n      onChange(value)\\n    }, 0)\\n  }\\n\\n  return <SearchBar value={value} onChange={handleChange} />\\n}\\n```\\n\\nNow even with the 4x slowdown, the SearchBar looks more responsive. We also observed that the stars are getting rendered while we were typing.\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-timeout-throttle-x4.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\nIf you take a look at the performance profile, you can see that we were able to separate the keypress events from the expensive tasks.\\n\\n<img\\n  src=\\"/optimized/articles/concurrent-react-18/perf-timeout.webp\\"\\n  alt=\\"Performance profile for rendering with timeout\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nHowever, we noticed that the Scene was rendered twice after the last keypress event. That\'s because the renderings were still scheduled with outdated state when the `setTimeout`s were fired.\\n\\n### Approach #2: Debouncing\\n\\nWe can actually cancel the rendering schedule by implementing debouncing.\\n\\n```tsx\\nfunction FastSearchBar({ defaultValue, onChange }: FastSearchBarProps) {\\n  const [value, setValue] = useState(defaultValue)\\n  const timeout = useRef<NodeJS.Timeout>()\\n\\n  const handleChange = (value: string) => {\\n    // cancel the schedule if `value` changed within 100ms.\\n    clearTimeout(timeout.current)\\n\\n    setValue(value)\\n\\n    // schedule a new update if input value hasn\'t changed for 100ms.\\n    timeout.current = setTimeout(() => {\\n      onChange(value)\\n    }, 100)\\n  }\\n\\n  return <SearchBar value={value} onChange={handleChange} />\\n}\\n```\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-debounce-throttle-x4.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\nThe user experience looks better now. The SearchBar stays fairly responsive with 4x slowdown and the redundant update on the Scene after the last keypress event was gone.\\n\\nHowever, the shortcoming of debouncing in this case is that the Scene update will always be delayed by 100ms. With faster CPU, the delay is most likely redundant and it makes the page feel slow.\\n\\n<img\\n  src=\\"/optimized/articles/concurrent-react-18/perf-debounce.webp\\"\\n  alt=\\"Performance profile for rendering with debouncing\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## React 18\'s Concurrent Rendering: startTransition\\n\\nThe page feel more responsive with either adding setTimeout or debouncing, but they introduces different problems:\\n\\n- setTimeout: results in additional UI updates with outdated states\\n- debouncing: results in artificial delay in UI updates\\n\\nLet\'s take a look at how React 18 solves the problems with concurrent rendering:\\n\\n```tsx\\nimport { startTransition } from \'react\'\\n\\ntype FastSearchBarProps = {\\n  defaultValue: string\\n  onChange: (value: string) => void\\n}\\n\\nfunction FastSearchBar({ defaultValue, onChange }: FastSearchBarProps) {\\n  const [value, setValue] = useState(defaultValue)\\n\\n  const handleChange = (value: string) => {\\n    setValue(value)\\n    onChange(value)\\n  }\\n\\n  return <SearchBar value={value} onChange={handleChange} />\\n}\\n\\nconst Home: NextPage = () => {\\n  const [username, setUsername] = useState<string>(\'\')\\n\\n  const vertices = useMemo(\\n    () => computeCoordinates(username.length),\\n    [username]\\n  )\\n\\n  const handleChange = (username: string) => {\\n    // defer username update in a less urgent UI transition\\n    startTransition(() => {\\n      setUsername(username)\\n    })\\n  }\\n\\n  return (\\n    <Container>\\n      <FastSearchBar defaultValue={username} onChange={handleChange} />\\n      <Scene vertices={vertices} />\\n    </Container>\\n  )\\n}\\n```\\n\\nWe call `setUsername` inside of `startTransition` function. It tells React to defer `setUsername` to the other urgent updates.\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-transition-throttle-x4.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\nAs you can see, we are able to separate the rendering of SearchBar and Scene without any asynchronous functions. If we take a look at the performance profile, we can observe a few things:\\n\\n- The keypress events are separated from the long rendering function calls.\\n- The keypress events are grouped. It aligns with the **yielding** behavior in concurrent rendering.\\n- There\'s only one rendering call after the last group of keypress events. It aligns with the **skipping old results** behavior in concurrent rendering.\\n\\nThe **interrupting** behavior is not very straight forward to observe. If you know how to analyze it from the performance profile, please feel free to [reach out to me on Twitter](https://twitter.com/dawchihliou)!\\n\\n<img\\n  src=\\"/optimized/articles/concurrent-react-18/perf-transition.webp\\"\\n  alt=\\"Performance profile for rendering with startTransition\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nLet\'s remove the slowdown and see the final result:\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-transition.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\nAs you can see, the SearchBar is always responsive while the Scene updates quickly. The user experience feels so much smoother.\\n\\n## Final Thoughts\\n\\nIn the past, adding debouncing was the go-to solution for rendering large UI updates while keeping pages responsive. Based on this experiment, concurrent rendering makes the UI more responsive without the shortcoming of debouncing. Even for the heavy computation with at least 100,000 3D objects, concurrent rendering still helped the page to be snappy.\\n\\nHere\'s the side-by-side comparisons:\\n\\n**UI Comparison with 4x CPU Throttling**\\n\\nBasic implementation without concurrent rendering:\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-sync-throttle-x4.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\nOptimized implementation with concurrent rendering:\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-transition-throttle-x4.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\n**UI Comparison with No CPU Throttling**\\n\\nBasic implementation without concurrent rendering:\\n\\n<video controls>\\n  <source src=\\"/articles/concurrent-react-18/perf-sync.mp4\\" type=\\"video/mp4\\" />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\nOptimized implementation with concurrent rendering:\\n\\n<video controls>\\n  <source\\n    src=\\"/articles/concurrent-react-18/perf-transition.mp4\\"\\n    type=\\"video/mp4\\"\\n  />\\n  <p>Your browser doesn\'t support HTML5 video.</p>\\n</video>\\n\\n## References\\n\\n- [GitHub: Demo repository](https://github.com/DawChihLiou/concurrent-react-stress-testing)\\n- [Website: Demo Site](https://sweaty-concurrent-react.netlify.app)\\n- [Website: React v18.0](https://reactjs.org/blog/2022/03/29/react-v18.html)\\n- [GitHub: New feature: startTransition](https://github.com/reactwg/react-18/discussions/41)\\n- [GitHub: Real world example: adding startTransition for slow renders](https://github.com/reactwg/react-18/discussions/65)\\n- [GitHub: three.js](https://github.com/mrdoob/three.js/)\\n- [GitHub: react-three-fiber](https://github.com/pmndrs/react-three-fiber)\\n- [Website: WebGL Globe Solution](https://webgl-globe-solutions.stackblitz.io)\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**I Built A Snappy Static Full-text Search with WebAssembly, Rust, Next.js, and Xor Filters**](/articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,l)=>{if(n&&typeof n==\\"object\\"||typeof n==\\"function\\")for(let c of u(n))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>n[c],enumerable:!(l=h(n,c))||l.enumerable});return a};var f=(a,n,s)=>(s=a!=null?d(m(a)):{},i(n||!a||!a.__esModule?t(s,\\"default\\",{value:a,enumerable:!0}):s,a)),w=a=>i(t({},\\"__esModule\\",{value:!0}),a);var o=k((T,r)=>{r.exports=_jsx_runtime});var x={};g(x,{default:()=>y,frontmatter:()=>b});var e=f(o()),b={title:\\"Stress Testing Concurrent Features in React 18: A Case Study of startTransition & 3D Rendering\\",publishedAt:\\"May 30, 2022\\",description:\\"React 18 released the highly anticipated concurrent features. In this article, we are diving into a 3D visualization and discuss how to optimize its performance step by step with React 18\'s concurrent rendering.\\",cover:\\"/optimized/articles/concurrent-react-18/hero.webp\\",category:\\"Rust\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function p(a){let n=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",blockquote:\\"blockquote\\",em:\\"em\\",code:\\"code\\",h3:\\"h3\\",pre:\\"pre\\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\\"tldr\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\" Concurrent rendering addresses the performance problem with rendering large UI updates while keeping the UI responsive.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" We\'ll use 3D rendering in the browser to stress test React 18.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"balance scale\\",children:\\"\\\\u2696\\\\uFE0F\\"}),\\" We\'ll look at the typical approaches alongside concurrent rendering and discuss their pros and cons.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"This article is also available on\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://betterprogramming.pub/stress-testing-concurrent-features-in-react-18-a-case-study-of-starttransition-and-3d-rendering-9aecb4a479f8\\",children:\\"Better Programming\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://hackernoon.com/react-18s-concurrent-rendering-for-stress-testing-a-3d-rendering-case-study\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsx)(n.p,{children:\\"In this article, we are diving into a 3D visualization and discuss how to optimize its performance step by step with React 18\'s concurrent rendering. Here\'s the sneak peek.\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/demo.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"concurrent-rendering-with-usetransition\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#concurrent-rendering-with-usetransition\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Concurrent Rendering with useTransition\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\\"https://reactjs.org/blog/2022/03/29/react-v18.html\\",children:\\"React 18 introduces the concurrent features\\"}),\\". The core idea is to classify state updates into two categories:\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Urgent updates\\"}),\\": they provide responsive feedback to user interactions, like typing and clicking.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Transition updates\\"}),\\": they provide non-urgent UI transitions, like displaying dataset.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The purpose is to create a snappier and more responsive experience for the users.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Before React 18, all updates are considered urgent and a simple click or typing can cause the screen to freeze when there\'s a larger rending. So in React 18, by deferring non-urgent updates to urgent updates, users are able to receive immediate feedback from their interaction while React is working on the non-urgent updates in the background and reflect the result when ready.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"React Working Group published a couple great articles about transition updates:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/reactwg/react-18/discussions/41\\",children:\\"New feature: startTransition\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/reactwg/react-18/discussions/65\\",children:\\"Real world example: adding startTransition for slow renders\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"According to the working group, the concurrent rendering is able to perform the following things:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Yielding\\"}),\\": React will periodically stop working and let the browser fire one or more side effects.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Interrupting\\"}),\\": When React detects new urgent updates, it will interrupt and pause non-urgent updates and start working on incoming urgent updates so the page can stay responsive.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Skipping old results\\"}),\\": React will discard outdated transition updates and only render with the newest state.\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"We\'ll use the format and methods from the articles to test the 3D rendering demo and observe the impact on the performance and user experience.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"3d-rendering-demo-overview\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#3d-rendering-demo-overview\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"3D Rendering Demo Overview\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"In order to create heavy computations for rendering, I built a 3D visualization to show the connections between a GitHub user and the users she\'s connected with on GitHub.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"The technology includes:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/mrdoob/three.js/\\",children:\\"three.js\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/pmndrs/react-three-fiber\\",children:\\"react-three-fiber\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://reactjs.org/blog/2022/03/29/react-v18.html\\",children:\\"React 18\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The UI looks like this:\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/concurrent-react-18/screenshot.webp\\",alt:\\"Demo screen shot\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"The components we will be discussing today includes:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Search Bar\\"}),\\": to search for a GitHub username and fetch the user info from the GitHub GraphQL API.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\\"Scene\\"}),\\": to visualize the connections between the user and her connections in on a 3D globe.\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.blockquote,{children:[`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.strong,{children:[\\"You can find \\",(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/concurrent-react-stress-testing\\",children:\\"the repository on GitHub\\"}),\\" and \\",(0,e.jsx)(n.a,{href:\\"https://sweaty-concurrent-react.netlify.app\\",children:\\"the demo on Netlify\\"}),\\".\\"]})}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:\\"Please note that the demo might crash due to a task timeout. The timeout is caused by the slow experimental API call to fetch the coordinates of the cities. If you\'d like to interact with the demo, it\'s recommended to fork the repository and run the development server locally.\\"})}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"As we type into the search bar, you\'ll see an increasing amount of stars in the scene to simulate the high rendering demand on the UI. The amount of stars is \\",(0,e.jsx)(n.code,{children:\\"100,000 * inputValue.length\\"}),\\". We\'ll use it to stress test concurrent rendering.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"the-problem\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#the-problem\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"The Problem\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s start with our base case with the most basic implementation. The outcome looks like this:\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-sync.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:\\"You can see my typing on the bottom left corner of the video.\\"})}),`\\n`,(0,e.jsx)(n.p,{children:\\"As I was typing, the search bar was frozen. It didn\'t display the input value until the very end. Not just the search bar, the scene was frozen too. The stars didn\'t get rendered until I finished typing. Ideally, we want to be able to observe immediate feedback from our typing.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s look into the performance together. We\'ll slow down the CPU by 4x and run a performance profiling.\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/concurrent-react-18/perf-sync.webp\\",alt:\\"Performance profile for unoptimized rendering\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"You can see the big chunks of tasks with keypress event in the flame chart. With each keypress, React computes the next rendering for the SearchBar and the Scene. As we see in the chart, the longest task takes almost 0.8 seconds to complete. That\'s why the page feels so slow.\\"}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"so-whats-happening\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#so-whats-happening\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"So, what\'s happening?\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"In the Home page component, the SearchBar listens to the keypress event and update the \\",(0,e.jsx)(n.code,{children:\\"username\\"}),\\" when changes happens.\\"]}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Home\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"NextPage\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setUsername\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" vertices \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"computeVertices\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"length\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setUsername\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"SearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"value\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Scene\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"vertices\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"vertices\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Whenever there\'s a \\",(0,e.jsx)(n.code,{children:\\"username\\"}),\\" update, React recomputes \\",(0,e.jsx)(n.code,{children:\\"vertices\\"}),\\" by calling \\",(0,e.jsx)(n.code,{children:\\"computeVertices()\\"}),\\" and pass the result in to the Scene component to render the stars. Since the number of vertices is \\",(0,e.jsx)(n.code,{children:\\"100,000 * username.length\\"}),\\", coupling the two state updates together is a very expensive rendering cycle.\\"]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"how-did-we-fix-it-before-react-18\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#how-did-we-fix-it-before-react-18\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"How did We Fix It Before React 18?\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Ideally, we want to see what we typed in the search bar immediately. Knowing that updating both states in the same rendering cycle takes too long, we can simply split the two updates so that SearchBar and Scene gets rendered separately.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s first add a new state for the SearchBar:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"FastSearchBarProps\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  defaultValue\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onChange\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"FastSearchBar\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" onChange \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"FastSearchBarProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// new state designated to SearchBar\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// update input value\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setValue\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// update vertices\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onChange\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"SearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"value\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Home\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"NextPage\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setUsername\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" vertices \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"computeVertices\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"length\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setUsername\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"FastSearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"defaultValue\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Scene\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"vertices\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"vertices\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token tag\\",children:(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"})}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Now we have a \\",(0,e.jsx)(n.code,{children:\\"value\\"}),\\" state for SearchBar and a \\",(0,e.jsx)(n.code,{children:\\"username\\"}),\\" state for computing \\",(0,e.jsx)(n.code,{children:\\"vertices\\"}),\\". We\'ll need additional work to separate the renderings because React will batch the state updates together in the same event to avoid additional rendering. Let\'s take a look at some of the typical approaches.\\"]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"approach-1-settimeout\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#approach-1-settimeout\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Approach #1: setTimeout\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"We can simply defer the slower update by adding setTimeout to put the it in the event loop.\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"FastSearchBar\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" onChange \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"FastSearchBarProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setValue\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setTimeout\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onChange\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"0\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"SearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"value\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Now even with the 4x slowdown, the SearchBar looks more responsive. We also observed that the stars are getting rendered while we were typing.\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-timeout-throttle-x4.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"If you take a look at the performance profile, you can see that we were able to separate the keypress events from the expensive tasks.\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/concurrent-react-18/perf-timeout.webp\\",alt:\\"Performance profile for rendering with timeout\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"However, we noticed that the Scene was rendered twice after the last keypress event. That\'s because the renderings were still scheduled with outdated state when the \\",(0,e.jsx)(n.code,{children:\\"setTimeout\\"}),\\"s were fired.\\"]}),`\\n`,(0,e.jsxs)(n.h3,{id:\\"approach-2-debouncing\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#approach-2-debouncing\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Approach #2: Debouncing\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"We can actually cancel the rendering schedule by implementing debouncing.\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"FastSearchBar\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" onChange \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"FastSearchBarProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" timeout \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useRef\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),\\"NodeJS\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"Timeout\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// cancel the schedule if `value` changed within 100ms.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"clearTimeout\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"timeout\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"current\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setValue\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// schedule a new update if input value hasn\'t changed for 100ms.\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    timeout\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"current\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setTimeout\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onChange\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token number\\",children:\\"100\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"SearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"value\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-debounce-throttle-x4.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The user experience looks better now. The SearchBar stays fairly responsive with 4x slowdown and the redundant update on the Scene after the last keypress event was gone.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"However, the shortcoming of debouncing in this case is that the Scene update will always be delayed by 100ms. With faster CPU, the delay is most likely redundant and it makes the page feel slow.\\"}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/concurrent-react-18/perf-debounce.webp\\",alt:\\"Performance profile for rendering with debouncing\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"react-18s-concurrent-rendering-starttransition\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#react-18s-concurrent-rendering-starttransition\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"React 18\'s Concurrent Rendering: startTransition\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"The page feel more responsive with either adding setTimeout or debouncing, but they introduces different problems:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"setTimeout: results in additional UI updates with outdated states\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\"debouncing: results in artificial delay in UI updates\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s take a look at how React 18 solves the problems with concurrent rendering:\\"}),`\\n`,(0,e.jsx)(n.pre,{className:\\"language-tsx\\",children:(0,e.jsxs)(n.code,{className:\\"language-tsx code-highlight\\",children:[(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token imports\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" startTransition \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'react\'\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"type\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"FastSearchBarProps\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  defaultValue\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"onChange\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"void\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"FastSearchBar\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" onChange \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"FastSearchBarProps\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"defaultValue\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setValue\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"onChange\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"SearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"value\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"value\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token maybe-class-name\\",children:\\"Home\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"NextPage\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" setUsername\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsxs)(n.span,{className:\\"token generic-function\\",children:[(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useState\\"}),(0,e.jsxs)(n.span,{className:\\"token generic class-name\\",children:[(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\">\\"})]})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token string\\",children:\\"\'\'\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" vertices \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"useMemo\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"computeCoordinates\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,e.jsx)(n.span,{className:\\"token property-access\\",children:\\"length\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token function-variable function\\",children:\\"handleChange\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token builtin\\",children:\\"string\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token comment\\",children:\\"// defer username update in a less urgent UI transition\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"startTransition\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token arrow operator\\",children:\\"=>\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"      \\",(0,e.jsx)(n.span,{className:\\"token function\\",children:\\"setUsername\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,e.jsx)(n.span,{className:\\"code-line\\",children:`\\n`}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"    \\",(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Container\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"FastSearchBar\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"defaultValue\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"username\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"onChange\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"handleChange\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"      \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"<\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Scene\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token attr-name\\",children:\\"vertices\\"}),(0,e.jsxs)(n.span,{className:\\"token script language-javascript\\",children:[(0,e.jsx)(n.span,{className:\\"token script-punctuation punctuation\\",children:\\"=\\"}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\"vertices\\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"})]}),\\" \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token plain-text\\",children:\\"    \\"}),(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsxs)(n.span,{className:\\"token tag\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"</\\"}),(0,e.jsx)(n.span,{className:\\"token class-name\\",children:\\"Container\\"})]}),(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[\\"  \\",(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,e.jsxs)(n.span,{className:\\"code-line\\",children:[(0,e.jsx)(n.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"We call \\",(0,e.jsx)(n.code,{children:\\"setUsername\\"}),\\" inside of \\",(0,e.jsx)(n.code,{children:\\"startTransition\\"}),\\" function. It tells React to defer \\",(0,e.jsx)(n.code,{children:\\"setUsername\\"}),\\" to the other urgent updates.\\"]}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-transition-throttle-x4.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"As you can see, we are able to separate the rendering of SearchBar and Scene without any asynchronous functions. If we take a look at the performance profile, we can observe a few things:\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\"The keypress events are separated from the long rendering function calls.\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"The keypress events are grouped. It aligns with the \\",(0,e.jsx)(n.strong,{children:\\"yielding\\"}),\\" behavior in concurrent rendering.\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\"There\'s only one rendering call after the last group of keypress events. It aligns with the \\",(0,e.jsx)(n.strong,{children:\\"skipping old results\\"}),\\" behavior in concurrent rendering.\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"The \\",(0,e.jsx)(n.strong,{children:\\"interrupting\\"}),\\" behavior is not very straight forward to observe. If you know how to analyze it from the performance profile, please feel free to \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"reach out to me on Twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsx)(\\"img\\",{src:\\"/optimized/articles/concurrent-react-18/perf-transition.webp\\",alt:\\"Performance profile for rendering with startTransition\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Let\'s remove the slowdown and see the final result:\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-transition.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"As you can see, the SearchBar is always responsive while the Scene updates quickly. The user experience feels so much smoother.\\"}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"final-thoughts\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\"In the past, adding debouncing was the go-to solution for rendering large UI updates while keeping pages responsive. Based on this experiment, concurrent rendering makes the UI more responsive without the shortcoming of debouncing. Even for the heavy computation with at least 100,000 3D objects, concurrent rendering still helped the page to be snappy.\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\"Here\'s the side-by-side comparisons:\\"}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\\"UI Comparison with 4x CPU Throttling\\"})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Basic implementation without concurrent rendering:\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-sync-throttle-x4.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Optimized implementation with concurrent rendering:\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-transition-throttle-x4.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\\"UI Comparison with No CPU Throttling\\"})}),`\\n`,(0,e.jsx)(n.p,{children:\\"Basic implementation without concurrent rendering:\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-sync.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Optimized implementation with concurrent rendering:\\"}),`\\n`,(0,e.jsxs)(\\"video\\",{controls:!0,children:[(0,e.jsx)(\\"source\\",{src:\\"/articles/concurrent-react-18/perf-transition.mp4\\",type:\\"video/mp4\\"}),(0,e.jsx)(\\"p\\",{children:\\"Your browser doesn\'t support HTML5 video.\\"})]}),`\\n`,(0,e.jsxs)(n.h2,{id:\\"references\\",children:[(0,e.jsx)(n.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,e.jsx)(n.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/DawChihLiou/concurrent-react-stress-testing\\",children:\\"GitHub: Demo repository\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://sweaty-concurrent-react.netlify.app\\",children:\\"Website: Demo Site\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://reactjs.org/blog/2022/03/29/react-v18.html\\",children:\\"Website: React v18.0\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/reactwg/react-18/discussions/41\\",children:\\"GitHub: New feature: startTransition\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/reactwg/react-18/discussions/65\\",children:\\"GitHub: Real world example: adding startTransition for slow renders\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/mrdoob/three.js/\\",children:\\"GitHub: three.js\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://github.com/pmndrs/react-three-fiber\\",children:\\"GitHub: react-three-fiber\\"})}),`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\"https://webgl-globe-solutions.stackblitz.io\\",children:\\"Website: WebGL Globe Solution\\"})}),`\\n`]}),`\\n`,(0,e.jsx)(n.hr,{}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,e.jsx)(n.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,e.jsx)(n.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,e.jsx)(n.a,{href:\\"/articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters\\",children:(0,e.jsx)(n.strong,{children:\\"I Built A Snappy Static Full-text Search with WebAssembly, Rust, Next.js, and Xor Filters\\"})})]}),`\\n`,(0,e.jsx)(n.p,{children:\\"Happy coding!\\"})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var y=v;return w(x);})();\\n;return Component;"},"_id":"articles/stress-testing-concurrent-features-in-react-18.mdx","_raw":{"sourceFilePath":"articles/stress-testing-concurrent-features-in-react-18.mdx","sourceFileName":"stress-testing-concurrent-features-in-react-18.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/stress-testing-concurrent-features-in-react-18"},"type":"Article","readingTime":{"text":"10 min read","minutes":10,"time":600000,"words":2000},"wordCount":2002,"slug":"stress-testing-concurrent-features-in-react-18"},{"title":"Tired of Slow Code Reviews? Read this","publishedAt":"Dec 6, 2022","description":"An ex-tech lead\'s guide to create a healthy code review culture that helps you ship your code faster.","cover":"/optimized/articles/slow-code-review/hero.webp","category":"Leadership","coverWidth":"1400","coverHeight":"600","body":{"raw":"\\n## TL;DR\\n\\n- \uD83C\uDFCE Learn how to accelerate the code review process to maximize your productivity\\n- \uD83D\uDD2C Learn the best practices I came across for code reviewers\\n- ✏️ Learn the best practices I came across for pull request authors\\n\\n---\\n\\nThis article is also available on\\n\\n- [Level Up Coding](https://levelup.gitconnected.com/tired-of-slow-code-reviews-read-this-1a26b3e4539a)\\n- [Hacker Noon](https://hackernoon.com/what-to-do-when-youre-tired-of-slow-code-reviews)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\nImagine this.\\n\\nYou just implemented a feature and wrote all the test cases. You felt great about the code so you opened a pull request and let your coworkers know. After days passing by, your pull request looked exactly the same as before. Seemingly untouched. No comment. No change request. You asked your coworkers again for code review and they agreed. Another week went by and nothing happened. You asked again and they told you that they needed more time because it wasn\'t a small PR and there was a lot to take into consideration.\\n\\nFinally, you saw a notification about a change request and you jumped on it right away. After resolving merge conflicts and fixing the edge cases, you requested a review again, and waited. Another change request appeared after a few days and you repeated the process again. You got an approval after another revision and the PR was finally merged to the trunk.\\n\\n**After 4 weeks since you opened the PR.**\\n\\nIf you can relate to it, you\'re not alone. Many teams experienced such a slow code review process. In fact, it\'s [one of the major blockers][6] in the development cycle. So I want to share with you the best practices of code review I learned to speed up the development and help you ship code faster.\\n\\nLet\'s go.\\n\\n## For Pull Request Authors\\n\\nThe number one thing I\'ve learned to boost code review productivity is to be thoughtful as an author. Other than producing clean code, there are many small things you can do to help your reviewers understand your pull requests proactively.\\n\\n### Be The Driver\\n\\nYou, the author, are the driver of the pace. Knowing that you rely on your coworkers during the code review process, you can clearly communicate the **when** and **what** upfront to align expectations.\\n\\nThe **when** is the most important to communicate because it tells your reviewers how urgent it is. The reviewers can plan their work accordingly. It\'s a great way to set a [timebox][8] for the review process, and it\'s also a great way to show respect to your coworkers\' time.\\n\\nTo communicate the **what**, make sure you include a PR description that focuses on helping your reviewers understand the purpose and code design of your changes. Instead of listing functionalities, start with an opening paragraph explaining the background and why this PR is needed helps the reviewers to build their [mental models][9]. Other descriptions I find very useful are:\\n\\n- **Code design diagrams**: a [screenshot of your high-level code structure][10] helps the reviewers to [review the overall design][11] and react quickly to your pull request.\\n- **Acceptance Criteria**: a list of simple sentences like [\\"An acknowledgment email is sent to the user after submitting the form.\\"][12] helps the reviews look for missing functionalities and test cases.\\n\\n### Keep It Concise\\n\\nSmall, laser-focused pull requests are the easiest to read. How small? Google Engineering Practices say [\\"can\'t make it small enough\\"][4]. [A study][3] has shown that the code review quality decreases as the code change increases. The longer your reviewers review at a time, the less defects they catch. So it\'s important to keep your pull request small and focus on one thing. If the feature you\'re developing is too large, you can consider splitting it into multiple pull requests using the [\\"stacked pull request\\"][5] technique.\\n\\n<img\\n  src=\\"/optimized/articles/slow-code-review/stacked-pr.webp\\"\\n  alt=\\"stacked pull request visualization\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIt replaces a large pull request with a sequence of small pull requests. It helps the reviewers to focus on one thing at the time and aligns brilliantly with the principal of [continuous integration and continuous delivery][13].\\n\\n## For Code Reviewers\\n\\n### Be Mindful about Biases\\n\\nA [study published by Google in 2022][2] found that pull request authors faced different levels of pushback that varied depending on the authors\' demographics. According to data, they [found][1] that\\n\\n> - Women faced 21% higher odds of pushback than men\\n> - Black+ developers faced 54% higher odds than White+ developers\\n> - Latinx+ developers faced 15% higher odds than White+ developers\\n> - Asian+ developers faced 42% higher odds than White+ developers\\n> - Older developers faced higher odds of pushback than younger developers\\n\\nWe should be more mindful about the unintentional biases, especially in a diverse workplace. By being aware of it, we can avoid unnecessary pushback in code reviews and help accelerate the process.\\n\\n### It\'s A Great Place for Learning, Not Snob\\n\\nRegardless of your level of experience, working as a developer is about constant learning. Pull request is an invaluable \\"marketplace\\" for developers to communicate and exchange feedback. So make sure it\'s a place of respect and always [aim for knowledge sharing](https://github.com/google/eng-practices/blob/master/review/reviewer/standard.md#mentoring).\\n\\nFor me it has always been an amazing occasion to learn about domain knowledge. Take my PR in [Airbnb JavaScript Style Guide][14], I learned so much about [ECMAScript Language Specification][15] from a [Ecma TC39][16] member. If he was to dismiss my request [without constructive feedback][17], the teaching moment would have never exist.\\n\\n### Inaction Is Bad\\n\\nI read about a blog post titled [\\"Aggressive Code Review\\"][18] by a tech lead at Instagram a year ago. He claimed that an effective code review consist of\\n\\n- decisive action ASAP\\n- aiming to reduce the cost of mistakes\\n- demanding small pull request and move fast\\n\\nWhat I found refreshing in his approach is that **not acting on a pull request is not an option**. It minimizes the lead time to review and it has been very beneficial to me and my team. We are able to ship fast because we take proactive actions to code review. We don\'t let pending pull requests linger and we review with our business cases in mind.\\n\\n## Final Thoughts\\n\\nTo recap the best practices of pull request and code review to accelerate your development cycle\\n\\n- establish clear communication about the **when** and **what** of a pull request\\n- create small and self-contained pull request that focus on one thing\\n- be mindful about biases\\n- be respectful to the author and fellow reviewers\\n- take decisive review action as soon as possible\\n\\n## References\\n\\n- [The Pushback Effects of Race, Ethnicity, Gender, and Age in Code Review](https://cacm.acm.org/magazines/2022/3/258909-the-pushback-effects-of-race-ethnicity-gender-and-age-in-code-review/fulltext) - Emerson Murphy-Hill, Ciera Jaspan, Carolyn Egelman, Lan Cheng\\n- [Using research to make code review more equitable](https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html) - Emerson Murphy-Hill, Research Scientist, Central Product Inclusion, Equity, and Accessibility\\n- [Best Practices for Code Review](https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/) - SMARTBEAR\\n- [Small CLs](https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md) - Google\\n- [Stacked pull requests: make code reviews faster, easier, and more effective](https://www.michaelagreiler.com/stacked-pull-requests/) - Dr. Michaela Greiler\\n- [Code reviews becoming a blocker](https://www.reddit.com/r/ExperiencedDevs/comments/oo4ds0/code_reviews_becoming_a_blocker/) - Reddit\\n- [Code review bottleneck](https://www.reddit.com/r/agile/comments/e6gffn/code_review_bottleneck/) - Reddit\\n- [Timeboxing](https://en.wikipedia.org/wiki/Timeboxing) - Wikipedia\\n- [Mental Models: Learn How to Think Better and Gain a Mental Edge](https://jamesclear.com/mental-models) - James Clear\\n- [AppLand extension for VSCode](https://github.com/getappmap/vscode-appland) - GitHub\\n- [What to look for in a code review](https://github.com/google/eng-practices/blob/master/review/reviewer/looking-for.md#design) - Google\\n- [https://www.boost.co.nz/blog/2010/09/acceptance-criteria](https://www.boost.co.nz/blog/2010/09/acceptance-criteria) - Nathan Donaldson\\n- [Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery](/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-deliver) - Daw-Chih Liou\\n- [Add Class Private Identifier](https://github.com/airbnb/javascript/pull/2535) - GitHub\\n- [ECMAScript\xae 2023 Language Specification](https://tc39.es/ecma262) - Ecma International\\n- [Ecma TC39](https://github.com/tc39) - GitHub\\n- [Getting ripped apart in code reviews, is this normal?](https://www.reddit.com/r/cscareerquestions/comments/9hakaz/getting_ripped_apart_in_code_reviews_is_this/) - Reddit\\n- [Aggressive Code Review](https://blog.devgenius.io/aggressive-code-review-e5f8869f3967) - Bobi\\n- [Modern Code Review: A Case Study at Google](https://storage.googleapis.com/pub-tools-public-publication-data/pdf/80735342aebcbfc8af4878373f842c25323cb985.pdf) - Caitlin Sadowski, Emma Söderberg, Luke Church, Michal Sipko. Google, Inc.\\n\\n[1]: https://cacm.acm.org/magazines/2022/3/258909-the-pushback-effects-of-race-ethnicity-gender-and-age-in-code-review/fulltext\\n[2]: https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html\\n[3]: https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/\\n[4]: https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md\\n[5]: https://www.michaelagreiler.com/stacked-pull-requests/\\n[6]: https://www.reddit.com/r/ExperiencedDevs/comments/oo4ds0/code_reviews_becoming_a_blocker/\\n[7]: https://www.reddit.com/r/agile/comments/e6gffn/code_review_bottleneck/\\n[8]: https://en.wikipedia.org/wiki/Timeboxing\\n[9]: https://jamesclear.com/mental-models\\n[10]: https://github.com/getappmap/vscode-appland\\n[11]: https://github.com/google/eng-practices/blob/master/review/reviewer/looking-for.md#design\\n[12]: https://www.boost.co.nz/blog/2010/09/acceptance-criteria\\n[13]: /articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-deliver\\n[14]: https://github.com/airbnb/javascript/pull/2535\\n[15]: https://tc39.es/ecma262\\n[16]: https://github.com/tc39\\n[17]: https://www.reddit.com/r/cscareerquestions/comments/9hakaz/getting_ripped_apart_in_code_reviews_is_this/\\n[18]: https://blog.devgenius.io/aggressive-code-review-e5f8869f3967\\n[19]: https://storage.googleapis.com/pub-tools-public-publication-data/pdf/80735342aebcbfc8af4878373f842c25323cb985.pdf\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭ Ready for the next article? \uD83D\uDC49 [**Deploying Like Vercel and Netlify with Cloud Run: Live, Preview, and Modern Workflow**](/articles/deploying-with-cloud-run-like-vercel-and-netlify)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var r in e)t(n,r,{get:e[r],enumerable:!0})},l=(n,e,r,o)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let a of u(e))!m.call(n,a)&&a!==r&&t(n,a,{get:()=>e[a],enumerable:!(o=p(e,a))||o.enumerable});return n};var b=(n,e,r)=>(r=n!=null?d(g(n)):{},l(e||!n||!n.__esModule?t(r,\\"default\\",{value:n,enumerable:!0}):r,n)),v=n=>l(t({},\\"__esModule\\",{value:!0}),n);var s=f((_,c)=>{c.exports=_jsx_runtime});var x={};w(x,{default:()=>q,frontmatter:()=>y});var i=b(s()),y={title:\\"Tired of Slow Code Reviews? Read this\\",publishedAt:\\"Dec 6, 2022\\",description:\\"An ex-tech lead\'s guide to create a healthy code review culture that helps you ship your code faster.\\",cover:\\"/optimized/articles/slow-code-review/hero.webp\\",category:\\"Leadership\\",coverWidth:\\"1400\\",coverHeight:\\"600\\"};function h(n){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",strong:\\"strong\\",h3:\\"h3\\",blockquote:\\"blockquote\\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"\\\\u{1F3CE} Learn how to accelerate the code review process to maximize your productivity\\"}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" Learn the best practices I came across for code reviewers\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"pencil\\",children:\\"\\\\u270F\\\\uFE0F\\"}),\\" Learn the best practices I came across for pull request authors\\"]}),`\\n`]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://levelup.gitconnected.com/tired-of-slow-code-reviews-read-this-1a26b3e4539a\\",children:\\"Level Up Coding\\"})}),`\\n`,(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:\\"https://hackernoon.com/what-to-do-when-youre-tired-of-slow-code-reviews\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsx)(e.p,{children:\\"Imagine this.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"You just implemented a feature and wrote all the test cases. You felt great about the code so you opened a pull request and let your coworkers know. After days passing by, your pull request looked exactly the same as before. Seemingly untouched. No comment. No change request. You asked your coworkers again for code review and they agreed. Another week went by and nothing happened. You asked again and they told you that they needed more time because it wasn\'t a small PR and there was a lot to take into consideration.\\"}),`\\n`,(0,i.jsx)(e.p,{children:\\"Finally, you saw a notification about a change request and you jumped on it right away. After resolving merge conflicts and fixing the edge cases, you requested a review again, and waited. Another change request appeared after a few days and you repeated the process again. You got an approval after another revision and the PR was finally merged to the trunk.\\"}),`\\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\\"After 4 weeks since you opened the PR.\\"})}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"If you can relate to it, you\'re not alone. Many teams experienced such a slow code review process. In fact, it\'s \\",(0,i.jsx)(e.a,{href:\\"https://www.reddit.com/r/ExperiencedDevs/comments/oo4ds0/code_reviews_becoming_a_blocker/\\",children:\\"one of the major blockers\\"}),\\" in the development cycle. So I want to share with you the best practices of code review I learned to speed up the development and help you ship code faster.\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"for-pull-request-authors\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#for-pull-request-authors\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"For Pull Request Authors\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"The number one thing I\'ve learned to boost code review productivity is to be thoughtful as an author. Other than producing clean code, there are many small things you can do to help your reviewers understand your pull requests proactively.\\"}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"be-the-driver\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#be-the-driver\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Be The Driver\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"You, the author, are the driver of the pace. Knowing that you rely on your coworkers during the code review process, you can clearly communicate the \\",(0,i.jsx)(e.strong,{children:\\"when\\"}),\\" and \\",(0,i.jsx)(e.strong,{children:\\"what\\"}),\\" upfront to align expectations.\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"The \\",(0,i.jsx)(e.strong,{children:\\"when\\"}),\\" is the most important to communicate because it tells your reviewers how urgent it is. The reviewers can plan their work accordingly. It\'s a great way to set a \\",(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Timeboxing\\",children:\\"timebox\\"}),\\" for the review process, and it\'s also a great way to show respect to your coworkers\' time.\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"To communicate the \\",(0,i.jsx)(e.strong,{children:\\"what\\"}),\\", make sure you include a PR description that focuses on helping your reviewers understand the purpose and code design of your changes. Instead of listing functionalities, start with an opening paragraph explaining the background and why this PR is needed helps the reviewers to build their \\",(0,i.jsx)(e.a,{href:\\"https://jamesclear.com/mental-models\\",children:\\"mental models\\"}),\\". Other descriptions I find very useful are:\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Code design diagrams\\"}),\\": a \\",(0,i.jsx)(e.a,{href:\\"https://github.com/getappmap/vscode-appland\\",children:\\"screenshot of your high-level code structure\\"}),\\" helps the reviewers to \\",(0,i.jsx)(e.a,{href:\\"https://github.com/google/eng-practices/blob/master/review/reviewer/looking-for.md#design\\",children:\\"review the overall design\\"}),\\" and react quickly to your pull request.\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:\\"Acceptance Criteria\\"}),\\": a list of simple sentences like \\",(0,i.jsx)(e.a,{href:\\"https://www.boost.co.nz/blog/2010/09/acceptance-criteria\\",children:\'\\"An acknowledgment email is sent to the user after submitting the form.\\"\'}),\\" helps the reviews look for missing functionalities and test cases.\\"]}),`\\n`]}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"keep-it-concise\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#keep-it-concise\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Keep It Concise\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Small, laser-focused pull requests are the easiest to read. How small? Google Engineering Practices say \\",(0,i.jsx)(e.a,{href:\\"https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md\\",children:`\\"can\'t make it small enough\\"`}),\\". \\",(0,i.jsx)(e.a,{href:\\"https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/\\",children:\\"A study\\"}),\\" has shown that the code review quality decreases as the code change increases. The longer your reviewers review at a time, the less defects they catch. So it\'s important to keep your pull request small and focus on one thing. If the feature you\'re developing is too large, you can consider splitting it into multiple pull requests using the \\",(0,i.jsx)(e.a,{href:\\"https://www.michaelagreiler.com/stacked-pull-requests/\\",children:\'\\"stacked pull request\\"\'}),\\" technique.\\"]}),`\\n`,(0,i.jsx)(\\"img\\",{src:\\"/optimized/articles/slow-code-review/stacked-pr.webp\\",alt:\\"stacked pull request visualization\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"It replaces a large pull request with a sequence of small pull requests. It helps the reviewers to focus on one thing at the time and aligns brilliantly with the principal of \\",(0,i.jsx)(e.a,{href:\\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-deliver\\",children:\\"continuous integration and continuous delivery\\"}),\\".\\"]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"for-code-reviewers\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#for-code-reviewers\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"For Code Reviewers\\"]}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"be-mindful-about-biases\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#be-mindful-about-biases\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Be Mindful about Biases\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"A \\",(0,i.jsx)(e.a,{href:\\"https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html\\",children:\\"study published by Google in 2022\\"}),\\" found that pull request authors faced different levels of pushback that varied depending on the authors\' demographics. According to data, they \\",(0,i.jsx)(e.a,{href:\\"https://cacm.acm.org/magazines/2022/3/258909-the-pushback-effects-of-race-ethnicity-gender-and-age-in-code-review/fulltext\\",children:\\"found\\"}),\\" that\\"]}),`\\n`,(0,i.jsxs)(e.blockquote,{children:[`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"Women faced 21% higher odds of pushback than men\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Black+ developers faced 54% higher odds than White+ developers\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Latinx+ developers faced 15% higher odds than White+ developers\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Asian+ developers faced 42% higher odds than White+ developers\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"Older developers faced higher odds of pushback than younger developers\\"}),`\\n`]}),`\\n`]}),`\\n`,(0,i.jsx)(e.p,{children:\\"We should be more mindful about the unintentional biases, especially in a diverse workplace. By being aware of it, we can avoid unnecessary pushback in code reviews and help accelerate the process.\\"}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"its-a-great-place-for-learning-not-snob\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#its-a-great-place-for-learning-not-snob\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"It\'s A Great Place for Learning, Not Snob\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[`Regardless of your level of experience, working as a developer is about constant learning. Pull request is an invaluable \\"marketplace\\" for developers to communicate and exchange feedback. So make sure it\'s a place of respect and always `,(0,i.jsx)(e.a,{href:\\"https://github.com/google/eng-practices/blob/master/review/reviewer/standard.md#mentoring\\",children:\\"aim for knowledge sharing\\"}),\\".\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"For me it has always been an amazing occasion to learn about domain knowledge. Take my PR in \\",(0,i.jsx)(e.a,{href:\\"https://github.com/airbnb/javascript/pull/2535\\",children:\\"Airbnb JavaScript Style Guide\\"}),\\", I learned so much about \\",(0,i.jsx)(e.a,{href:\\"https://tc39.es/ecma262\\",children:\\"ECMAScript Language Specification\\"}),\\" from a \\",(0,i.jsx)(e.a,{href:\\"https://github.com/tc39\\",children:\\"Ecma TC39\\"}),\\" member. If he was to dismiss my request \\",(0,i.jsx)(e.a,{href:\\"https://www.reddit.com/r/cscareerquestions/comments/9hakaz/getting_ripped_apart_in_code_reviews_is_this/\\",children:\\"without constructive feedback\\"}),\\", the teaching moment would have never exist.\\"]}),`\\n`,(0,i.jsxs)(e.h3,{id:\\"inaction-is-bad\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#inaction-is-bad\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Inaction Is Bad\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"I read about a blog post titled \\",(0,i.jsx)(e.a,{href:\\"https://blog.devgenius.io/aggressive-code-review-e5f8869f3967\\",children:\'\\"Aggressive Code Review\\"\'}),\\" by a tech lead at Instagram a year ago. He claimed that an effective code review consist of\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsx)(e.li,{children:\\"decisive action ASAP\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"aiming to reduce the cost of mistakes\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"demanding small pull request and move fast\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"What I found refreshing in his approach is that \\",(0,i.jsx)(e.strong,{children:\\"not acting on a pull request is not an option\\"}),\\". It minimizes the lead time to review and it has been very beneficial to me and my team. We are able to ship fast because we take proactive actions to code review. We don\'t let pending pull requests linger and we review with our business cases in mind.\\"]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,i.jsx)(e.p,{children:\\"To recap the best practices of pull request and code review to accelerate your development cycle\\"}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[\\"establish clear communication about the \\",(0,i.jsx)(e.strong,{children:\\"when\\"}),\\" and \\",(0,i.jsx)(e.strong,{children:\\"what\\"}),\\" of a pull request\\"]}),`\\n`,(0,i.jsx)(e.li,{children:\\"create small and self-contained pull request that focus on one thing\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"be mindful about biases\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"be respectful to the author and fellow reviewers\\"}),`\\n`,(0,i.jsx)(e.li,{children:\\"take decisive review action as soon as possible\\"}),`\\n`]}),`\\n`,(0,i.jsxs)(e.h2,{id:\\"references\\",children:[(0,i.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,i.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,i.jsxs)(e.ul,{children:[`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://cacm.acm.org/magazines/2022/3/258909-the-pushback-effects-of-race-ethnicity-gender-and-age-in-code-review/fulltext\\",children:\\"The Pushback Effects of Race, Ethnicity, Gender, and Age in Code Review\\"}),\\" - Emerson Murphy-Hill, Ciera Jaspan, Carolyn Egelman, Lan Cheng\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html\\",children:\\"Using research to make code review more equitable\\"}),\\" - Emerson Murphy-Hill, Research Scientist, Central Product Inclusion, Equity, and Accessibility\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/\\",children:\\"Best Practices for Code Review\\"}),\\" - SMARTBEAR\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md\\",children:\\"Small CLs\\"}),\\" - Google\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://www.michaelagreiler.com/stacked-pull-requests/\\",children:\\"Stacked pull requests: make code reviews faster, easier, and more effective\\"}),\\" - Dr. Michaela Greiler\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://www.reddit.com/r/ExperiencedDevs/comments/oo4ds0/code_reviews_becoming_a_blocker/\\",children:\\"Code reviews becoming a blocker\\"}),\\" - Reddit\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://www.reddit.com/r/agile/comments/e6gffn/code_review_bottleneck/\\",children:\\"Code review bottleneck\\"}),\\" - Reddit\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Timeboxing\\",children:\\"Timeboxing\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://jamesclear.com/mental-models\\",children:\\"Mental Models: Learn How to Think Better and Gain a Mental Edge\\"}),\\" - James Clear\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://github.com/getappmap/vscode-appland\\",children:\\"AppLand extension for VSCode\\"}),\\" - GitHub\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://github.com/google/eng-practices/blob/master/review/reviewer/looking-for.md#design\\",children:\\"What to look for in a code review\\"}),\\" - Google\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://www.boost.co.nz/blog/2010/09/acceptance-criteria\\",children:\\"https://www.boost.co.nz/blog/2010/09/acceptance-criteria\\"}),\\" - Nathan Donaldson\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-deliver\\",children:\\"Ex-Principal Engineer\'s Guide to Design Thinking and Continuous Delivery\\"}),\\" - Daw-Chih Liou\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://github.com/airbnb/javascript/pull/2535\\",children:\\"Add Class Private Identifier\\"}),\\" - GitHub\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://tc39.es/ecma262\\",children:\\"ECMAScript\\\\xAE 2023 Language Specification\\"}),\\" - Ecma International\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://github.com/tc39\\",children:\\"Ecma TC39\\"}),\\" - GitHub\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://www.reddit.com/r/cscareerquestions/comments/9hakaz/getting_ripped_apart_in_code_reviews_is_this/\\",children:\\"Getting ripped apart in code reviews, is this normal?\\"}),\\" - Reddit\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://blog.devgenius.io/aggressive-code-review-e5f8869f3967\\",children:\\"Aggressive Code Review\\"}),\\" - Bobi\\"]}),`\\n`,(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:\\"https://storage.googleapis.com/pub-tools-public-publication-data/pdf/80735342aebcbfc8af4878373f842c25323cb985.pdf\\",children:\\"Modern Code Review: A Case Study at Google\\"}),\\" - Caitlin Sadowski, Emma So\\\\u0308derberg, Luke Church, Michal Sipko. Google, Inc.\\"]}),`\\n`]}),`\\n`,(0,i.jsx)(e.hr,{}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,i.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,i.jsxs)(e.p,{children:[\\"\\\\u23ED Ready for the next article? \\",(0,i.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,i.jsx)(e.a,{href:\\"/articles/deploying-with-cloud-run-like-vercel-and-netlify\\",children:(0,i.jsx)(e.strong,{children:\\"Deploying Like Vercel and Netlify with Cloud Run: Live, Preview, and Modern Workflow\\"})})]}),`\\n`,(0,i.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function k(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(h,n)})):h(n)}var q=k;return v(x);})();\\n;return Component;"},"_id":"articles/tired-of-slow-code-reviews.mdx","_raw":{"sourceFilePath":"articles/tired-of-slow-code-reviews.mdx","sourceFileName":"tired-of-slow-code-reviews.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/tired-of-slow-code-reviews"},"type":"Article","readingTime":{"text":"7 min read","minutes":6.915,"time":414900,"words":1383},"wordCount":1385,"slug":"tired-of-slow-code-reviews"},{"title":"Using WebP for Better User Experience","publishedAt":"October 6, 2020","description":"WebP is a modern image format that provides outstanding image quality with smaller image size. I\'ll show you how much you can benefit from it and how to setup your project for optimal developer experience.","cover":"/optimized/articles/use-webp-for-better-ux/hero.webp","category":"Performance","coverWidth":"1411","coverHeight":"682","body":{"raw":"\\n## TL;DR\\n\\n- [WebP](https://developers.google.com/speed/webp) is a modern image format that provides amazing [lossless and lossy compression](https://www.keycdn.com/support/lossy-vs-lossless).\\n- WebP makes images richer and smaller.\\n- WebP makes web faster.\\n- We don\'t have to convert our images to WebP ourselves. We have tools for that.\\n- [Not all browsers support WebP format](https://caniuse.com/?search=webp) so you\'ll need fallback images.\\n- Check out [source code](https://github.com/DawChihLiou/dawchihliou.github.io) on GitHub.\\n\\n---\\n\\n## What Is Wrong?\\n\\nAs I\'m re-making [my portfolio](https://dawchihliou.github.io/), there is something nagging that bothers me.\\nI have a `128x128` portait photo displayed on the top of my portfolio that is `251.35KB`.\\nIt\'s way too big for its size and takes too long to download and that has a direct impact on my Lighthouse report.\\n\\nIt might not seem like a big deal. Afterall, a lot of people are enjoying high-speed WIFI and modern browsers.\\nBut I want my portfolio to be [**mobile-first**](https://www.uxpin.com/studio/blog/a-hands-on-guide-to-mobile-first-design/).\\nIt\'s important to me that my content can reach to audience that are using cellular data and mobile devices with ease.\\n\\n## next-gen Image Format\\n\\nThere are many ways to tackle image delivery and optimization such as using services like [Cloudinary](https://cloudinary.com/).\\nWhat I\'m looking for is a way to serve self-hosted static assets to reduce complexity of the project and a process that would work with release workflow.\\n\\n> So I want to generate optimized images in [next-gen format](https://web.dev/uses-webp-images/) during build time.\\n\\nAmond all the format options, [WebP is the most widely supported](https://caniuse.com/?search=webp). So let\'s see how to make it work!\\n\\n## Integrate WebP Image in Project\\n\\n---\\n\\nYou can find the [source code on GitHub](https://github.com/DawChihLiou/dawchihliou.github.io).\\nThere are code snippets in this article and you could always reference them in the source code if you\'re interested.\\n\\n---\\n\\nWe can first [follow the instruction](https://web.dev/codelab-serve-images-webp/) to generate WebP images with command line.\\n\\n```bash\\ncwebp -q 75 raw/portrait.png -o optimized/portrait.webp\\n```\\n\\nLet\'s compare the file size.\\n\\n- Raw PNG image: `251.35KB`\\n- Generated WebP image: `5.3KB`\\n\\nThat\'s a `97.89%` reduction right off the bat. Let\'s have a look at the image quality.\\n\\n<img\\n  src=\\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\\"\\n  alt=\\"PNG and WebP comparison\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIf we zoom in a little, we can actually see the difference between the two compression algorithms.\\nThe WebP format overall quality is very desirable, even with the quality of `75` (`0` is the worst, `100` is the best).\\n\\nNow we can use the generated image in the code.\\n\\n```jsx\\n// components/Intro\\n\\n<img src=\\"optimized/portrait.webp\\" alt=\\"Daw-Chih\'s portrait\\" />\\n```\\n\\nWe can have a look at the download time from Network.\\n\\n<img\\n  src=\\"/optimized/articles/use-webp-for-better-ux/network.png\\"\\n  alt=\\"WebP in Network\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIt takes about 1 millisecond to download the image. We just proved how effective WebP can be for our web performance.\\n\\n## Do We Have to Use The Command?\\n\\nIt\'s not very convenient to convert images with the command.\\nWhat we are looking for is to host all the images in `/raw` directory and output WebP images in `/optimized` directory.\\nLuckly I found something cool. [`imagemin`](https://github.com/imagemin/imagemin) is a npm library that minifies images.\\nIt offers a handy [WebP imagemin plugin](https://www.npmjs.com/package/imagemin-webp) and all we need to do is to create a JavaScript file,\\n\\n```ts\\n// lib/webp.js\\n\\nconst imagemin = require(\'imagemin\')\\nconst imageminWebp = require(\'imagemin-webp\')\\n\\n/**\\n * generate webp images inside of destination directory\\n */\\nimagemin([\'raw/*.{jpg,png}\'], {\\n  destination: \'optimized\',\\n  plugins: [imageminWebp({ quality: 75 })],\\n})\\n```\\n\\nand run\\n\\n```bash\\nnode lib/webp.js\\n```\\n\\nto take all the raw images and generate WebP images in `/optimized`.\\n\\n## Not All Browsers Support WebP Format\\n\\nSo we need fallback images to support wider range of browsers. Let\'s first optimize our raw images with their original formats.\\nThere are two `imagemin plugins` we can use:\\n\\n- [`imagemin-pngquant`](https://www.npmjs.com/package/imagemin-pngquant): for PNG images\\n- [`imagemin-jpegtran`](https://github.com/imagemin/imagemin-jpegtran): for JPEG images\\n\\n```ts\\n// lib/webp.js\\n\\nconst imageminJpegtran = require(\'imagemin-jpegtran\')\\nconst imageminPngquant = require(\'imagemin-pngquant\')\\n\\n/**\\n * generate optimized fallback images\\n */\\nimagemin([\'raw/*.{jpg,png}\'], {\\n  destination: \'optimized\',\\n  plugins: [\\n    imageminJpegtran(),\\n    imageminPngquant({\\n      quality: [0.6, 0.8],\\n    }),\\n  ],\\n})\\n```\\n\\nNow we are ready to add fallback images.\\n\\n```jsx\\n// components/Intro\\n\\n<picture>\\n  <source srcSet=\\"optimized/portrait.webp\\" type=\\"image/webp\\" />\\n  <source srcSet=\\"optimized/portrait.png\\" type=\\"image/png\\" />\\n  <img src=\\"optimized/portrait.png\\" alt=\\"Daw-Chih\'s portrait\\" loading=\\"lazy\\" />\\n</picture>\\n```\\n\\nAt this point, we can really compare all image qualities.\\n\\n##### PNG (left) and optimized PNG (right) comparison\\n\\n<img\\n  src=\\"/optimized/articles/use-webp-for-better-ux/png-comparison.png\\"\\n  alt=\\"PNG and optimized PNG comparison\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n##### PNG (left) and WebP (right) comparison\\n\\n<img\\n  src=\\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\\"\\n  alt=\\"PNG and WebP comparison\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nIf you are looking for optimizing SVG files, you can achieve it with [`imagemin-svgo`](https://www.npmjs.com/package/imagemin-svgo).\\n\\n```ts\\n// lib/webp.js\\n\\nconst imageminSvgo = require(\'imagemin-svgo\')\\n\\n/**\\n * generate optimized svg files\\n */\\nimagemin([\'public/raw/*.svg\'], {\\n  destination: \'optimized\',\\n  plugins: [imageminSvgo({ removeViewBox: false })],\\n})\\n```\\n\\n## We Are Ready to Integrate with Workflow Automation\\n\\nIn our `package.json`, add the following scripts.\\n\\n```ts\\n\\"scripts\\": {\\n  \\"image\\": \\"node lib/webp.js\\",\\n  \\"prepare\\": \\"yarn image\\",\\n}\\n```\\n\\nThe `prepare` script will execute after installation. This will allow us to build our image assets in the workflows of our choice.\\n\\nFor example, to deploy my portfolio with GitHub Actions to GitHub Pages as a static site, a workflow looks like this.\\n\\n```yml\\njobs:\\n  deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v2\\n\\n      - name: Install dependencies \uD83D\uDC25\\n        run: yarn install\\n\\n      - name: Export static assets \uD83D\uDCE6\\n        run: yarn build && yarn export\\n\\n      - name: Deploy to GitHub Pages \uD83D\uDE80\\n        uses: JamesIves/github-pages-deploy-action@3.6.2\\n        with:\\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n          BRANCH: gh-pages\\n          FOLDER: out # contains all static assets\\n```\\n\\nIn the \\"Install dependencies\\" step, the job installs the dependencies, and then generate the optimized images.\\nThe images will be deployed alongside with the other assets in `/out` directory.\\n\\n## To Sum up\\n\\nWebP is designed for web. The image quality and size is very desirable especially for mobile users.\\nWith the right tooling, generating WebP image can work seemlessly with automation.\\nAs long as we make sure that the fallback images are in place, our audience can benefit tremendously from the boost of speed and better enjoy our content.\\n\\n##### Lighthouse report with optimized WebP images\\n\\n<img\\n  src=\\"/optimized/articles/use-webp-for-better-ux/lighthouse-report.png\\"\\n  alt=\\"Lighthouse report\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n---\\n\\nHere you have it! Thanks for reading through.\\n\\nI hope I made it as straight forward as possible to grasp.\\nIf you have thoughts or there’s something not clear to you, feel free to drop a comment below, or connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nIf you\'re wondering how to test Redux Observable, I wrote an ariticle [\\"Writing Better Marble Tests for Redux Observable and TypeScript\\"](https://itnext.io/better-marble-test-70c7676a1e2) just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.\\n\\nIf you’re a fan of functional programming, check out [this article that I wrote about Transducers](https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d).\\nIt’s a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},l=(a,e,s,i)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let c of m(e))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>e[c],enumerable:!(i=h(e,c))||i.enumerable});return a};var w=(a,e,s)=>(s=a!=null?d(u(a)):{},l(e||!a||!a.__esModule?t(s,\\"default\\",{value:a,enumerable:!0}):s,a)),b=a=>l(t({},\\"__esModule\\",{value:!0}),a);var r=k((W,o)=>{o.exports=_jsx_runtime});var x={};g(x,{default:()=>v,frontmatter:()=>f});var n=w(r()),f={title:\\"Using WebP for Better User Experience\\",publishedAt:\\"October 6, 2020\\",description:\\"WebP is a modern image format that provides outstanding image quality with smaller image size. I\'ll show you how much you can benefit from it and how to setup your project for optimal developer experience.\\",cover:\\"/optimized/articles/use-webp-for-better-ux/hero.webp\\",category:\\"Performance\\",coverWidth:\\"1411\\",coverHeight:\\"682\\"};function p(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",hr:\\"hr\\",p:\\"p\\",code:\\"code\\",strong:\\"strong\\",blockquote:\\"blockquote\\",pre:\\"pre\\",h5:\\"h5\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developers.google.com/speed/webp\\",children:\\"WebP\\"}),\\" is a modern image format that provides amazing \\",(0,n.jsx)(e.a,{href:\\"https://www.keycdn.com/support/lossy-vs-lossless\\",children:\\"lossless and lossy compression\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.li,{children:\\"WebP makes images richer and smaller.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"WebP makes web faster.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"We don\'t have to convert our images to WebP ourselves. We have tools for that.\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://caniuse.com/?search=webp\\",children:\\"Not all browsers support WebP format\\"}),\\" so you\'ll need fallback images.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Check out \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dawchihliou.github.io\\",children:\\"source code\\"}),\\" on GitHub.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"what-is-wrong\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-is-wrong\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What Is Wrong?\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"As I\'m re-making \\",(0,n.jsx)(e.a,{href:\\"https://dawchihliou.github.io/\\",children:\\"my portfolio\\"}),`, there is something nagging that bothers me.\\nI have a `,(0,n.jsx)(e.code,{children:\\"128x128\\"}),\\" portait photo displayed on the top of my portfolio that is \\",(0,n.jsx)(e.code,{children:\\"251.35KB\\"}),`.\\nIt\'s way too big for its size and takes too long to download and that has a direct impact on my Lighthouse report.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[`It might not seem like a big deal. Afterall, a lot of people are enjoying high-speed WIFI and modern browsers.\\nBut I want my portfolio to be `,(0,n.jsx)(e.a,{href:\\"https://www.uxpin.com/studio/blog/a-hands-on-guide-to-mobile-first-design/\\",children:(0,n.jsx)(e.strong,{children:\\"mobile-first\\"})}),`.\\nIt\'s important to me that my content can reach to audience that are using cellular data and mobile devices with ease.`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"next-gen-image-format\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#next-gen-image-format\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"next-gen Image Format\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"There are many ways to tackle image delivery and optimization such as using services like \\",(0,n.jsx)(e.a,{href:\\"https://cloudinary.com/\\",children:\\"Cloudinary\\"}),`.\\nWhat I\'m looking for is a way to serve self-hosted static assets to reduce complexity of the project and a process that would work with release workflow.`]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\"So I want to generate optimized images in \\",(0,n.jsx)(e.a,{href:\\"https://web.dev/uses-webp-images/\\",children:\\"next-gen format\\"}),\\" during build time.\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Amond all the format options, \\",(0,n.jsx)(e.a,{href:\\"https://caniuse.com/?search=webp\\",children:\\"WebP is the most widely supported\\"}),\\". So let\'s see how to make it work!\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"integrate-webp-image-in-project\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#integrate-webp-image-in-project\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Integrate WebP Image in Project\\"]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can find the \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dawchihliou.github.io\\",children:\\"source code on GitHub\\"}),`.\\nThere are code snippets in this article and you could always reference them in the source code if you\'re interested.`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We can first \\",(0,n.jsx)(e.a,{href:\\"https://web.dev/codelab-serve-images-webp/\\",children:\\"follow the instruction\\"}),\\" to generate WebP images with command line.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"cwebp \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"-q\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"75\\"}),\\" raw/portrait.png \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"-o\\"}),` optimized/portrait.webp\\n`]})})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s compare the file size.\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"Raw PNG image: \\",(0,n.jsx)(e.code,{children:\\"251.35KB\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Generated WebP image: \\",(0,n.jsx)(e.code,{children:\\"5.3KB\\"})]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"That\'s a \\",(0,n.jsx)(e.code,{children:\\"97.89%\\"}),\\" reduction right off the bat. Let\'s have a look at the image quality.\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\\",alt:\\"PNG and WebP comparison\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[`If we zoom in a little, we can actually see the difference between the two compression algorithms.\\nThe WebP format overall quality is very desirable, even with the quality of `,(0,n.jsx)(e.code,{children:\\"75\\"}),\\" (\\",(0,n.jsx)(e.code,{children:\\"0\\"}),\\" is the worst, \\",(0,n.jsx)(e.code,{children:\\"100\\"}),\\" is the best).\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now we can use the generated image in the code.\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-jsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-jsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// components/Intro\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"img\\"]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"src\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"optimized/portrait.webp\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"alt\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"Daw-Chih\'s portrait\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"We can have a look at the download time from Network.\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/use-webp-for-better-ux/network.png\\",alt:\\"WebP in Network\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"It takes about 1 millisecond to download the image. We just proved how effective WebP can be for our web performance.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"do-we-have-to-use-the-command\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#do-we-have-to-use-the-command\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Do We Have to Use The Command?\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[`It\'s not very convenient to convert images with the command.\\nWhat we are looking for is to host all the images in `,(0,n.jsx)(e.code,{children:\\"/raw\\"}),\\" directory and output WebP images in \\",(0,n.jsx)(e.code,{children:\\"/optimized\\"}),` directory.\\nLuckly I found something cool. `,(0,n.jsx)(e.a,{href:\\"https://github.com/imagemin/imagemin\\",children:(0,n.jsx)(e.code,{children:\\"imagemin\\"})}),` is a npm library that minifies images.\\nIt offers a handy `,(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/imagemin-webp\\",children:\\"WebP imagemin plugin\\"}),\\" and all we need to do is to create a JavaScript file,\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// lib/webp.js\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" imagemin \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"require\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'imagemin\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" imageminWebp \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"require\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'imagemin-webp\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:`/**\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * generate webp images inside of destination directory\\n`})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\" */\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imagemin\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'raw/*.{jpg,png}\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  destination\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'optimized\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  plugins\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imageminWebp\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" quality\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"75\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"and run\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"node\\"}),` lib/webp.js\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"to take all the raw images and generate WebP images in \\",(0,n.jsx)(e.code,{children:\\"/optimized\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"not-all-browsers-support-webp-format\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#not-all-browsers-support-webp-format\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Not All Browsers Support WebP Format\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[`So we need fallback images to support wider range of browsers. Let\'s first optimize our raw images with their original formats.\\nThere are two `,(0,n.jsx)(e.code,{children:\\"imagemin plugins\\"}),\\" we can use:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/imagemin-pngquant\\",children:(0,n.jsx)(e.code,{children:\\"imagemin-pngquant\\"})}),\\": for PNG images\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/imagemin/imagemin-jpegtran\\",children:(0,n.jsx)(e.code,{children:\\"imagemin-jpegtran\\"})}),\\": for JPEG images\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// lib/webp.js\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" imageminJpegtran \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"require\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'imagemin-jpegtran\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" imageminPngquant \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"require\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'imagemin-pngquant\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:`/**\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * generate optimized fallback images\\n`})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\" */\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imagemin\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'raw/*.{jpg,png}\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  destination\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'optimized\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  plugins\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imageminJpegtran\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imageminPngquant\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      quality\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"0.6\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"0.8\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now we are ready to add fallback images.\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-jsx\\",children:(0,n.jsxs)(e.code,{className:\\"language-jsx code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// components/Intro\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"picture\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"  \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"source\\"]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"srcSet\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"optimized/portrait.webp\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"type\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"image/webp\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"  \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"source\\"]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"srcSet\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"optimized/portrait.png\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"type\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"image/png\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:\\"  \\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"<\\"}),\\"img\\"]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"src\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"optimized/portrait.png\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"alt\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"Daw-Chih\'s portrait\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token attr-name\\",children:\\"loading\\"}),(0,n.jsxs)(e.span,{className:\\"token attr-value\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation attr-equals\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'}),\\"lazy\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\'\\"\'})]}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"/>\\"})]}),(0,n.jsx)(e.span,{className:\\"token plain-text\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token plain-text\\"}),(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsxs)(e.span,{className:\\"token tag\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"</\\"}),\\"picture\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\">\\"})]}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"At this point, we can really compare all image qualities.\\"}),`\\n`,(0,n.jsxs)(e.h5,{id:\\"png-left-and-optimized-png-right-comparison\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#png-left-and-optimized-png-right-comparison\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"PNG (left) and optimized PNG (right) comparison\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/use-webp-for-better-ux/png-comparison.png\\",alt:\\"PNG and optimized PNG comparison\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.h5,{id:\\"png-left-and-webp-right-comparison\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#png-left-and-webp-right-comparison\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"PNG (left) and WebP (right) comparison\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\\",alt:\\"PNG and WebP comparison\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you are looking for optimizing SVG files, you can achieve it with \\",(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/imagemin-svgo\\",children:(0,n.jsx)(e.code,{children:\\"imagemin-svgo\\"})}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// lib/webp.js\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" imageminSvgo \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"require\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'imagemin-svgo\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:`/**\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * generate optimized svg files\\n`})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\" */\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imagemin\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'public/raw/*.svg\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  destination\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'optimized\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  plugins\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"imageminSvgo\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" removeViewBox\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"false\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"we-are-ready-to-integrate-with-workflow-automation\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#we-are-ready-to-integrate-with-workflow-automation\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"We Are Ready to Integrate with Workflow Automation\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In our \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\", add the following scripts.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token string-property property\\",children:\'\\"scripts\\"\'}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string-property property\\",children:\'\\"image\\"\'}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"node lib/webp.js\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string-property property\\",children:\'\\"prepare\\"\'}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"yarn image\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The \\",(0,n.jsx)(e.code,{children:\\"prepare\\"}),\\" script will execute after installation. This will allow us to build our image assets in the workflows of our choice.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"For example, to deploy my portfolio with GitHub Actions to GitHub Pages as a static site, a workflow looks like this.\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"jobs\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"deploy\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"runs-on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" ubuntu\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`latest\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` actions/checkout@v2\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" Install dependencies \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"front-facing baby chick\\",children:\\"\\\\u{1F425}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` yarn install\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" Export static assets \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"package\\",children:\\"\\\\u{1F4E6}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" yarn build \\",(0,n.jsx)(e.span,{className:\\"token important\\",children:\\"&&\\"}),` yarn export\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" Deploy to GitHub Pages \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" JamesIves/github\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"pages\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"deploy\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`action@3.6.2\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"GITHUB_TOKEN\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" secrets.GITHUB_TOKEN \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"BRANCH\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" gh\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`pages\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"FOLDER\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" out \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# contains all static assets\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[`In the \\"Install dependencies\\" step, the job installs the dependencies, and then generate the optimized images.\\nThe images will be deployed alongside with the other assets in `,(0,n.jsx)(e.code,{children:\\"/out\\"}),\\" directory.\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"to-sum-up\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#to-sum-up\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"To Sum up\\"]}),`\\n`,(0,n.jsx)(e.p,{children:`WebP is designed for web. The image quality and size is very desirable especially for mobile users.\\nWith the right tooling, generating WebP image can work seemlessly with automation.\\nAs long as we make sure that the fallback images are in place, our audience can benefit tremendously from the boost of speed and better enjoy our content.`}),`\\n`,(0,n.jsxs)(e.h5,{id:\\"lighthouse-report-with-optimized-webp-images\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#lighthouse-report-with-optimized-webp-images\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Lighthouse report with optimized WebP images\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/use-webp-for-better-ux/lighthouse-report.png\\",alt:\\"Lighthouse report\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"Here you have it! Thanks for reading through.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[`I hope I made it as straight forward as possible to grasp.\\nIf you have thoughts or there\\\\u2019s something not clear to you, feel free to drop a comment below, or connect with me on `,(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\'re wondering how to test Redux Observable, I wrote an ariticle \\",(0,n.jsx)(e.a,{href:\\"https://itnext.io/better-marble-test-70c7676a1e2\\",children:\'\\"Writing Better Marble Tests for Redux Observable and TypeScript\\"\'}),` just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\\\\u2019re a fan of functional programming, check out \\",(0,n.jsx)(e.a,{href:\\"https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d\\",children:\\"this article that I wrote about Transducers\\"}),`.\\nIt\\\\u2019s a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var v=y;return b(x);})();\\n;return Component;"},"_id":"articles/use-webp-for-better-ux.mdx","_raw":{"sourceFilePath":"articles/use-webp-for-better-ux.mdx","sourceFileName":"use-webp-for-better-ux.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/use-webp-for-better-ux"},"type":"Article","readingTime":{"text":"6 min read","minutes":5.49,"time":329400,"words":1098},"wordCount":1100,"slug":"use-webp-for-better-ux"},{"title":"WASM Semantic Search in Rust","publishedAt":"Mar 10, 2023","description":"Introducing Voy, a portable WebAssembly semantic search engine with vector similarity search in Rust.","cover":"/optimized/articles/wasm-semantic-search/hero.webp","category":"Cloud","coverWidth":"1400","coverHeight":"700","body":{"raw":"\\n## In this article\\n\\n- \uD83D\uDD0D We\'ll learn what semantic search is.\\n- \uD83C\uDF89 We\'ll discuss how semantic search impacts the user experience\\n- \uD83E\uDD80 We\'ll see the use case of a new npm library called Voy, a WASM vector similarity search engine written in Rust.\\n\\nLet\'s go.\\n\\n---\\n\\nThis article is also available on\\n\\n- [Better Programming](https://medium.com/better-programming/wasm-semantic-search-in-rust-9ab0e222e2b9)\\n- [Hacker Noon](https://hackernoon.com/how-to-go-about-using-wasm-semantic-search-in-rust)\\n\\nFeel free to read it on your favorite platform✨\\n\\n---\\n\\n## What Is Semantic Search?\\n\\nSemantic search is a type of search that focuses on meanings. You can search with human language or vague concepts, and the search result will give you similar data points in the database based on the semantics of your search query.\\n\\nIt almost feels like semantic search engines \\"understand\\" the meaning of your questions. You can ask any question in your natural language like \\"Which Marvel movie to watch after Shang-Chi?\\". The engines understand the meaning and why you ask that question and it returns the most relevant results back to you.\\n\\nIn fact, semantic search engines commonly use pre-trained [Neural Networks][8] models to understand the [search intent and contextual meanings][3], and generate a computational representation of the search queries and database. We often refer to the representation as \\"vector embeddings\\" or \\"embeddings\\". The engine will then classify the embeddings and find the nearest neighbors of the search query embeddings. The nearest neighbors are the data points that are the most relevant to what you\'re looking for.\\n\\nTo illustrate how semantic search works:\\n\\n<img\\n  src=\\"https://1.bp.blogspot.com/-Rsymb9XvPOE/Xx8rfRnmTHI/AAAAAAAAGRQ/U2n_bBNXS4IBstYrx2IalrFXufLUvmn2gCLcBGAsYHQ/s1600/ScaNN%2Btom%2Bexport.gif\\"\\n  alt=\\"See https://ai.googleblog.com/2020/07/announcing-scann-efficient-vector.html\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n> The image originated from Google Research\'s blog \\"[Announcing ScaNN: Efficient Vector Similarity Search][10]\\".\\n\\n## Who Uses Semantic Search?\\n\\nSemantic search is everywhere. It\'s so valuable because it has a big impact on user experience:\\n\\n- Users are able to search and access digital content in a more human way.\\n- Search engines are able to provide more relevant and helpful content to the users and make [SEO strategy][2] around keywords irrelevant.\\n- Search can be [blazingly fast][5] for big data.\\n- Search isn\'t limited to text anymore. We can create embeddings from different types of digital content, like images and videos.\\n\\nSome examples of the major companies that integrated semantic search:\\n\\n- Google: [Hummingbird][1]\\n- Amazon: [Semantic product search][15]\\n- Spotify: [Natural Language Search][19]\\n- Meta: [Facebook AI Similarity Search][11]\\n- Redis: [Redis Vector Similarity Search][4]\\n\\n## Introducing Voy\\n\\n[Voy][13] is an open source semantic search engine in [WebAssembly][20] (WASM). I created it to empower more projects to build semantic features and create better user experience for people around the world. Voy follows several design principles:\\n\\n- \uD83E\uDD0F **Tiny**: Reduce overhead for limited devices, such as mobile browsers with slow network or IoT.\\n- ⚡️ **Fast**: Create the best search experience for the users.\\n- \uD83C\uDF33 **Tree Shackable**: Optimize bundle size and enable asynchronous capabilities for modern Web API, such as [Web Workers][22].\\n- \uD83D\uDD0B **Resumable**: Generate portable embeddings index anywhere, anytime.\\n- ☁️ **Edgy**: Run semantic search on CDN edge servers.\\n\\nIt\'s available on npm. You can simply install it with your favorite package manager and start using it.\\n\\n```bash\\n# with npm\\nnpm i voy-search\\n\\n# with Yarn\\nyarn add voy-search\\n\\n# with pnpm\\npnpm add voy-search\\n```\\n\\nTo demonstrate what it looks like:\\n\\n<img\\n  src=\\"/articles/wasm-semantic-search/voy.gif\\"\\n  alt=\\"PNG and WebP comparison\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n> You can find the [Voy\'s repository on GitHub][13]! Feel free to try it out.\\n>\\n> The repository includes an [example](https://github.com/tantaraio/voy/tree/main/example) where you can see how to load the WASM module with [Webpack 5][21].\\n\\nLet\'s break it down a bit to see what it did. First, the demo was loading the WASM module asynchronously. After loading, it started indexing the following phrases:\\n\\n- \\"This is a very happy Person\\"\\n- \\"That is a Happy Dog\\"\\n- \\"Today is a sunny day\\"\\n\\nIndexing is where we transforms the phrases into embeddings and organize them in a embedding space. Once the index was ready, the demo performed a similarity search with the phrase \\"That is a happy Person\\". Finally we saw the search result returns \\"This is a very happy Person\\" as the top result.\\n\\nWe can reason about the credibility of the result because \\"This is a happy Person\\" does have the highest semantic similarity to \\"This is a very happy Person\\".\\n\\n## How does Voy Work?\\n\\nVoy takes care of two things:\\n\\n- Indexing resources.\\n- Retrieving nearest neighbors from the index.\\n\\n### Index Resources\\n\\n> To demonstrate, we\'ll use \\"text\\" as our resource.\\n\\nThe embeddings are organized and stored in a [k-d tree][18] under the hood. k-d tree is a data structure for organizing data in a k-dimensional space. It is very useful for our vector embeddings index because the embeddings are fixed floating arrays.\\n\\nAs of now, packaging an embeddings transformers into WASM is still under development. So Voy relies on other libraries like [Web AI][23] to generate embeddings.\\n\\n```ts\\n// Dynamically import Voy\\nconst voy = await import(\'voy\')\\n\\nconst phrases = [\\n  \'That is a very happy Person\',\\n  \'That is a Happy Dog\',\\n  \'Today is a sunny day\',\\n]\\n\\n// Use web-ai to create text embeddings\\nconst model = await(await TextModel.create(\'gtr-t5-quant\')).model\\nconst processed = await Promise.all(phrases.map((q) => model.process(q)))\\n\\n// Index embeddings with Voy\\nconst data = processed.map(({ result }, i) => ({\\n  id: String(i),\\n  title: phrases[i],\\n  url: `/path/${i}`, // link to your resource for the search result\\n  embeddings: result,\\n}))\\nconst index = voy.index({ embeddings: data }) // index is a serialized k-d tree\\n```\\n\\nAs you can see, after executing **voy.index()**, it returns a serialized index. It allows Voy to deserialize the index when executing searches without being in the same environment. For example, the index can be created in build time and ship the serialized index to the client to perform searches. It is referred as the **resumability**.\\n\\n### Retrieve Nearest Neighbors\\n\\n```ts\\n// Create query embeddings\\nconst query = await model.process(\'That is a happy Person\')\\n\\n// Search with Voy and return the 1 result\\nconst nearests = voy.search(index, query.result, 1)\\n\\n// Display vector similarity search result\\nnearests.forEach(\\n  (result) => log(`\uD83D\uDD78️ voy similarity search result \uD83D\uDC49 \\"${result.title}\\"`) // That is a very happy Person\\n)\\n```\\n\\nInternally, Voy uses Squared [Euclidean distance][9] to calculate the nearest neighbors. There\'re a few ways to calculate the distance between points. Here the points are the nodes of the embeddings object in the k-d tree. The common formulas are:\\n\\n- [Euclidean distance][9]\\n- [Manhattan distance][16]\\n- [Cosine similarity][17]\\n\\n<img\\n  src=\\"/optimized/articles/wasm-semantic-search/distance-matrics.webp\\"\\n  alt=\\"Common distance metrics: Euclidean distance, Manhattan distance, and Cosine similarity\\"\\n  width=\\"100%\\"\\n  className=\\"rounded centered\\"\\n  loading=\\"lazy\\"\\n/>\\n\\n## Final Thoughts\\n\\nVoy is created to make semantic accessible for developers to build, ship, and create user value. It still has a few more steps to be a self-sufficient semantic search engine. If you\'re interested, you can follow Voy\'s [public roadmap][24].\\n\\nIf you believe in Voy\'s mission and would like to support the project, please check out the [sponsor section][13] on the GitHub repository.\\n\\nIf you are interested in some of the open source embeddings transformers, here are some of the projects I experimented with:\\n\\n- [spotify/annoy][12]\\n- [facebookresearch/faiss][26]\\n- [google-research/bert][25]\\n- [UKPLab/sentence-transformers][27] with the [all-MiniLM-L12-v2][28] model\\n\\n## References\\n\\n- [Announcing ScaNN: Efficient Vector Similarity Search][10] - Google Research\\n- [Build Intelligent Apps with New Redis Vector Similarity Search][4] - Redis\\n- [Cosine similarity][17] - Wikipedia\\n- [Euclidean distance][9] - Wikipedia\\n- [facebookresearch/faiss][26] - GitHub\\n- [Faiss: A library for efficient similarity search][11] - Engineering at Meta\\n- [Find anything blazingly fast with Google\'s vector search technology][5] - Google Cloud\\n- [Google Hummingbird][1] - Wikipedia\\n- [google-research/bert][25] - GitHub\\n- [I Built A Snappy Static Full-text Search with WebAssembly, Rust, Next.js, and Xor Filters][14] - Daw-Chih Liou\\n- [Introducing Natural Language Search for Podcast Episodes][19] - Spotify\\n- [k-d tree][18] - Wikipedia\\n- [Manhattan distance][16] - Wikipedia\\n- [Nearest neighbor search][7] - Wikipedia\\n- [Neural network][8] - Wikipedia\\n- [Semantic product search][15] - Amazon Science\\n- [Semantic search][3] - Wikipedia\\n- [sentence-transformers/all-MiniLM-L12-v2][28] - Hugging Face\\n- [Similarity search][6] - Wikipedia\\n- [spotify/annoy][12] - GitHub\\n- [tantaraio/voy][13] - GitHub\\n- [UKPLab/sentence-transformers][27] - GitHub\\n- [visheratin/web-ai][23] - GitHub\\n- [Voy Roadmap][14] - GitHub Projects\\n- [What is semantic search: A deep dive into entity-based search][2] - Search Engine Land\\n- [WebAssembly][20] - W3C Community Group\\n- [Web Workers API][22] - mdn web docs\\n- [Webpack][21] - OpenJS Foundation\\n\\n[1]: https://en.wikipedia.org/wiki/Google_Hummingbird\\n[2]: https://searchengineland.com/semantic-search-entity-based-search-388221\\n[3]: https://en.wikipedia.org/wiki/Semantic_search\\n[4]: https://redis.com/blog/build-intelligent-apps-redis-vector-similarity-search/\\n[5]: https://cloud.google.com/blog/topics/developers-practitioners/find-anything-blazingly-fast-googles-vector-search-technology\\n[6]: https://en.wikipedia.org/wiki/Similarity_search\\n[7]: https://en.wikipedia.org/wiki/Nearest_neighbor_search\\n[8]: https://en.wikipedia.org/wiki/Neural_network\\n[9]: https://en.wikipedia.org/wiki/Euclidean_distance\\n[10]: https://ai.googleblog.com/2020/07/announcing-scann-efficient-vector.html\\n[11]: https://engineering.fb.com/2017/03/29/data-infrastructure/faiss-a-library-for-efficient-similarity-search/\\n[12]: https://github.com/spotify/annoy\\n[13]: https://github.com/tantaraio/voy\\n[14]: /articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters\\n[15]: https://www.amazon.science/publications/semantic-product-search\\n[16]: https://en.wikipedia.org/wiki/Taxicab_geometry\\n[17]: https://en.wikipedia.org/wiki/Cosine_similarity\\n[18]: https://en.wikipedia.org/wiki/K-d_tree\\n[19]: https://engineering.atspotify.com/2022/03/introducing-natural-language-search-for-podcast-episodes/\\n[20]: https://webassembly.org\\n[21]: https://webpack.js.org\\n[22]: https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\\n[23]: https://github.com/visheratin/web-ai\\n[24]: https://github.com/orgs/tantaraio/projects/2/views/1\\n[25]: https://github.com/google-research/bert\\n[26]: https://github.com/facebookresearch/faiss\\n[27]: https://github.com/UKPLab/sentence-transformers\\n[28]: https://huggingface.co/sentence-transformers/all-MiniLM-L12-v2\\n\\n---\\n\\n\uD83D\uDCAC Comments on [Reddit](https://www.reddit.com/r/javascript/comments/11nuwwp/wasm_semantic_search_in_rust/?utm_source=share&utm_medium=web2x&context=3).\\n\\n---\\n\\nHere you have it! Thanks for reading through\uD83D\uDE4C\\nIf you find this article useful, please share it to help more people in their engineering journey.\\n\\n\uD83D\uDC26 Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\n⏭️ Ready for the next article? \uD83D\uDC49 [**Lean Docker Images for Next.JS**](/articles/lean-docker-images-for-nextjs)\\n\\nHappy coding!\\n","code":"var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,t)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let s of m(e))!g.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(t=p(e,s))||t.enumerable});return a};var N=(a,e,i)=>(i=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?r(i,\\"default\\",{value:a,enumerable:!0}):i,a)),b=a=>c(r({},\\"__esModule\\",{value:!0}),a);var o=k((W,l)=>{l.exports=_jsx_runtime});var x={};f(x,{default:()=>v,frontmatter:()=>y});var n=N(o()),y={title:\\"WASM Semantic Search in Rust\\",publishedAt:\\"Mar 10, 2023\\",description:\\"Introducing Voy, a portable WebAssembly semantic search engine with vector similarity search in Rust.\\",cover:\\"/optimized/articles/wasm-semantic-search/hero.webp\\",category:\\"Cloud\\",coverWidth:\\"1400\\",coverHeight:\\"700\\"};function h(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",p:\\"p\\",hr:\\"hr\\",blockquote:\\"blockquote\\",strong:\\"strong\\",pre:\\"pre\\",code:\\"code\\",h3:\\"h3\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"in-this-article\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#in-this-article\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"In this article\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"left-pointing magnifying glass\\",children:\\"\\\\u{1F50D}\\"}),\\" We\'ll learn what semantic search is.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"party popper\\",children:\\"\\\\u{1F389}\\"}),\\" We\'ll discuss how semantic search impacts the user experience\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"crab\\",children:\\"\\\\u{1F980}\\"}),\\" We\'ll see the use case of a new npm library called Voy, a WASM vector similarity search engine written in Rust.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s go.\\"}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article is also available on\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://medium.com/better-programming/wasm-semantic-search-in-rust-9ab0e222e2b9\\",children:\\"Better Programming\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://hackernoon.com/how-to-go-about-using-wasm-semantic-search-in-rust\\",children:\\"Hacker Noon\\"})}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to read it on your favorite platform\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"what-is-semantic-search\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#what-is-semantic-search\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"What Is Semantic Search?\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Semantic search is a type of search that focuses on meanings. You can search with human language or vague concepts, and the search result will give you similar data points in the database based on the semantics of your search query.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\'It almost feels like semantic search engines \\"understand\\" the meaning of your questions. You can ask any question in your natural language like \\"Which Marvel movie to watch after Shang-Chi?\\". The engines understand the meaning and why you ask that question and it returns the most relevant results back to you.\'}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In fact, semantic search engines commonly use pre-trained \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Neural_network\\",children:\\"Neural Networks\\"}),\\" models to understand the \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Semantic_search\\",children:\\"search intent and contextual meanings\\"}),`, and generate a computational representation of the search queries and database. We often refer to the representation as \\"vector embeddings\\" or \\"embeddings\\". The engine will then classify the embeddings and find the nearest neighbors of the search query embeddings. The nearest neighbors are the data points that are the most relevant to what you\'re looking for.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"To illustrate how semantic search works:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"https://1.bp.blogspot.com/-Rsymb9XvPOE/Xx8rfRnmTHI/AAAAAAAAGRQ/U2n_bBNXS4IBstYrx2IalrFXufLUvmn2gCLcBGAsYHQ/s1600/ScaNN%2Btom%2Bexport.gif\\",alt:\\"See https://ai.googleblog.com/2020/07/announcing-scann-efficient-vector.html\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[`The image originated from Google Research\'s blog \\"`,(0,n.jsx)(e.a,{href:\\"https://ai.googleblog.com/2020/07/announcing-scann-efficient-vector.html\\",children:\\"Announcing ScaNN: Efficient Vector Similarity Search\\"}),\'\\".\']}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"who-uses-semantic-search\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#who-uses-semantic-search\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Who Uses Semantic Search?\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Semantic search is everywhere. It\'s so valuable because it has a big impact on user experience:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Users are able to search and access digital content in a more human way.\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Search engines are able to provide more relevant and helpful content to the users and make \\",(0,n.jsx)(e.a,{href:\\"https://searchengineland.com/semantic-search-entity-based-search-388221\\",children:\\"SEO strategy\\"}),\\" around keywords irrelevant.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Search can be \\",(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/blog/topics/developers-practitioners/find-anything-blazingly-fast-googles-vector-search-technology\\",children:\\"blazingly fast\\"}),\\" for big data.\\"]}),`\\n`,(0,n.jsx)(e.li,{children:\\"Search isn\'t limited to text anymore. We can create embeddings from different types of digital content, like images and videos.\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Some examples of the major companies that integrated semantic search:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"Google: \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Google_Hummingbird\\",children:\\"Hummingbird\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Amazon: \\",(0,n.jsx)(e.a,{href:\\"https://www.amazon.science/publications/semantic-product-search\\",children:\\"Semantic product search\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Spotify: \\",(0,n.jsx)(e.a,{href:\\"https://engineering.atspotify.com/2022/03/introducing-natural-language-search-for-podcast-episodes/\\",children:\\"Natural Language Search\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Meta: \\",(0,n.jsx)(e.a,{href:\\"https://engineering.fb.com/2017/03/29/data-infrastructure/faiss-a-library-for-efficient-similarity-search/\\",children:\\"Facebook AI Similarity Search\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"Redis: \\",(0,n.jsx)(e.a,{href:\\"https://redis.com/blog/build-intelligent-apps-redis-vector-similarity-search/\\",children:\\"Redis Vector Similarity Search\\"})]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"introducing-voy\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#introducing-voy\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Introducing Voy\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/tantaraio/voy\\",children:\\"Voy\\"}),\\" is an open source semantic search engine in \\",(0,n.jsx)(e.a,{href:\\"https://webassembly.org\\",children:\\"WebAssembly\\"}),\\" (WASM). I created it to empower more projects to build semantic features and create better user experience for people around the world. Voy follows several design principles:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F90F}\\"}),\\" \\",(0,n.jsx)(e.strong,{children:\\"Tiny\\"}),\\": Reduce overhead for limited devices, such as mobile browsers with slow network or IoT.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u26A1\\"}),\\"\\\\uFE0F \\",(0,n.jsx)(e.strong,{children:\\"Fast\\"}),\\": Create the best search experience for the users.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"deciduous tree\\",children:\\"\\\\u{1F333}\\"}),\\" \\",(0,n.jsx)(e.strong,{children:\\"Tree Shackable\\"}),\\": Optimize bundle size and enable asynchronous capabilities for modern Web API, such as \\",(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\\",children:\\"Web Workers\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"battery\\",children:\\"\\\\u{1F50B}\\"}),\\" \\",(0,n.jsx)(e.strong,{children:\\"Resumable\\"}),\\": Generate portable embeddings index anywhere, anytime.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cloud\\",children:\\"\\\\u2601\\\\uFE0F\\"}),\\" \\",(0,n.jsx)(e.strong,{children:\\"Edgy\\"}),\\": Run semantic search on CDN edge servers.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"It\'s available on npm. You can simply install it with your favorite package manager and start using it.\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# with npm\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"npm\\"}),` i voy-search\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# with Yarn\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` voy-search\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# with pnpm\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"pnpm\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` voy-search\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"To demonstrate what it looks like:\\"}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/articles/wasm-semantic-search/voy.gif\\",alt:\\"PNG and WebP comparison\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can find the \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tantaraio/voy\\",children:\\"Voy\'s repository on GitHub\\"}),\\"! Feel free to try it out.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The repository includes an \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tantaraio/voy/tree/main/example\\",children:\\"example\\"}),\\" where you can see how to load the WASM module with \\",(0,n.jsx)(e.a,{href:\\"https://webpack.js.org\\",children:\\"Webpack 5\\"}),\\".\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s break it down a bit to see what it did. First, the demo was loading the WASM module asynchronously. After loading, it started indexing the following phrases:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\'\\"This is a very happy Person\\"\'}),`\\n`,(0,n.jsx)(e.li,{children:\'\\"That is a Happy Dog\\"\'}),`\\n`,(0,n.jsx)(e.li,{children:\'\\"Today is a sunny day\\"\'}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\'Indexing is where we transforms the phrases into embeddings and organize them in a embedding space. Once the index was ready, the demo performed a similarity search with the phrase \\"That is a happy Person\\". Finally we saw the search result returns \\"This is a very happy Person\\" as the top result.\'}),`\\n`,(0,n.jsx)(e.p,{children:\'We can reason about the credibility of the result because \\"This is a happy Person\\" does have the highest semantic similarity to \\"This is a very happy Person\\".\'}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"how-does-voy-work\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#how-does-voy-work\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"How does Voy Work?\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Voy takes care of two things:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Indexing resources.\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Retrieving nearest neighbors from the index.\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"index-resources\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#index-resources\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Index Resources\\"]}),`\\n`,(0,n.jsxs)(e.blockquote,{children:[`\\n`,(0,n.jsx)(e.p,{children:`To demonstrate, we\'ll use \\"text\\" as our resource.`}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The embeddings are organized and stored in a \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/K-d_tree\\",children:\\"k-d tree\\"}),\\" under the hood. k-d tree is a data structure for organizing data in a k-dimensional space. It is very useful for our vector embeddings index because the embeddings are fixed floating arrays.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"As of now, packaging an embeddings transformers into WASM is still under development. So Voy relies on other libraries like \\",(0,n.jsx)(e.a,{href:\\"https://github.com/visheratin/web-ai\\",children:\\"Web AI\\"}),\\" to generate embeddings.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// Dynamically import Voy\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" voy \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'voy\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" phrases \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'That is a very happy Person\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'That is a Happy Dog\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Today is a sunny day\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// Use web-ai to create text embeddings\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" model \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" TextModel\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"create\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'gtr-t5-quant\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),`model\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" processed \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"Promise\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"all\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"phrases\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"q\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" model\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"process\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"q\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// Index embeddings with Voy\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" data \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" processed\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"map\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" result \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" i\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  id\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"String\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"i\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  title\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" phrases\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"i\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  url\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"/path/\\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"i\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// link to your resource for the search result\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  embeddings\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" result\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" index \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" voy\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"index\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" embeddings\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" data \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// index is a serialized k-d tree\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"As you can see, after executing \\",(0,n.jsx)(e.strong,{children:\\"voy.index()\\"}),\\", it returns a serialized index. It allows Voy to deserialize the index when executing searches without being in the same environment. For example, the index can be created in build time and ship the serialized index to the client to perform searches. It is referred as the \\",(0,n.jsx)(e.strong,{children:\\"resumability\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"retrieve-nearest-neighbors\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#retrieve-nearest-neighbors\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Retrieve Nearest Neighbors\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// Create query embeddings\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" query \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"await\\"}),\\" model\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"process\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'That is a happy Person\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// Search with Voy and return the 1 result\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" nearests \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" voy\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"search\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"index\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" query\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"result\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"1\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// Display vector similarity search result\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"nearests\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"forEach\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"result\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=>\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"log\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsxs)(e.span,{className:\\"token string\\",children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F578}\\\\uFE0F\\"}),\\" voy similarity search result \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\' \\"\']}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"result\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"title\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"\'}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// That is a very happy Person\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Internally, Voy uses Squared \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Euclidean_distance\\",children:\\"Euclidean distance\\"}),\\" to calculate the nearest neighbors. There\'re a few ways to calculate the distance between points. Here the points are the nodes of the embeddings object in the k-d tree. The common formulas are:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Euclidean_distance\\",children:\\"Euclidean distance\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Taxicab_geometry\\",children:\\"Manhattan distance\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Cosine_similarity\\",children:\\"Cosine similarity\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/wasm-semantic-search/distance-matrics.webp\\",alt:\\"Common distance metrics: Euclidean distance, Manhattan distance, and Cosine similarity\\",width:\\"100%\\",className:\\"rounded centered\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"final-thoughts\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#final-thoughts\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Final Thoughts\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Voy is created to make semantic accessible for developers to build, ship, and create user value. It still has a few more steps to be a self-sufficient semantic search engine. If you\'re interested, you can follow Voy\'s \\",(0,n.jsx)(e.a,{href:\\"https://github.com/orgs/tantaraio/projects/2/views/1\\",children:\\"public roadmap\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you believe in Voy\'s mission and would like to support the project, please check out the \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tantaraio/voy\\",children:\\"sponsor section\\"}),\\" on the GitHub repository.\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"If you are interested in some of the open source embeddings transformers, here are some of the projects I experimented with:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/spotify/annoy\\",children:\\"spotify/annoy\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/facebookresearch/faiss\\",children:\\"facebookresearch/faiss\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/google-research/bert\\",children:\\"google-research/bert\\"})}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/UKPLab/sentence-transformers\\",children:\\"UKPLab/sentence-transformers\\"}),\\" with the \\",(0,n.jsx)(e.a,{href:\\"https://huggingface.co/sentence-transformers/all-MiniLM-L12-v2\\",children:\\"all-MiniLM-L12-v2\\"}),\\" model\\"]}),`\\n`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"references\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#references\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"References\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://ai.googleblog.com/2020/07/announcing-scann-efficient-vector.html\\",children:\\"Announcing ScaNN: Efficient Vector Similarity Search\\"}),\\" - Google Research\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://redis.com/blog/build-intelligent-apps-redis-vector-similarity-search/\\",children:\\"Build Intelligent Apps with New Redis Vector Similarity Search\\"}),\\" - Redis\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Cosine_similarity\\",children:\\"Cosine similarity\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Euclidean_distance\\",children:\\"Euclidean distance\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/facebookresearch/faiss\\",children:\\"facebookresearch/faiss\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://engineering.fb.com/2017/03/29/data-infrastructure/faiss-a-library-for-efficient-similarity-search/\\",children:\\"Faiss: A library for efficient similarity search\\"}),\\" - Engineering at Meta\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://cloud.google.com/blog/topics/developers-practitioners/find-anything-blazingly-fast-googles-vector-search-technology\\",children:\\"Find anything blazingly fast with Google\'s vector search technology\\"}),\\" - Google Cloud\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Google_Hummingbird\\",children:\\"Google Hummingbird\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/google-research/bert\\",children:\\"google-research/bert\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"/articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters\\",children:\\"I Built A Snappy Static Full-text Search with WebAssembly, Rust, Next.js, and Xor Filters\\"}),\\" - Daw-Chih Liou\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://engineering.atspotify.com/2022/03/introducing-natural-language-search-for-podcast-episodes/\\",children:\\"Introducing Natural Language Search for Podcast Episodes\\"}),\\" - Spotify\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/K-d_tree\\",children:\\"k-d tree\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Taxicab_geometry\\",children:\\"Manhattan distance\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Nearest_neighbor_search\\",children:\\"Nearest neighbor search\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Neural_network\\",children:\\"Neural network\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://www.amazon.science/publications/semantic-product-search\\",children:\\"Semantic product search\\"}),\\" - Amazon Science\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Semantic_search\\",children:\\"Semantic search\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://huggingface.co/sentence-transformers/all-MiniLM-L12-v2\\",children:\\"sentence-transformers/all-MiniLM-L12-v2\\"}),\\" - Hugging Face\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Similarity_search\\",children:\\"Similarity search\\"}),\\" - Wikipedia\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/spotify/annoy\\",children:\\"spotify/annoy\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/tantaraio/voy\\",children:\\"tantaraio/voy\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/UKPLab/sentence-transformers\\",children:\\"UKPLab/sentence-transformers\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/visheratin/web-ai\\",children:\\"visheratin/web-ai\\"}),\\" - GitHub\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"/articles/i-built-a-snappy-full-text-search-with-webassembly-rust-nextjs-and-xor-filters\\",children:\\"Voy Roadmap\\"}),\\" - GitHub Projects\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://searchengineland.com/semantic-search-entity-based-search-388221\\",children:\\"What is semantic search: A deep dive into entity-based search\\"}),\\" - Search Engine Land\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://webassembly.org\\",children:\\"WebAssembly\\"}),\\" - W3C Community Group\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\\",children:\\"Web Workers API\\"}),\\" - mdn web docs\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\\"https://webpack.js.org\\",children:\\"Webpack\\"}),\\" - OpenJS Foundation\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"speech balloon\\",children:\\"\\\\u{1F4AC}\\"}),\\" Comments on \\",(0,n.jsx)(e.a,{href:\\"https://www.reddit.com/r/javascript/comments/11nuwwp/wasm_semantic_search_in_rust/?utm_source=share&utm_medium=web2x&context=3\\",children:\\"Reddit\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"}),`\\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"bird\\",children:\\"\\\\u{1F426}\\"}),\\" Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u23ED\\\\uFE0F\\"}),\\" Ready for the next article? \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"backhand index pointing right\\",children:\\"\\\\u{1F449}\\"}),\\" \\",(0,n.jsx)(e.a,{href:\\"/articles/lean-docker-images-for-nextjs\\",children:(0,n.jsx)(e.strong,{children:\\"Lean Docker Images for Next.JS\\"})})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function w(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(h,a)})):h(a)}var v=w;return b(x);})();\\n;return Component;"},"_id":"articles/wasm-semantic-search-in-rust.mdx","_raw":{"sourceFilePath":"articles/wasm-semantic-search-in-rust.mdx","sourceFileName":"wasm-semantic-search-in-rust.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/wasm-semantic-search-in-rust"},"type":"Article","readingTime":{"text":"8 min read","minutes":7.5,"time":450000,"words":1500},"wordCount":1502,"slug":"wasm-semantic-search-in-rust"},{"title":"Writing Your Own TypeScript CLI","publishedAt":"December 6, 2021","description":"Writing CLIs feels like a super power\uD83D\uDCAF You can write one too! I\'ll show you how to develop a CLI with TypeScript step by step and demonstrate how you can apply your CLI in CD/CI pipelines. We\'re going to uncover the power of Google Lighthouse and many more amazing npm packages!","cover":"/optimized/articles/writing-your-own-typescript-cli/hero.webp","category":"TypeScript","coverWidth":"1411","coverHeight":"682","body":{"raw":"\\n## TL;DR\\n\\n- \uD83C\uDF73 You can write a CLI with ease. It\'s simpler than you might think:)\\n- \uD83D\uDDFC We\'ll write a CLI together to generate a Lighthouse performance report.\\n- \uD83D\uDD26 You\'ll see how to configure TypeScript, ESLint, and Prettier.\\n- \uD83D\uDCDA You\'ll see how to use some awesome libraries like [`chalk`](https://github.com/chalk/chalk) and [`commander`](https://github.com/tj/commander.js).\\n- \uD83E\uDDD1‍\uD83D\uDD2C You\'ll see how to spawn multiple processes.\\n- \uD83D\uDE80 You\'ll see how to use your CLI in GitHub Actions.\\n\\n---\\n\\nWriting CLIs feels like a super power, and you can write one too\uD83D\uDCAF\\n\\nI\'ll show you how to develop a CLI with TypeScript step by step and demonstrate how you can apply your CLI in CD/CI pipelines.\\n\\nThis article covers three major topics:\\n\\n- [Setting up A TypeScript Project with ESLint and Prettier](#configuring-tooling)\\n- [Writing a CLI to Run Lighthouse in Multiple Process](#writing-a-cli-to-run-lighthouse)\\n- [Using the CLI in Action with GitHub Actions](#using-the-cli-in-github-actions)\\n\\nFeel free to jump to the parts that you\'re interested in.\\n\\n## Real-world Use Case\\n\\n[Lighthouse](https://developers.google.com/web/tools/lighthouse/) is one of the most popular dev tools to gain insight to webpage performances.\\nIt offers a CLI and node module so we can run it programmatically.\\nHowever, you\'ll notice the Lighthouse scores vary if you run it multiple times on the same webpage.\\nThat\'s because there\'s a known [variability](https://developers.google.com/web/tools/lighthouse/variability).\\nThere\'re many factors that plays into the Lighthouse variability.\\nOne of the recommended strategies to deal with variance is to run Lighthouse multiple times.\\n\\nWe\'ll be working on a CLI to implement this strategy in this article. The implementation will cover:\\n\\n- Running multiple Lighthouse analyses\\n- Aggregating data and calculating the median scores\\n\\nI hope you\'re excited!\\n\\n---\\n\\nThis article will discuss one of the scripts in \uD83C\uDF08\uD83C\uDF08\uD83C\uDF08 **[`dx-scripts`](https://github.com/DawChihLiou/dx-scripts)**\uD83C\uDF08\uD83C\uDF08\uD83C\uDF08\\n\\nIt\'s available on [npm](https://www.npmjs.com/package/dx-scripts).\\nI recently wrote the first script in the library and there are more to come!\\nFeel free to install it and try it in your development workflow. Please give it a ⭐️ on [GitHub](https://github.com/DawChihLiou/dx-scripts) if the scripts are useful:)\\n\\n---\\n\\n## Peaking The Project\'s File Structure\\n\\nThis is how the file structure will look like after configuring the tooling.\\n\\n```bash\\nmy-script\\n├── .eslintrc.js\\n├── .prettierrc.json\\n├── package.json\\n├── tsconfig.json\\n├── bin\\n└── src\\n    ├── utils.ts\\n    └── index.ts\\n```\\n\\nThe source files are located in the `/src` directory.\\nWe\'ll compile them and output `.js` files in `/bin` directory.\\n\\nThe `/bin` directory will be the entry point of the command when your users are using the CLI.\\nYou\'ll learn how to configure it in a bit.\\n\\n## Configuring Tooling\\n\\nWe\'ll be using [Yarn](https://yarnpkg.com/) as our package manager for this project.\\nFeel free to use [npm](https://www.npmjs.com/) if you prefer.\\n\\nLet\'s initiate the project. We\'ll create a directory called `my-script`:\\n\\n```bash\\n$ mkdir my-script && cd my-script\\n```\\n\\nAt the project root, let\'s create a `package.json` with Yarn:\\n\\n```bash\\n$ yarn init\\n```\\n\\n### Configuring TypeScript\\n\\nTo install [TypeScript](https://www.typescriptlang.org/) and the types for [NodeJS](https://nodejs.org/en/), run:\\n\\n```bash\\n$ yarn add --dev typescript @types/node\\n```\\n\\nNow we are ready to configure TypeScript in the project.\\nWe can initiate a `tsconfig.json` with `tsc`:\\n\\n```bash\\n$ npx tsc --init\\n```\\n\\nIn order to compile the TypeScript code and output the result to the `/bin` directory, we need to specify it in the `compilerOptions` in `tsconfig.json`.\\n\\n```diff\\n// tsconfig.json\\n\\n{\\n  \\"compilerOptions\\": {\\n+    \\"outDir\\": \\"./bin\\"\\n    /* rest of the default options */\\n  }\\n}\\n```\\n\\nThat\'s it! Let\'s test it.\\n\\nAt the project root, run the following command to create an `index.ts` file in `/src`.\\n\\n```bash\\n$ mkdir src && touch src/index.ts\\n```\\n\\nIn `index.ts`, we\'ll put a simple `console.log` and run the TypeScript compiler to see if the compiled files are in the `/bin` directory.\\n\\n```ts\\n// src/index.ts\\n\\nconsole.log(\'Hello from my-script\uD83D\uDC4B\')\\n```\\n\\nAdd a script to compile TypeScript with `tsc`.\\n\\n```diff\\n// package.json\\n\\n+ \\"scripts\\": {\\n+   \\"tsc\\": \\"tsc\\"\\n+ }\\n\\n```\\n\\nThen run:\\n\\n```bash\\n# compile `/src`\\n$ yarn tsc\\n```\\n\\nYou should see an `index.js` file in the `/bin` directory.\\n\\nLet\'s execute the `/bin` directory from the project root,\\n\\n```bash\\n$ node bin\\n\\n# Hello from my-script \uD83D\uDC4B\\n```\\n\\n### Configuring ESLint\\n\\nNow we ready for [ESLint](https://eslint.org/). We can go ahead and install it:\\n\\n```bash\\n$ yarn add --dev eslint\\n```\\n\\nESLint is a very powerful linter.\\nIt doesn\'t come with TypeScript support so we\'ll install a [TypeScript parser](https://github.com/typescript-eslint/typescript-eslint/tree/6e159ee7cf8ef2028792cb8ee636cf6143fa967f/packages/parser):\\n\\n```bash\\n$ yarn add --dev @typescript-eslint/parser @typescript-eslint/eslint-plugin\\n```\\n\\nWe also installed the [`@typescript-eslint/eslint-plugin`](https://github.com/typescript-eslint/typescript-eslint/tree/6e159ee7cf8ef2028792cb8ee636cf6143fa967f/packages/eslint-plugin).\\nThis is because we\'ll need it to extend the ESLint rules for TypeScript-specific features.\\n\\nLet\'s configure eslint in the project. We\'ll create a `.eslintrc.js` at the project root:\\n\\n```bash\\ntouch .eslintrc.js\\n```\\n\\nInside `.eslintrc.js`, we can configure eslint as following:\\n\\n```js\\n// .eslintrc.js\\n\\nmodule.exports = {\\n  parser: \'@typescript-eslint/parser\',\\n  plugins: [\'@typescript-eslint\'],\\n  extends: [\'plugin:@typescript-eslint/recommended\'],\\n}\\n```\\n\\nTo understand the configuration a little more, we first used `@typescript-eslint/parser` to enable ESLint\'s ability to understand TypeScript syntax.\\nThen we applied `@typescript-eslint/eslint-plugin` plugin to extend the rules.\\nFinally we enabled all the recommended rules form `@typescript-eslint/eslint-plugin`.\\n\\nIf you\'re interested in learning more about the configuration, you can checkout the [official doc](https://github.com/typescript-eslint/typescript-eslint/tree/main/packages/eslint-plugin#usage) for more details.\\n\\nWe can now add a linting script to `package.json`:\\n\\n```diff\\n// package.json\\n\\n{\\n  \\"scripts\\": {\\n+    \\"lint\\": \\"eslint \'**/*.{js,ts}\' --fix\\",\\n  }\\n}\\n```\\n\\nTo run the script:\\n\\n```bash\\n$ yarn lint\\n```\\n\\n### Configuring Prettier\\n\\n[Prettier](https://prettier.io/) is a very powerful formatter.\\nIt comes with a set of rules to format our code.\\nSometimes the rules can conflict with ESLint rules so I\'ll show you how to configure them.\\n\\nFirst install Prettier and create a `.prettierrc.json` file at the project root to hold the configuration,\\n\\n```bash\\n$ yarn add --dev --exact prettier && touch .prettierrc.json\\n```\\n\\nYou can edit `.prettierrc.json` and add your custom rules.\\nYou can find [the options in the official doc](https://prettier.io/docs/en/options.html).\\n\\nHere\'s an example:\\n\\n```json\\n// .prettierrc.json\\n{\\n  \\"trailingComma\\": \\"all\\",\\n  \\"singleQuote\\": true\\n}\\n```\\n\\nPrettier provides handy integration with ESLint.\\nWe\'ll follow the [recommended configuration](https://github.com/prettier/eslint-plugin-prettier#recommended-configuration) from the official doc.\\n\\n```bash\\n$ yarn add --dev eslint-config-prettier eslint-plugin-prettier\\n```\\n\\nWe\'ll add the plugin at the last position in the `extensions` array.\\n\\n```diff\\n// .eslintrc.js\\n\\nmodule.exports = {\\n  extends: [\\n    \'plugin:@typescript-eslint/recommended\',\\n+    \'plugin:prettier/recommended\',\\n  ],\\n}\\n```\\n\\nIt\'s very important that Prettier is the last extension.\\nBy applying last, it disables all formatting-related ESLint rules so the conflicts will fall back to Prettier.\\n\\nWe can now add a `prettier` script to `package.json`:\\n\\n```diff\\n// package.json\\n\\n{\\n  \\"scripts\\": {\\n+    \\"prettier\\": \\"prettier --write .\\"\\n  }\\n}\\n```\\n\\nTo run the script:\\n\\n```bash\\n$ yarn prettier\\n```\\n\\n### Configuring `package.json`\\n\\nWe are almost ready with our configuration.\\nThe only thing missing is a way to execute the project the way you would execute a command.\\nInstead of executing the `/bin` with `node`, we want to be able to call the command directly:\\n\\n```bash\\n# instead of \\"node bin\\", we want to call the command by its name like this:\\n$ my-script\\n```\\n\\nHow do we do that? First we need to add a [Shebang](<https://en.wikipedia.org/wiki/Shebang_(Unix)>) on the top of our `src/index.ts`.\\n\\n```diff\\n+ #!/usr/bin/env node\\n\\nconsole.log(\'Hello from my-script\uD83D\uDC4B\')\\n```\\n\\nThe Shebang is to inform Unix-like operating systems that this is NodeJS executable.\\nSo we can call the script directly without specifying `node`.\\n\\nLet\'s compile again,\\n\\n```bash\\n$ yarn tsc\\n```\\n\\nThere\'s another thing we need before it all works. We need to assign the executable right to the `bin/index.js`:\\n\\n```bash\\n$ chmod u+x ./bin/index.js\\n```\\n\\nLet\'s give it a go:\\n\\n```bash\\n# execute directly\\n$ ./bin/index.js\\n\\n# Hello from my-script\uD83D\uDC4B\\n```\\n\\nNice, we are almost there.\\nThe last thing is to create a symlink between the command and the executable.\\nFirst, we need to specify the `bin` property in `package.json` and point the command to the `bin/index.js`.\\n\\n```diff\\n// package.json\\n\\n{\\n+  \\"bin\\": {\\n+    \\"my-script\\": \\"./bin/index.js\\"\\n+  }\\n}\\n```\\n\\nSecond, create a symlink with Yarn at the project root:\\n\\n```bash\\n$ yarn link\\n\\n# You can always unlink: \\"yarn unlink my-script\\"\\n```\\n\\nLet\'s see if it works\uD83E\uDD29\\n\\n```bash\\n$ my-script\\n\\n# Hello from my-script\uD83D\uDC4B\\n```\\n\\nIt works\uD83C\uDF89\uD83C\uDF89\uD83C\uDF89\\n\\nJust to make the development easier, we\'ll add a couple of scripts in `package.json`:\\n\\n```diff\\n// package.json\\n\\n{\\n  \\"scripts\\": {\\n+    \\"build\\": \\"yarn tsc && yarn chmod\\",\\n+    \\"chmod\\": \\"chmod u+x ./bin/index.js\\",\\n  }\\n}\\n```\\n\\nNow we can run `yarn build` to compile and automatically assign the executable right to the entry file.\\n\\n## Writing a CLI to Run Lighthouse\\n\\nIt\'s time to implement our core logic.\\nWe\'ll explore a few handy npm packages to help us write the CLI and we\'ll dive into the magic of Lighthouse.\\n\\n### Coloring `console.log` with `chalk`\\n\\n```bash\\n$ yarn add chalk@4.1.2\\n```\\n\\nMake sure you are installing `chalk 4`. [`chalk 5` is pure ESM](https://github.com/chalk/chalk/releases/tag/v5.0.0) and we won\'t be able to use it with TypeScript [until TypeScript 4.6 is released](https://github.com/microsoft/TypeScript/issues/46452).\\n\\n[`chalk`](https://github.com/chalk/chalk) gives colors to your `console.log`. For example:\\n\\n```ts\\n// src/index.ts\\n\\nimport chalk from \'chalk\'\\n\\nconsole.log(chalk.green(\'Hello from my-script\uD83D\uDC4B\'))\\n```\\n\\nNow run `yarn build && my-script` at your project root and see the log.\\n\\nLet\'s use `chalk` in a more meaningful way.\\n[Lighthouse performane scores are color coded](https://web.dev/performance-scoring/#color-coding).\\nWe can write a utility function that shows the display value with a color based on the performance score.\\n\\n```ts\\n// src/utils.ts\\n\\nimport chalk from \'chalk\'\\n\\n/**\\n * Coloring display value based on Lighthouse score.\\n *\\n * - 0 to 0.49 (red): Poor\\n * - 0.5 to 0.89 (orange): Needs Improvement\\n * - 0.9 to 1 (green): Good\\n */\\nexport function draw(score: number, value: number) {\\n  if (score >= 0.9 && score <= 1) {\\n    return chalk.green(`${value} (Good)`)\\n  }\\n\\n  if (score >= 0.5 && score < 0.9) {\\n    return chalk.yellow(`${value} (Needs Improvement)`)\\n  }\\n\\n  return chalk.red(`${value} (Poor)`)\\n}\\n```\\n\\nUse it in `src/index.ts` and try log something with `draw()` to see the result.\\n\\n```ts\\n// src/index.ts\\n\\nimport { draw } from \'./utils\'\\n\\nconsole.log(`Perf score is ${draw(0.64, 64)}`)\\n```\\n\\n### Designing A Command with `commander`\\n\\nTo make our CLI interactive, we need to be able to read user inputs and parse them.\\n[`commander`](https://github.com/tj/commander.js) is a descriptive way of defining a interface.\\nWe can implement our interface in a very clean and documentary fashion.\\n\\nHow do we want the users to interact with the CLI is to simply pass a URL for Lighthouse to run.\\nWe also want to pass in an option to specify how many times Lighthouse should run on the URL.\\nLike this:\\n\\n```bash\\n# without an option\\n$ my-script https://dawchihliou.github.io/\\n\\n# with an option\\n$ my-script https://dawchihliou.github.io/ --iteration=3\\n```\\n\\nLet\'s see how quickly we can implement our design with `commander`.\\n\\n```bash\\n$ yarn add commander\\n```\\n\\nLet\'s clear the `src/index.ts` and start fresh:\\n\\n`src/index.ts`\\n\\n```ts\\n#!/usr/bin/env node\\n\\nimport { Command } from \'commander\'\\n\\nasync function run() {\\n  const program = new Command()\\n\\n  program\\n    .argument(\'<url>\', \'Lighthouse will run the analysis on the URL.\')\\n    .option(\\n      \'-i, --iteration <type>\',\\n      \'How many times Lighthouse should run the analysis per URL\',\\n      \'5\'\\n    )\\n    .parse()\\n\\n  const [url] = program.args\\n  const options = program.opts()\\n\\n  console.log(`url: ${url}, iteration: ${options.iteration}`)\\n}\\n\\nrun()\\n```\\n\\nWe first instantiated a `Command` and we used the instance `program` to define:\\n\\n- an [`required argument`](https://github.com/tj/commander.js#command-arguments): we gave it a name `url` and a description\\n- an [`option`](https://github.com/tj/commander.js#options): we gave it a short flag and a long flag, a description, and a default value\\n\\nTo consume the argument and option, we first parse the command and log the variables.\\n\\nNow we can run the command and observe the log.\\n\\n```bash\\n$ yarn build\\n\\n# without an option\\n$ my-script https://dawchihliou.github.io/\\n\\n# url: https://dawchihliou.github.io/, iteration: 5\\n\\n# with an option\\n$ my-script https://dawchihliou.github.io/ --iteration=3\\n# or\\n$ my-script https://dawchihliou.github.io/ -i 3\\n\\n# url: https://dawchihliou.github.io/, iteration: 3\\n```\\n\\nVery cool right?!\\nAnother cool feature is that `commander` automatically generates a [`help`](https://github.com/tj/commander.js#automated-help) to print the help information.\\n\\n```bash\\n$ my-script --help\\n```\\n\\n### Running Multiple Lighthouse Analyses in Separate OS Processes\\n\\nWe learned how to parse user inputs in the previous section. It\'s time to dive into the core of the CLI.\\n\\nThe recommendation for running multiple Lighthouse is to run them in [separate processes](https://github.com/GoogleChrome/lighthouse/issues/7187) to remove the risk of interference.\\n[`cross-spawn`](https://github.com/moxystudio/node-cross-spawn) is a cross platform solution for spawning processes.\\nWe will use it to synchronously spawn new processes to run Lighthouse.\\n\\nTo install `cross-spawn`:\\n\\n```bash\\n$ yarn add cross-spawn\\n$ yarn add --dev @types/cross-spawn\\n\\n# Let\'s install lighthouse too✨\\nyarn add lighthouse\\n```\\n\\nLet\'s edit `src/index.ts`:\\n\\n```diff\\nimport { Command } from \'commander\'\\n+ import spawn from \'cross-spawn\'\\n\\n+ const lighthouse = require.resolve(\'lighthouse/lighthouse-cli\')\\n\\nasync function run() {\\n  // ...\\n-  console.log(`url: ${url}, iteration: ${options.iteration}`)\\n+  console.log(\\n+    `\uD83D\uDDFC Running Lighthouse for ${url}. It will take a while, please wait...`\\n+  )\\n+  const results = []\\n+\\n+  for (let i = 0; i < options.iteration; i++) {\\n+    const { status, stdout } = spawn.sync(\\n+      process.execPath, [\\n+      lighthouse,\\n+      url,\\n+      \'--output=json\',\\n+      \'--chromeFlags=--headless\',\\n+      \'--only-categories=performance\',\\n+    ])\\n+\\n+    if (status !== 0) {\\n+      continue\\n+    }\\n+\\n+    results.push(JSON.parse(stdout.toString()))\\n+  }\\n}\\n```\\n\\nIn the code, we spawn new processes multiple times based on user input.\\nIn each process, we ran Lighthouse performance analysis with headless Chrome and collect the the JSON data.\\nThe `result` variable will hold an array of independent performance data in string.\\nThe next step is to aggregate the data and calculate the most reliable performance scores.\\n\\nIf you implement the code above, you\'ll see a linting error about `require`.\\n`require.resolve` resolves the path to a module instead of the module itself.\\nIn this article, we\'ll allow the `@typescript-eslint/no-var-requires` rule in `.eslintrc.js` to compile.\\n\\n```diff\\n// .eslintrc.js\\n\\nmodule.exports = {\\n+  rules: {\\n+    // allow require\\n+    \'@typescript-eslint/no-var-requires\': 0,\\n+  },\\n}\\n```\\n\\n### Calculating Reliable Lighthouse Scores\\n\\nOne strategy is to aggregate the reports by calculating the median.\\nLighthouse provide a internal functionality [`computeMedianRun`](https://github.com/GoogleChrome/lighthouse/blob/master/lighthouse-core/lib/median-run.js).\\nLet\'s use it\\n\\n```diff\\n// src/index.ts\\n\\n+ // For simplicity, we use require here because lighthouse doesn\'t provide type declaration.\\n+ const {\\n+   computeMedianRun,\\n+ } = require(\'lighthouse/lighthouse-core/lib/median-run.js\')\\n\\nasync function run() {\\n  // ...\\n+   const median = computeMedianRun(results)\\n\\n+   console.log(`\\\\n${chalk.green(\'✔\')} Report is ready for ${median.finalUrl}`)\\n+   console.log(\\n+     `\uD83D\uDDFC Median performance score: ${draw(\\n+       median.categories.performance.score,\\n+       median.categories.performance.score * 100\\n+     )}`\\n+   )\\n\\n+   const primaryMatrices = [\\n+     \'first-contentful-paint\',\\n+     \'interactive\',\\n+     \'speed-index\',\\n+     \'total-blocking-time\',\\n+     \'largest-contentful-paint\',\\n+     \'cumulative-layout-shift\',\\n+   ]\\n+\\n+   primaryMatrices.map((matrix) => {\\n+     const { title, displayValue, score } = median.audits[matrix]\\n+     console.log(`\uD83D\uDDFC Median ${title}: ${draw(score, displayValue)}`)\\n+   })\\n}\\n```\\n\\nUnder the hood, `computeMedianRun` returns the score that\'s closest to the median of the First Contentful Paint and the median of the Time to Interactive.\\nIt\'s because they represent the earliest and the latest moments in the page initialization lifecycle.\\nIt\'s a more reliable way to determine the median than the naive approach by finding the median from a single measurement.\\n\\nNow try the command again and see the result!\\n\\n```bash\\n$ yarn build && my-script https://dawchihliou.github.io --iteration=3\\n```\\n\\n<img\\n  src=\\"/optimized/articles/writing-your-own-typescript-cli/command-line.webp\\"\\n  alt=\\"Screenshot of my-script final output\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nWalla\uD83C\uDF89\\n\\n## Using the CLI in GitHub Actions\\n\\nOur implementation is done.\\nLet\'s use the CLI in an automated workflow so we can benchmark the performance in a CD/CI pipeline.\\n\\nFirst, let\'s publish the package on npm (hypothetically).\\n\\nI published a npm package **[`dx-scripts`](https://github.com/DawChihLiou/dx-scripts/)** that includes the production-ready version of `my-script`.\\nWe will write the GitHub Actions workflow with `dx-scripts` to illustrate.\\n\\n### Publishing on npm (an example)\\n\\nWe\'ll add a `files` property in `package.json` to publish the `/bin` directory.\\n\\n```diff\\n// package.json\\n\\n{\\n+  \\"files\\": [\\"bin\\"],\\n}\\n```\\n\\nThen simply run:\\n\\n```bash\\n$ yarn publish\\n```\\n\\nNow the package is on npm (hypothetically)!\\n\\n### Writing A Workflow\\n\\nLet\'s discuss the workflow. We want the workflow to:\\n\\n- run on a pull request when there\'s an update\\n- run the Lighthouse performance analysis against a feature branch preview URL\\n- notify the pull request with the analysis report\\n\\nSo after the workflow is successfully completed, you\'ll see a comment from GitHub Action Bot with your Lighthouse scores.\\n\\nTo focus on the application of our CLI, I\'ll hard-code the feature branch preview URL in the workflow.\\n\\nIn your application repository, install `dx-scripts`:\\n\\n```bash\\n$ yarn add --dev dx-scripts\\n```\\n\\nAdd a `lighthouse-dev-ci.yaml` to your GitHub workflows directory:\\n\\n````yaml\\n# .github/workflows/lighthouse-dev-ci.yaml\\n\\nname: Lighthouse CI\\n\\non: pull_request\\n\\njobs:\\n  lighthouse:\\n    runs-on: ubuntu-latest\\n    env:\\n      # You can substitute the hardcoded preview url with your preview url\\n      preview_url: https://dawchihliou.github.io/\\n    steps:\\n      - uses: actions/checkout@v2\\n\\n      - uses: actions/setup-node@v1\\n        with:\\n          node-version: \'16.x\'\\n\\n      - name: Install dependencies\\n        run: yarn\\n\\n      # You can add your steps here to create a preview\\n\\n      - name: Run Lighthouse\\n        id: lighthouse\\n        shell: bash\\n        run: |\\n          lighthouse=$(npx dx-scripts lighthouse $preview_url)\\n          lighthouse=\\"${lighthouse//\'%\'/\'%25\'}\\"\\n          lighthouse=\\"${lighthouse//$\'\\\\n\'/\'%0A\'}\\"\\n          lighthouse=\\"${lighthouse//$\'\\\\r\'/\'%0D\'}\\"\\n          echo \\"::set-output name=lighthouse_report::$lighthouse\\"\\n\\n      - name: Notify PR\\n        uses: wow-actions/auto-comment@v1\\n        with:\\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n          pullRequestSynchronize: |\\n            \uD83D\uDC4B @{{ author }},\\n\\n            Here is your Lighthouse performance overview\uD83C\uDF89\\n\\n            ```\\n            ${{ steps.lighthouse.outputs.lighthouse_report }}\\n            ```\\n````\\n\\nIn the \\"Run Lighthouse\\" step, we ran the `dx-script lighthouse` CLI, substitute the special characters in order to print multi-line output, and we set the output in a variable `lighthouse_report`.\\nIn the \\"Notify PR\\" step, we wrote a comment with the output from the \\"Run Lighthouse\\" step and use the [`wow-actions/auto-comment` ](https://github.com/marketplace/actions/auto-comment) action to post the comment.\\n\\n<img\\n  src=\\"/optimized/articles/writing-your-own-typescript-cli/pr-comment.webp\\"\\n  alt=\\"Screenshot of a PR comment posted from the Lighthouse CI\\"\\n  width=\\"100%\\"\\n  loading=\\"lazy\\"\\n/>\\n\\nThat\'s it! What a journey‍.\\nIt\'s amazing that you followed all the way through.\\n\\n## To Sum up\\n\\nWriting a CLI is not too hard, right?\uD83D\uDE0E\\nLet\'s have a look at all the things we\'ve covered:\\n\\n- configuring TypeScript\\n- configuring ESLint\\n- configuring Prettier\\n- executing your command locally\\n- coloring logs with `chalk`\\n- defining your command with `commander`\\n- spawning processes\\n- executing Lighthouse CLI\\n- using Lighthouse\'s internal library to calculate median performance scores\\n- publish your command as a npm package\\n- applying your command to a GitHub Action workflow\\n\\nNow the super power is yours too\uD83D\uDE80\\n\\n---\\n\\nHere you have it! I hope you find it useful. Thanks for reading through\uD83D\uDE4C\\n\\nPlease share this article so that more people who\'re looking for inspirations can see it.\\n\\nFeel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\\n\\nIf you\'re interested in reading more about image optimization to boost your performance score, take a look at my previous article [\\"Using WebP for Better User Experience\\"](/articles/use-webp-for-better-ux).\\nThere we discussed one of the modern image formats that greatly reduces the size of your images without sacrificing quality.\\n\\nIf you\'re wondering how to test Redux Observable, I wrote an article [\\"Writing Better Marble Tests for Redux Observable and TypeScript\\"](https://itnext.io/better-marble-test-70c7676a1e2) just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.\\n\\nIf you’re a fan of functional programming, check out [this article that I wrote about Transducers](https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d).\\nIt’s a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.\\n\\nHappy coding!\\n","code":"var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,c)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let i of m(e))!u.call(a,i)&&i!==s&&l(a,i,{get:()=>e[i],enumerable:!(c=p(e,i))||c.enumerable});return a};var f=(a,e,s)=>(s=a!=null?h(N(a)):{},r(e||!a||!a.__esModule?l(s,\\"default\\",{value:a,enumerable:!0}):s,a)),y=a=>r(l({},\\"__esModule\\",{value:!0}),a);var o=g((j,t)=>{t.exports=_jsx_runtime});var v={};k(v,{default:()=>x,frontmatter:()=>w});var n=f(o()),w={title:\\"Writing Your Own TypeScript CLI\\",publishedAt:\\"December 6, 2021\\",description:\\"Writing CLIs feels like a super power\\\\u{1F4AF} You can write one too! I\'ll show you how to develop a CLI with TypeScript step by step and demonstrate how you can apply your CLI in CD/CI pipelines. We\'re going to uncover the power of Google Lighthouse and many more amazing npm packages!\\",cover:\\"/optimized/articles/writing-your-own-typescript-cli/hero.webp\\",category:\\"TypeScript\\",coverWidth:\\"1411\\",coverHeight:\\"682\\"};function d(a){let e=Object.assign({h2:\\"h2\\",a:\\"a\\",span:\\"span\\",ul:\\"ul\\",li:\\"li\\",code:\\"code\\",hr:\\"hr\\",p:\\"p\\",pre:\\"pre\\",h3:\\"h3\\",strong:\\"strong\\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\\"tldr\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#tldr\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"TL;DR\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"cooking\\",children:\\"\\\\u{1F373}\\"}),\\" You can write a CLI with ease. It\'s simpler than you might think:)\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"Tokyo tower\\",children:\\"\\\\u{1F5FC}\\"}),\\" We\'ll write a CLI together to generate a Lighthouse performance report.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"flashlight\\",children:\\"\\\\u{1F526}\\"}),\\" You\'ll see how to configure TypeScript, ESLint, and Prettier.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"books\\",children:\\"\\\\u{1F4DA}\\"}),\\" You\'ll see how to use some awesome libraries like \\",(0,n.jsx)(e.a,{href:\\"https://github.com/chalk/chalk\\",children:(0,n.jsx)(e.code,{children:\\"chalk\\"})}),\\" and \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tj/commander.js\\",children:(0,n.jsx)(e.code,{children:\\"commander\\"})}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F9D1}\\"}),\\"\\\\u200D\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"microscope\\",children:\\"\\\\u{1F52C}\\"}),\\" You\'ll see how to spawn multiple processes.\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"}),\\" You\'ll see how to use your CLI in GitHub Actions.\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Writing CLIs feels like a super power, and you can write one too\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"hundred points\\",children:\\"\\\\u{1F4AF}\\"})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"I\'ll show you how to develop a CLI with TypeScript step by step and demonstrate how you can apply your CLI in CD/CI pipelines.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"This article covers three major topics:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"#configuring-tooling\\",children:\\"Setting up A TypeScript Project with ESLint and Prettier\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"#writing-a-cli-to-run-lighthouse\\",children:\\"Writing a CLI to Run Lighthouse in Multiple Process\\"})}),`\\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\\"#using-the-cli-in-github-actions\\",children:\\"Using the CLI in Action with GitHub Actions\\"})}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Feel free to jump to the parts that you\'re interested in.\\"}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"real-world-use-case\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#real-world-use-case\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Real-world Use Case\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://developers.google.com/web/tools/lighthouse/\\",children:\\"Lighthouse\\"}),` is one of the most popular dev tools to gain insight to webpage performances.\\nIt offers a CLI and node module so we can run it programmatically.\\nHowever, you\'ll notice the Lighthouse scores vary if you run it multiple times on the same webpage.\\nThat\'s because there\'s a known `,(0,n.jsx)(e.a,{href:\\"https://developers.google.com/web/tools/lighthouse/variability\\",children:\\"variability\\"}),`.\\nThere\'re many factors that plays into the Lighthouse variability.\\nOne of the recommended strategies to deal with variance is to run Lighthouse multiple times.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We\'ll be working on a CLI to implement this strategy in this article. The implementation will cover:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"Running multiple Lighthouse analyses\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"Aggregating data and calculating the median scores\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"I hope you\'re excited!\\"}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"This article will discuss one of the scripts in \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rainbow\\",children:\\"\\\\u{1F308}\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rainbow\\",children:\\"\\\\u{1F308}\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rainbow\\",children:\\"\\\\u{1F308}\\"}),\\" **\\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dx-scripts\\",children:(0,n.jsx)(e.code,{children:\\"dx-scripts\\"})}),\\"**\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rainbow\\",children:\\"\\\\u{1F308}\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rainbow\\",children:\\"\\\\u{1F308}\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rainbow\\",children:\\"\\\\u{1F308}\\"})]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"It\'s available on \\",(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/package/dx-scripts\\",children:\\"npm\\"}),`.\\nI recently wrote the first script in the library and there are more to come!\\nFeel free to install it and try it in your development workflow. Please give it a `,(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u2B50\\"}),\\"\\\\uFE0F on \\",(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dx-scripts\\",children:\\"GitHub\\"}),\\" if the scripts are useful:)\\"]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"peaking-the-projects-file-structure\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#peaking-the-projects-file-structure\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Peaking The Project\'s File Structure\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"This is how the file structure will look like after configuring the tooling.\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`my-script\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 .eslintrc.js\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 .prettierrc.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 tsconfig.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u251C\\\\u2500\\\\u2500 bin\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\\\u2514\\\\u2500\\\\u2500 src\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u251C\\\\u2500\\\\u2500 utils.ts\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`    \\\\u2514\\\\u2500\\\\u2500 index.ts\\n`})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The source files are located in the \\",(0,n.jsx)(e.code,{children:\\"/src\\"}),` directory.\\nWe\'ll compile them and output `,(0,n.jsx)(e.code,{children:\\".js\\"}),\\" files in \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" directory.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),` directory will be the entry point of the command when your users are using the CLI.\\nYou\'ll learn how to configure it in a bit.`]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"configuring-tooling\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#configuring-tooling\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Configuring Tooling\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We\'ll be using \\",(0,n.jsx)(e.a,{href:\\"https://yarnpkg.com/\\",children:\\"Yarn\\"}),` as our package manager for this project.\\nFeel free to use `,(0,n.jsx)(e.a,{href:\\"https://www.npmjs.com/\\",children:\\"npm\\"}),\\" if you prefer.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s initiate the project. We\'ll create a directory called \\",(0,n.jsx)(e.code,{children:\\"my-script\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"mkdir\\"}),\\" my-script \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token builtin class-name\\",children:\\"cd\\"}),` my-script\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"At the project root, let\'s create a \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\" with Yarn:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` init\\n`]})})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"configuring-typescript\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#configuring-typescript\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Configuring TypeScript\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"To install \\",(0,n.jsx)(e.a,{href:\\"https://www.typescriptlang.org/\\",children:\\"TypeScript\\"}),\\" and the types for \\",(0,n.jsx)(e.a,{href:\\"https://nodejs.org/en/\\",children:\\"NodeJS\\"}),\\", run:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),` typescript @types/node\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[`Now we are ready to configure TypeScript in the project.\\nWe can initiate a `,(0,n.jsx)(e.code,{children:\\"tsconfig.json\\"}),\\" with \\",(0,n.jsx)(e.code,{children:\\"tsc\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ npx tsc \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--init\\"}),`\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In order to compile the TypeScript code and output the result to the \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" directory, we need to specify it in the \\",(0,n.jsx)(e.code,{children:\\"compilerOptions\\"}),\\" in \\",(0,n.jsx)(e.code,{children:\\"tsconfig.json\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// tsconfig.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`{\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` \\"compilerOptions\\": {\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"outDir\\": \\"./bin\\"\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   /* rest of the default options */\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` }\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"That\'s it! Let\'s test it.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"At the project root, run the following command to create an \\",(0,n.jsx)(e.code,{children:\\"index.ts\\"}),\\" file in \\",(0,n.jsx)(e.code,{children:\\"/src\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"mkdir\\"}),\\" src \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"touch\\"}),` src/index.ts\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In \\",(0,n.jsx)(e.code,{children:\\"index.ts\\"}),\\", we\'ll put a simple \\",(0,n.jsx)(e.code,{children:\\"console.log\\"}),\\" and run the TypeScript compiler to see if the compiled files are in the \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" directory.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// src/index.ts\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"log\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token string\\",children:[\\"\'Hello from my-script\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"}),\\"\'\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Add a script to compile TypeScript with \\",(0,n.jsx)(e.code,{children:\\"tsc\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` \\"scripts\\": {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   \\"tsc\\": \\"tsc\\"\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` }\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Then run:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# compile `/src`\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` tsc\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You should see an \\",(0,n.jsx)(e.code,{children:\\"index.js\\"}),\\" file in the \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" directory.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s execute the \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" directory from the project root,\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"node\\"}),` bin\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token comment\\",children:[\\"# Hello from my-script \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"})]}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"configuring-eslint\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#configuring-eslint\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Configuring ESLint\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Now we ready for \\",(0,n.jsx)(e.a,{href:\\"https://eslint.org/\\",children:\\"ESLint\\"}),\\". We can go ahead and install it:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),` eslint\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[`ESLint is a very powerful linter.\\nIt doesn\'t come with TypeScript support so we\'ll install a `,(0,n.jsx)(e.a,{href:\\"https://github.com/typescript-eslint/typescript-eslint/tree/6e159ee7cf8ef2028792cb8ee636cf6143fa967f/packages/parser\\",children:\\"TypeScript parser\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),` @typescript-eslint/parser @typescript-eslint/eslint-plugin\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We also installed the \\",(0,n.jsx)(e.a,{href:\\"https://github.com/typescript-eslint/typescript-eslint/tree/6e159ee7cf8ef2028792cb8ee636cf6143fa967f/packages/eslint-plugin\\",children:(0,n.jsx)(e.code,{children:\\"@typescript-eslint/eslint-plugin\\"})}),`.\\nThis is because we\'ll need it to extend the ESLint rules for TypeScript-specific features.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s configure eslint in the project. We\'ll create a \\",(0,n.jsx)(e.code,{children:\\".eslintrc.js\\"}),\\" at the project root:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"touch\\"}),` .eslintrc.js\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Inside \\",(0,n.jsx)(e.code,{children:\\".eslintrc.js\\"}),\\", we can configure eslint as following:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-js\\",children:(0,n.jsxs)(e.code,{className:\\"language-js code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// .eslintrc.js\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"module\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token property-access\\",children:\\"exports\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"parser\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'@typescript-eslint/parser\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token literal-property property\\",children:\\"plugins\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'@typescript-eslint\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"extends\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'plugin:@typescript-eslint/recommended\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"To understand the configuration a little more, we first used \\",(0,n.jsx)(e.code,{children:\\"@typescript-eslint/parser\\"}),` to enable ESLint\'s ability to understand TypeScript syntax.\\nThen we applied `,(0,n.jsx)(e.code,{children:\\"@typescript-eslint/eslint-plugin\\"}),` plugin to extend the rules.\\nFinally we enabled all the recommended rules form `,(0,n.jsx)(e.code,{children:\\"@typescript-eslint/eslint-plugin\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\'re interested in learning more about the configuration, you can checkout the \\",(0,n.jsx)(e.a,{href:\\"https://github.com/typescript-eslint/typescript-eslint/tree/main/packages/eslint-plugin#usage\\",children:\\"official doc\\"}),\\" for more details.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We can now add a linting script to \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`{\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` \\"scripts\\": {\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"lint\\": \\"eslint \'**/*.{js,ts}\' --fix\\",\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` }\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"To run the script:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` lint\\n`]})})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"configuring-prettier\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#configuring-prettier\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Configuring Prettier\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://prettier.io/\\",children:\\"Prettier\\"}),` is a very powerful formatter.\\nIt comes with a set of rules to format our code.\\nSometimes the rules can conflict with ESLint rules so I\'ll show you how to configure them.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"First install Prettier and create a \\",(0,n.jsx)(e.code,{children:\\".prettierrc.json\\"}),\\" file at the project root to hold the configuration,\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--exact\\"}),\\" prettier \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"touch\\"}),` .prettierrc.json\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"You can edit \\",(0,n.jsx)(e.code,{children:\\".prettierrc.json\\"}),` and add your custom rules.\\nYou can find `,(0,n.jsx)(e.a,{href:\\"https://prettier.io/docs/en/options.html\\",children:\\"the options in the official doc\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Here\'s an example:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-json\\",children:(0,n.jsxs)(e.code,{className:\\"language-json code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// .prettierrc.json\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token property\\",children:\'\\"trailingComma\\"\'}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\'\\"all\\"\'}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token property\\",children:\'\\"singleQuote\\"\'}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token boolean\\",children:\\"true\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[`Prettier provides handy integration with ESLint.\\nWe\'ll follow the `,(0,n.jsx)(e.a,{href:\\"https://github.com/prettier/eslint-plugin-prettier#recommended-configuration\\",children:\\"recommended configuration\\"}),\\" from the official doc.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),` eslint-config-prettier eslint-plugin-prettier\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We\'ll add the plugin at the last position in the \\",(0,n.jsx)(e.code,{children:\\"extensions\\"}),\\" array.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// .eslintrc.js\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`module.exports = {\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` extends: [\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   \'plugin:@typescript-eslint/recommended\',\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \'plugin:prettier/recommended\',\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` ],\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:`It\'s very important that Prettier is the last extension.\\nBy applying last, it disables all formatting-related ESLint rules so the conflicts will fall back to Prettier.`}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We can now add a \\",(0,n.jsx)(e.code,{children:\\"prettier\\"}),\\" script to \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`{\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` \\"scripts\\": {\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"prettier\\": \\"prettier --write .\\"\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` }\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"To run the script:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` prettier\\n`]})})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"configuring-packagejson\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#configuring-packagejson\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Configuring \\",(0,n.jsx)(e.code,{children:\\"package.json\\"})]}),`\\n`,(0,n.jsxs)(e.p,{children:[`We are almost ready with our configuration.\\nThe only thing missing is a way to execute the project the way you would execute a command.\\nInstead of executing the `,(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" with \\",(0,n.jsx)(e.code,{children:\\"node\\"}),\\", we want to be able to call the command directly:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\'# instead of \\"node bin\\", we want to call the command by its name like this:\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`$ my-script\\n`})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"How do we do that? First we need to add a \\",(0,n.jsx)(e.a,{href:\\"https://en.wikipedia.org/wiki/Shebang_(Unix)\\",children:\\"Shebang\\"}),\\" on the top of our \\",(0,n.jsx)(e.code,{children:\\"src/index.ts\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` #!/usr/bin/env node\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"console.log(\'Hello from my-script\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"}),`\')\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[`The Shebang is to inform Unix-like operating systems that this is NodeJS executable.\\nSo we can call the script directly without specifying `,(0,n.jsx)(e.code,{children:\\"node\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s compile again,\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` tsc\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"There\'s another thing we need before it all works. We need to assign the executable right to the \\",(0,n.jsx)(e.code,{children:\\"bin/index.js\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"chmod\\"}),` u+x ./bin/index.js\\n`]})})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s give it a go:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# execute directly\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`$ ./bin/index.js\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token comment\\",children:[\\"# Hello from my-script\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"})]}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[`Nice, we are almost there.\\nThe last thing is to create a symlink between the command and the executable.\\nFirst, we need to specify the `,(0,n.jsx)(e.code,{children:\\"bin\\"}),\\" property in \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\" and point the command to the \\",(0,n.jsx)(e.code,{children:\\"bin/index.js\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`{\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  \\"bin\\": {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"my-script\\": \\"./bin/index.js\\"\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  }\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Second, create a symlink with Yarn at the project root:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"link\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\'# You can always unlink: \\"yarn unlink my-script\\"\'}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s see if it works\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F929}\\"})]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`$ my-script\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token comment\\",children:[\\"# Hello from my-script\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"})]}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"It works\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"party popper\\",children:\\"\\\\u{1F389}\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"party popper\\",children:\\"\\\\u{1F389}\\"}),(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"party popper\\",children:\\"\\\\u{1F389}\\"})]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Just to make the development easier, we\'ll add a couple of scripts in \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`{\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` \\"scripts\\": {\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"build\\": \\"yarn tsc && yarn chmod\\",\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \\"chmod\\": \\"chmod u+x ./bin/index.js\\",\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` }\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Now we can run \\",(0,n.jsx)(e.code,{children:\\"yarn build\\"}),\\" to compile and automatically assign the executable right to the entry file.\\"]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"writing-a-cli-to-run-lighthouse\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#writing-a-cli-to-run-lighthouse\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Writing a CLI to Run Lighthouse\\"]}),`\\n`,(0,n.jsx)(e.p,{children:`It\'s time to implement our core logic.\\nWe\'ll explore a few handy npm packages to help us write the CLI and we\'ll dive into the magic of Lighthouse.`}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"coloring-consolelog-with-chalk\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#coloring-consolelog-with-chalk\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Coloring \\",(0,n.jsx)(e.code,{children:\\"console.log\\"}),\\" with \\",(0,n.jsx)(e.code,{children:\\"chalk\\"})]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` chalk@4.1.2\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Make sure you are installing \\",(0,n.jsx)(e.code,{children:\\"chalk 4\\"}),\\". \\",(0,n.jsxs)(e.a,{href:\\"https://github.com/chalk/chalk/releases/tag/v5.0.0\\",children:[(0,n.jsx)(e.code,{children:\\"chalk 5\\"}),\\" is pure ESM\\"]}),\\" and we won\'t be able to use it with TypeScript \\",(0,n.jsx)(e.a,{href:\\"https://github.com/microsoft/TypeScript/issues/46452\\",children:\\"until TypeScript 4.6 is released\\"}),\\".\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\\"https://github.com/chalk/chalk\\",children:(0,n.jsx)(e.code,{children:\\"chalk\\"})}),\\" gives colors to your \\",(0,n.jsx)(e.code,{children:\\"console.log\\"}),\\". For example:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// src/index.ts\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" chalk \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'chalk\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"log\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"chalk\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"green\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token string\\",children:[\\"\'Hello from my-script\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"}),\\"\'\\"]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Now run \\",(0,n.jsx)(e.code,{children:\\"yarn build && my-script\\"}),\\" at your project root and see the log.\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s use \\",(0,n.jsx)(e.code,{children:\\"chalk\\"}),` in a more meaningful way.\\n`,(0,n.jsx)(e.a,{href:\\"https://web.dev/performance-scoring/#color-coding\\",children:\\"Lighthouse performane scores are color coded\\"}),`.\\nWe can write a utility function that shows the display value with a color based on the performance score.`]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// src/utils.ts\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" chalk \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'chalk\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:`/**\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * Coloring display value based on Lighthouse score.\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` *\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * - 0 to 0.49 (red): Poor\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * - 0.5 to 0.89 (orange): Needs Improvement\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token comment\\",children:` * - 0.9 to 1 (green): Good\\n`})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\" */\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"export\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"draw\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"score\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"number\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" value\\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"number\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"score \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"0.9\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" score \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"1\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" chalk\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"green\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"value\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\" (Good)\\"}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"if\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),\\"score \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\">=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"0.5\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" score \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"<\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"0.9\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" chalk\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yellow\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"value\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\" (Needs Improvement)\\"}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"return\\"}),\\" chalk\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"red\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"value\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\" (Poor)\\"}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Use it in \\",(0,n.jsx)(e.code,{children:\\"src/index.ts\\"}),\\" and try log something with \\",(0,n.jsx)(e.code,{children:\\"draw()\\"}),\\" to see the result.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"// src/index.ts\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" draw \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'./utils\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"log\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"Perf score is \\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"draw\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"0.64\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"64\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"designing-a-command-with-commander\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#designing-a-command-with-commander\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Designing A Command with \\",(0,n.jsx)(e.code,{children:\\"commander\\"})]}),`\\n`,(0,n.jsxs)(e.p,{children:[`To make our CLI interactive, we need to be able to read user inputs and parse them.\\n`,(0,n.jsx)(e.a,{href:\\"https://github.com/tj/commander.js\\",children:(0,n.jsx)(e.code,{children:\\"commander\\"})}),` is a descriptive way of defining a interface.\\nWe can implement our interface in a very clean and documentary fashion.`]}),`\\n`,(0,n.jsx)(e.p,{children:`How do we want the users to interact with the CLI is to simply pass a URL for Lighthouse to run.\\nWe also want to pass in an option to specify how many times Lighthouse should run on the URL.\\nLike this:`}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# without an option\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`$ my-script https://dawchihliou.github.io/\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# with an option\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ my-script https://dawchihliou.github.io/ \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--iteration\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"3\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s see how quickly we can implement our design with \\",(0,n.jsx)(e.code,{children:\\"commander\\"}),\\".\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` commander\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s clear the \\",(0,n.jsx)(e.code,{children:\\"src/index.ts\\"}),\\" and start fresh:\\"]}),`\\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\\"src/index.ts\\"})}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-ts\\",children:(0,n.jsxs)(e.code,{className:\\"language-ts code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token hashbang comment\\",children:\\"#!/usr/bin/env node\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"import\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" Command \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"from\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'commander\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"async\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"function\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" program \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"new\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token class-name\\",children:\\"Command\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`  program\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"argument\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'<url>\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'Lighthouse will run the analysis on the URL.\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"option\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'-i, --iteration <type>\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'How many times Lighthouse should run the analysis per URL\'\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\",\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'5\'\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"parse\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"[\\"}),\\"url\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"]\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" program\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),`args\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token keyword\\",children:\\"const\\"}),\\" options \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),\\" program\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"opts\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token builtin\\",children:\\"console\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"log\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsxs)(e.span,{className:\\"token template-string\\",children:[(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"url: \\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"url\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token string\\",children:\\", iteration: \\"}),(0,n.jsxs)(e.span,{className:\\"token interpolation\\",children:[(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"${\\"}),\\"options\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\".\\"}),\\"iteration\\",(0,n.jsx)(e.span,{className:\\"token interpolation-punctuation punctuation\\",children:\\"}\\"})]}),(0,n.jsx)(e.span,{className:\\"token template-punctuation string\\",children:\\"`\\"})]}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"(\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\")\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We first instantiated a \\",(0,n.jsx)(e.code,{children:\\"Command\\"}),\\" and we used the instance \\",(0,n.jsx)(e.code,{children:\\"program\\"}),\\" to define:\\"]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\"an \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tj/commander.js#command-arguments\\",children:(0,n.jsx)(e.code,{children:\\"required argument\\"})}),\\": we gave it a name \\",(0,n.jsx)(e.code,{children:\\"url\\"}),\\" and a description\\"]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"an \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tj/commander.js#options\\",children:(0,n.jsx)(e.code,{children:\\"option\\"})}),\\": we gave it a short flag and a long flag, a description, and a default value\\"]}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"To consume the argument and option, we first parse the command and log the variables.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now we can run the command and observe the log.\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` build\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# without an option\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`$ my-script https://dawchihliou.github.io/\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# url: https://dawchihliou.github.io/, iteration: 5\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# with an option\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ my-script https://dawchihliou.github.io/ \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--iteration\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"3\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# or\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ my-script https://dawchihliou.github.io/ \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"-i\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"3\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# url: https://dawchihliou.github.io/, iteration: 3\\"}),`\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[`Very cool right?!\\nAnother cool feature is that `,(0,n.jsx)(e.code,{children:\\"commander\\"}),\\" automatically generates a \\",(0,n.jsx)(e.a,{href:\\"https://github.com/tj/commander.js#automated-help\\",children:(0,n.jsx)(e.code,{children:\\"help\\"})}),\\" to print the help information.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ my-script \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--help\\"}),`\\n`]})})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"running-multiple-lighthouse-analyses-in-separate-os-processes\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#running-multiple-lighthouse-analyses-in-separate-os-processes\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Running Multiple Lighthouse Analyses in Separate OS Processes\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"We learned how to parse user inputs in the previous section. It\'s time to dive into the core of the CLI.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"The recommendation for running multiple Lighthouse is to run them in \\",(0,n.jsx)(e.a,{href:\\"https://github.com/GoogleChrome/lighthouse/issues/7187\\",children:\\"separate processes\\"}),` to remove the risk of interference.\\n`,(0,n.jsx)(e.a,{href:\\"https://github.com/moxystudio/node-cross-spawn\\",children:(0,n.jsx)(e.code,{children:\\"cross-spawn\\"})}),` is a cross platform solution for spawning processes.\\nWe will use it to synchronously spawn new processes to run Lighthouse.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"To install \\",(0,n.jsx)(e.code,{children:\\"cross-spawn\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsxs)(e.code,{className:\\"language-bash code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` cross-spawn\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),` @types/cross-spawn\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token comment\\",children:[\\"# Let\'s install lighthouse too\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"sparkles\\",children:\\"\\\\u2728\\"})]}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),` lighthouse\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Let\'s edit \\",(0,n.jsx)(e.code,{children:\\"src/index.ts\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`import { Command } from \'commander\'\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` import spawn from \'cross-spawn\'\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` const lighthouse = require.resolve(\'lighthouse/lighthouse-cli\')\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`async function run() {\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` // ...\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line deleted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token deleted-sign deleted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix deleted\\",children:\\"-\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:\\"  console.log(`url: ${url}, iteration: ${options.iteration}`)\\\\n\\"})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token deleted-sign deleted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  console.log(\\n`})]})]}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsxs)(e.span,{className:\\"token line\\",children:[\\"    `\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"Tokyo tower\\",children:\\"\\\\u{1F5FC}\\"}),\\" Running Lighthouse for ${url}. It will take a while, please wait...`\\\\n\\"]})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  )\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  const results = []\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  for (let i = 0; i < options.iteration; i++) {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    const { status, stdout } = spawn.sync(\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      process.execPath, [\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      lighthouse,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      url,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      \'--output=json\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      \'--chromeFlags=--headless\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      \'--only-categories=performance\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    ])\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    if (status !== 0) {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`      continue\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    }\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    results.push(JSON.parse(stdout.toString()))\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  }\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[`In the code, we spawn new processes multiple times based on user input.\\nIn each process, we ran Lighthouse performance analysis with headless Chrome and collect the the JSON data.\\nThe `,(0,n.jsx)(e.code,{children:\\"result\\"}),` variable will hold an array of independent performance data in string.\\nThe next step is to aggregate the data and calculate the most reliable performance scores.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you implement the code above, you\'ll see a linting error about \\",(0,n.jsx)(e.code,{children:\\"require\\"}),`.\\n`,(0,n.jsx)(e.code,{children:\\"require.resolve\\"}),` resolves the path to a module instead of the module itself.\\nIn this article, we\'ll allow the `,(0,n.jsx)(e.code,{children:\\"@typescript-eslint/no-var-requires\\"}),\\" rule in \\",(0,n.jsx)(e.code,{children:\\".eslintrc.js\\"}),\\" to compile.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// .eslintrc.js\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`module.exports = {\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  rules: {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    // allow require\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`    \'@typescript-eslint/no-var-requires\': 0,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  },\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"calculating-reliable-lighthouse-scores\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#calculating-reliable-lighthouse-scores\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Calculating Reliable Lighthouse Scores\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[`One strategy is to aggregate the reports by calculating the median.\\nLighthouse provide a internal functionality `,(0,n.jsx)(e.a,{href:\\"https://github.com/GoogleChrome/lighthouse/blob/master/lighthouse-core/lib/median-run.js\\",children:(0,n.jsx)(e.code,{children:\\"computeMedianRun\\"})}),`.\\nLet\'s use it`]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// src/index.ts\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` // For simplicity, we use require here because lighthouse doesn\'t provide type declaration.\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` const {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   computeMedianRun,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` } = require(\'lighthouse/lighthouse-core/lib/median-run.js\')\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`async function run() {\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsxs)(e.span,{className:\\"token unchanged\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix unchanged\\",children:\\" \\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:` // ...\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token unchanged\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   const median = computeMedianRun(results)\\n`})]})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:\\"   console.log(`\\\\\\\\n${chalk.green(\'\\\\u2714\')} Report is ready for ${median.finalUrl}`)\\\\n\\"})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   console.log(\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsxs)(e.span,{className:\\"token line\\",children:[\\"     `\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"Tokyo tower\\",children:\\"\\\\u{1F5FC}\\"}),\\" Median performance score: ${draw(\\\\n\\"]})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`       median.categories.performance.score,\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`       median.categories.performance.score * 100\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:\\"     )}`\\\\n\\"})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   )\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   const primaryMatrices = [\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     \'first-contentful-paint\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     \'interactive\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     \'speed-index\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     \'total-blocking-time\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     \'largest-contentful-paint\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     \'cumulative-layout-shift\',\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   ]\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   primaryMatrices.map((matrix) => {\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`     const { title, displayValue, score } = median.audits[matrix]\\n`})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsxs)(e.span,{className:\\"token line\\",children:[\\"     console.log(`\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"Tokyo tower\\",children:\\"\\\\u{1F5FC}\\"}),\\" Median ${title}: ${draw(score, displayValue)}`)\\\\n\\"]})]})}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token line\\"}),(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`   })\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Under the hood, \\",(0,n.jsx)(e.code,{children:\\"computeMedianRun\\"}),` returns the score that\'s closest to the median of the First Contentful Paint and the median of the Time to Interactive.\\nIt\'s because they represent the earliest and the latest moments in the page initialization lifecycle.\\nIt\'s a more reliable way to determine the median than the naive approach by finding the median from a single measurement.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now try the command again and see the result!\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" build \\",(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"&&\\"}),\\" my-script https://dawchihliou.github.io \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--iteration\\"}),(0,n.jsx)(e.span,{className:\\"token operator\\",children:\\"=\\"}),(0,n.jsx)(e.span,{className:\\"token number\\",children:\\"3\\"}),`\\n`]})})}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/writing-your-own-typescript-cli/command-line.webp\\",alt:\\"Screenshot of my-script final output\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Walla\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"party popper\\",children:\\"\\\\u{1F389}\\"})]}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"using-the-cli-in-github-actions\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#using-the-cli-in-github-actions\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Using the CLI in GitHub Actions\\"]}),`\\n`,(0,n.jsx)(e.p,{children:`Our implementation is done.\\nLet\'s use the CLI in an automated workflow so we can benchmark the performance in a CD/CI pipeline.`}),`\\n`,(0,n.jsx)(e.p,{children:\\"First, let\'s publish the package on npm (hypothetically).\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"I published a npm package \\",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.a,{href:\\"https://github.com/DawChihLiou/dx-scripts/\\",children:(0,n.jsx)(e.code,{children:\\"dx-scripts\\"})})}),\\" that includes the production-ready version of \\",(0,n.jsx)(e.code,{children:\\"my-script\\"}),`.\\nWe will write the GitHub Actions workflow with `,(0,n.jsx)(e.code,{children:\\"dx-scripts\\"}),\\" to illustrate.\\"]}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"publishing-on-npm-an-example\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#publishing-on-npm-an-example\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Publishing on npm (an example)\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"We\'ll add a \\",(0,n.jsx)(e.code,{children:\\"files\\"}),\\" property in \\",(0,n.jsx)(e.code,{children:\\"package.json\\"}),\\" to publish the \\",(0,n.jsx)(e.code,{children:\\"/bin\\"}),\\" directory.\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-diff\\",children:(0,n.jsxs)(e.code,{className:\\"language-diff code-highlight\\",children:[(0,n.jsx)(e.span,{className:\\"code-line\\",children:`// package.json\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`{\\n`}),(0,n.jsx)(e.span,{className:\\"code-line inserted\\",children:(0,n.jsxs)(e.span,{className:\\"token inserted-sign inserted\\",children:[(0,n.jsx)(e.span,{className:\\"token prefix inserted\\",children:\\"+\\"}),(0,n.jsx)(e.span,{className:\\"token line\\",children:`  \\"files\\": [\\"bin\\"],\\n`})]})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token inserted-sign inserted\\",children:(0,n.jsx)(e.span,{className:\\"token line\\"})}),`}\\n`]})]})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Then simply run:\\"}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),` publish\\n`]})})}),`\\n`,(0,n.jsx)(e.p,{children:\\"Now the package is on npm (hypothetically)!\\"}),`\\n`,(0,n.jsxs)(e.h3,{id:\\"writing-a-workflow\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#writing-a-workflow\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"Writing A Workflow\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Let\'s discuss the workflow. We want the workflow to:\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"run on a pull request when there\'s an update\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"run the Lighthouse performance analysis against a feature branch preview URL\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"notify the pull request with the analysis report\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"So after the workflow is successfully completed, you\'ll see a comment from GitHub Action Bot with your Lighthouse scores.\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\"To focus on the application of our CLI, I\'ll hard-code the feature branch preview URL in the workflow.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"In your application repository, install \\",(0,n.jsx)(e.code,{children:\\"dx-scripts\\"}),\\":\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-bash\\",children:(0,n.jsx)(e.code,{className:\\"language-bash code-highlight\\",children:(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"$ \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"yarn\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token function\\",children:\\"add\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token parameter variable\\",children:\\"--dev\\"}),` dx-scripts\\n`]})})}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Add a \\",(0,n.jsx)(e.code,{children:\\"lighthouse-dev-ci.yaml\\"}),\\" to your GitHub workflows directory:\\"]}),`\\n`,(0,n.jsx)(e.pre,{className:\\"language-yaml\\",children:(0,n.jsxs)(e.code,{className:\\"language-yaml code-highlight\\",children:[(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# .github/workflows/lighthouse-dev-ci.yaml\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Lighthouse CI\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` pull_request\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"jobs\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"  \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"lighthouse\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"runs-on\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" ubuntu\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`latest\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"env\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# You can substitute the hardcoded preview url with your preview url\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"preview_url\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" https\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`//dawchihliou.github.io/\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"    \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"steps\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` actions/checkout@v2\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" actions/setup\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`node@v1\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"node-version\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token string\\",children:\\"\'16.x\'\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Install dependencies\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` yarn\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token comment\\",children:\\"# You can add your steps here to create a preview\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Run Lighthouse\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"id\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` lighthouse\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"shell\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` bash\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"run\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`          lighthouse=$(npx dx-scripts lighthouse $preview_url)\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`          lighthouse=\\"\\\\${lighthouse//\'%\'/\'%25\'}\\"\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`          lighthouse=\\"\\\\${lighthouse//$\'\\\\\\\\n\'/\'%0A\'}\\"\\n`})}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`          lighthouse=\\"\\\\${lighthouse//$\'\\\\\\\\r\'/\'%0D\'}\\"\\n`})}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:\'          echo \\"::set-output name=lighthouse_report::$lighthouse\\"\'}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"      \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"name\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),` Notify PR\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"uses\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" wow\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),\\"actions/auto\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"-\\"}),`comment@v1\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"        \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"with\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"GITHUB_TOKEN\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" secrets.GITHUB_TOKEN \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"          \\",(0,n.jsx)(e.span,{className:\\"token key atrule\\",children:\\"pullRequestSynchronize\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\":\\"}),\\" \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"|\\"}),(0,n.jsx)(e.span,{className:\\"token scalar string\\",children:`\\n`})]}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[(0,n.jsxs)(e.span,{className:\\"token scalar string\\",children:[\\"            \\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"waving hand\\",children:\\"\\\\u{1F44B}\\"}),\\" @{{ author }},\\"]}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"            Here is your Lighthouse performance overview\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"party popper\\",children:\\"\\\\u{1F389}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:`\\n`}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:\\"            ```\\\\n\\"}),(0,n.jsxs)(e.span,{className:\\"code-line\\",children:[\\"            $\\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"{\\"}),\\" steps.lighthouse.outputs.lighthouse_report \\",(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),(0,n.jsx)(e.span,{className:\\"token punctuation\\",children:\\"}\\"}),`\\n`]}),(0,n.jsx)(e.span,{className:\\"code-line\\",children:\\"            ```\\\\n\\"})]})}),`\\n`,(0,n.jsxs)(e.p,{children:[\'In the \\"Run Lighthouse\\" step, we ran the \',(0,n.jsx)(e.code,{children:\\"dx-script lighthouse\\"}),\\" CLI, substitute the special characters in order to print multi-line output, and we set the output in a variable \\",(0,n.jsx)(e.code,{children:\\"lighthouse_report\\"}),`.\\nIn the \\"Notify PR\\" step, we wrote a comment with the output from the \\"Run Lighthouse\\" step and use the `,(0,n.jsxs)(e.a,{href:\\"https://github.com/marketplace/actions/auto-comment\\",children:[(0,n.jsx)(e.code,{children:\\"wow-actions/auto-comment\\"}),\\" \\"]}),\\" action to post the comment.\\"]}),`\\n`,(0,n.jsx)(\\"img\\",{src:\\"/optimized/articles/writing-your-own-typescript-cli/pr-comment.webp\\",alt:\\"Screenshot of a PR comment posted from the Lighthouse CI\\",width:\\"100%\\",loading:\\"lazy\\"}),`\\n`,(0,n.jsx)(e.p,{children:`That\'s it! What a journey\\\\u200D.\\nIt\'s amazing that you followed all the way through.`}),`\\n`,(0,n.jsxs)(e.h2,{id:\\"to-sum-up\\",children:[(0,n.jsx)(e.a,{className:\\"anchor\\",href:\\"#to-sum-up\\",children:(0,n.jsx)(e.span,{className:\\"icon icon-link\\"})}),\\"To Sum up\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Writing a CLI is not too hard, right?\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"smiling face with sunglasses\\",children:\\"\\\\u{1F60E}\\"}),`\\nLet\'s have a look at all the things we\'ve covered:`]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\"configuring TypeScript\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"configuring ESLint\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"configuring Prettier\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"executing your command locally\\"}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"coloring logs with \\",(0,n.jsx)(e.code,{children:\\"chalk\\"})]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\"defining your command with \\",(0,n.jsx)(e.code,{children:\\"commander\\"})]}),`\\n`,(0,n.jsx)(e.li,{children:\\"spawning processes\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"executing Lighthouse CLI\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"using Lighthouse\'s internal library to calculate median performance scores\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"publish your command as a npm package\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\"applying your command to a GitHub Action workflow\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Now the super power is yours too\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"rocket\\",children:\\"\\\\u{1F680}\\"})]}),`\\n`,(0,n.jsx)(e.hr,{}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Here you have it! I hope you find it useful. Thanks for reading through\\",(0,n.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"raising hands\\",children:\\"\\\\u{1F64C}\\"})]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Please share this article so that more people who\'re looking for inspirations can see it.\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"Feel free to connect with me on \\",(0,n.jsx)(e.a,{href:\\"https://twitter.com/dawchihliou\\",children:\\"twitter\\"}),\\"!\\"]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\'re interested in reading more about image optimization to boost your performance score, take a look at my previous article \\",(0,n.jsx)(e.a,{href:\\"/articles/use-webp-for-better-ux\\",children:\'\\"Using WebP for Better User Experience\\"\'}),`.\\nThere we discussed one of the modern image formats that greatly reduces the size of your images without sacrificing quality.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\'re wondering how to test Redux Observable, I wrote an article \\",(0,n.jsx)(e.a,{href:\\"https://itnext.io/better-marble-test-70c7676a1e2\\",children:\'\\"Writing Better Marble Tests for Redux Observable and TypeScript\\"\'}),` just for you.\\nIt\'s a comprehensive guide to walk you through the thought process.`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\"If you\\\\u2019re a fan of functional programming, check out \\",(0,n.jsx)(e.a,{href:\\"https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d\\",children:\\"this article that I wrote about Transducers\\"}),`.\\nIt\\\\u2019s a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\"Happy coding!\\"})]})}function b(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var x=b;return y(v);})();\\n;return Component;"},"_id":"articles/writing-your-own-typescript-cli.mdx","_raw":{"sourceFilePath":"articles/writing-your-own-typescript-cli.mdx","sourceFileName":"writing-your-own-typescript-cli.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/writing-your-own-typescript-cli"},"type":"Article","readingTime":{"text":"16 min read","minutes":15.54,"time":932400,"words":3108},"wordCount":3110,"slug":"writing-your-own-typescript-cli"}]');[...t,...JSON.parse('[{"title":"Now","publishedAt":"December 28, 2021","description":"Now is inspired by nownownow.com. This page is all about what I am up to now.","cover":"/optimized/raw/social-media.png","category":"self","coverWidth":"1411","coverHeight":"682","body":{"raw":"\\nIt\'s all about what I\'m up to **now**.\\n\\n\uD83D\uDC68‍\uD83D\uDCBB A Free/libre open source software developer.\\n\\n\uD83C\uDF0F I\'m trying out eating seasonal and local produce.\\n\\n\uD83C\uDFCB️‍♂️ I\'m lifting weight again! Making baby steps.\\n\\n✏️ I\'m learning to be a good technical writer.\\n\\n\uD83C\uDF31 I\'m learning [Rust](https://www.rust-lang.org/). It\'s been fun!\\n\\n<br />\\n*Last updated on February 18, 2022.*\\n","code":"var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var r in e)t(n,r,{get:e[r],enumerable:!0})},l=(n,e,r,o)=>{if(e&&typeof e==\\"object\\"||typeof e==\\"function\\")for(let i of h(e))!u.call(n,i)&&i!==r&&t(n,i,{get:()=>e[i],enumerable:!(o=g(e,i))||o.enumerable});return n};var f=(n,e,r)=>(r=n!=null?p(m(n)):{},l(e||!n||!n.__esModule?t(r,\\"default\\",{value:n,enumerable:!0}):r,n)),x=n=>l(t({},\\"__esModule\\",{value:!0}),n);var c=b((A,s)=>{s.exports=_jsx_runtime});var y={};w(y,{default:()=>_,frontmatter:()=>I});var a=f(c()),I={title:\\"Now\\",publishedAt:\\"December 28, 2021\\",description:\\"Now is inspired by nownownow.com. This page is all about what I am up to now.\\",cover:\\"/optimized/raw/social-media.png\\",category:\\"self\\",coverWidth:\\"1411\\",coverHeight:\\"682\\"};function d(n){let e=Object.assign({p:\\"p\\",strong:\\"strong\\",span:\\"span\\",a:\\"a\\",em:\\"em\\"},n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:[\\"It\'s all about what I\'m up to \\",(0,a.jsx)(e.strong,{children:\\"now\\"}),\\".\\"]}),`\\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"man technologist\\",children:\\"\\\\u{1F468}\\\\u200D\\\\u{1F4BB}\\"}),\\" A Free/libre open source software developer.\\"]}),`\\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"globe showing Asia-Australia\\",children:\\"\\\\u{1F30F}\\"}),\\" I\'m trying out eating seasonal and local produce.\\"]}),`\\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"\\",\\"aria-hidden\\":!0,children:\\"\\\\u{1F3CB}\\\\uFE0F\\\\u200D\\\\u2642\\\\uFE0F\\"}),\\" I\'m lifting weight again! Making baby steps.\\"]}),`\\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"pencil\\",children:\\"\\\\u270F\\\\uFE0F\\"}),\\" I\'m learning to be a good technical writer.\\"]}),`\\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.span,{role:\\"img\\",\\"aria-label\\":\\"seedling\\",children:\\"\\\\u{1F331}\\"}),\\" I\'m learning \\",(0,a.jsx)(e.a,{href:\\"https://www.rust-lang.org/\\",children:\\"Rust\\"}),\\". It\'s been fun!\\"]}),`\\n`,(0,a.jsx)(\\"br\\",{}),`\\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.em,{children:\\"Last updated on February 18, 2022.\\"})})]})}function j(n={}){let{wrapper:e}=n.components||{};return e?(0,a.jsx)(e,Object.assign({},n,{children:(0,a.jsx)(d,n)})):d(n)}var _=j;return x(y);})();\\n;return Component;"},"_id":"now.mdx","_raw":{"sourceFilePath":"now.mdx","sourceFileName":"now.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"now"},"type":"OtherPage","slug":"now"}]')];let i=t.map(e=>({date:e.publishedAt,publisher:"",title:e.title,description:e.description,url:"/articles/".concat(e.slug),cover:e.cover,category:e.category,author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:a.Z.github,external:!1,publisherUrl:""})),c=i.concat([{date:"June 22, 2022",publisher:"Department of Product",title:"React Explained for Product Managers",description:"Everything you need to know about the component-oriented library.",url:"https://www.departmentofproduct.com/blog/react-explained-for-product-managers/",cover:"https://www.departmentofproduct.com/wp-content/uploads/2022/06/React-Components-Example.png",category:"Frontend",author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:"https://twitter.com/dawchihliou",external:!0,publisherUrl:"https://www.departmentofproduct.com"},{date:"February 9, 2021",publisher:"trivago tech blog",title:"Rethinking the Next-gen Analytics Web App at trivago",description:"How trivago Frontend Engineering revamped the company's Business Intelligence web application. After almost a decade, we decided to rebuild our in-house Business Intelligence web application to better support the organization. We successfully completed the project because we fundamentally challenged and re-thought all aspects of the project.",url:"https://tech.trivago.com/2021/02/09/rethinking-the-next-gen-analytics-web-app-at-trivago/",cover:"https://tech.trivago.com/img/posts/rethinknextgenanalyticswebappattrivago/image3.png",category:"Frontend",author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:"https://twitter.com/dawchihliou",external:!0,publisherUrl:"https://tech.trivago.com/"},{date:"March 18, 2020",publisher:"Medium",title:"3 Principles to Triumph Your Software Project",description:"Practical experience that shapes billion dollar enterprise. I have been very fortunate to take a part in important topics at trivago. We have brought groundbreaking changes in accommodation search. It was clear that our data-informed approach is the foundation to innovation. I want to share with you our learnings.",url:"https://medium.com/@dawchihliou/3-principles-to-triumph-your-software-project-38cc0951b64f",cover:"",category:"Leadership",author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:"https://medium.com/@dawchihliou",external:!0,publisherUrl:"https://medium.com/"},{date:"November 6, 2019",publisher:"ITNEXT",title:"Writing Better Marble Tests for Redux Observable and TypeScript",description:"Marble testing is a brilliant way to test observables. It focuses on the behaviors of observables over time. The combination of test assertion and marble diagram let us visualize the progression of emitted values over time.",url:"https://itnext.io/better-marble-test-70c7676a1e2",cover:"",category:"Frontend",author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:"https://medium.com/@dawchihliou",external:!0,publisherUrl:"https://itnext.io/"},{date:"October 15, 2018",publisher:"trivago tech blog",title:"JavaScript Workshop with Kyle Simpson",description:"A recap of the 5-day JavaScript journey. It has been a couple of months since Kyle, author of the “You Don’t Know JS” series, visited our trivago headquarters and gave us a wonderful JavaScript workshop. It was such an enjoyable week, being able to meet Kyle in person and walk through his thinking behind the materials.",url:"https://tech.trivago.com/post/2018-10-15-javascript-workshop-with-kyle-simpson/",cover:"https://tech.trivago.com/img/posts/javascript-workshop-with-kyle-simpson/hero.jpg",category:"Engineering Culture",author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:"https://twitter.com/dawchihliou",external:!0,publisherUrl:"https://tech.trivago.com/"},{date:"September 25, 2018",publisher:"Medium",title:"Intuitive Transducer in JavaScript",description:"What is transducing? Simply put, it’s a data transformation process without creating intermediate products. It’s like a pipeline. It’s your data on one end, and the pipeline transforms the data and produce your output on the other end.",url:"https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d",cover:"",category:"JavaScript",author:"Daw-Chih Liou",avatar:"/optimized/raw/portrait-sm.png",social:"https://medium.com/@dawchihliou",external:!0,publisherUrl:"https://medium.com/"}]).sort((e,n)=>Number(new Date(n.date))-Number(new Date(e.date)));var r=c}}]);