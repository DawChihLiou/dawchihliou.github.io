<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/svg" sizes="32x32" href="/favicon.svg"/><link rel="icon" type="image/svg" sizes="16x16" href="/favicon.svg"/><link rel="mask-icon" href="/favicon.svg" color="#ffffff"/><link rel="manifest" href="/site.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="msapplication-TileColor" content="#007cf0"/><meta name="theme-color" content="#ffff"/><title>Easiest Way to Understand Rust Modules Across Multiple Files</title><meta name="description" content="With a real-world example"/><meta name="robots" content="follow, index"/><link rel="canonical" href="https://dawchihliou.github.io/articles/easiest-way-to-understand-rust-modules-across-multiple-files"/><meta itemProp="name" content="Easiest Way to Understand Rust Modules Across Multiple Files"/><meta itemProp="description" content="With a real-world example"/><meta itemProp="image" content="https://dawchihliou.github.io/optimized/articles/rust-module/hero.png"/><meta property="og:title" content="Easiest Way to Understand Rust Modules Across Multiple Files"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dawchihliou.github.io/articles/easiest-way-to-understand-rust-modules-across-multiple-files"/><meta property="og:description" content="With a real-world example"/><meta property="og:image" content="https://dawchihliou.github.io/optimized/articles/rust-module/hero.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="1400"/><meta property="og:image:height" content="600"/><meta property="og:image:alt" content="With a real-world example"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@dawchihliou"/><meta name="twitter:creator" content="@dawchihliou"/><meta name="twitter:title" content="Easiest Way to Understand Rust Modules Across Multiple Files"/><meta name="twitter:description" content="With a real-world example"/><meta name="twitter:image" content="https://dawchihliou.github.io/optimized/articles/rust-module/hero.webp"/><meta property="article:published_time" content="2022-11-17T00:00:00.000Z"/><meta property="article:section" content="Article Section"/><meta property="article:tag" content="Article Tag"/><meta name="next-head-count" content="34"/><link rel="preload" href="/_next/static/css/f4214c3b71874d65.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f4214c3b71874d65.css" data-n-g=""/><link rel="preload" href="/_next/static/css/54ba867c7255694d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/54ba867c7255694d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-010ff0b6bbe5ac8f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5784eb5f9f6cd23e.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5Bslug%5D-9a8f919cad4c24e6.js" defer=""></script><script src="/_next/static/D-X5pHW8_vz6tc-oPN55J/_buildManifest.js" defer=""></script><script src="/_next/static/D-X5pHW8_vz6tc-oPN55J/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div id="outer-container"><header><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s"></div><div><div class="bm-burger-button" style="z-index:1000"><button id="react-burger-menu-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="bm-icon" style="width:100%;height:100%" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></div><div id="" class="bm-menu-wrap" style="position:fixed;right:inherit;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(-100%, 0, 0);-ms-transform:translate3d(-100%, 0, 0);-o-transform:translate3d(-100%, 0, 0);-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);transition:all 0.5s" aria-hidden="true"><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:auto"><nav class="bm-item-list" style="height:100%"><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/"><button class="Nav_button__YJwKE" tabindex="-1">Home</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/articles"><button class="Nav_button__YJwKE" tabindex="-1">Articles</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/work"><button class="Nav_button__YJwKE" tabindex="-1">Work</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/now"><button class="Nav_button__YJwKE" tabindex="-1">Now</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/expertise"><button class="Nav_button__YJwKE" tabindex="-1">Expertise</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/contact"><button class="Nav_button__YJwKE" tabindex="-1">Contact</button></a><span class="bm-item Nav_pusher__93Gc6" style="display:block" tabindex="-1"></span><span class="bm-item Nav_divider__QD8Pt" style="display:block" tabindex="-1"></span><div class="bm-item Nav_profile__Kf2nU" style="display:block" tabindex="-1"><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Linkedin profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M20.45175,20.45025 L16.89225,20.45025 L16.89225,14.88075 C16.89225,13.5525 16.86975,11.844 15.04275,11.844 C13.191,11.844 12.90825,13.2915 12.90825,14.7855 L12.90825,20.45025 L9.3525,20.45025 L9.3525,8.997 L12.765,8.997 L12.765,10.563 L12.81375,10.563 C13.2885,9.66225 14.4495,8.71275 16.18125,8.71275 C19.78575,8.71275 20.45175,11.08425 20.45175,14.169 L20.45175,20.45025 Z M5.33925,7.4325 C4.1955,7.4325 3.27375,6.50775 3.27375,5.36775 C3.27375,4.2285 4.1955,3.30375 5.33925,3.30375 C6.47775,3.30375 7.4025,4.2285 7.4025,5.36775 C7.4025,6.50775 6.47775,7.4325 5.33925,7.4325 L5.33925,7.4325 Z M7.11975,20.45025 L3.5565,20.45025 L3.5565,8.997 L7.11975,8.997 L7.11975,20.45025 Z M23.00025,0 L1.0005,0 C0.44775,0 0,0.44775 0,0.99975 L0,22.9995 C0,23.55225 0.44775,24 1.0005,24 L23.00025,24 C23.55225,24 24,23.55225 24,22.9995 L24,0.99975 C24,0.44775 23.55225,0 23.00025,0 L23.00025,0 Z"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou" aria-label="Link to Daw-Chih&#x27;s GitHub profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou" aria-label="Link to Daw-Chih&#x27;s Medium profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2.84593838,5.88685595 C2.87575654,5.59224254 2.76340763,5.30104995 2.54341737,5.10276397 L0.302521008,2.4032473 L0.302521008,2 L7.2605042,2 L12.6386555,13.7949836 L17.3669469,2 L24,2 L24,2.4032473 L22.0840336,4.2402628 C21.9188563,4.36617057 21.8369199,4.57310892 21.8711485,4.77792587 L21.8711485,18.2755093 C21.8369199,18.4803262 21.9188563,18.6872645 22.0840336,18.8131723 L23.9551821,20.6501878 L23.9551821,21.0534351 L14.5434174,21.0534351 L14.5434174,20.6501878 L16.4817928,18.7683671 C16.6722689,18.5779447 16.6722689,18.5219382 16.6722689,18.2307041 L16.6722689,7.32062416 L11.2829132,21.0086299 L10.5546219,21.0086299 L4.28011204,7.32062416 L4.28011204,16.4945003 C4.22779746,16.8801958 4.35589372,17.2685069 4.62745097,17.5474239 L7.14845938,20.6053826 L7.14845938,21.0086299 L0,21.0086299 L0,20.6053826 L2.5210084,17.5474239 C2.79058848,17.2680445 2.91121535,16.8771576 2.84593838,16.4945003 L2.84593838,5.88685595 Z"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/u/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Hackernoon profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M5.701 0v6.223H8.85V4.654h1.576v7.842H12V4.654h1.574v1.569h3.15V0zm11.024 6.223v3.136h1.574V6.223zm1.574 3.136v4.705h1.576v-1.568h1.574v-1.568h-1.574V9.359zm0 4.705h-1.574v3.137h1.574zm-1.574 3.137h-3.15v1.569H8.85V17.2H5.7V24h11.024zm-11.024 0v-3.137H4.125v3.137zm-1.576-3.137V9.36H2.551v4.705zm0-4.705h1.576V6.223H4.125Z"></path></svg><span hidden="">Link to Daw-Chih&#x27;s Hacker Noon profile</span></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Twitter profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M24,4.3086 C23.117,4.7006 22.168,4.9646 21.172,5.0836 C22.188,4.4746 22.969,3.5096 23.337,2.3596 C22.386,2.9246 21.332,3.3336 20.21,3.5556 C19.312,2.5976 18.032,1.9996 16.616,1.9996 C13.897,1.9996 11.692,4.2046 11.692,6.9236 C11.692,7.3096 11.736,7.6856 11.82,8.0456 C7.728,7.8406 4.099,5.8806 1.671,2.9006 C1.247,3.6286 1.004,4.4736 1.004,5.3766 C1.004,7.0846 1.873,8.5926 3.195,9.4756 C2.388,9.4486 1.628,9.2276 0.964,8.8596 L0.964,8.9206 C0.964,11.3066 2.661,13.2966 4.914,13.7486 C4.501,13.8626 4.065,13.9216 3.617,13.9216 C3.299,13.9216 2.991,13.8906 2.69,13.8336 C3.317,15.7896 5.135,17.2136 7.29,17.2536 C5.604,18.5736 3.481,19.3606 1.175,19.3606 C0.777,19.3606 0.385,19.3376 0,19.2926 C2.179,20.6886 4.767,21.5046 7.548,21.5046 C16.605,21.5046 21.557,14.0016 21.557,7.4946 C21.557,7.2816 21.552,7.0696 21.543,6.8586 C22.505,6.1636 23.34,5.2966 24,4.3086"></path></svg></a></div><div class="DarkmodeSwitch_container__uFGHQ" tabindex="-1"><div class="DarkmodeSwitch_wrap__e71_4"></div></div></nav></div><div><div class="bm-cross-button" style="position:absolute;width:24px;height:24px;right:8px;top:8px"><button id="react-burger-cross-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="bm-cross" style="width:100%;height:100%" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div></div></div></header><div class="Menubar_menubar__gvU4b"><a class="styles_anchor__g18qA Menubar_hireMe__zuAig" href="/contact"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>Hire Me</a><div class="DarkmodeSwitch_container__uFGHQ" tabindex="0"><div class="DarkmodeSwitch_wrap__e71_4"></div></div><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou" aria-label="See more Daw-Chih&#x27;s work on GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a></div><div id="page-wrap"><article><div class="Article_container__q__L3"><div class="Article_wrap__LZypL"><h1>Easiest Way to Understand Rust Modules Across Multiple Files</h1><div class="Article_info__bOKys"><div class="Article_author__grS8U"><img alt="Daw-Chih Liou" src="/optimized/raw/portrait-sm.webp" loading="lazy"/><p>Daw-Chih Liou</p></div><p>Nov 17, 2022<!-- --> Â· 8 min read</p></div><img alt="Easiest Way to Understand Rust Modules Across Multiple Files" src="/optimized/articles/rust-module/hero.webp" width="100%" class="rounded centered" loading="lazy"/><div class="article-content"><h2 id="tldr"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#tldr"><span class="icon icon-link"></span></a>TL;DR</h2>
<ul>
<li><span role="img" aria-label="light bulb">ðŸ’¡</span> Easy and simple explanation of Rust&#x27;s modules across different files.</li>
<li><span role="img" aria-label="" aria-hidden="true">ðŸ¤¿</span> We&#x27;ll deep dive into a real-world example to explore the module system.</li>
<li><span role="img" aria-label="chart increasing">ðŸ“ˆ</span> Tons of diagrams to help you understand.</li>
</ul>
<hr/>
<p>This article is also available on</p>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://levelup.gitconnected.com/easiest-way-to-understand-rust-modules-across-multiple-files-234b5018cbfd">Level Up Coding</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/easily-understand-rust-modules-across-multiple-files-with-this-guide">Hacker Noon</a></li>
</ul>
<p>Feel free to read it on your favorite platform<span role="img" aria-label="sparkles">âœ¨</span></p>
<hr/>
<p>The module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.</p>
<p>Let&#x27;s go.</p>
<h2 id="rust-modules-across-files"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#rust-modules-across-files"><span class="icon icon-link"></span></a>Rust Modules Across Files</h2>
<p>Rust requires the developers to manually build module trees. The way to do it is by declaring modules with the <strong>mod</strong> keyword.</p>
<p>The module tree starts with the crate root, usually <em>src/lib.rs</em> for a library crate or <em>src/main.rs</em> for a binary crate. The Rust compiler will first look in the crate root for modules to compile.</p>
<p>Let&#x27;s say you want to import a module &quot;a&quot; in a binary crate, you can declare the module like this:</p>
<div class="rehype-code-title">main.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">a</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* do amazing things */</span> <span class="token punctuation">}</span>
</span></code></pre>
<p>The compiler will look for the module in the <em>src</em> directory in the following places:</p>
<p>In <em>src/a.rs</em></p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">.</span>
</span><span class="code-line">â”œâ”€â”€ Cargo.lock
</span><span class="code-line">â”œâ”€â”€ Cargo.toml
</span><span class="code-line">â””â”€â”€ src
</span><span class="code-line"> Â Â  â”œâ”€â”€ a.rs
</span><span class="code-line"> Â Â  â””â”€â”€ main.rs
</span></code></pre>
<p>Or in <em>src/a/mod.rs</em></p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">.</span>
</span><span class="code-line">â”œâ”€â”€ Cargo.lock
</span><span class="code-line">â”œâ”€â”€ Cargo.toml
</span><span class="code-line">â””â”€â”€ src
</span><span class="code-line">    â”œâ”€â”€ a
</span><span class="code-line">    â”‚   â””â”€â”€ mod.rs
</span><span class="code-line">    â””â”€â”€ main.rs
</span></code></pre>
<p>By declaring <strong>mod a</strong> in <em>main.rs</em>, you&#x27;ve built a module tree like this:</p>
<img src="/optimized/articles/rust-module/tree-a.webp" alt="Initial Rust module tree" width="100%" class="rounded centered" loading="lazy"/>
<h2 id="rust-submodules-across-files"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#rust-submodules-across-files"><span class="icon icon-link"></span></a>Rust Submodules Across Files</h2>
<p>Within a module, you can create submodules to further organize your code. Let&#x27;s say you want to declare module &quot;b&quot; and &quot;c&quot; in module &quot;a&quot;:</p>
<div class="rehype-code-title">/src/a/mod.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">b</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">c</span><span class="token punctuation">;</span>
</span></code></pre>
<p>The compiler will look for the submodules in <em>src/a</em> directory:</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">.</span>
</span><span class="code-line">â”œâ”€â”€ Cargo.lock
</span><span class="code-line">â”œâ”€â”€ Cargo.toml
</span><span class="code-line">â””â”€â”€ src
</span><span class="code-line">    â”œâ”€â”€ a
</span><span class="code-line">    â”‚   â”œâ”€â”€ b.rs
</span><span class="code-line">    â”‚   â”œâ”€â”€ c.rs
</span><span class="code-line">    â”‚   â””â”€â”€ mod.rs
</span><span class="code-line">    â””â”€â”€ main.rs
</span></code></pre>
<p>Now you&#x27;ve build a tree like this:</p>
<img src="/optimized/articles/rust-module/tree-abc.webp" alt="Rust module tree with submodules" width="100%" class="rounded centered" loading="lazy"/>
<h2 id="visibility-with-pub"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#visibility-with-pub"><span class="icon icon-link"></span></a>Visibility with &quot;pub&quot;</h2>
<p>By default, all the <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/items.html">items</a> in a module are private. They are only visible by the items in the same module.</p>
<div class="rehype-code-title">src/a/mod.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">b</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">c</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">fn</span> <span class="token function-definition function">do_a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// only the other functions in module a can use it</span>
</span><span class="code-line">             <span class="token comment">// it&#x27;s not visible to main.rs</span>
</span></code></pre>
<p>In order for its parent modules to have access to the function <em>do_a</em>, we need to add the key word <strong>pub</strong>.</p>
<div class="rehype-code-title">src/a/mod.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">do_a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// now it&#x27;s visible to main.rs</span>
</span></code></pre>
<p>We can access <em>do_a</em> using the <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/paths.html">path qualifier <em>::</em></a>.</p>
<div class="rehype-code-title">src/main.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">a</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token namespace">a<span class="token punctuation">::</span></span><span class="token function">do_a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>We can use the same pattern for submodules.</p>
<div class="rehype-code-title">src/a/b.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">do_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// visible to module &quot;a&quot; and all the submodules of module &quot;a&quot;</span>
</span></code></pre>
<p>By adding <strong>pub</strong> to <em>do_b</em>, the function now is accessible to module &quot;a&quot;.</p>
<div class="rehype-code-title">src/a/mod.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">b</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">c</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">do_a</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token namespace">b<span class="token punctuation">::</span></span><span class="token function">do_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><em>do_b</em> is also accessible to the submodules of module &quot;c&quot;. You can access it with either the absolute or relative path.</p>
<div class="rehype-code-title">src/a/c.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">do_c</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>a<span class="token punctuation">::</span>b<span class="token punctuation">::</span></span><span class="token function">do_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// absolute path</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>b<span class="token punctuation">::</span></span><span class="token function">do_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// relative path</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2 id="re-exporting-items"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#re-exporting-items"><span class="icon icon-link"></span></a>Re-exporting Items</h2>
<p>An item of a submodule is not accessible to a non-parent module. For example, we can try to access <em>do_b</em> in <em>main.rs</em></p>
<div class="rehype-code-title">src/main.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span><span class="token punctuation">:</span>a<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token namespace">a<span class="token punctuation">::</span>b<span class="token punctuation">::</span></span><span class="token function">do_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// ^^^^ function `do_b` is private</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>You&#x27;ll see an error message saying <em>do_b</em> is private. That&#x27;s because <em>do_b</em> is only accessible within module &quot;a&quot; so far. To make it visible to the crate root, We need to re-export it by adding <strong>pub</strong> to the module &quot;b&quot; declaration from module &quot;a&quot;.</p>
<div class="rehype-code-title">src/a/mod.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">b</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token comment">// --snip--</span>
</span></code></pre>
<h2 id="the-use-declaration"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#the-use-declaration"><span class="icon icon-link"></span></a>The &quot;use&quot; Declaration</h2>
<p>The <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/items/use-declarations.html"><strong>use</strong></a> declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule &quot;c&quot;:</p>
<div class="rehype-code-title">src/a/c.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>a<span class="token punctuation">::</span>b<span class="token punctuation">::</span></span>do_b<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">do_c</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">do_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>It creates a local name binding to its path for <em>do_b</em>. <strong>use</strong> is very useful for long paths.</p>
<h2 id="a-real-world-example"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#a-real-world-example"><span class="icon icon-link"></span></a>A Real World Example</h2>
<p>To demonstrate the Rust&#x27;s module system, I created a simple CLI called <strong>affme</strong>, short for &quot;affirm me&quot;.</p>
<img src="/articles/rust-module/demo.gif" alt="affme demo" width="100%" class="rounded centered" loading="lazy"/>
<p><strong>affme</strong> is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.</p>
<blockquote>
<p>The demo is <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/affme">available on GitHub</a>. Feel free to take a look at the repo and try it out<span role="img" aria-label="sparkles">âœ¨</span></p>
</blockquote>
<p>The code design is straightforward:</p>
<img src="/optimized/articles/rust-module/program-design.webp" alt="affme code design" width="100%" class="rounded centered" loading="lazy"/>
<p>In the &quot;format&quot; block,</p>
<ul>
<li>It takes a user input,</li>
<li>concatenates the input with a random affirmation and a random emoji,</li>
<li>applies a random font color to the concatenated affirmation,</li>
<li>and finally outputs the affirmation.</li>
</ul>
<p>To showcase the module system across files, I design the module tree as following:</p>
<img src="/optimized/articles/rust-module/module-tree.webp" alt="affme module tree design" width="100%" class="rounded centered" loading="lazy"/>
<p>A few things worth mentioning:</p>
<ul>
<li>This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.</li>
<li>In the library crate root <em>src/lib.rs</em>, it accesses functions from the <em>affirmation</em> and <em>formatter</em> module.</li>
<li>The <em>affirmation</em> module and both of the submodules in the <em>formatter</em> module are using the same function in the <em>random</em> module to randomly pick an item. Because the <em>affirmation</em> module and <em>formatter</em> submodules are in different branches of the tree, we need to declare the <em>random</em> module in the common ancestor of the module tree.</li>
</ul>
<p>In the file system, it looks like this:</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">.</span>
</span><span class="code-line">â”œâ”€â”€ Cargo.lock
</span><span class="code-line">â”œâ”€â”€ Cargo.toml
</span><span class="code-line">â”œâ”€â”€ src
</span><span class="code-line">â”‚Â Â  â”œâ”€â”€ affirmation.rs
</span><span class="code-line">â”‚Â Â  â”œâ”€â”€ formatter
</span><span class="code-line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ color.rs
</span><span class="code-line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ emoji.rs
</span><span class="code-line">â”‚Â Â  â”‚Â Â  â””â”€â”€ mod.rs
</span><span class="code-line">â”‚Â Â  â”œâ”€â”€ lib.rs
</span><span class="code-line">â”‚Â Â  â”œâ”€â”€ main.rs
</span><span class="code-line">â”‚Â Â  â””â”€â”€ random.rs
</span><span class="code-line">â””â”€â”€ target
</span></code></pre>
<p>Let&#x27;s dive into the library crate root to see how the code is structured.</p>
<div class="rehype-code-title">src/lib.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">affirmation</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">formatter</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">random</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">use</span> <span class="token namespace">affirmation<span class="token punctuation">::</span></span><span class="token class-name">Affirmation</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">use</span> <span class="token namespace">formatter<span class="token punctuation">::</span></span>format<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">affirm</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">let</span> affirmation <span class="token operator">=</span> <span class="token class-name">Affirmation</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">format</span><span class="token punctuation">(</span>affirmation<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Here you can see the module declarations on the top. You can also find the <em>use</em> declarations to create the local name binding for <em>Affirmation</em> and <em>format</em>.</p>
<p>The random module is straightforward:</p>
<div class="rehype-code-title">src/random.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">use</span> <span class="token namespace">rand<span class="token punctuation">::</span></span><span class="token class-name">Rng</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">pick</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token class-name">Sized</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>items<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&#x27;a</span> <span class="token class-name">T</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&#x27;a</span> <span class="token class-name">T</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">let</span> random_index<span class="token punctuation">:</span> <span class="token keyword">usize</span> <span class="token operator">=</span> <span class="token namespace">rand<span class="token punctuation">::</span></span><span class="token function">thread_rng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gen_range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">..</span>items<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    items<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>random_index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>It has a public <em>pick</em> function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let&#x27;s take a look at <em>affirmation</em> module as an example:</p>
<div class="rehype-code-title">src/affirmation.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>random</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token attribute attr-name">#[derive(Debug)]</span>
</span><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Affirmation</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    affirmations<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&#x27;a</span> <span class="token keyword">str</span><span class="token punctuation">;</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">impl</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a</span><span class="token operator">&gt;</span> <span class="token class-name">Affirmation</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">let</span> affirmations <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">            <span class="token string">&quot;You&#x27;re beautiful&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;You&#x27;re awesome&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;You&#x27;re wonderful&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;You&#x27;ve got this&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;You can do all things&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;Go get it&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">Affirmation</span> <span class="token punctuation">{</span> affirmations <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">random</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">&#x27;a</span> <span class="token keyword">str</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token namespace">random<span class="token punctuation">::</span></span><span class="token function">pick</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>affirmations<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>You can see the <em>use</em> declaration for the <em>random</em> module. The <em>affirmation</em> module is able to access the <em>random</em> module because the <em>random</em> module was declared in the library crate root. I use the <em>pub</em> keyword on the <em>Affirmation</em> struct and its functions so that the crate root has visibility over them.</p>
<p>You can find the same coding pattern in the <em>emoji</em> and <em>color</em> submodule.</p>
<p>To bring it all together, let&#x27;s take a look at the <em>format</em> module.</p>
<div class="rehype-code-title">src/formatter/mod.rs</div><pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">color</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">emoji</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">use</span> <span class="token namespace">color<span class="token punctuation">::</span></span><span class="token class-name">Color</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">use</span> <span class="token namespace">colored<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">use</span> <span class="token namespace">emoji<span class="token punctuation">::</span></span><span class="token class-name">Emoji</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">format</span><span class="token punctuation">(</span>affirmation<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">let</span> emoji <span class="token operator">=</span> <span class="token class-name">Emoji</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token class-name">Color</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">let</span> phrase <span class="token operator">=</span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;{}, {} {}&quot;</span><span class="token punctuation">,</span> affirmation<span class="token punctuation">,</span> name<span class="token punctuation">,</span> emoji<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">bold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token macro property">format!</span><span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token string">&quot;{}\n{}\n{}\n{}\n{}&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string">&quot;*&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>phrase<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">magenta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;*{}*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>phrase<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">magenta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;    <span role="img" aria-label="pencil">âœï¸</span>  ...{}  &quot;</span><span class="token punctuation">,</span> phrase<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;*{}*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>phrase<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">magenta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string">&quot;*&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>phrase<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">magenta</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>It brings <em>color</em> and <em>emoji</em> submodules in scope so we can concatenate the full affirmation with random emoji and random font color.</p>
<h2 id="final-thoughts"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#final-thoughts"><span class="icon icon-link"></span></a>Final Thoughts</h2>
<p>Rust Modules across multiple files is a little different from other languages but once you understand <strong>mod</strong>, <strong>use</strong>, and <strong>pub</strong>, the module design becomes easier and intentional.</p>
<p><strong>Rust Module Cheat Sheet</strong></p>
<ul>
<li>A module tree starts from the crate root.</li>
<li>Use <strong>mod</strong> to build your tree with modules and submodules.</li>
<li>Use <strong>pub</strong> to make module items visible to the parent module.</li>
<li>You can re-export with <strong>pub mod</strong> or <strong>pub use</strong>.</li>
</ul>
<p><strong>Special Thanks</strong></p>
<p>Thanks <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/liangchunn">Liang Chun</a> for reviewing the example code in <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/affme">affme</a>.</p>
<h2 id="references"><a class="styles_anchor__g18qA anchor" href="/articles/easiest-way-to-understand-rust-modules-across-multiple-files#references"><span class="icon icon-link"></span></a>References</h2>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html">Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/items/use-declarations.html">Book: Use declarations - The Rust Reference</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/items.html">Book: Items - The Rust Reference</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/items/modules.html">Book: Modules - The Rust Reference</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://doc.rust-lang.org/reference/paths.html">Book: Paths - The Rust Reference</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://spin.atomicobject.com/2022/01/24/rust-module-system/">Article: How to Use Rust Modules Across Different Files - Casey Falkowski</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/affme">GitHub: affme repository</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/liangchunn">GitHub: Liang Chun&#x27;s profile</a></li>
</ul>
<hr/>
<p>Here you have it! Thanks for reading through<span role="img" aria-label="raising hands">ðŸ™Œ</span>
If you find this article useful, please share it to help more people in their engineering journey.</p>
<p><span role="img" aria-label="bird">ðŸ¦</span> Feel free to connect with me on <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou">twitter</a>!</p>
<p>â­ Ready for the next article? <span role="img" aria-label="backhand index pointing right">ðŸ‘‰</span> <a class="styles_anchor__g18qA undefined" href="/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery"><strong>Ex-Principal Engineer&#x27;s Guide to Design Thinking and Continuous Delivery</strong></a></p>
<p>Happy coding!</p></div><article class="Author_wrap__s8DeE"><img src="/optimized/raw/portrait-sm.webp" alt="Daw-Chih Liou" class="Author_avatar__j6KIn" loading="lazy"/><div><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://dawchihliou.github.io">Daw-Chih Liou</a><p>Daw-Chih is a software engineer, UX advocate, and creator who is dedicated to Web engineering. His background in Human Centered Computing has led him to work with startups and public companies across North America, Asia, and Europe. He is passionate about meeting business trajectory with user journey and utilizing engineering architecture and performance monitoring to provide optimal user experience.</p></div></article></div></div></article><footer class="Footer_footer__1IwEk"><div class="Footer_wrap__FVCTX"><div class="Footer_resources__fG_vu"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ðŸ’š</span>This site is built with</p><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://nextjs.org">Next.js</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://react-icons.github.io/react-icons">React Icons</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://mdxjs.com">MDX</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://unifiedjs.com">unified</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/contentlayerdev/contentlayer">Contentlayer</a></div><div class="Footer_contact__9GJn6"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ðŸ¦„</span>Where to find me</p><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou">Linkedin</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou">GitHub</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou">Twitter</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou">Medium</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/u/dawchihliou">Hacker Noon</a><a class="styles_anchor__g18qA undefined" href="/rss.xml">RSS Feed <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div><div class="Footer_sitemap__92ono"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ðŸ—º</span>Sitemap</p><a class="styles_anchor__g18qA undefined" href="/">Home</a><a class="styles_anchor__g18qA undefined" href="/articles">Articles</a><a class="styles_anchor__g18qA undefined" href="/work">Work</a><a class="styles_anchor__g18qA undefined" href="/now">Now</a><a class="styles_anchor__g18qA undefined" href="/expertise">Expertise</a><a class="styles_anchor__g18qA undefined" href="/contact">Contact</a></div></div><div class="Footer_copyright__vZZRL">Â© <!-- -->2023<!-- --> <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou">Daw-Chih Liou</a></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Easiest Way to Understand Rust Modules Across Multiple Files","publishedAt":"Nov 17, 2022","description":"With a real-world example","cover":"/optimized/articles/rust-module/hero.webp","category":"Rust","coverWidth":"1400","coverHeight":"600","body":{"raw":"\n## TL;DR\n\n- ðŸ’¡ Easy and simple explanation of Rust's modules across different files.\n- ðŸ¤¿ We'll deep dive into a real-world example to explore the module system.\n- ðŸ“ˆ Tons of diagrams to help you understand.\n\n---\n\nThis article is also available on\n\n- [Level Up Coding](https://levelup.gitconnected.com/easiest-way-to-understand-rust-modules-across-multiple-files-234b5018cbfd)\n- [Hacker Noon](https://hackernoon.com/easily-understand-rust-modules-across-multiple-files-with-this-guide)\n\nFeel free to read it on your favorite platformâœ¨\n\n---\n\nThe module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.\n\nLet's go.\n\n## Rust Modules Across Files\n\nRust requires the developers to manually build module trees. The way to do it is by declaring modules with the **mod** keyword.\n\nThe module tree starts with the crate root, usually _src/lib.rs_ for a library crate or _src/main.rs_ for a binary crate. The Rust compiler will first look in the crate root for modules to compile.\n\nLet's say you want to import a module \"a\" in a binary crate, you can declare the module like this:\n\n```rust:main.rs\nmod a;\n\nfn main() { /* do amazing things */ }\n```\n\nThe compiler will look for the module in the _src_ directory in the following places:\n\nIn _src/a.rs_\n\n```bash\n.\nâ”œâ”€â”€ Cargo.lock\nâ”œâ”€â”€ Cargo.toml\nâ””â”€â”€ src\n Â Â  â”œâ”€â”€ a.rs\n Â Â  â””â”€â”€ main.rs\n```\n\nOr in _src/a/mod.rs_\n\n```bash\n.\nâ”œâ”€â”€ Cargo.lock\nâ”œâ”€â”€ Cargo.toml\nâ””â”€â”€ src\n    â”œâ”€â”€ a\n    â”‚   â””â”€â”€ mod.rs\n    â””â”€â”€ main.rs\n```\n\nBy declaring **mod a** in _main.rs_, you've built a module tree like this:\n\n\u003cimg\n  src=\"/optimized/articles/rust-module/tree-a.webp\"\n  alt=\"Initial Rust module tree\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\n## Rust Submodules Across Files\n\nWithin a module, you can create submodules to further organize your code. Let's say you want to declare module \"b\" and \"c\" in module \"a\":\n\n```rust:/src/a/mod.rs\nmod b;\nmod c;\n```\n\nThe compiler will look for the submodules in _src/a_ directory:\n\n```bash\n.\nâ”œâ”€â”€ Cargo.lock\nâ”œâ”€â”€ Cargo.toml\nâ””â”€â”€ src\n    â”œâ”€â”€ a\n    â”‚   â”œâ”€â”€ b.rs\n    â”‚   â”œâ”€â”€ c.rs\n    â”‚   â””â”€â”€ mod.rs\n    â””â”€â”€ main.rs\n```\n\nNow you've build a tree like this:\n\n\u003cimg\n  src=\"/optimized/articles/rust-module/tree-abc.webp\"\n  alt=\"Rust module tree with submodules\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\n## Visibility with \"pub\"\n\nBy default, all the [items][3] in a module are private. They are only visible by the items in the same module.\n\n```rust:src/a/mod.rs\nmod b;\nmod c;\n\nfn do_a() {} // only the other functions in module a can use it\n             // it's not visible to main.rs\n```\n\nIn order for its parent modules to have access to the function _do_a_, we need to add the key word **pub**.\n\n```rust:src/a/mod.rs\npub fn do_a() {} // now it's visible to main.rs\n```\n\nWe can access _do_a_ using the [path qualifier _::_][5].\n\n```rust:src/main.rs\nmod a;\n\nfn main() {\n    a::do_a();\n}\n```\n\nWe can use the same pattern for submodules.\n\n```rust:src/a/b.rs\npub fn do_b() {} // visible to module \"a\" and all the submodules of module \"a\"\n```\n\nBy adding **pub** to _do_b_, the function now is accessible to module \"a\".\n\n```rust:src/a/mod.rs\nmod b;\nmod c;\n\npub fn do_a {\n    b::do_b();\n}\n```\n\n_do_b_ is also accessible to the submodules of module \"c\". You can access it with either the absolute or relative path.\n\n```rust:src/a/c.rs\npub fn do_c {\n    crate::a::b::do_b(); // absolute path\n    super::b::do_b(); // relative path\n}\n```\n\n## Re-exporting Items\n\nAn item of a submodule is not accessible to a non-parent module. For example, we can try to access _do_b_ in _main.rs_\n\n```rust:src/main.rs\nmod:a;\n\nfn main() {\n    a::b::do_b();\n    // ^^^^ function `do_b` is private\n}\n```\n\nYou'll see an error message saying _do_b_ is private. That's because _do_b_ is only accessible within module \"a\" so far. To make it visible to the crate root, We need to re-export it by adding **pub** to the module \"b\" declaration from module \"a\".\n\n```rust:src/a/mod.rs\npub mod b;\n// --snip--\n```\n\n## The \"use\" Declaration\n\nThe [**use**][2] declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule \"c\":\n\n```rust:src/a/c.rs\nuse crate::a::b::do_b;\n\npub fn do_c {\n    do_b();\n}\n```\n\nIt creates a local name binding to its path for _do_b_. **use** is very useful for long paths.\n\n## A Real World Example\n\nTo demonstrate the Rust's module system, I created a simple CLI called **affme**, short for \"affirm me\".\n\n\u003cimg\n  src=\"/articles/rust-module/demo.gif\"\n  alt=\"affme demo\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\n**affme** is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.\n\n\u003e The demo is [available on GitHub][7]. Feel free to take a look at the repo and try it outâœ¨\n\nThe code design is straightforward:\n\n\u003cimg\n  src=\"/optimized/articles/rust-module/program-design.webp\"\n  alt=\"affme code design\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\nIn the \"format\" block,\n\n- It takes a user input,\n- concatenates the input with a random affirmation and a random emoji,\n- applies a random font color to the concatenated affirmation,\n- and finally outputs the affirmation.\n\nTo showcase the module system across files, I design the module tree as following:\n\n\u003cimg\n  src=\"/optimized/articles/rust-module/module-tree.webp\"\n  alt=\"affme module tree design\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\nA few things worth mentioning:\n\n- This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.\n- In the library crate root _src/lib.rs_, it accesses functions from the _affirmation_ and _formatter_ module.\n- The _affirmation_ module and both of the submodules in the _formatter_ module are using the same function in the _random_ module to randomly pick an item. Because the _affirmation_ module and _formatter_ submodules are in different branches of the tree, we need to declare the _random_ module in the common ancestor of the module tree.\n\nIn the file system, it looks like this:\n\n```bash\n.\nâ”œâ”€â”€ Cargo.lock\nâ”œâ”€â”€ Cargo.toml\nâ”œâ”€â”€ src\nâ”‚Â Â  â”œâ”€â”€ affirmation.rs\nâ”‚Â Â  â”œâ”€â”€ formatter\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ color.rs\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ emoji.rs\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ mod.rs\nâ”‚Â Â  â”œâ”€â”€ lib.rs\nâ”‚Â Â  â”œâ”€â”€ main.rs\nâ”‚Â Â  â””â”€â”€ random.rs\nâ””â”€â”€ target\n```\n\nLet's dive into the library crate root to see how the code is structured.\n\n```rust:src/lib.rs\nmod affirmation;\nmod formatter;\nmod random;\n\nuse affirmation::Affirmation;\nuse formatter::format;\n\npub fn affirm(name: \u0026str) -\u003e String {\n    let affirmation = Affirmation::new().random();\n    format(affirmation, name)\n}\n```\n\nHere you can see the module declarations on the top. You can also find the _use_ declarations to create the local name binding for _Affirmation_ and _format_.\n\nThe random module is straightforward:\n\n```rust:src/random.rs\nuse rand::Rng;\n\npub fn pick\u003c'a, T: ?Sized\u003e(items: \u0026[\u0026'a T]) -\u003e \u0026'a T {\n    let random_index: usize = rand::thread_rng().gen_range(0..items.len());\n    items.get(random_index).unwrap()\n}\n```\n\nIt has a public _pick_ function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let's take a look at _affirmation_ module as an example:\n\n```rust:src/affirmation.rs\nuse crate::random;\n\n#[derive(Debug)]\npub struct Affirmation\u003c'a\u003e {\n    affirmations: [\u0026'a str; 6],\n}\n\nimpl\u003c'a\u003e Affirmation\u003c'a\u003e {\n    pub fn new() -\u003e Self {\n        let affirmations = [\n            \"You're beautiful\",\n            \"You're awesome\",\n            \"You're wonderful\",\n            \"You've got this\",\n            \"You can do all things\",\n            \"Go get it\",\n        ];\n        Affirmation { affirmations }\n    }\n\n    pub fn random(\u0026self) -\u003e \u0026'a str {\n        random::pick(\u0026self.affirmations)\n    }\n}\n```\n\nYou can see the _use_ declaration for the _random_ module. The _affirmation_ module is able to access the _random_ module because the _random_ module was declared in the library crate root. I use the _pub_ keyword on the _Affirmation_ struct and its functions so that the crate root has visibility over them.\n\nYou can find the same coding pattern in the _emoji_ and _color_ submodule.\n\nTo bring it all together, let's take a look at the _format_ module.\n\n```rust:src/formatter/mod.rs\nmod color;\nmod emoji;\n\nuse color::Color;\nuse colored::*;\nuse emoji::Emoji;\n\npub fn format(affirmation: \u0026str, name: \u0026str) -\u003e String {\n    let emoji = Emoji::new();\n    let color = Color::new();\n\n    let phrase = format!(\"{}, {} {}\", affirmation, name, emoji.random())\n        .color(color.random())\n        .bold()\n        .to_string();\n\n    format!(\n        \"{}\\n{}\\n{}\\n{}\\n{}\",\n        \"*\".repeat(phrase.len() + 2).magenta(),\n        format!(\"*{}*\", \" \".repeat(phrase.len())).magenta(),\n        format!(\"    âœï¸  ...{}  \", phrase,),\n        format!(\"*{}*\", \" \".repeat(phrase.len())).magenta(),\n        \"*\".repeat(phrase.len() + 2).magenta()\n    )\n}\n```\n\nIt brings _color_ and _emoji_ submodules in scope so we can concatenate the full affirmation with random emoji and random font color.\n\n## Final Thoughts\n\nRust Modules across multiple files is a little different from other languages but once you understand **mod**, **use**, and **pub**, the module design becomes easier and intentional.\n\n**Rust Module Cheat Sheet**\n\n- A module tree starts from the crate root.\n- Use **mod** to build your tree with modules and submodules.\n- Use **pub** to make module items visible to the parent module.\n- You can re-export with **pub mod** or **pub use**.\n\n**Special Thanks**\n\nThanks [Liang Chun][8] for reviewing the example code in [affme][7].\n\n## References\n\n- [Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language][1]\n- [Book: Use declarations - The Rust Reference][2]\n- [Book: Items - The Rust Reference][3]\n- [Book: Modules - The Rust Reference][4]\n- [Book: Paths - The Rust Reference][5]\n- [Article: How to Use Rust Modules Across Different Files - Casey Falkowski][6]\n- [GitHub: affme repository][7]\n- [GitHub: Liang Chun's profile][8]\n\n[1]: https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html\n[2]: https://doc.rust-lang.org/reference/items/use-declarations.html\n[3]: https://doc.rust-lang.org/reference/items.html\n[4]: https://doc.rust-lang.org/reference/items/modules.html\n[5]: https://doc.rust-lang.org/reference/paths.html\n[6]: https://spin.atomicobject.com/2022/01/24/rust-module-system/\n[7]: https://github.com/DawChihLiou/affme\n[8]: https://github.com/liangchunn\n\n---\n\nHere you have it! Thanks for reading throughðŸ™Œ\nIf you find this article useful, please share it to help more people in their engineering journey.\n\nðŸ¦ Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\n\nâ­ Ready for the next article? ðŸ‘‰ [**Ex-Principal Engineer's Guide to Design Thinking and Continuous Delivery**](/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery)\n\nHappy coding!\n","code":"var Component=(()=\u003e{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=\u003e{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},t=(a,n,s,i)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let c of p(n))!N.call(a,c)\u0026\u0026c!==s\u0026\u0026l(a,c,{get:()=\u003en[c],enumerable:!(i=m(n,c))||i.enumerable});return a};var g=(a,n,s)=\u003e(s=a!=null?h(u(a)):{},t(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=\u003et(l({},\"__esModule\",{value:!0}),a);var r=k((x,o)=\u003e{o.exports=_jsx_runtime});var T={};f(T,{default:()=\u003ev,frontmatter:()=\u003ey});var e=g(r()),y={title:\"Easiest Way to Understand Rust Modules Across Multiple Files\",publishedAt:\"Nov 17, 2022\",description:\"With a real-world example\",cover:\"/optimized/articles/rust-module/hero.webp\",category:\"Rust\",coverWidth:\"1400\",coverHeight:\"600\"};function d(a){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",hr:\"hr\",p:\"p\",strong:\"strong\",em:\"em\",div:\"div\",pre:\"pre\",code:\"code\",blockquote:\"blockquote\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"tldr\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#tldr\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"TL;DR\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"light bulb\",children:\"\\u{1F4A1}\"}),\" Easy and simple explanation of Rust's modules across different files.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"\",\"aria-hidden\":!0,children:\"\\u{1F93F}\"}),\" We'll deep dive into a real-world example to explore the module system.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"chart increasing\",children:\"\\u{1F4C8}\"}),\" Tons of diagrams to help you understand.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.p,{children:\"This article is also available on\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://levelup.gitconnected.com/easiest-way-to-understand-rust-modules-across-multiple-files-234b5018cbfd\",children:\"Level Up Coding\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://hackernoon.com/easily-understand-rust-modules-across-multiple-files-with-this-guide\",children:\"Hacker Noon\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Feel free to read it on your favorite platform\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"})]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.p,{children:\"The module system in Rust can be confusing for developers coming from other languages. It took me a while to understand it so I want to share with you how it works and how to organize your program across multiple files with ease.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Let's go.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"rust-modules-across-files\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#rust-modules-across-files\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Rust Modules Across Files\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Rust requires the developers to manually build module trees. The way to do it is by declaring modules with the \",(0,e.jsx)(n.strong,{children:\"mod\"}),\" keyword.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The module tree starts with the crate root, usually \",(0,e.jsx)(n.em,{children:\"src/lib.rs\"}),\" for a library crate or \",(0,e.jsx)(n.em,{children:\"src/main.rs\"}),\" for a binary crate. The Rust compiler will first look in the crate root for modules to compile.\"]}),`\n`,(0,e.jsx)(n.p,{children:`Let's say you want to import a module \"a\" in a binary crate, you can declare the module like this:`}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"main.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"/* do amazing things */\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"The compiler will look for the module in the \",(0,e.jsx)(n.em,{children:\"src\"}),\" directory in the following places:\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In \",(0,e.jsx)(n.em,{children:\"src/a.rs\"})]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \\xA0\\xA0 \\u251C\\u2500\\u2500 a.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \\xA0\\xA0 \\u2514\\u2500\\u2500 main.rs\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Or in \",(0,e.jsx)(n.em,{children:\"src/a/mod.rs\"})]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u251C\\u2500\\u2500 a\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u2514\\u2500\\u2500 mod.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2514\\u2500\\u2500 main.rs\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"By declaring \",(0,e.jsx)(n.strong,{children:\"mod a\"}),\" in \",(0,e.jsx)(n.em,{children:\"main.rs\"}),\", you've built a module tree like this:\"]}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/tree-a.webp\",alt:\"Initial Rust module tree\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"rust-submodules-across-files\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#rust-submodules-across-files\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Rust Submodules Across Files\"]}),`\n`,(0,e.jsx)(n.p,{children:`Within a module, you can create submodules to further organize your code. Let's say you want to declare module \"b\" and \"c\" in module \"a\":`}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"/src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"The compiler will look for the submodules in \",(0,e.jsx)(n.em,{children:\"src/a\"}),\" directory:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u251C\\u2500\\u2500 a\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u251C\\u2500\\u2500 b.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u251C\\u2500\\u2500 c.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2502   \\u2514\\u2500\\u2500 mod.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \\u2514\\u2500\\u2500 main.rs\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Now you've build a tree like this:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/tree-abc.webp\",alt:\"Rust module tree with submodules\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"visibility-with-pub\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#visibility-with-pub\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),'Visibility with \"pub\"']}),`\n`,(0,e.jsxs)(n.p,{children:[\"By default, all the \",(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items.html\",children:\"items\"}),\" in a module are private. They are only visible by the items in the same module.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// only the other functions in module a can use it\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"             \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// it's not visible to main.rs\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In order for its parent modules to have access to the function \",(0,e.jsx)(n.em,{children:\"do_a\"}),\", we need to add the key word \",(0,e.jsx)(n.strong,{children:\"pub\"}),\".\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsx)(n.code,{className:\"language-rust code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// now it's visible to main.rs\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"We can access \",(0,e.jsx)(n.em,{children:\"do_a\"}),\" using the \",(0,e.jsxs)(n.a,{href:\"https://doc.rust-lang.org/reference/paths.html\",children:[\"path qualifier \",(0,e.jsx)(n.em,{children:\"::\"})]}),\".\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/main.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"We can use the same pattern for submodules.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/b.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsx)(n.code,{className:\"language-rust code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'// visible to module \"a\" and all the submodules of module \"a\"'}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"By adding \",(0,e.jsx)(n.strong,{children:\"pub\"}),\" to \",(0,e.jsx)(n.em,{children:\"do_b\"}),', the function now is accessible to module \"a\".']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_a\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.em,{children:\"do_b\"}),' is also accessible to the submodules of module \"c\". You can access it with either the absolute or relative path.']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/c.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_c\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// absolute path\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"super\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// relative path\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"re-exporting-items\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#re-exporting-items\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Re-exporting Items\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"An item of a submodule is not accessible to a non-parent module. For example, we can try to access \",(0,e.jsx)(n.em,{children:\"do_b\"}),\" in \",(0,e.jsx)(n.em,{children:\"main.rs\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/main.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"main\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ^^^^ function `do_b` is private\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You'll see an error message saying \",(0,e.jsx)(n.em,{children:\"do_b\"}),\" is private. That's because \",(0,e.jsx)(n.em,{children:\"do_b\"}),' is only accessible within module \"a\" so far. To make it visible to the crate root, We need to re-export it by adding ',(0,e.jsx)(n.strong,{children:\"pub\"}),' to the module \"b\" declaration from module \"a\".']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// --snip--\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"the-use-declaration\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#the-use-declaration\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),'The \"use\" Declaration']}),`\n`,(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items/use-declarations.html\",children:(0,e.jsx)(n.strong,{children:\"use\"})}),' declaration can help you shorten the path when accessing an item in another module. For example, we can refactor the submodule \"c\":']}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/a/c.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),\"do_b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"do_c\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"do_b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"It creates a local name binding to its path for \",(0,e.jsx)(n.em,{children:\"do_b\"}),\". \",(0,e.jsx)(n.strong,{children:\"use\"}),\" is very useful for long paths.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"a-real-world-example\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#a-real-world-example\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"A Real World Example\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To demonstrate the Rust's module system, I created a simple CLI called \",(0,e.jsx)(n.strong,{children:\"affme\"}),', short for \"affirm me\".']}),`\n`,(0,e.jsx)(\"img\",{src:\"/articles/rust-module/demo.gif\",alt:\"affme demo\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"affme\"}),\" is an self-affirmation generator. The CLI takes in a name as a parameter and displays a randomized affirmation.\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"The demo is \",(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/affme\",children:\"available on GitHub\"}),\". Feel free to take a look at the repo and try it out\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"The code design is straightforward:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/program-design.webp\",alt:\"affme code design\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:'In the \"format\" block,'}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"It takes a user input,\"}),`\n`,(0,e.jsx)(n.li,{children:\"concatenates the input with a random affirmation and a random emoji,\"}),`\n`,(0,e.jsx)(n.li,{children:\"applies a random font color to the concatenated affirmation,\"}),`\n`,(0,e.jsx)(n.li,{children:\"and finally outputs the affirmation.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"To showcase the module system across files, I design the module tree as following:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/rust-module/module-tree.webp\",alt:\"affme module tree design\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:\"A few things worth mentioning:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"This package has two crates, one binary and one library. I use the library crate to encapsulate the implementation and the binary crate to execute the CLI.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"In the library crate root \",(0,e.jsx)(n.em,{children:\"src/lib.rs\"}),\", it accesses functions from the \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" and \",(0,e.jsx)(n.em,{children:\"formatter\"}),\" module.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"The \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module and both of the submodules in the \",(0,e.jsx)(n.em,{children:\"formatter\"}),\" module are using the same function in the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module to randomly pick an item. Because the \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module and \",(0,e.jsx)(n.em,{children:\"formatter\"}),\" submodules are in different branches of the tree, we need to declare the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module in the common ancestor of the module tree.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"In the file system, it looks like this:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.lock\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 Cargo.toml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 src\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 affirmation.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 formatter\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 color.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 emoji.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 mod.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 lib.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 main.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 random.rs\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 target\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Let's dive into the library crate root to see how the code is structured.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/lib.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"affirmation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"formatter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"formatter\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),\"format\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"affirm\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" affirmation \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"format\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you can see the module declarations on the top. You can also find the \",(0,e.jsx)(n.em,{children:\"use\"}),\" declarations to create the local name binding for \",(0,e.jsx)(n.em,{children:\"Affirmation\"}),\" and \",(0,e.jsx)(n.em,{children:\"format\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"The random module is straightforward:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/random.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rand\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Rng\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"pick\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Sized\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"items\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" random_index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"usize\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"rand\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"thread_rng\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"gen_range\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"..\"}),\"items\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    items\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"random_index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"unwrap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"It has a public \",(0,e.jsx)(n.em,{children:\"pick\"}),\" function that returns a random item from an array slice. I use the function to pick random affirmations, emojis, and colors. Let's take a look at \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module as an example:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/affirmation.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"crate\"}),(0,e.jsxs)(n.span,{className:\"token module-declaration namespace\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),\"random\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attribute attr-name\",children:\"#[derive(Debug)]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"struct\"}),\" \",(0,e.jsx)(n.span,{className:\"token type-definition class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    affirmations\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"impl\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"Self\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" affirmations \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You're beautiful\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You're awesome\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You're wonderful\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"You've got this\"`}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"You can do all things\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Go get it\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Affirmation\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" affirmations \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token lifetime-annotation symbol\",children:\"'a\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"random\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token function\",children:\"pick\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"affirmations\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can see the \",(0,e.jsx)(n.em,{children:\"use\"}),\" declaration for the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module. The \",(0,e.jsx)(n.em,{children:\"affirmation\"}),\" module is able to access the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module because the \",(0,e.jsx)(n.em,{children:\"random\"}),\" module was declared in the library crate root. I use the \",(0,e.jsx)(n.em,{children:\"pub\"}),\" keyword on the \",(0,e.jsx)(n.em,{children:\"Affirmation\"}),\" struct and its functions so that the crate root has visibility over them.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can find the same coding pattern in the \",(0,e.jsx)(n.em,{children:\"emoji\"}),\" and \",(0,e.jsx)(n.em,{children:\"color\"}),\" submodule.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To bring it all together, let's take a look at the \",(0,e.jsx)(n.em,{children:\"format\"}),\" module.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"src/formatter/mod.rs\"}),(0,e.jsx)(n.pre,{className:\"language-rust\",children:(0,e.jsxs)(n.code,{className:\"language-rust code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"mod\"}),\" \",(0,e.jsx)(n.span,{className:\"token module-declaration namespace\",children:\"emoji\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"color\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"colored\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"use\"}),\" \",(0,e.jsxs)(n.span,{className:\"token namespace\",children:[\"emoji\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"})]}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Emoji\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"pub\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"format\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"str\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" emoji \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Emoji\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" color \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"::\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"new\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" phrase \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"{}, {} {}\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" affirmation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" emoji\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"color\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"color\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"bold\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"to_string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{}\\\\n{}\\\\n{}\\\\n{}\\\\n{}\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"*{}*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\" \"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token string\",children:['\"    ',(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"pencil\",children:\"\\u270F\\uFE0F\"}),'  ...{}  \"']}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token macro property\",children:\"format!\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"*{}*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\" \"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"*\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"repeat\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"phrase\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"len\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"magenta\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"It brings \",(0,e.jsx)(n.em,{children:\"color\"}),\" and \",(0,e.jsx)(n.em,{children:\"emoji\"}),\" submodules in scope so we can concatenate the full affirmation with random emoji and random font color.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"final-thoughts\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#final-thoughts\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Final Thoughts\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Rust Modules across multiple files is a little different from other languages but once you understand \",(0,e.jsx)(n.strong,{children:\"mod\"}),\", \",(0,e.jsx)(n.strong,{children:\"use\"}),\", and \",(0,e.jsx)(n.strong,{children:\"pub\"}),\", the module design becomes easier and intentional.\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Rust Module Cheat Sheet\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"A module tree starts from the crate root.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Use \",(0,e.jsx)(n.strong,{children:\"mod\"}),\" to build your tree with modules and submodules.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Use \",(0,e.jsx)(n.strong,{children:\"pub\"}),\" to make module items visible to the parent module.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"You can re-export with \",(0,e.jsx)(n.strong,{children:\"pub mod\"}),\" or \",(0,e.jsx)(n.strong,{children:\"pub use\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Special Thanks\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Thanks \",(0,e.jsx)(n.a,{href:\"https://github.com/liangchunn\",children:\"Liang Chun\"}),\" for reviewing the example code in \",(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/affme\",children:\"affme\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"references\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#references\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"References\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html\",children:\"Book: Defining Modules to Control Scope and Privacy - The Rust Programming Language\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items/use-declarations.html\",children:\"Book: Use declarations - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items.html\",children:\"Book: Items - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/items/modules.html\",children:\"Book: Modules - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://doc.rust-lang.org/reference/paths.html\",children:\"Book: Paths - The Rust Reference\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://spin.atomicobject.com/2022/01/24/rust-module-system/\",children:\"Article: How to Use Rust Modules Across Different Files - Casey Falkowski\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/affme\",children:\"GitHub: affme repository\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/liangchunn\",children:\"GitHub: Liang Chun's profile\"})}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you have it! Thanks for reading through\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"raising hands\",children:\"\\u{1F64C}\"}),`\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"bird\",children:\"\\u{1F426}\"}),\" Feel free to connect with me on \",(0,e.jsx)(n.a,{href:\"https://twitter.com/dawchihliou\",children:\"twitter\"}),\"!\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u23ED Ready for the next article? \",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"backhand index pointing right\",children:\"\\u{1F449}\"}),\" \",(0,e.jsx)(n.a,{href:\"/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery\",children:(0,e.jsx)(n.strong,{children:\"Ex-Principal Engineer's Guide to Design Thinking and Continuous Delivery\"})})]}),`\n`,(0,e.jsx)(n.p,{children:\"Happy coding!\"})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(d,a)})):d(a)}var v=w;return b(T);})();\n;return Component;"},"_id":"articles/easiest-way-to-understand-rust-modules-across-multiple-files.mdx","_raw":{"sourceFilePath":"articles/easiest-way-to-understand-rust-modules-across-multiple-files.mdx","sourceFileName":"easiest-way-to-understand-rust-modules-across-multiple-files.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/easiest-way-to-understand-rust-modules-across-multiple-files"},"type":"Article","readingTime":{"text":"8 min read","minutes":7.86,"time":471600,"words":1572},"wordCount":1572,"slug":"easiest-way-to-understand-rust-modules-across-multiple-files"}},"__N_SSG":true},"page":"/articles/[slug]","query":{"slug":"easiest-way-to-understand-rust-modules-across-multiple-files"},"buildId":"D-X5pHW8_vz6tc-oPN55J","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>