<!DOCTYPE html><html lang="en"><head><script defer="" data-domain="dawchihliou.github.io" src="https://plausible.io/js/plausible.outbound-links.js"></script><script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/svg" sizes="32x32" href="/favicon.svg"/><link rel="icon" type="image/svg" sizes="16x16" href="/favicon.svg"/><link rel="mask-icon" href="/favicon.svg" color="#ffffff"/><link rel="manifest" href="/site.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="msapplication-TileColor" content="#007cf0"/><meta name="theme-color" content="#ffff"/><title>Using WebP for Better User Experience</title><meta name="description" content="WebP is a modern image format that provides outstanding image quality with smaller image size. I&#x27;ll show you how much you can benefit from it and how to setup your project for optimal developer experience."/><meta name="robots" content="follow, index"/><link rel="canonical" href="https://dawchihliou.github.io/articles/use-webp-for-better-ux"/><meta itemProp="name" content="Using WebP for Better User Experience"/><meta itemProp="description" content="WebP is a modern image format that provides outstanding image quality with smaller image size. I&#x27;ll show you how much you can benefit from it and how to setup your project for optimal developer experience."/><meta itemProp="image" content="https://dawchihliou.github.io/optimized/articles/use-webp-for-better-ux/hero.png"/><meta property="og:title" content="Using WebP for Better User Experience"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dawchihliou.github.io/articles/use-webp-for-better-ux"/><meta property="og:description" content="WebP is a modern image format that provides outstanding image quality with smaller image size. I&#x27;ll show you how much you can benefit from it and how to setup your project for optimal developer experience."/><meta property="og:image" content="https://dawchihliou.github.io/optimized/articles/use-webp-for-better-ux/hero.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="1411"/><meta property="og:image:height" content="682"/><meta property="og:image:alt" content="WebP is a modern image format that provides outstanding image quality with smaller image size. I&#x27;ll show you how much you can benefit from it and how to setup your project for optimal developer experience."/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@dawchihliou"/><meta name="twitter:creator" content="@dawchihliou"/><meta name="twitter:title" content="Using WebP for Better User Experience"/><meta name="twitter:description" content="WebP is a modern image format that provides outstanding image quality with smaller image size. I&#x27;ll show you how much you can benefit from it and how to setup your project for optimal developer experience."/><meta name="twitter:image" content="https://dawchihliou.github.io/optimized/articles/use-webp-for-better-ux/hero.webp"/><meta property="article:published_time" content="2020-10-06T00:00:00.000Z"/><meta property="article:section" content="Article Section"/><meta property="article:tag" content="Article Tag"/><meta name="next-head-count" content="36"/><link rel="preload" href="/_next/static/css/e88461a7149d5905.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e88461a7149d5905.css" data-n-g=""/><link rel="preload" href="/_next/static/css/54ba867c7255694d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/54ba867c7255694d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-2e85039026b85b70.js" defer=""></script><script src="/_next/static/chunks/framework-01395af778c6fb71.js" defer=""></script><script src="/_next/static/chunks/main-e8c39d39ad5622e4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-94718c7e6e4d96a3.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5Bslug%5D-f62544c600d1388a.js" defer=""></script><script src="/_next/static/DjXUnZ3ePWm7AkkFhPOer/_buildManifest.js" defer=""></script><script src="/_next/static/DjXUnZ3ePWm7AkkFhPOer/_ssgManifest.js" defer=""></script><script src="/_next/static/DjXUnZ3ePWm7AkkFhPOer/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div id="outer-container"><header><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s"></div><div><div class="bm-burger-button" style="z-index:1000"><button id="react-burger-menu-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="bm-icon" style="width:100%;height:100%" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></div><div id="" class="bm-menu-wrap" style="position:fixed;right:inherit;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(-100%, 0, 0);-ms-transform:translate3d(-100%, 0, 0);-o-transform:translate3d(-100%, 0, 0);-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);transition:all 0.5s" aria-hidden="true"><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:auto"><nav class="bm-item-list" style="height:100%"><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/"><button class="Nav_button__YJwKE" tabindex="-1">Home</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/articles"><button class="Nav_button__YJwKE" tabindex="-1">Articles</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/work"><button class="Nav_button__YJwKE" tabindex="-1">Work</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/now"><button class="Nav_button__YJwKE" tabindex="-1">Now</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/expertise"><button class="Nav_button__YJwKE" tabindex="-1">Expertise</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/contact"><button class="Nav_button__YJwKE" tabindex="-1">Contact</button></a><span class="bm-item Nav_pusher__93Gc6" style="display:block" tabindex="-1"></span><span class="bm-item Nav_divider__QD8Pt" style="display:block" tabindex="-1"></span><div class="bm-item Nav_profile__Kf2nU" style="display:block" tabindex="-1"><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Linkedin profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M20.45175,20.45025 L16.89225,20.45025 L16.89225,14.88075 C16.89225,13.5525 16.86975,11.844 15.04275,11.844 C13.191,11.844 12.90825,13.2915 12.90825,14.7855 L12.90825,20.45025 L9.3525,20.45025 L9.3525,8.997 L12.765,8.997 L12.765,10.563 L12.81375,10.563 C13.2885,9.66225 14.4495,8.71275 16.18125,8.71275 C19.78575,8.71275 20.45175,11.08425 20.45175,14.169 L20.45175,20.45025 Z M5.33925,7.4325 C4.1955,7.4325 3.27375,6.50775 3.27375,5.36775 C3.27375,4.2285 4.1955,3.30375 5.33925,3.30375 C6.47775,3.30375 7.4025,4.2285 7.4025,5.36775 C7.4025,6.50775 6.47775,7.4325 5.33925,7.4325 L5.33925,7.4325 Z M7.11975,20.45025 L3.5565,20.45025 L3.5565,8.997 L7.11975,8.997 L7.11975,20.45025 Z M23.00025,0 L1.0005,0 C0.44775,0 0,0.44775 0,0.99975 L0,22.9995 C0,23.55225 0.44775,24 1.0005,24 L23.00025,24 C23.55225,24 24,23.55225 24,22.9995 L24,0.99975 C24,0.44775 23.55225,0 23.00025,0 L23.00025,0 Z"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou" aria-label="Link to Daw-Chih&#x27;s GitHub profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou" aria-label="Link to Daw-Chih&#x27;s Medium profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2.84593838,5.88685595 C2.87575654,5.59224254 2.76340763,5.30104995 2.54341737,5.10276397 L0.302521008,2.4032473 L0.302521008,2 L7.2605042,2 L12.6386555,13.7949836 L17.3669469,2 L24,2 L24,2.4032473 L22.0840336,4.2402628 C21.9188563,4.36617057 21.8369199,4.57310892 21.8711485,4.77792587 L21.8711485,18.2755093 C21.8369199,18.4803262 21.9188563,18.6872645 22.0840336,18.8131723 L23.9551821,20.6501878 L23.9551821,21.0534351 L14.5434174,21.0534351 L14.5434174,20.6501878 L16.4817928,18.7683671 C16.6722689,18.5779447 16.6722689,18.5219382 16.6722689,18.2307041 L16.6722689,7.32062416 L11.2829132,21.0086299 L10.5546219,21.0086299 L4.28011204,7.32062416 L4.28011204,16.4945003 C4.22779746,16.8801958 4.35589372,17.2685069 4.62745097,17.5474239 L7.14845938,20.6053826 L7.14845938,21.0086299 L0,21.0086299 L0,20.6053826 L2.5210084,17.5474239 C2.79058848,17.2680445 2.91121535,16.8771576 2.84593838,16.4945003 L2.84593838,5.88685595 Z"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/u/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Hackernoon profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M5.701 0v6.223H8.85V4.654h1.576v7.842H12V4.654h1.574v1.569h3.15V0zm11.024 6.223v3.136h1.574V6.223zm1.574 3.136v4.705h1.576v-1.568h1.574v-1.568h-1.574V9.359zm0 4.705h-1.574v3.137h1.574zm-1.574 3.137h-3.15v1.569H8.85V17.2H5.7V24h11.024zm-11.024 0v-3.137H4.125v3.137zm-1.576-3.137V9.36H2.551v4.705zm0-4.705h1.576V6.223H4.125Z"></path></svg><span hidden="">Link to Daw-Chih&#x27;s Hacker Noon profile</span></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Twitter profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M24,4.3086 C23.117,4.7006 22.168,4.9646 21.172,5.0836 C22.188,4.4746 22.969,3.5096 23.337,2.3596 C22.386,2.9246 21.332,3.3336 20.21,3.5556 C19.312,2.5976 18.032,1.9996 16.616,1.9996 C13.897,1.9996 11.692,4.2046 11.692,6.9236 C11.692,7.3096 11.736,7.6856 11.82,8.0456 C7.728,7.8406 4.099,5.8806 1.671,2.9006 C1.247,3.6286 1.004,4.4736 1.004,5.3766 C1.004,7.0846 1.873,8.5926 3.195,9.4756 C2.388,9.4486 1.628,9.2276 0.964,8.8596 L0.964,8.9206 C0.964,11.3066 2.661,13.2966 4.914,13.7486 C4.501,13.8626 4.065,13.9216 3.617,13.9216 C3.299,13.9216 2.991,13.8906 2.69,13.8336 C3.317,15.7896 5.135,17.2136 7.29,17.2536 C5.604,18.5736 3.481,19.3606 1.175,19.3606 C0.777,19.3606 0.385,19.3376 0,19.2926 C2.179,20.6886 4.767,21.5046 7.548,21.5046 C16.605,21.5046 21.557,14.0016 21.557,7.4946 C21.557,7.2816 21.552,7.0696 21.543,6.8586 C22.505,6.1636 23.34,5.2966 24,4.3086"></path></svg></a></div><div class="DarkmodeSwitch_container__uFGHQ" tabindex="-1"><div class="DarkmodeSwitch_wrap__e71_4"></div></div></nav></div><div><div class="bm-cross-button" style="position:absolute;width:24px;height:24px;right:8px;top:8px"><button id="react-burger-cross-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="bm-cross" style="width:100%;height:100%" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div></div></div></header><div class="Menubar_menubar__gvU4b"><a class="styles_anchor__g18qA Menubar_hireMe__zuAig" href="/contact"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>Hire Me</a><div class="DarkmodeSwitch_container__uFGHQ" tabindex="0"><div class="DarkmodeSwitch_wrap__e71_4"></div></div><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou" aria-label="See more Daw-Chih&#x27;s work on GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a></div><div id="page-wrap"><article><div class="Article_container__q__L3"><div class="Article_wrap__LZypL"><h1>Using WebP for Better User Experience</h1><div class="Article_info__bOKys"><div class="Article_author__grS8U"><img alt="Daw-Chih Liou" src="/optimized/raw/portrait-sm.webp" loading="lazy"/><p>Daw-Chih Liou</p></div><p>October 6, 2020<!-- --> ¬∑ 6 min read</p></div><img alt="Using WebP for Better User Experience" src="/optimized/articles/use-webp-for-better-ux/hero.webp" width="100%" loading="lazy"/><div class="article-content"><h2 id="tldr"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#tldr"><span class="icon icon-link"></span></a>TL;DR</h2>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/speed/webp">WebP</a> is a modern image format that provides amazing <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.keycdn.com/support/lossy-vs-lossless">lossless and lossy compression</a>.</li>
<li>WebP makes images richer and smaller.</li>
<li>WebP makes web faster.</li>
<li>We don&#x27;t have to convert our images to WebP ourselves. We have tools for that.</li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://caniuse.com/?search=webp">Not all browsers support WebP format</a> so you&#x27;ll need fallback images.</li>
<li>Check out <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/dawchihliou.github.io">source code</a> on GitHub.</li>
</ul>
<hr/>
<h2 id="what-is-wrong"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#what-is-wrong"><span class="icon icon-link"></span></a>What Is Wrong?</h2>
<p>As I&#x27;m re-making <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://dawchihliou.github.io/">my portfolio</a>, there is something nagging that bothers me.
I have a <code>128x128</code> portait photo displayed on the top of my portfolio that is <code>251.35KB</code>.
It&#x27;s way too big for its size and takes too long to download and that has a direct impact on my Lighthouse report.</p>
<p>It might not seem like a big deal. Afterall, a lot of people are enjoying high-speed WIFI and modern browsers.
But I want my portfolio to be <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.uxpin.com/studio/blog/a-hands-on-guide-to-mobile-first-design/"><strong>mobile-first</strong></a>.
It&#x27;s important to me that my content can reach to audience that are using cellular data and mobile devices with ease.</p>
<h2 id="next-gen-image-format"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#next-gen-image-format"><span class="icon icon-link"></span></a>next-gen Image Format</h2>
<p>There are many ways to tackle image delivery and optimization such as using services like <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://cloudinary.com/">Cloudinary</a>.
What I&#x27;m looking for is a way to serve self-hosted static assets to reduce complexity of the project and a process that would work with release workflow.</p>
<blockquote>
<p>So I want to generate optimized images in <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://web.dev/uses-webp-images/">next-gen format</a> during build time.</p>
</blockquote>
<p>Amond all the format options, <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://caniuse.com/?search=webp">WebP is the most widely supported</a>. So let&#x27;s see how to make it work!</p>
<h2 id="integrate-webp-image-in-project"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#integrate-webp-image-in-project"><span class="icon icon-link"></span></a>Integrate WebP Image in Project</h2>
<hr/>
<p>You can find the <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/dawchihliou.github.io">source code on GitHub</a>.
There are code snippets in this article and you could always reference them in the source code if you&#x27;re interested.</p>
<hr/>
<p>We can first <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://web.dev/codelab-serve-images-webp/">follow the instruction</a> to generate WebP images with command line.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">cwebp -q <span class="token number">75</span> raw/portrait.png -o optimized/portrait.webp
</span></code></pre>
<p>Let&#x27;s compare the file size.</p>
<ul>
<li>Raw PNG image: <code>251.35KB</code></li>
<li>Generated WebP image: <code>5.3KB</code></li>
</ul>
<p>That&#x27;s a <code>97.89%</code> reduction right off the bat. Let&#x27;s have a look at the image quality.</p>
<img src="/optimized/articles/use-webp-for-better-ux/webp-comparison.png" alt="PNG and WebP comparison" width="100%" loading="lazy"/>
<p>If we zoom in a little, we can actually see the difference between the two compression algorithms.
The WebP format overall quality is very desirable, even with the quality of <code>75</code> (<code>0</code> is the worst, <code>100</code> is the best).</p>
<p>Now we can use the generated image in the code.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// components/Intro</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>optimized/portrait.webp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Daw-Chih<span class="token punctuation">&#x27;</span>s portrait<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre>
<p>We can have a look at the download time from Network.</p>
<img src="/optimized/articles/use-webp-for-better-ux/network.png" alt="WebP in Network" width="100%" loading="lazy"/>
<p>It takes about 1 millisecond to download the image. We just proved how effective WebP can be for our web performance.</p>
<h2 id="do-we-have-to-use-the-command"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#do-we-have-to-use-the-command"><span class="icon icon-link"></span></a>Do We Have to Use The Command?</h2>
<p>It&#x27;s not very convenient to convert images with the command.
What we are looking for is to host all the images in <code>/raw</code> directory and output WebP images in <code>/optimized</code> directory.
Luckly I found something cool. <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> is a npm library that minifies images.
It offers a handy <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/imagemin-webp">WebP imagemin plugin</a> and all we need to do is to create a JavaScript file,</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// lib/webp.js</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> imagemin <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;imagemin&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> imageminWebp <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;imagemin-webp&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * generate webp images inside of destination directory
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;raw/*.{jpg,png}&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  destination<span class="token operator">:</span> <span class="token string">&#x27;optimized&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">imageminWebp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> quality<span class="token operator">:</span> <span class="token number">75</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>and run</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">node</span> lib/webp.js
</span></code></pre>
<p>to take all the raw images and generate WebP images in <code>/optimized</code>.</p>
<h2 id="not-all-browsers-support-webp-format"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#not-all-browsers-support-webp-format"><span class="icon icon-link"></span></a>Not All Browsers Support WebP Format</h2>
<p>So we need fallback images to support wider range of browsers. Let&#x27;s first optimize our raw images with their original formats.
There are two <code>imagemin plugins</code> we can use:</p>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/imagemin-pngquant"><code>imagemin-pngquant</code></a>: for PNG images</li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/imagemin/imagemin-jpegtran"><code>imagemin-jpegtran</code></a>: for JPEG images</li>
</ul>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// lib/webp.js</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> imageminJpegtran <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;imagemin-jpegtran&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> imageminPngquant <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;imagemin-pngquant&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * generate optimized fallback images
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;raw/*.{jpg,png}&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  destination<span class="token operator">:</span> <span class="token string">&#x27;optimized&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token function">imageminJpegtran</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function">imageminPngquant</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">      quality<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p>Now we are ready to add fallback images.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// components/Intro</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">srcSet</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>optimized/portrait.webp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/webp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">srcSet</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>optimized/portrait.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>optimized/portrait.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Daw-Chih<span class="token punctuation">&#x27;</span>s portrait<span class="token punctuation">&quot;</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
<p>At this point, we can really compare all image qualities.</p>
<h5 id="png-left-and-optimized-png-right-comparison"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#png-left-and-optimized-png-right-comparison"><span class="icon icon-link"></span></a>PNG (left) and optimized PNG (right) comparison</h5>
<img src="/optimized/articles/use-webp-for-better-ux/png-comparison.png" alt="PNG and optimized PNG comparison" width="100%" loading="lazy"/>
<h5 id="png-left-and-webp-right-comparison"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#png-left-and-webp-right-comparison"><span class="icon icon-link"></span></a>PNG (left) and WebP (right) comparison</h5>
<img src="/optimized/articles/use-webp-for-better-ux/webp-comparison.png" alt="PNG and WebP comparison" width="100%" loading="lazy"/>
<p>If you are looking for optimizing SVG files, you can achieve it with <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/imagemin-svgo"><code>imagemin-svgo</code></a>.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// lib/webp.js</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> imageminSvgo <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;imagemin-svgo&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * generate optimized svg files
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;public/raw/*.svg&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  destination<span class="token operator">:</span> <span class="token string">&#x27;optimized&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">imageminSvgo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> removeViewBox<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<h2 id="we-are-ready-to-integrate-with-workflow-automation"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#we-are-ready-to-integrate-with-workflow-automation"><span class="icon icon-link"></span></a>We Are Ready to Integrate with Workflow Automation</h2>
<p>In our <code>package.json</code>, add the following scripts.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string-property property">&quot;image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node lib/webp.js&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string-property property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn image&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>The <code>prepare</code> script will execute after installation. This will allow us to build our image assets in the workflows of our choice.</p>
<p>For example, to deploy my portfolio with GitHub Actions to GitHub Pages as a static site, a workflow looks like this.</p>
<pre class="language-yml"><code class="language-yml code-highlight"><span class="code-line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
</span><span class="code-line">    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies <span role="img" aria-label="front-facing baby chick">üê•</span>
</span><span class="code-line">        <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn install
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Export static assets <span role="img" aria-label="package">üì¶</span>
</span><span class="code-line">        <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn build <span class="token important">&amp;&amp;</span> yarn export
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to GitHub Pages <span role="img" aria-label="rocket">üöÄ</span>
</span><span class="code-line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@3.6.2
</span><span class="code-line">        <span class="token key atrule">with</span><span class="token punctuation">:</span>
</span><span class="code-line">          <span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line">          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
</span><span class="code-line">          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> out <span class="token comment"># contains all static assets</span>
</span></code></pre>
<p>In the &quot;Install dependencies&quot; step, the job installs the dependencies, and then generate the optimized images.
The images will be deployed alongside with the other assets in <code>/out</code> directory.</p>
<h2 id="to-sum-up"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#to-sum-up"><span class="icon icon-link"></span></a>To Sum up</h2>
<p>WebP is designed for web. The image quality and size is very desirable especially for mobile users.
With the right tooling, generating WebP image can work seemlessly with automation.
As long as we make sure that the fallback images are in place, our audience can benefit tremendously from the boost of speed and better enjoy our content.</p>
<h5 id="lighthouse-report-with-optimized-webp-images"><a class="styles_anchor__g18qA anchor" href="/articles/use-webp-for-better-ux#lighthouse-report-with-optimized-webp-images"><span class="icon icon-link"></span></a>Lighthouse report with optimized WebP images</h5>
<img src="/optimized/articles/use-webp-for-better-ux/lighthouse-report.png" alt="Lighthouse report" width="100%" loading="lazy"/>
<hr/>
<p>Here you have it! Thanks for reading through.</p>
<p>I hope I made it as straight forward as possible to grasp.
If you have thoughts or there‚Äôs something not clear to you, feel free to drop a comment below, or connect with me on <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou">twitter</a>!</p>
<p>If you&#x27;re wondering how to test Redux Observable, I wrote an ariticle <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://itnext.io/better-marble-test-70c7676a1e2">&quot;Writing Better Marble Tests for Redux Observable and TypeScript&quot;</a> just for you.
It&#x27;s a comprehensive guide to walk you through the thought process.</p>
<p>If you‚Äôre a fan of functional programming, check out <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d">this article that I wrote about Transducers</a>.
It‚Äôs a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.</p>
<p>Happy coding!</p></div><article class="Author_wrap__s8DeE"><img src="/optimized/raw/portrait-sm.webp" alt="Daw-Chih Liou" class="Author_avatar__j6KIn" loading="lazy"/><div><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://dawchihliou.github.io">Daw-Chih Liou</a><p>Daw-Chih is a software engineer, UX advocate, and creator who is dedicated to Web engineering. His background in Human Centered Computing has led him to work with startups and public companies across North America, Asia, and Europe. He is passionate about meeting business trajectory with user journey and utilizing engineering architecture and performance monitoring to provide optimal user experience.</p></div></article></div></div></article><footer class="Footer_footer__1IwEk"><div class="Footer_wrap__FVCTX"><div class="Footer_resources__fG_vu"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">üíö</span>This site is built with</p><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://nextjs.org">Next.js</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://react-icons.github.io/react-icons">React Icons</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://mdxjs.com">MDX</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://unifiedjs.com">unified</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/contentlayerdev/contentlayer">Contentlayer</a></div><div class="Footer_contact__9GJn6"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ü¶Ñ</span>Where to find me</p><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou">Linkedin</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou">GitHub</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou">Twitter</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou">Medium</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/u/dawchihliou">Hacker Noon</a><a class="styles_anchor__g18qA undefined" href="/rss.xml">RSS Feed <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div><div class="Footer_sitemap__92ono"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">üó∫</span>Sitemap</p><a class="styles_anchor__g18qA undefined" href="/">Home</a><a class="styles_anchor__g18qA undefined" href="/articles">Articles</a><a class="styles_anchor__g18qA undefined" href="/work">Work</a><a class="styles_anchor__g18qA undefined" href="/now">Now</a><a class="styles_anchor__g18qA undefined" href="/expertise">Expertise</a><a class="styles_anchor__g18qA undefined" href="/contact">Contact</a></div></div><div class="Footer_copyright__vZZRL">¬© <!-- -->2022<!-- --> <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou">Daw-Chih Liou</a></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Using WebP for Better User Experience","publishedAt":"October 6, 2020","description":"WebP is a modern image format that provides outstanding image quality with smaller image size. I'll show you how much you can benefit from it and how to setup your project for optimal developer experience.","cover":"/optimized/articles/use-webp-for-better-ux/hero.webp","category":"Performance","coverWidth":"1411","coverHeight":"682","body":{"raw":"\n## TL;DR\n\n- [WebP](https://developers.google.com/speed/webp) is a modern image format that provides amazing [lossless and lossy compression](https://www.keycdn.com/support/lossy-vs-lossless).\n- WebP makes images richer and smaller.\n- WebP makes web faster.\n- We don't have to convert our images to WebP ourselves. We have tools for that.\n- [Not all browsers support WebP format](https://caniuse.com/?search=webp) so you'll need fallback images.\n- Check out [source code](https://github.com/DawChihLiou/dawchihliou.github.io) on GitHub.\n\n---\n\n## What Is Wrong?\n\nAs I'm re-making [my portfolio](https://dawchihliou.github.io/), there is something nagging that bothers me.\nI have a `128x128` portait photo displayed on the top of my portfolio that is `251.35KB`.\nIt's way too big for its size and takes too long to download and that has a direct impact on my Lighthouse report.\n\nIt might not seem like a big deal. Afterall, a lot of people are enjoying high-speed WIFI and modern browsers.\nBut I want my portfolio to be [**mobile-first**](https://www.uxpin.com/studio/blog/a-hands-on-guide-to-mobile-first-design/).\nIt's important to me that my content can reach to audience that are using cellular data and mobile devices with ease.\n\n## next-gen Image Format\n\nThere are many ways to tackle image delivery and optimization such as using services like [Cloudinary](https://cloudinary.com/).\nWhat I'm looking for is a way to serve self-hosted static assets to reduce complexity of the project and a process that would work with release workflow.\n\n\u003e So I want to generate optimized images in [next-gen format](https://web.dev/uses-webp-images/) during build time.\n\nAmond all the format options, [WebP is the most widely supported](https://caniuse.com/?search=webp). So let's see how to make it work!\n\n## Integrate WebP Image in Project\n\n---\n\nYou can find the [source code on GitHub](https://github.com/DawChihLiou/dawchihliou.github.io).\nThere are code snippets in this article and you could always reference them in the source code if you're interested.\n\n---\n\nWe can first [follow the instruction](https://web.dev/codelab-serve-images-webp/) to generate WebP images with command line.\n\n```bash\ncwebp -q 75 raw/portrait.png -o optimized/portrait.webp\n```\n\nLet's compare the file size.\n\n- Raw PNG image: `251.35KB`\n- Generated WebP image: `5.3KB`\n\nThat's a `97.89%` reduction right off the bat. Let's have a look at the image quality.\n\n\u003cimg\n  src=\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\"\n  alt=\"PNG and WebP comparison\"\n  width=\"100%\"\n  loading=\"lazy\"\n/\u003e\n\nIf we zoom in a little, we can actually see the difference between the two compression algorithms.\nThe WebP format overall quality is very desirable, even with the quality of `75` (`0` is the worst, `100` is the best).\n\nNow we can use the generated image in the code.\n\n```jsx\n// components/Intro\n\n\u003cimg src=\"optimized/portrait.webp\" alt=\"Daw-Chih's portrait\" /\u003e\n```\n\nWe can have a look at the download time from Network.\n\n\u003cimg\n  src=\"/optimized/articles/use-webp-for-better-ux/network.png\"\n  alt=\"WebP in Network\"\n  width=\"100%\"\n  loading=\"lazy\"\n/\u003e\n\nIt takes about 1 millisecond to download the image. We just proved how effective WebP can be for our web performance.\n\n## Do We Have to Use The Command?\n\nIt's not very convenient to convert images with the command.\nWhat we are looking for is to host all the images in `/raw` directory and output WebP images in `/optimized` directory.\nLuckly I found something cool. [`imagemin`](https://github.com/imagemin/imagemin) is a npm library that minifies images.\nIt offers a handy [WebP imagemin plugin](https://www.npmjs.com/package/imagemin-webp) and all we need to do is to create a JavaScript file,\n\n```ts\n// lib/webp.js\n\nconst imagemin = require('imagemin')\nconst imageminWebp = require('imagemin-webp')\n\n/**\n * generate webp images inside of destination directory\n */\nimagemin(['raw/*.{jpg,png}'], {\n  destination: 'optimized',\n  plugins: [imageminWebp({ quality: 75 })],\n})\n```\n\nand run\n\n```bash\nnode lib/webp.js\n```\n\nto take all the raw images and generate WebP images in `/optimized`.\n\n## Not All Browsers Support WebP Format\n\nSo we need fallback images to support wider range of browsers. Let's first optimize our raw images with their original formats.\nThere are two `imagemin plugins` we can use:\n\n- [`imagemin-pngquant`](https://www.npmjs.com/package/imagemin-pngquant): for PNG images\n- [`imagemin-jpegtran`](https://github.com/imagemin/imagemin-jpegtran): for JPEG images\n\n```ts\n// lib/webp.js\n\nconst imageminJpegtran = require('imagemin-jpegtran')\nconst imageminPngquant = require('imagemin-pngquant')\n\n/**\n * generate optimized fallback images\n */\nimagemin(['raw/*.{jpg,png}'], {\n  destination: 'optimized',\n  plugins: [\n    imageminJpegtran(),\n    imageminPngquant({\n      quality: [0.6, 0.8],\n    }),\n  ],\n})\n```\n\nNow we are ready to add fallback images.\n\n```jsx\n// components/Intro\n\n\u003cpicture\u003e\n  \u003csource srcSet=\"optimized/portrait.webp\" type=\"image/webp\" /\u003e\n  \u003csource srcSet=\"optimized/portrait.png\" type=\"image/png\" /\u003e\n  \u003cimg src=\"optimized/portrait.png\" alt=\"Daw-Chih's portrait\" loading=\"lazy\" /\u003e\n\u003c/picture\u003e\n```\n\nAt this point, we can really compare all image qualities.\n\n##### PNG (left) and optimized PNG (right) comparison\n\n\u003cimg\n  src=\"/optimized/articles/use-webp-for-better-ux/png-comparison.png\"\n  alt=\"PNG and optimized PNG comparison\"\n  width=\"100%\"\n  loading=\"lazy\"\n/\u003e\n\n##### PNG (left) and WebP (right) comparison\n\n\u003cimg\n  src=\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\"\n  alt=\"PNG and WebP comparison\"\n  width=\"100%\"\n  loading=\"lazy\"\n/\u003e\n\nIf you are looking for optimizing SVG files, you can achieve it with [`imagemin-svgo`](https://www.npmjs.com/package/imagemin-svgo).\n\n```ts\n// lib/webp.js\n\nconst imageminSvgo = require('imagemin-svgo')\n\n/**\n * generate optimized svg files\n */\nimagemin(['public/raw/*.svg'], {\n  destination: 'optimized',\n  plugins: [imageminSvgo({ removeViewBox: false })],\n})\n```\n\n## We Are Ready to Integrate with Workflow Automation\n\nIn our `package.json`, add the following scripts.\n\n```ts\n\"scripts\": {\n  \"image\": \"node lib/webp.js\",\n  \"prepare\": \"yarn image\",\n}\n```\n\nThe `prepare` script will execute after installation. This will allow us to build our image assets in the workflows of our choice.\n\nFor example, to deploy my portfolio with GitHub Actions to GitHub Pages as a static site, a workflow looks like this.\n\n```yml\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n\n      - name: Install dependencies üê•\n        run: yarn install\n\n      - name: Export static assets üì¶\n        run: yarn build \u0026\u0026 yarn export\n\n      - name: Deploy to GitHub Pages üöÄ\n        uses: JamesIves/github-pages-deploy-action@3.6.2\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: gh-pages\n          FOLDER: out # contains all static assets\n```\n\nIn the \"Install dependencies\" step, the job installs the dependencies, and then generate the optimized images.\nThe images will be deployed alongside with the other assets in `/out` directory.\n\n## To Sum up\n\nWebP is designed for web. The image quality and size is very desirable especially for mobile users.\nWith the right tooling, generating WebP image can work seemlessly with automation.\nAs long as we make sure that the fallback images are in place, our audience can benefit tremendously from the boost of speed and better enjoy our content.\n\n##### Lighthouse report with optimized WebP images\n\n\u003cimg\n  src=\"/optimized/articles/use-webp-for-better-ux/lighthouse-report.png\"\n  alt=\"Lighthouse report\"\n  width=\"100%\"\n  loading=\"lazy\"\n/\u003e\n\n---\n\nHere you have it! Thanks for reading through.\n\nI hope I made it as straight forward as possible to grasp.\nIf you have thoughts or there‚Äôs something not clear to you, feel free to drop a comment below, or connect with me on [twitter](https://twitter.com/dawchihliou)!\n\nIf you're wondering how to test Redux Observable, I wrote an ariticle [\"Writing Better Marble Tests for Redux Observable and TypeScript\"](https://itnext.io/better-marble-test-70c7676a1e2) just for you.\nIt's a comprehensive guide to walk you through the thought process.\n\nIf you‚Äôre a fan of functional programming, check out [this article that I wrote about Transducers](https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d).\nIt‚Äôs a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.\n\nHappy coding!\n","code":"var Component=(()=\u003e{var r=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=\u003et(a,\"__esModule\",{value:!0});var u=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=\u003e{i(a);for(var s in e)t(a,s,{get:e[s],enumerable:!0})},k=(a,e,s)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let c of d(e))!m.call(a,c)\u0026\u0026c!==\"default\"\u0026\u0026t(a,c,{get:()=\u003ee[c],enumerable:!(s=p(e,c))||s.enumerable});return a},g=a=\u003ek(i(t(a!=null?r(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((v,l)=\u003e{l.exports=_jsx_runtime});var f={};N(f,{default:()=\u003eb});var n=g(o());function w(a={}){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",hr:\"hr\",p:\"p\",code:\"code\",strong:\"strong\",blockquote:\"blockquote\",pre:\"pre\",h5:\"h5\"},a.components),{wrapper:s}=e,c=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"tldr\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#tldr\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"TL;DR\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://developers.google.com/speed/webp\",children:\"WebP\"}),\" is a modern image format that provides amazing \",(0,n.jsx)(e.a,{href:\"https://www.keycdn.com/support/lossy-vs-lossless\",children:\"lossless and lossy compression\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"WebP makes images richer and smaller.\"}),`\n`,(0,n.jsx)(e.li,{children:\"WebP makes web faster.\"}),`\n`,(0,n.jsx)(e.li,{children:\"We don't have to convert our images to WebP ourselves. We have tools for that.\"}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://caniuse.com/?search=webp\",children:\"Not all browsers support WebP format\"}),\" so you'll need fallback images.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Check out \",(0,n.jsx)(e.a,{href:\"https://github.com/DawChihLiou/dawchihliou.github.io\",children:\"source code\"}),\" on GitHub.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.h2,{id:\"what-is-wrong\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#what-is-wrong\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"What Is Wrong?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"As I'm re-making \",(0,n.jsx)(e.a,{href:\"https://dawchihliou.github.io/\",children:\"my portfolio\"}),`, there is something nagging that bothers me.\nI have a `,(0,n.jsx)(e.code,{children:\"128x128\"}),\" portait photo displayed on the top of my portfolio that is \",(0,n.jsx)(e.code,{children:\"251.35KB\"}),`.\nIt's way too big for its size and takes too long to download and that has a direct impact on my Lighthouse report.`]}),`\n`,(0,n.jsxs)(e.p,{children:[`It might not seem like a big deal. Afterall, a lot of people are enjoying high-speed WIFI and modern browsers.\nBut I want my portfolio to be `,(0,n.jsx)(e.a,{href:\"https://www.uxpin.com/studio/blog/a-hands-on-guide-to-mobile-first-design/\",children:(0,n.jsx)(e.strong,{children:\"mobile-first\"})}),`.\nIt's important to me that my content can reach to audience that are using cellular data and mobile devices with ease.`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"next-gen-image-format\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#next-gen-image-format\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"next-gen Image Format\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There are many ways to tackle image delivery and optimization such as using services like \",(0,n.jsx)(e.a,{href:\"https://cloudinary.com/\",children:\"Cloudinary\"}),`.\nWhat I'm looking for is a way to serve self-hosted static assets to reduce complexity of the project and a process that would work with release workflow.`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"So I want to generate optimized images in \",(0,n.jsx)(e.a,{href:\"https://web.dev/uses-webp-images/\",children:\"next-gen format\"}),\" during build time.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Amond all the format options, \",(0,n.jsx)(e.a,{href:\"https://caniuse.com/?search=webp\",children:\"WebP is the most widely supported\"}),\". So let's see how to make it work!\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"integrate-webp-image-in-project\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#integrate-webp-image-in-project\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Integrate WebP Image in Project\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can find the \",(0,n.jsx)(e.a,{href:\"https://github.com/DawChihLiou/dawchihliou.github.io\",children:\"source code on GitHub\"}),`.\nThere are code snippets in this article and you could always reference them in the source code if you're interested.`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.p,{children:[\"We can first \",(0,n.jsx)(e.a,{href:\"https://web.dev/codelab-serve-images-webp/\",children:\"follow the instruction\"}),\" to generate WebP images with command line.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"cwebp -q \",(0,n.jsx)(e.span,{className:\"token number\",children:\"75\"}),` raw/portrait.png -o optimized/portrait.webp\n`]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Let's compare the file size.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Raw PNG image: \",(0,n.jsx)(e.code,{children:\"251.35KB\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Generated WebP image: \",(0,n.jsx)(e.code,{children:\"5.3KB\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"That's a \",(0,n.jsx)(e.code,{children:\"97.89%\"}),\" reduction right off the bat. Let's have a look at the image quality.\"]}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\",alt:\"PNG and WebP comparison\",width:\"100%\",loading:\"lazy\"}),`\n`,(0,n.jsxs)(e.p,{children:[`If we zoom in a little, we can actually see the difference between the two compression algorithms.\nThe WebP format overall quality is very desirable, even with the quality of `,(0,n.jsx)(e.code,{children:\"75\"}),\" (\",(0,n.jsx)(e.code,{children:\"0\"}),\" is the worst, \",(0,n.jsx)(e.code,{children:\"100\"}),\" is the best).\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Now we can use the generated image in the code.\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-jsx\",children:(0,n.jsxs)(e.code,{className:\"language-jsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// components/Intro\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"img\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"optimized/portrait.webp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"alt\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"Daw-Chih\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"'\"}),\"s portrait\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"We can have a look at the download time from Network.\"}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/use-webp-for-better-ux/network.png\",alt:\"WebP in Network\",width:\"100%\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.p,{children:\"It takes about 1 millisecond to download the image. We just proved how effective WebP can be for our web performance.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"do-we-have-to-use-the-command\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#do-we-have-to-use-the-command\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Do We Have to Use The Command?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`It's not very convenient to convert images with the command.\nWhat we are looking for is to host all the images in `,(0,n.jsx)(e.code,{children:\"/raw\"}),\" directory and output WebP images in \",(0,n.jsx)(e.code,{children:\"/optimized\"}),` directory.\nLuckly I found something cool. `,(0,n.jsx)(e.a,{href:\"https://github.com/imagemin/imagemin\",children:(0,n.jsx)(e.code,{children:\"imagemin\"})}),` is a npm library that minifies images.\nIt offers a handy `,(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/imagemin-webp\",children:\"WebP imagemin plugin\"}),\" and all we need to do is to create a JavaScript file,\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// lib/webp.js\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" imagemin \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'imagemin'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" imageminWebp \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'imagemin-webp'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`/**\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:` * generate webp images inside of destination directory\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\" */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"imagemin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'raw/*.{jpg,png}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  destination\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'optimized'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  plugins\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"imageminWebp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" quality\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"75\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"and run\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"node\"}),` lib/webp.js\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"to take all the raw images and generate WebP images in \",(0,n.jsx)(e.code,{children:\"/optimized\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"not-all-browsers-support-webp-format\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#not-all-browsers-support-webp-format\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Not All Browsers Support WebP Format\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`So we need fallback images to support wider range of browsers. Let's first optimize our raw images with their original formats.\nThere are two `,(0,n.jsx)(e.code,{children:\"imagemin plugins\"}),\" we can use:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/imagemin-pngquant\",children:(0,n.jsx)(e.code,{children:\"imagemin-pngquant\"})}),\": for PNG images\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/imagemin/imagemin-jpegtran\",children:(0,n.jsx)(e.code,{children:\"imagemin-jpegtran\"})}),\": for JPEG images\"]}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// lib/webp.js\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" imageminJpegtran \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'imagemin-jpegtran'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" imageminPngquant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'imagemin-pngquant'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`/**\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:` * generate optimized fallback images\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\" */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"imagemin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'raw/*.{jpg,png}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  destination\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'optimized'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  plugins\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"imageminJpegtran\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"imageminPngquant\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      quality\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0.6\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"Now we are ready to add fallback images.\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-jsx\",children:(0,n.jsxs)(e.code,{className:\"language-jsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// components/Intro\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"picture\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"  \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"source\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"srcSet\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"optimized/portrait.webp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"type\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"image/webp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"  \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"source\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"srcSet\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"optimized/portrait.png\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"type\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"image/png\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"  \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"img\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"optimized/portrait.png\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"alt\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"Daw-Chih\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"'\"}),\"s portrait\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"loading\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"lazy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"picture\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"At this point, we can really compare all image qualities.\"}),`\n`,(0,n.jsxs)(e.h5,{id:\"png-left-and-optimized-png-right-comparison\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#png-left-and-optimized-png-right-comparison\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"PNG (left) and optimized PNG (right) comparison\"]}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/use-webp-for-better-ux/png-comparison.png\",alt:\"PNG and optimized PNG comparison\",width:\"100%\",loading:\"lazy\"}),`\n`,(0,n.jsxs)(e.h5,{id:\"png-left-and-webp-right-comparison\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#png-left-and-webp-right-comparison\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"PNG (left) and WebP (right) comparison\"]}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/use-webp-for-better-ux/webp-comparison.png\",alt:\"PNG and WebP comparison\",width:\"100%\",loading:\"lazy\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you are looking for optimizing SVG files, you can achieve it with \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/imagemin-svgo\",children:(0,n.jsx)(e.code,{children:\"imagemin-svgo\"})}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// lib/webp.js\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" imageminSvgo \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'imagemin-svgo'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`/**\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:` * generate optimized svg files\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\" */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"imagemin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'public/raw/*.svg'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  destination\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'optimized'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  plugins\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"imageminSvgo\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" removeViewBox\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"we-are-ready-to-integrate-with-workflow-automation\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#we-are-ready-to-integrate-with-workflow-automation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"We Are Ready to Integrate with Workflow Automation\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In our \",(0,n.jsx)(e.code,{children:\"package.json\"}),\", add the following scripts.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token string-property property\",children:'\"scripts\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token string-property property\",children:'\"image\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"node lib/webp.js\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token string-property property\",children:'\"prepare\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"yarn image\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"prepare\"}),\" script will execute after installation. This will allow us to build our image assets in the workflows of our choice.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"For example, to deploy my portfolio with GitHub Actions to GitHub Pages as a static site, a workflow looks like this.\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-yml\",children:(0,n.jsxs)(e.code,{className:\"language-yml code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"jobs\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"deploy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"runs-on\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ubuntu\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`latest\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"steps\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"uses\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` actions/checkout@v2\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" Install dependencies \",(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"front-facing baby chick\",children:\"\\u{1F425}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"run\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` yarn install\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" Export static assets \",(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"package\",children:\"\\u{1F4E6}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"run\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" yarn build \",(0,n.jsx)(e.span,{className:\"token important\",children:\"\u0026\u0026\"}),` yarn export\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" Deploy to GitHub Pages \",(0,n.jsx)(e.span,{role:\"img\",\"aria-label\":\"rocket\",children:\"\\u{1F680}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"uses\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" JamesIves/github\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"pages\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"deploy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`action@3.6.2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"with\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"GITHUB_TOKEN\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" secrets.GITHUB_TOKEN \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"BRANCH\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" gh\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`pages\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"FOLDER\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" out \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# contains all static assets\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[`In the \"Install dependencies\" step, the job installs the dependencies, and then generate the optimized images.\nThe images will be deployed alongside with the other assets in `,(0,n.jsx)(e.code,{children:\"/out\"}),\" directory.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"to-sum-up\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#to-sum-up\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"To Sum up\"]}),`\n`,(0,n.jsx)(e.p,{children:`WebP is designed for web. The image quality and size is very desirable especially for mobile users.\nWith the right tooling, generating WebP image can work seemlessly with automation.\nAs long as we make sure that the fallback images are in place, our audience can benefit tremendously from the boost of speed and better enjoy our content.`}),`\n`,(0,n.jsxs)(e.h5,{id:\"lighthouse-report-with-optimized-webp-images\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#lighthouse-report-with-optimized-webp-images\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Lighthouse report with optimized WebP images\"]}),`\n`,(0,n.jsx)(\"img\",{src:\"/optimized/articles/use-webp-for-better-ux/lighthouse-report.png\",alt:\"Lighthouse report\",width:\"100%\",loading:\"lazy\"}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.p,{children:\"Here you have it! Thanks for reading through.\"}),`\n`,(0,n.jsxs)(e.p,{children:[`I hope I made it as straight forward as possible to grasp.\nIf you have thoughts or there\\u2019s something not clear to you, feel free to drop a comment below, or connect with me on `,(0,n.jsx)(e.a,{href:\"https://twitter.com/dawchihliou\",children:\"twitter\"}),\"!\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you're wondering how to test Redux Observable, I wrote an ariticle \",(0,n.jsx)(e.a,{href:\"https://itnext.io/better-marble-test-70c7676a1e2\",children:'\"Writing Better Marble Tests for Redux Observable and TypeScript\"'}),` just for you.\nIt's a comprehensive guide to walk you through the thought process.`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you\\u2019re a fan of functional programming, check out \",(0,n.jsx)(e.a,{href:\"https://medium.com/@dawchihliou/intuitive-transducer-in-javascript-f358d3fe53d\",children:\"this article that I wrote about Transducers\"}),`.\nIt\\u2019s a step by step reasoning on writing a transducer and it touches on key ideas about functional programming.`]}),`\n`,(0,n.jsx)(e.p,{children:\"Happy coding!\"})]});return s?(0,n.jsx)(s,Object.assign({},a,{children:c})):c}var b=w;return f;})();\n;return Component.default;"},"_id":"articles/use-webp-for-better-ux.mdx","_raw":{"sourceFilePath":"articles/use-webp-for-better-ux.mdx","sourceFileName":"use-webp-for-better-ux.mdx","sourceFileDir":"articles","bodyType":"mdx","flattenedPath":"articles/use-webp-for-better-ux"},"type":"Article","readingTime":{"text":"6 min read","minutes":5.49,"time":329400,"words":1098},"wordCount":1100,"slug":"use-webp-for-better-ux"}},"__N_SSG":true},"page":"/articles/[slug]","query":{"slug":"use-webp-for-better-ux"},"buildId":"DjXUnZ3ePWm7AkkFhPOer","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>