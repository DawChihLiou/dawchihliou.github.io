<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/svg" sizes="32x32" href="/favicon.svg"/><link rel="icon" type="image/svg" sizes="16x16" href="/favicon.svg"/><link rel="mask-icon" href="/favicon.svg" color="#ffffff"/><link rel="manifest" href="/site.webmanifest"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="msapplication-TileColor" content="#007cf0"/><meta name="theme-color" content="#ffff"/><title>Building A Custom Google Maps Marker React Component Like Airbnb in Next.js</title><meta name="description" content="We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project."/><meta name="robots" content="follow, index"/><link rel="canonical" href="https://dawchihliou.github.io/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"/><meta itemProp="name" content="Building A Custom Google Maps Marker React Component Like Airbnb in Next.js"/><meta itemProp="description" content="We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project."/><meta itemProp="image" content="https://dawchihliou.github.io/optimized/articles/custom-google-maps-marker/hero.png"/><meta property="og:title" content="Building A Custom Google Maps Marker React Component Like Airbnb in Next.js"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dawchihliou.github.io/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"/><meta property="og:description" content="We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project."/><meta property="og:image" content="https://dawchihliou.github.io/optimized/articles/custom-google-maps-marker/hero.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="1400"/><meta property="og:image:height" content="600"/><meta property="og:image:alt" content="We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project."/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@dawchihliou"/><meta name="twitter:creator" content="@dawchihliou"/><meta name="twitter:title" content="Building A Custom Google Maps Marker React Component Like Airbnb in Next.js"/><meta name="twitter:description" content="We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project."/><meta name="twitter:image" content="https://dawchihliou.github.io/optimized/articles/custom-google-maps-marker/hero.webp"/><meta property="article:published_time" content="2022-08-23T00:00:00.000Z"/><meta property="article:section" content="Article Section"/><meta property="article:tag" content="Article Tag"/><meta name="next-head-count" content="34"/><link rel="preload" href="/_next/static/css/f4214c3b71874d65.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f4214c3b71874d65.css" data-n-g=""/><link rel="preload" href="/_next/static/css/54ba867c7255694d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/54ba867c7255694d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-010ff0b6bbe5ac8f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5784eb5f9f6cd23e.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5Bslug%5D-6aa06637217e2cb9.js" defer=""></script><script src="/_next/static/bdMATWyNRuQEd9P4SOOLN/_buildManifest.js" defer=""></script><script src="/_next/static/bdMATWyNRuQEd9P4SOOLN/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div id="outer-container"><header><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s"></div><div><div class="bm-burger-button" style="z-index:1000"><button id="react-burger-menu-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="bm-icon" style="width:100%;height:100%" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></div><div id="" class="bm-menu-wrap" style="position:fixed;right:inherit;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(-100%, 0, 0);-ms-transform:translate3d(-100%, 0, 0);-o-transform:translate3d(-100%, 0, 0);-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);transition:all 0.5s" aria-hidden="true"><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:auto"><nav class="bm-item-list" style="height:100%"><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/"><button class="Nav_button__YJwKE" tabindex="-1">Home</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/articles"><button class="Nav_button__YJwKE" tabindex="-1">Articles</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/work"><button class="Nav_button__YJwKE" tabindex="-1">Work</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/now"><button class="Nav_button__YJwKE" tabindex="-1">Now</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/expertise"><button class="Nav_button__YJwKE" tabindex="-1">Expertise</button></a><a class="styles_anchor__g18qA bm-item Nav_link__ZgDoZ" style="display:block" tabindex="-1" href="/contact"><button class="Nav_button__YJwKE" tabindex="-1">Contact</button></a><span class="bm-item Nav_pusher__93Gc6" style="display:block" tabindex="-1"></span><span class="bm-item Nav_divider__QD8Pt" style="display:block" tabindex="-1"></span><div class="bm-item Nav_profile__Kf2nU" style="display:block" tabindex="-1"><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Linkedin profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M20.45175,20.45025 L16.89225,20.45025 L16.89225,14.88075 C16.89225,13.5525 16.86975,11.844 15.04275,11.844 C13.191,11.844 12.90825,13.2915 12.90825,14.7855 L12.90825,20.45025 L9.3525,20.45025 L9.3525,8.997 L12.765,8.997 L12.765,10.563 L12.81375,10.563 C13.2885,9.66225 14.4495,8.71275 16.18125,8.71275 C19.78575,8.71275 20.45175,11.08425 20.45175,14.169 L20.45175,20.45025 Z M5.33925,7.4325 C4.1955,7.4325 3.27375,6.50775 3.27375,5.36775 C3.27375,4.2285 4.1955,3.30375 5.33925,3.30375 C6.47775,3.30375 7.4025,4.2285 7.4025,5.36775 C7.4025,6.50775 6.47775,7.4325 5.33925,7.4325 L5.33925,7.4325 Z M7.11975,20.45025 L3.5565,20.45025 L3.5565,8.997 L7.11975,8.997 L7.11975,20.45025 Z M23.00025,0 L1.0005,0 C0.44775,0 0,0.44775 0,0.99975 L0,22.9995 C0,23.55225 0.44775,24 1.0005,24 L23.00025,24 C23.55225,24 24,23.55225 24,22.9995 L24,0.99975 C24,0.44775 23.55225,0 23.00025,0 L23.00025,0 Z"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou" aria-label="Link to Daw-Chih&#x27;s GitHub profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou" aria-label="Link to Daw-Chih&#x27;s Medium profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2.84593838,5.88685595 C2.87575654,5.59224254 2.76340763,5.30104995 2.54341737,5.10276397 L0.302521008,2.4032473 L0.302521008,2 L7.2605042,2 L12.6386555,13.7949836 L17.3669469,2 L24,2 L24,2.4032473 L22.0840336,4.2402628 C21.9188563,4.36617057 21.8369199,4.57310892 21.8711485,4.77792587 L21.8711485,18.2755093 C21.8369199,18.4803262 21.9188563,18.6872645 22.0840336,18.8131723 L23.9551821,20.6501878 L23.9551821,21.0534351 L14.5434174,21.0534351 L14.5434174,20.6501878 L16.4817928,18.7683671 C16.6722689,18.5779447 16.6722689,18.5219382 16.6722689,18.2307041 L16.6722689,7.32062416 L11.2829132,21.0086299 L10.5546219,21.0086299 L4.28011204,7.32062416 L4.28011204,16.4945003 C4.22779746,16.8801958 4.35589372,17.2685069 4.62745097,17.5474239 L7.14845938,20.6053826 L7.14845938,21.0086299 L0,21.0086299 L0,20.6053826 L2.5210084,17.5474239 C2.79058848,17.2680445 2.91121535,16.8771576 2.84593838,16.4945003 L2.84593838,5.88685595 Z"></path></svg></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/u/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Hackernoon profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M5.701 0v6.223H8.85V4.654h1.576v7.842H12V4.654h1.574v1.569h3.15V0zm11.024 6.223v3.136h1.574V6.223zm1.574 3.136v4.705h1.576v-1.568h1.574v-1.568h-1.574V9.359zm0 4.705h-1.574v3.137h1.574zm-1.574 3.137h-3.15v1.569H8.85V17.2H5.7V24h11.024zm-11.024 0v-3.137H4.125v3.137zm-1.576-3.137V9.36H2.551v4.705zm0-4.705h1.576V6.223H4.125Z"></path></svg><span hidden="">Link to Daw-Chih&#x27;s Hacker Noon profile</span></a><a class="styles_anchor__g18qA Nav_iconLink__z5y5Q" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou" aria-label="Link to Daw-Chih&#x27;s Twitter profile" tabindex="-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M24,4.3086 C23.117,4.7006 22.168,4.9646 21.172,5.0836 C22.188,4.4746 22.969,3.5096 23.337,2.3596 C22.386,2.9246 21.332,3.3336 20.21,3.5556 C19.312,2.5976 18.032,1.9996 16.616,1.9996 C13.897,1.9996 11.692,4.2046 11.692,6.9236 C11.692,7.3096 11.736,7.6856 11.82,8.0456 C7.728,7.8406 4.099,5.8806 1.671,2.9006 C1.247,3.6286 1.004,4.4736 1.004,5.3766 C1.004,7.0846 1.873,8.5926 3.195,9.4756 C2.388,9.4486 1.628,9.2276 0.964,8.8596 L0.964,8.9206 C0.964,11.3066 2.661,13.2966 4.914,13.7486 C4.501,13.8626 4.065,13.9216 3.617,13.9216 C3.299,13.9216 2.991,13.8906 2.69,13.8336 C3.317,15.7896 5.135,17.2136 7.29,17.2536 C5.604,18.5736 3.481,19.3606 1.175,19.3606 C0.777,19.3606 0.385,19.3376 0,19.2926 C2.179,20.6886 4.767,21.5046 7.548,21.5046 C16.605,21.5046 21.557,14.0016 21.557,7.4946 C21.557,7.2816 21.552,7.0696 21.543,6.8586 C22.505,6.1636 23.34,5.2966 24,4.3086"></path></svg></a></div><div class="DarkmodeSwitch_container__uFGHQ" tabindex="-1"><div class="DarkmodeSwitch_wrap__e71_4"></div></div></nav></div><div><div class="bm-cross-button" style="position:absolute;width:24px;height:24px;right:8px;top:8px"><button id="react-burger-cross-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="bm-cross" style="width:100%;height:100%" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div></div></div></header><div class="Menubar_menubar__gvU4b"><a class="styles_anchor__g18qA Menubar_hireMe__zuAig" href="/contact"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>Hire Me</a><div class="DarkmodeSwitch_container__uFGHQ" tabindex="0"><div class="DarkmodeSwitch_wrap__e71_4"></div></div><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou" aria-label="See more Daw-Chih&#x27;s work on GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.5em" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a></div><div id="page-wrap"><article><div class="Article_container__q__L3"><div class="Article_wrap__LZypL"><h1>Building A Custom Google Maps Marker React Component Like Airbnb in Next.js</h1><div class="Article_info__bOKys"><div class="Article_author__grS8U"><img alt="Daw-Chih Liou" src="/optimized/raw/portrait-sm.webp" loading="lazy"/><p>Daw-Chih Liou</p></div><p>Aug 23, 2022<!-- --> Â· 8 min read</p></div><img alt="Building A Custom Google Maps Marker React Component Like Airbnb in Next.js" src="/optimized/articles/custom-google-maps-marker/hero.webp" width="100%" loading="lazy"/><div class="article-content"><h2 id="tldr"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#tldr"><span class="icon icon-link"></span></a>TL;DR</h2>
<ul>
<li><span role="img" aria-label="sparkles">âœ¨</span> We&#x27;ll learn how to build a custom Google Maps marker using any React component.</li>
<li><span role="img" aria-label="nail polish">ðŸ’…</span> We&#x27;ll learn how to create animation and user interaction with our custom marker.</li>
<li><span role="img" aria-label="rocket">ðŸš€</span> We&#x27;ll discuss how to avoid compilation error during build time in Next.js.</li>
</ul>
<hr/>
<p>This article is also available on</p>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://betterprogramming.pub/building-a-custom-google-maps-marker-react-component-like-airbnb-in-next-js-52fb37ccfabb">Better Programming</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/building-an-airbnb-like-map-in-nextjs">Hacker Noon</a></li>
</ul>
<p>Feel free to read it on your favorite platform<span role="img" aria-label="sparkles">âœ¨</span></p>
<hr/>
<p>I was curious about making <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab&amp;refinement_paths%5B%5D=%2Fhomes&amp;flexible_trip_lengths%5B%5D=one_week&amp;query=San%20Francisco%2C%20CA%2C%20USA&amp;place_id=ChIJIQBpAG2ahYAR_6128GcTUEo&amp;date_picker_type=calendar&amp;checkin=2022-08-27&amp;checkout=2022-08-31&amp;adults=2&amp;source=structured_search_input_header&amp;search_type=user_map_move&amp;ne_lat=37.8053501277308&amp;ne_lng=-122.37779937848381&amp;sw_lat=37.77496292220189&amp;sw_lng=-122.44955383405022&amp;zoom=15&amp;search_by_map=true">markers on Google Maps like Airbnb</a>.</p>
<img src="/optimized/articles/custom-google-maps-marker/airbnb-map-screenshot.webp" alt="Airbnb map screenshot" width="100%" class="rounded centered" loading="lazy"/>
<p>These markers pack much more functionalities than the default markers from Google Maps. Besides custom styling, each marker displays a dynamic pricing and <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/">states</a>. When you interact with them, you&#x27;ll see custom React components rendered with data.</p>
<p>I find it very fun and useful so let&#x27;s unpack it together!</p>
<p>We&#x27;ll be building a proof of concept to create customer markers using any React component.</p>
<img src="/articles/custom-google-maps-marker/demo.gif" alt="Full user interaction with custom Marker" width="100%" class="rounded centered" loading="lazy"/>
<p>Let&#x27;s go.</p>
<h2 id="setting-up-the-project"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#setting-up-the-project"><span class="icon icon-link"></span></a>Setting up The Project</h2>
<blockquote>
<p>The demo is <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/react-google-maps-marker-demo">available on GitHub</a>. Feel free to fork it<span role="img" aria-label="rocket">ðŸš€</span></p>
</blockquote>
<p>I integrated the Google Maps API in a <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://vercel.com/solutions/nextjs">Next.js</a> project by following the <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/react-map">official tutorial</a>. The tutorial explains in detail how to render Google Maps and markers in React applications.</p>
<p>There are a few more integrations included in the project:</p>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://rapidapi.com/tipsters/api/priceline-com-provider/">RapidAPI - Priceline com Provider</a>: to fetch hotel listings as our dataset.</li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://tailwindcss.com/">Tailwind CSS</a>: to provide css styles.</li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.framer.com/motion/">Framer Motion</a>: to apply animations on React components.</li>
</ul>
<p>The default marker from Google Maps looks like this:</p>
<img src="/optimized/articles/custom-google-maps-marker/googlemaps-marker.webp" alt="Default Google Maps Markers" width="100%" class="rounded centered" loading="lazy"/>
<h2 id="customizing-markers-using-google-maps-overlay"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#customizing-markers-using-google-maps-overlay"><span class="icon icon-link"></span></a>Customizing Markers Using Google Maps Overlay</h2>
<p>Google Maps API offers an <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView">OverlayView class</a> to place DOM elements on the map. We can use the <strong>OverlayView</strong> to place the container of a <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/portals.html">React Portal</a> on the map and render a custom react component into the container.</p>
<p>Following <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/customoverlays">the official tutorial to create a custom Overlay class</a>, we&#x27;ll implement the three basic methods:</p>
<ul>
<li><strong>onAdd</strong>: to append our portal container to the target <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes">pane</a>.</li>
<li><strong>draw</strong>: to position the container.</li>
<li><strong>onRemove</strong>: to remove the container from the DOM.</li>
</ul>
<div class="rehype-code-title">Overlay.ts</div><pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Overlay</span> <span class="token keyword">extends</span> <span class="token class-name">google</span><span class="token punctuation">.</span>maps<span class="token punctuation">.</span>OverlayView <span class="token punctuation">{</span>
</span><span class="code-line">  container<span class="token operator">:</span> HTMLElement
</span><span class="code-line">  pane<span class="token operator">:</span> <span class="token keyword">keyof</span> google<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>MapPanes
</span><span class="code-line">  position<span class="token operator">:</span> google<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>LatLng <span class="token operator">|</span> google<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>LatLngLiteral
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span>
</span><span class="code-line">    container<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span>
</span><span class="code-line">    pane<span class="token operator">:</span> <span class="token keyword">keyof</span> google<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>MapPanes<span class="token punctuation">,</span>
</span><span class="code-line">    position<span class="token operator">:</span> google<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>LatLng <span class="token operator">|</span> google<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>LatLngLiteral
</span><span class="code-line">  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>container <span class="token operator">=</span> container
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>pane <span class="token operator">=</span> pane
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>position <span class="token operator">=</span> position
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">onAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> pane <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPanes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>pane<span class="token punctuation">]</span>
</span><span class="code-line">    pane<span class="token operator">?.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> projection <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getProjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">const</span> point <span class="token operator">=</span> projection<span class="token punctuation">.</span><span class="token function">fromLatLngToDivPixel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>point <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">return</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>point<span class="token punctuation">.</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>point<span class="token punctuation">.</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">onRemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">.</span>parentNode <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2 id="connecting-google-maps-and-react"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#connecting-google-maps-and-react"><span class="icon icon-link"></span></a>Connecting Google Maps and React</h2>
<p>Now that we have our custom <strong>Overlay</strong> class, we can create a React component to:</p>
<ul>
<li>create a container,</li>
<li>instantiate <strong>Overlay</strong> class,</li>
<li>add the overlay into the map instance,</li>
<li>and create a React portal to render components in the container.</li>
</ul>
<div class="rehype-code-title">OverlayView.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">PropsWithChildren</span><span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-dom&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Overlay</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;./Overlay&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">type</span> <span class="token class-name">OverlayProps</span> <span class="token operator">=</span> <span class="token maybe-class-name">PropsWithChildren</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
</span><span class="code-line">  position<span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLng</span></span> <span class="token operator">|</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLngLiteral</span></span>
</span><span class="code-line">  pane<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">keyof</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MapPanes</span></span>
</span><span class="code-line">  map<span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token known-class-name class-name">Map</span>
</span><span class="code-line">  zIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">OverlayView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  position<span class="token punctuation">,</span>
</span><span class="code-line">  pane <span class="token operator">=</span> <span class="token string">&#x27;floatPane&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  map<span class="token punctuation">,</span>
</span><span class="code-line">  zIndex<span class="token punctuation">,</span>
</span><span class="code-line">  children<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">OverlayProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">    div<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">position</span> <span class="token operator">=</span> <span class="token string">&#x27;absolute&#x27;</span>
</span><span class="code-line">    <span class="token keyword">return</span> div
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> overlay <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Overlay</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> pane<span class="token punctuation">,</span> position<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>container<span class="token punctuation">,</span> pane<span class="token punctuation">,</span> position<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    overlay<span class="token operator">?.</span><span class="token method function property-access">setMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> overlay<span class="token operator">?.</span><span class="token method function property-access">setMap</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>map<span class="token punctuation">,</span> overlay<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// to move the container to the foreground and background</span>
</span><span class="code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    container<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">zIndex</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>zIndex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>zIndex<span class="token punctuation">,</span> container<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">createPortal</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Let&#x27;s create a marker using the <strong>OverlayView</strong> component and a button.</p>
<div class="rehype-code-title">CustomMarker.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useMemo <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Hotel</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&quot;../../types/hotel&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">OverlayView</span></span> <span class="token keyword">from</span> <span class="token string">&quot;../OverlayView&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">CustomMarkerProps</span> <span class="token punctuation">{</span>
</span><span class="code-line">  hotel<span class="token operator">:</span> <span class="token maybe-class-name">Hotel</span><span class="token punctuation">;</span>
</span><span class="code-line">  map<span class="token operator">?</span><span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token known-class-name class-name">Map</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">CustomMarker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  hotel<span class="token punctuation">,</span>
</span><span class="code-line">  map<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">CustomMarkerProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hotel<span class="token punctuation">.</span>ratesSummary<span class="token punctuation">.</span>minPrice<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span><span class="token group punctuation">(</span><span class="token char-set class-name">.</span><span class="token quantifier number">*?</span><span class="token char-set class-name">\d</span><span class="token quantifier number">*</span><span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>hotel<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token punctuation">{</span>map <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OverlayView</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token attr-name">position</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            lat<span class="token operator">:</span> hotel<span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">latitude</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            lng<span class="token operator">:</span> hotel<span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">longitude</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token attr-name">map</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>map<span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token attr-name">styles</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            backgorundColor<span class="token operator">:</span> <span class="token string">&#x27;DarkGray&#x27;</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            color<span class="token operator">:</span> <span class="token string">&#x27;white&#x27;</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token punctuation">{</span><span class="token comment">/* use a button as the marker */</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>price<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">OverlayView</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2 id="resolving-error-in-nextjs"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#resolving-error-in-nextjs"><span class="icon icon-link"></span></a>Resolving Error in Next.js</h2>
<p>If you&#x27;ve started your dev server or tried to build the project, you might see a <strong>Reference Error</strong> saying <strong>&quot;google is not defined&quot;</strong>:</p>
<img src="/optimized/articles/custom-google-maps-marker/reference-error.webp" alt="Reference Error from Webpack" width="100%" class="rounded centered" loading="lazy"/>
<p>This is because Webpack doesn&#x27;t recognize &quot;google&quot; at build time. At build time, Google Maps JavaScript API is not yet loaded so Webpack is not able to evaluate the <strong>Overlay</strong> class at the module level. What we can do is to wrap the class in a <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.patterns.dev/posts/factory-pattern/">factory function</a> to resolve the build error.</p>
<div class="rehype-code-title">Overlay.ts</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createOverlay</span><span class="token punctuation">(</span>
</span><span class="code-line">  container<span class="token operator">:</span> <span class="token maybe-class-name">HTMLElement</span><span class="token punctuation">,</span>
</span><span class="code-line">  pane<span class="token operator">:</span> <span class="token keyword">keyof</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MapPanes</span></span><span class="token punctuation">,</span>
</span><span class="code-line">  position<span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLng</span></span> <span class="token operator">|</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLngLiteral</span></span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">class</span> <span class="token class-name">Overlay</span> <span class="token keyword">extends</span> <span class="token class-name">google</span><span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">OverlayView</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">    container<span class="token operator">:</span> <span class="token maybe-class-name">HTMLElement</span>
</span><span class="code-line">    pane<span class="token operator">:</span> <span class="token keyword">keyof</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MapPanes</span></span>
</span><span class="code-line">    position<span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLng</span></span> <span class="token operator">|</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLngLiteral</span></span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">constructor</span><span class="token punctuation">(</span>
</span><span class="code-line">      container<span class="token operator">:</span> <span class="token maybe-class-name">HTMLElement</span><span class="token punctuation">,</span>
</span><span class="code-line">      pane<span class="token operator">:</span> <span class="token keyword">keyof</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MapPanes</span></span><span class="token punctuation">,</span>
</span><span class="code-line">      position<span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLng</span></span> <span class="token operator">|</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">LatLngLiteral</span></span>
</span><span class="code-line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">container</span> <span class="token operator">=</span> container
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">pane</span> <span class="token operator">=</span> pane
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">position</span> <span class="token operator">=</span> position
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">onAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> pane <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getPanes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">pane</span><span class="token punctuation">]</span>
</span><span class="code-line">      pane<span class="token operator">?.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> projection <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getProjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token keyword">const</span> point <span class="token operator">=</span> projection<span class="token punctuation">.</span><span class="token method function property-access">fromLatLngToDivPixel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">position</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>point <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">transform</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>point<span class="token punctuation">.</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>point<span class="token punctuation">.</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">onRemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">.</span><span class="token property-access">parentNode</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">.</span><span class="token property-access">parentNode</span><span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Overlay</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> pane<span class="token punctuation">,</span> position<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Let&#x27;s refactor the <strong>OverlayView</strong> component accordingly:</p>
<div class="rehype-code-title">OverlayView.tsx</div><pre class="language-diff"><code class="language-diff code-highlight"><span class="code-line deleted"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import { Overlay } from &#x27;./Overlay&#x27;
</span></span></span><span class="code-line inserted"><span class="token deleted-sign deleted"><span class="token line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { createOverlay } from &#x27;./Overlay&#x27;
</span></span></span><span class="code-line"><span class="token inserted-sign inserted"><span class="token line"></span></span>
</span><span class="code-line">export default function OverlayView({
</span><span class="code-line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> position,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line"> pane = &#x27;floatPane&#x27;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line"> map,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line"> zIndex,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line"> children,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span></span>}: OverlayProps) {
</span><span class="code-line">
</span><span class="code-line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const overlay = useMemo(() =&gt; {
</span></span></span><span class="code-line deleted"><span class="token unchanged"><span class="token line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   return new Overlay(container, pane, position)
</span></span></span><span class="code-line inserted"><span class="token deleted-sign deleted"><span class="token line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   return createOverlay(container, pane, position)
</span></span></span><span class="code-line"><span class="token inserted-sign inserted"><span class="token line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }, [container, pane, position])
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span></span>
</span><span class="code-line">}
</span></code></pre>
<p>Now we should be able to see our map again and our custom markers without error!</p>
<img src="/optimized/articles/custom-google-maps-marker/custom-marker.webp" alt="Custom Google Maps Markers built with Overlay" width="100%" class="rounded centered" loading="lazy"/>
<h2 id="adding-animations-and-user-interactions"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#adding-animations-and-user-interactions"><span class="icon icon-link"></span></a>Adding Animations and User Interactions</h2>
<p>Since our custom markers are React components, we can define the user experience and use the available tooling in the React ecosystem. Let&#x27;s implement:</p>
<ul>
<li>a soft animation to transition the marker&#x27;s appearance,</li>
<li>and a click event handler to toggle the button state and a card component that displays hotel details.</li>
</ul>
<div class="rehype-code-title">CustomMarker.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useCallback<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Hotel</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../../types/hotel&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">OverlayView</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../OverlayView&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> motion <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;framer-motion&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">CustomMarkerProps</span> <span class="token punctuation">{</span>
</span><span class="code-line">  hotel<span class="token operator">:</span> <span class="token maybe-class-name">Hotel</span>
</span><span class="code-line">  map<span class="token operator">?</span><span class="token operator">:</span> google<span class="token punctuation">.</span><span class="token property-access">maps</span><span class="token punctuation">.</span><span class="token known-class-name class-name">Map</span>
</span><span class="code-line">  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span>payload<span class="token operator">:</span> <span class="token maybe-class-name">Hotel</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token keyword">void</span>
</span><span class="code-line">  highlight<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">CustomMarker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  hotel<span class="token punctuation">,</span>
</span><span class="code-line">  map<span class="token punctuation">,</span>
</span><span class="code-line">  onClick<span class="token punctuation">,</span>
</span><span class="code-line">  highlight<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">CustomMarkerProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hotel<span class="token punctuation">.</span>ratesSummary<span class="token punctuation">.</span>minPrice<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span><span class="token group punctuation">(</span><span class="token char-set class-name">.</span><span class="token quantifier number">*?</span><span class="token char-set class-name">\d</span><span class="token quantifier number">*</span><span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>hotel<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">onClick</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>onClick<span class="token punctuation">,</span> hotel<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token punctuation">{</span>map <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OverlayView</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token attr-name">position</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            lat<span class="token operator">:</span> hotel<span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">latitude</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            lng<span class="token operator">:</span> hotel<span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">longitude</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token attr-name">map</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>map<span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token comment">// when users select it, move the marker to the foreground</span>
</span></span><span class="code-line"><span class="token tag">          <span class="token attr-name">zIndex</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>highlight <span class="token operator">?</span> <span class="token number">99</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token punctuation">{</span><span class="token comment">/* appearance transition */</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>motion.div</span>
</span></span><span class="code-line"><span class="token tag">            <span class="token attr-name">initial</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> opacity<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">            <span class="token attr-name">animate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> opacity<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">            <span class="token attr-name">exit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> opacity<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">            <span class="token attr-name">transition</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">              type<span class="token operator">:</span> <span class="token string">&#x27;spring&#x27;</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">              stiffness<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">              damping<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">              delay<span class="token operator">:</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">          <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
</span></span><span class="code-line"><span class="token tag">              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">              <span class="token comment">// button state toggle</span>
</span></span><span class="code-line"><span class="token tag">              <span class="token attr-name">styles</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">                backgorundColor<span class="token operator">:</span> highlight <span class="token operator">?</span> <span class="token string">&#x27;white&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;DarkGray&#x27;</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">                color<span class="token operator">:</span> highlight <span class="token operator">?</span> <span class="token string">&#x27;black&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;white&#x27;</span><span class="token punctuation">,</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token script language-javascript">              <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">              </span><span class="token punctuation">{</span>price<span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>motion.div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">OverlayView</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>The animation looks like this:</p>
<img src="/articles/custom-google-maps-marker/animation-demo.gif" alt="Full user interaction with custom Marker" width="100%" class="rounded centered" loading="lazy"/>
<p>The button state toggle and the card toggle are also in place:</p>
<img src="/articles/custom-google-maps-marker/demo.gif" alt="Full user interaction with custom Marker" width="100%" class="rounded centered" loading="lazy"/>
<h2 id="final-thoughts"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#final-thoughts"><span class="icon icon-link"></span></a>Final Thoughts</h2>
<p>It looks like a lot of code to create a custom marker but the mental model is actually straightforward:</p>
<ul>
<li>We render a DOM element as the container in the map through an overlay instance.</li>
<li>In the overlay, we can position the container at the right place on the map.</li>
<li>The container is also the destination of a React portal.</li>
<li>When a React marker component is ready to render, we portal the component to the container in the map.</li>
</ul>
<h2 id="references"><a class="styles_anchor__g18qA anchor" href="/articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs#references"><span class="icon icon-link"></span></a>References</h2>
<ul>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/react-map">Website: Adding a Map and Markers to a React Application</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/markers">Website: Google Maps JavaScript API - Markers</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/custom-markers">Website: Google Maps JavaScript API - Custom Markers</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView">Website: Google Maps JavaScript API - OverlayView class</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/customoverlays">Website: Google Maps JavaScript API - Custom Overlays</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes">Website: Google Maps JavaScript API - MapPanes interface</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab&amp;refinement_paths%5B%5D=%2Fhomes&amp;flexible_trip_lengths%5B%5D=one_week&amp;query=San%20Francisco%2C%20CA%2C%20USA&amp;place_id=ChIJIQBpAG2ahYAR_6128GcTUEo&amp;date_picker_type=calendar&amp;checkin=2022-08-27&amp;checkout=2022-08-31&amp;adults=2&amp;source=structured_search_input_header&amp;search_type=user_map_move&amp;ne_lat=37.8053501277308&amp;ne_lng=-122.37779937848381&amp;sw_lat=37.77496292220189&amp;sw_lng=-122.44955383405022&amp;zoom=15&amp;search_by_map=true">Website: Airbnb</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/">Website: Designing States for Buttons &amp; UI Interactions - Adobe XD Ideas</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.framer.com/motion/">Website: Framer Motion</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/portals.html">Website: React Portals</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://vercel.com/solutions/nextjs">Website: Next.js</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://rapidapi.com/tipsters/api/priceline-com-provider/">Website: RapidAPI - Priceline com Provider</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.patterns.dev/posts/factory-pattern/">Website: Factory Pattern - patterns</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/googlemaps/react-wrapper">GitHub: Google Maps JavaScript API React Wrapper</a></li>
<li><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou/react-google-maps-marker-demo">GitHub: react-google-maps-marker-demo</a></li>
</ul>
<hr/>
<p><span role="img" aria-label="speech balloon">ðŸ’¬</span> Comments on <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.reddit.com/r/javascript/comments/wvnx8q/building_a_custom_google_maps_marker_react/">Reddit</a>.</p>
<hr/>
<p>Here you have it! Thanks for reading through<span role="img" aria-label="raising hands">ðŸ™Œ</span>
If you find this article useful, please share it to help more people in their engineering journey.</p>
<p><span role="img" aria-label="bird">ðŸ¦</span> Feel free to connect with me on <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou">twitter</a>!</p>
<p>â­ Ready for the next article? <span role="img" aria-label="backhand index pointing right">ðŸ‘‰</span> <a class="styles_anchor__g18qA undefined" href="/articles/event-bus-for-react"><strong>Event Bus for React</strong></a></p>
<p>Happy coding!</p></div><article class="Author_wrap__s8DeE"><img src="/optimized/raw/portrait-sm.webp" alt="Daw-Chih Liou" class="Author_avatar__j6KIn" loading="lazy"/><div><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://dawchihliou.github.io">Daw-Chih Liou</a><p>Daw-Chih is a software engineer, UX advocate, and creator who is dedicated to Web engineering. His background in Human Centered Computing has led him to work with startups and public companies across North America, Asia, and Europe. He is passionate about meeting business trajectory with user journey and utilizing engineering architecture and performance monitoring to provide optimal user experience.</p></div></article></div></div></article><footer class="Footer_footer__1IwEk"><div class="Footer_wrap__FVCTX"><div class="Footer_resources__fG_vu"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ðŸ’š</span>This site is built with</p><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://nextjs.org">Next.js</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://react-icons.github.io/react-icons">React Icons</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://mdxjs.com">MDX</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://unifiedjs.com">unified</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/contentlayerdev/contentlayer">Contentlayer</a></div><div class="Footer_contact__9GJn6"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ðŸ¦„</span>Where to find me</p><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou">Linkedin</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://github.com/DawChihLiou">GitHub</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://twitter.com/dawchihliou">Twitter</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://medium.com/@dawchihliou">Medium</a><a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/u/dawchihliou">Hacker Noon</a><a class="styles_anchor__g18qA undefined" href="/rss.xml">RSS Feed <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div><div class="Footer_sitemap__92ono"><p><span role="img" aria-label="build with love" class="Footer_emoji__u15jg">ðŸ—º</span>Sitemap</p><a class="styles_anchor__g18qA undefined" href="/">Home</a><a class="styles_anchor__g18qA undefined" href="/articles">Articles</a><a class="styles_anchor__g18qA undefined" href="/work">Work</a><a class="styles_anchor__g18qA undefined" href="/now">Now</a><a class="styles_anchor__g18qA undefined" href="/expertise">Expertise</a><a class="styles_anchor__g18qA undefined" href="/contact">Contact</a></div></div><div class="Footer_copyright__vZZRL">Â© <!-- -->2023<!-- --> <a class="styles_anchor__g18qA undefined" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dawchihliou">Daw-Chih Liou</a></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Building A Custom Google Maps Marker React Component Like Airbnb in Next.js","publishedAt":"Aug 23, 2022","description":"We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project.","cover":"/optimized/articles/custom-google-maps-marker/hero.webp","category":"Frontend","coverWidth":"1400","coverHeight":"600","body":{"raw":"\n## TL;DR\n\n- âœ¨ We'll learn how to build a custom Google Maps marker using any React component.\n- ðŸ’… We'll learn how to create animation and user interaction with our custom marker.\n- ðŸš€ We'll discuss how to avoid compilation error during build time in Next.js.\n\n---\n\nThis article is also available on\n\n- [Better Programming](https://betterprogramming.pub/building-a-custom-google-maps-marker-react-component-like-airbnb-in-next-js-52fb37ccfabb)\n- [Hacker Noon](https://hackernoon.com/building-an-airbnb-like-map-in-nextjs)\n\nFeel free to read it on your favorite platformâœ¨\n\n---\n\nI was curious about making [markers on Google Maps like Airbnb](https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab\u0026refinement_paths%5B%5D=%2Fhomes\u0026flexible_trip_lengths%5B%5D=one_week\u0026query=San%20Francisco%2C%20CA%2C%20USA\u0026place_id=ChIJIQBpAG2ahYAR_6128GcTUEo\u0026date_picker_type=calendar\u0026checkin=2022-08-27\u0026checkout=2022-08-31\u0026adults=2\u0026source=structured_search_input_header\u0026search_type=user_map_move\u0026ne_lat=37.8053501277308\u0026ne_lng=-122.37779937848381\u0026sw_lat=37.77496292220189\u0026sw_lng=-122.44955383405022\u0026zoom=15\u0026search_by_map=true).\n\n\u003cimg\n  src=\"/optimized/articles/custom-google-maps-marker/airbnb-map-screenshot.webp\"\n  alt=\"Airbnb map screenshot\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\nThese markers pack much more functionalities than the default markers from Google Maps. Besides custom styling, each marker displays a dynamic pricing and [states](https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/). When you interact with them, you'll see custom React components rendered with data.\n\nI find it very fun and useful so let's unpack it together!\n\nWe'll be building a proof of concept to create customer markers using any React component.\n\n\u003cimg\n  src=\"/articles/custom-google-maps-marker/demo.gif\"\n  alt=\"Full user interaction with custom Marker\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\nLet's go.\n\n## Setting up The Project\n\n\u003e The demo is [available on GitHub](https://github.com/DawChihLiou/react-google-maps-marker-demo). Feel free to fork itðŸš€\n\nI integrated the Google Maps API in a [Next.js](https://vercel.com/solutions/nextjs) project by following the [official tutorial](https://developers.google.com/maps/documentation/javascript/react-map). The tutorial explains in detail how to render Google Maps and markers in React applications.\n\nThere are a few more integrations included in the project:\n\n- [RapidAPI - Priceline com Provider](https://rapidapi.com/tipsters/api/priceline-com-provider/): to fetch hotel listings as our dataset.\n- [Tailwind CSS](https://tailwindcss.com/): to provide css styles.\n- [Framer Motion](https://www.framer.com/motion/): to apply animations on React components.\n\nThe default marker from Google Maps looks like this:\n\n\u003cimg\n  src=\"/optimized/articles/custom-google-maps-marker/googlemaps-marker.webp\"\n  alt=\"Default Google Maps Markers\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\n## Customizing Markers Using Google Maps Overlay\n\nGoogle Maps API offers an [OverlayView class](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView) to place DOM elements on the map. We can use the **OverlayView** to place the container of a [React Portal](https://reactjs.org/docs/portals.html) on the map and render a custom react component into the container.\n\nFollowing [the official tutorial to create a custom Overlay class](https://developers.google.com/maps/documentation/javascript/customoverlays), we'll implement the three basic methods:\n\n- **onAdd**: to append our portal container to the target [pane](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes).\n- **draw**: to position the container.\n- **onRemove**: to remove the container from the DOM.\n\n```ts:Overlay.ts\nexport class Overlay extends google.maps.OverlayView {\n  container: HTMLElement\n  pane: keyof google.maps.MapPanes\n  position: google.maps.LatLng | google.maps.LatLngLiteral\n\n  constructor(\n    container: HTMLElement,\n    pane: keyof google.maps.MapPanes,\n    position: google.maps.LatLng | google.maps.LatLngLiteral\n  ) {\n    super()\n    this.container = container\n    this.pane = pane\n    this.position = position\n  }\n\n  onAdd(): void {\n    const pane = this.getPanes()?.[this.pane]\n    pane?.appendChild(this.container)\n  }\n\n  draw(): void {\n    const projection = this.getProjection()\n    const point = projection.fromLatLngToDivPixel(this.position)\n\n    if (point === null) {\n      return\n    }\n\n    this.container.style.transform = `translate(${point.x}px, ${point.y}px)`\n  }\n\n  onRemove(): void {\n    if (this.container.parentNode !== null) {\n      this.container.parentNode.removeChild(this.container)\n    }\n  }\n}\n```\n\n## Connecting Google Maps and React\n\nNow that we have our custom **Overlay** class, we can create a React component to:\n\n- create a container,\n- instantiate **Overlay** class,\n- add the overlay into the map instance,\n- and create a React portal to render components in the container.\n\n```tsx:OverlayView.tsx\nimport { PropsWithChildren, useEffect, useMemo } from 'react'\nimport { createPortal } from 'react-dom'\nimport { Overlay } from './Overlay'\n\ntype OverlayProps = PropsWithChildren\u003c{\n  position: google.maps.LatLng | google.maps.LatLngLiteral\n  pane?: keyof google.maps.MapPanes\n  map: google.maps.Map\n  zIndex?: number\n}\u003e\n\nexport default function OverlayView({\n  position,\n  pane = 'floatPane',\n  map,\n  zIndex,\n  children,\n}: OverlayProps) {\n  const container = useMemo(() =\u003e {\n    const div = document.createElement('div')\n    div.style.position = 'absolute'\n    return div\n  }, [])\n\n  const overlay = useMemo(() =\u003e {\n    return new Overlay(container, pane, position)\n  }, [container, pane, position])\n\n  useEffect(() =\u003e {\n    overlay?.setMap(map)\n    return () =\u003e overlay?.setMap(null)\n  }, [map, overlay])\n\n  // to move the container to the foreground and background\n  useEffect(() =\u003e {\n    container.style.zIndex = `${zIndex}`\n  }, [zIndex, container])\n\n  return createPortal(children, container)\n}\n```\n\nLet's create a marker using the **OverlayView** component and a button.\n\n```tsx:CustomMarker.tsx\nimport { useMemo } from \"react\";\nimport { Hotel } from \"../../types/hotel\";\nimport OverlayView from \"../OverlayView\";\n\ninterface CustomMarkerProps {\n  hotel: Hotel;\n  map?: google.maps.Map;\n}\n\nexport default function CustomMarker({\n  hotel,\n  map,\n}: CustomMarkerProps) {\n  const price = useMemo(() =\u003e {\n    return `$ ${hotel.ratesSummary.minPrice.replace(/\\.(.*?\\d*)/g, '')}`\n  }, [hotel])\n\n  return (\n    \u003c\u003e\n      {map \u0026\u0026 (\n        \u003cOverlayView\n          position={{\n            lat: hotel.location.latitude as number,\n            lng: hotel.location.longitude as number,\n          }}\n          map={map}\n          styles={{\n            backgorundColor: 'DarkGray',\n            color: 'white',\n          }}\n        \u003e\n          {/* use a button as the marker */}\n          \u003cbutton onClick={handleClick}\u003e{price}\u003c/button\u003e\n        \u003c/OverlayView\u003e\n      )}\n    \u003c/\u003e\n  )\n}\n```\n\n## Resolving Error in Next.js\n\nIf you've started your dev server or tried to build the project, you might see a **Reference Error** saying **\"google is not defined\"**:\n\n\u003cimg\n  src=\"/optimized/articles/custom-google-maps-marker/reference-error.webp\"\n  alt=\"Reference Error from Webpack\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\nThis is because Webpack doesn't recognize \"google\" at build time. At build time, Google Maps JavaScript API is not yet loaded so Webpack is not able to evaluate the **Overlay** class at the module level. What we can do is to wrap the class in a [factory function](https://www.patterns.dev/posts/factory-pattern/) to resolve the build error.\n\n```tsx:Overlay.ts\nexport function createOverlay(\n  container: HTMLElement,\n  pane: keyof google.maps.MapPanes,\n  position: google.maps.LatLng | google.maps.LatLngLiteral\n) {\n  class Overlay extends google.maps.OverlayView {\n    container: HTMLElement\n    pane: keyof google.maps.MapPanes\n    position: google.maps.LatLng | google.maps.LatLngLiteral\n\n    constructor(\n      container: HTMLElement,\n      pane: keyof google.maps.MapPanes,\n      position: google.maps.LatLng | google.maps.LatLngLiteral\n    ) {\n      super()\n      this.container = container\n      this.pane = pane\n      this.position = position\n    }\n\n    onAdd(): void {\n      const pane = this.getPanes()?.[this.pane]\n      pane?.appendChild(this.container)\n    }\n\n    draw(): void {\n      const projection = this.getProjection()\n      const point = projection.fromLatLngToDivPixel(this.position)\n\n      if (point === null) {\n        return\n      }\n\n      this.container.style.transform = `translate(${point.x}px, ${point.y}px)`\n    }\n\n    onRemove(): void {\n      if (this.container.parentNode !== null) {\n        this.container.parentNode.removeChild(this.container)\n      }\n    }\n  }\n  return new Overlay(container, pane, position)\n}\n```\n\nLet's refactor the **OverlayView** component accordingly:\n\n```diff:OverlayView.tsx\n- import { Overlay } from './Overlay'\n+ import { createOverlay } from './Overlay'\n\nexport default function OverlayView({\n  position,\n  pane = 'floatPane',\n  map,\n  zIndex,\n  children,\n}: OverlayProps) {\n\n  const overlay = useMemo(() =\u003e {\n-   return new Overlay(container, pane, position)\n+   return createOverlay(container, pane, position)\n  }, [container, pane, position])\n\n}\n```\n\nNow we should be able to see our map again and our custom markers without error!\n\n\u003cimg\n  src=\"/optimized/articles/custom-google-maps-marker/custom-marker.webp\"\n  alt=\"Custom Google Maps Markers built with Overlay\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\n## Adding Animations and User Interactions\n\nSince our custom markers are React components, we can define the user experience and use the available tooling in the React ecosystem. Let's implement:\n\n- a soft animation to transition the marker's appearance,\n- and a click event handler to toggle the button state and a card component that displays hotel details.\n\n```tsx:CustomMarker.tsx\nimport { useCallback, useMemo } from 'react'\nimport { Hotel } from '../../types/hotel'\nimport OverlayView from '../OverlayView'\nimport { motion } from 'framer-motion'\n\ninterface CustomMarkerProps {\n  hotel: Hotel\n  map?: google.maps.Map\n  onClick: (payload: Hotel) =\u003e void\n  highlight?: boolean\n}\n\nexport default function CustomMarker({\n  hotel,\n  map,\n  onClick,\n  highlight,\n}: CustomMarkerProps) {\n  const price = useMemo(() =\u003e {\n    return `$ ${hotel.ratesSummary.minPrice.replace(/\\.(.*?\\d*)/g, '')}`\n  }, [hotel])\n\n  const handleClick = useCallback(() =\u003e {\n    onClick(hotel)\n  }, [onClick, hotel])\n\n  return (\n    \u003c\u003e\n      {map \u0026\u0026 (\n        \u003cOverlayView\n          position={{\n            lat: hotel.location.latitude as number,\n            lng: hotel.location.longitude as number,\n          }}\n          map={map}\n          // when users select it, move the marker to the foreground\n          zIndex={highlight ? 99 : 0}\n        \u003e\n          {/* appearance transition */}\n          \u003cmotion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{\n              type: 'spring',\n              stiffness: 400,\n              damping: 20,\n              delay: Math.random() * 0.3,\n            }}\n          \u003e\n            \u003cbutton\n              onClick={handleClick}\n              // button state toggle\n              styles={{\n                backgorundColor: highlight ? 'white' : 'DarkGray',\n                color: highlight ? 'black' : 'white',\n              }}\n            \u003e\n              {price}\n            \u003c/button\u003e\n          \u003c/motion.div\u003e\n        \u003c/OverlayView\u003e\n      )}\n    \u003c/\u003e\n  )\n}\n```\n\nThe animation looks like this:\n\n\u003cimg\n  src=\"/articles/custom-google-maps-marker/animation-demo.gif\"\n  alt=\"Full user interaction with custom Marker\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\nThe button state toggle and the card toggle are also in place:\n\n\u003cimg\n  src=\"/articles/custom-google-maps-marker/demo.gif\"\n  alt=\"Full user interaction with custom Marker\"\n  width=\"100%\"\n  className=\"rounded centered\"\n  loading=\"lazy\"\n/\u003e\n\n## Final Thoughts\n\nIt looks like a lot of code to create a custom marker but the mental model is actually straightforward:\n\n- We render a DOM element as the container in the map through an overlay instance.\n- In the overlay, we can position the container at the right place on the map.\n- The container is also the destination of a React portal.\n- When a React marker component is ready to render, we portal the component to the container in the map.\n\n## References\n\n- [Website: Adding a Map and Markers to a React Application](https://developers.google.com/maps/documentation/javascript/react-map)\n- [Website: Google Maps JavaScript API - Markers](https://developers.google.com/maps/documentation/javascript/markers)\n- [Website: Google Maps JavaScript API - Custom Markers](https://developers.google.com/maps/documentation/javascript/custom-markers)\n- [Website: Google Maps JavaScript API - OverlayView class](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView)\n- [Website: Google Maps JavaScript API - Custom Overlays](https://developers.google.com/maps/documentation/javascript/customoverlays)\n- [Website: Google Maps JavaScript API - MapPanes interface](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes)\n- [Website: Airbnb](https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab\u0026refinement_paths%5B%5D=%2Fhomes\u0026flexible_trip_lengths%5B%5D=one_week\u0026query=San%20Francisco%2C%20CA%2C%20USA\u0026place_id=ChIJIQBpAG2ahYAR_6128GcTUEo\u0026date_picker_type=calendar\u0026checkin=2022-08-27\u0026checkout=2022-08-31\u0026adults=2\u0026source=structured_search_input_header\u0026search_type=user_map_move\u0026ne_lat=37.8053501277308\u0026ne_lng=-122.37779937848381\u0026sw_lat=37.77496292220189\u0026sw_lng=-122.44955383405022\u0026zoom=15\u0026search_by_map=true)\n- [Website: Designing States for Buttons \u0026 UI Interactions - Adobe XD Ideas](https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/)\n- [Website: Framer Motion](https://www.framer.com/motion/)\n- [Website: React Portals](https://reactjs.org/docs/portals.html)\n- [Website: Next.js](https://vercel.com/solutions/nextjs)\n- [Website: RapidAPI - Priceline com Provider](https://rapidapi.com/tipsters/api/priceline-com-provider/)\n- [Website: Factory Pattern - patterns](https://www.patterns.dev/posts/factory-pattern/)\n- [GitHub: Google Maps JavaScript API React Wrapper](https://github.com/googlemaps/react-wrapper)\n- [GitHub: react-google-maps-marker-demo](https://github.com/DawChihLiou/react-google-maps-marker-demo)\n\n---\n\nðŸ’¬ Comments on [Reddit](https://www.reddit.com/r/javascript/comments/wvnx8q/building_a_custom_google_maps_marker_react/).\n\n---\n\nHere you have it! Thanks for reading throughðŸ™Œ\nIf you find this article useful, please share it to help more people in their engineering journey.\n\nðŸ¦ Feel free to connect with me on [twitter](https://twitter.com/dawchihliou)!\n\nâ­ Ready for the next article? ðŸ‘‰ [**Event Bus for React**](/articles/event-bus-for-react)\n\nHappy coding!\n","code":"var Component=(()=\u003e{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=\u003e{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},o=(a,n,s,t)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!N.call(a,c)\u0026\u0026c!==s\u0026\u0026l(a,c,{get:()=\u003en[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var y=(a,n,s)=\u003e(s=a!=null?d(u(a)):{},o(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=\u003eo(l({},\"__esModule\",{value:!0}),a);var r=k((M,i)=\u003e{i.exports=_jsx_runtime});var x={};g(x,{default:()=\u003eb,frontmatter:()=\u003ef});var e=y(r()),f={title:\"Building A Custom Google Maps Marker React Component Like Airbnb in Next.js\",publishedAt:\"Aug 23, 2022\",description:\"We will be building a proof of concept to create customer Google Maps markers using any React component in a Next.js project.\",cover:\"/optimized/articles/custom-google-maps-marker/hero.webp\",category:\"Frontend\",coverWidth:\"1400\",coverHeight:\"600\"};function p(a){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",hr:\"hr\",p:\"p\",blockquote:\"blockquote\",strong:\"strong\",div:\"div\",pre:\"pre\",code:\"code\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"tldr\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#tldr\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"TL;DR\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"}),\" We'll learn how to build a custom Google Maps marker using any React component.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"nail polish\",children:\"\\u{1F485}\"}),\" We'll learn how to create animation and user interaction with our custom marker.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"rocket\",children:\"\\u{1F680}\"}),\" We'll discuss how to avoid compilation error during build time in Next.js.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.p,{children:\"This article is also available on\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://betterprogramming.pub/building-a-custom-google-maps-marker-react-component-like-airbnb-in-next-js-52fb37ccfabb\",children:\"Better Programming\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://hackernoon.com/building-an-airbnb-like-map-in-nextjs\",children:\"Hacker Noon\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Feel free to read it on your favorite platform\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"sparkles\",children:\"\\u2728\"})]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"I was curious about making \",(0,e.jsx)(n.a,{href:\"https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab\u0026refinement_paths%5B%5D=%2Fhomes\u0026flexible_trip_lengths%5B%5D=one_week\u0026query=San%20Francisco%2C%20CA%2C%20USA\u0026place_id=ChIJIQBpAG2ahYAR_6128GcTUEo\u0026date_picker_type=calendar\u0026checkin=2022-08-27\u0026checkout=2022-08-31\u0026adults=2\u0026source=structured_search_input_header\u0026search_type=user_map_move\u0026ne_lat=37.8053501277308\u0026ne_lng=-122.37779937848381\u0026sw_lat=37.77496292220189\u0026sw_lng=-122.44955383405022\u0026zoom=15\u0026search_by_map=true\",children:\"markers on Google Maps like Airbnb\"}),\".\"]}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/custom-google-maps-marker/airbnb-map-screenshot.webp\",alt:\"Airbnb map screenshot\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"These markers pack much more functionalities than the default markers from Google Maps. Besides custom styling, each marker displays a dynamic pricing and \",(0,e.jsx)(n.a,{href:\"https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/\",children:\"states\"}),\". When you interact with them, you'll see custom React components rendered with data.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I find it very fun and useful so let's unpack it together!\"}),`\n`,(0,e.jsx)(n.p,{children:\"We'll be building a proof of concept to create customer markers using any React component.\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/articles/custom-google-maps-marker/demo.gif\",alt:\"Full user interaction with custom Marker\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:\"Let's go.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"setting-up-the-project\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#setting-up-the-project\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Setting up The Project\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"The demo is \",(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/react-google-maps-marker-demo\",children:\"available on GitHub\"}),\". Feel free to fork it\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"rocket\",children:\"\\u{1F680}\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I integrated the Google Maps API in a \",(0,e.jsx)(n.a,{href:\"https://vercel.com/solutions/nextjs\",children:\"Next.js\"}),\" project by following the \",(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/react-map\",children:\"official tutorial\"}),\". The tutorial explains in detail how to render Google Maps and markers in React applications.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"There are a few more integrations included in the project:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://rapidapi.com/tipsters/api/priceline-com-provider/\",children:\"RapidAPI - Priceline com Provider\"}),\": to fetch hotel listings as our dataset.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://tailwindcss.com/\",children:\"Tailwind CSS\"}),\": to provide css styles.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.framer.com/motion/\",children:\"Framer Motion\"}),\": to apply animations on React components.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"The default marker from Google Maps looks like this:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/custom-google-maps-marker/googlemaps-marker.webp\",alt:\"Default Google Maps Markers\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"customizing-markers-using-google-maps-overlay\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#customizing-markers-using-google-maps-overlay\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Customizing Markers Using Google Maps Overlay\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Google Maps API offers an \",(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView\",children:\"OverlayView class\"}),\" to place DOM elements on the map. We can use the \",(0,e.jsx)(n.strong,{children:\"OverlayView\"}),\" to place the container of a \",(0,e.jsx)(n.a,{href:\"https://reactjs.org/docs/portals.html\",children:\"React Portal\"}),\" on the map and render a custom react component into the container.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Following \",(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/customoverlays\",children:\"the official tutorial to create a custom Overlay class\"}),\", we'll implement the three basic methods:\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"onAdd\"}),\": to append our portal container to the target \",(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes\",children:\"pane\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"draw\"}),\": to position the container.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"onRemove\"}),\": to remove the container from the DOM.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"Overlay.ts\"}),(0,e.jsx)(n.pre,{className:\"language-ts\",children:(0,e.jsxs)(n.code,{className:\"language-ts code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Overlay\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"google\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"OverlayView \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  container\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` HTMLElement\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`MapPanes\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"LatLng \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`LatLngLiteral\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    container\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" HTMLElement\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"MapPanes\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"LatLng \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`LatLngLiteral\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"super\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"container \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"pane \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` pane\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"position \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` position\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onAdd\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" pane \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getPanes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"pane\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"appendChild\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"draw\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" projection \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getProjection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" point \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" projection\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"fromLatLngToDivPixel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"point \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"style\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"transform \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"translate(\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"point\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:\"px, \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"point\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"y\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:\"px)\"}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onRemove\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"parentNode \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"parentNode\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"removeChild\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"connecting-google-maps-and-react\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#connecting-google-maps-and-react\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Connecting Google Maps and React\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now that we have our custom \",(0,e.jsx)(n.strong,{children:\"Overlay\"}),\" class, we can create a React component to:\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"create a container,\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"instantiate \",(0,e.jsx)(n.strong,{children:\"Overlay\"}),\" class,\"]}),`\n`,(0,e.jsx)(n.li,{children:\"add the overlay into the map instance,\"}),`\n`,(0,e.jsx)(n.li,{children:\"and create a React portal to render components in the container.\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"OverlayView.tsx\"}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"PropsWithChildren\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" useEffect\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" useMemo \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" createPortal \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react-dom'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Overlay\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./Overlay'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"OverlayProps\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"PropsWithChildren\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLng\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLngLiteral\"})}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"MapPanes\"})}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Map\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  zIndex\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"OverlayView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  pane \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'floatPane'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  zIndex\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  children\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"OverlayProps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" container \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useMemo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" div \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"document\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"createElement\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'div'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    div\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"style\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"position\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'absolute'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` div\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" overlay \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useMemo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Overlay\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" pane\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" pane\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    overlay\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"setMap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" overlay\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"setMap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" overlay\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// to move the container to the foreground and background\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"style\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"zIndex\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"zIndex\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"zIndex\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createPortal\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"children\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Let's create a marker using the \",(0,e.jsx)(n.strong,{children:\"OverlayView\"}),\" component and a button.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"CustomMarker.tsx\"}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" useMemo \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"react\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Hotel\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"../../types/hotel\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"OverlayView\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"../OverlayView\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"interface\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"CustomMarkerProps\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  hotel\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Hotel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"CustomMarker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"CustomMarkerProps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" price \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useMemo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"$ \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"ratesSummary\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"minPrice\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[(0,e.jsx)(n.span,{className:\"token special-escape escape\",children:\"\\\\.\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*?\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\"\\\\d\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\")\"})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"      \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"map \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"OverlayView\"})]}),`\n`]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"position\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            lat\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"location\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"latitude\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            lng\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"location\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"longitude\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"map\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"styles\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            backgorundColor\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'DarkGray'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            color\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'white'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"          \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token comment\",children:\"/* use a button as the marker */\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"          \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"button\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"onClick\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"handleClick\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"price\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"button\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"        \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"OverlayView\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"    \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"resolving-error-in-nextjs\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#resolving-error-in-nextjs\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Resolving Error in Next.js\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you've started your dev server or tried to build the project, you might see a \",(0,e.jsx)(n.strong,{children:\"Reference Error\"}),\" saying \",(0,e.jsx)(n.strong,{children:'\"google is not defined\"'}),\":\"]}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/custom-google-maps-marker/reference-error.webp\",alt:\"Reference Error from Webpack\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.p,{children:[`This is because Webpack doesn't recognize \"google\" at build time. At build time, Google Maps JavaScript API is not yet loaded so Webpack is not able to evaluate the `,(0,e.jsx)(n.strong,{children:\"Overlay\"}),\" class at the module level. What we can do is to wrap the class in a \",(0,e.jsx)(n.a,{href:\"https://www.patterns.dev/posts/factory-pattern/\",children:\"factory function\"}),\" to resolve the build error.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"Overlay.ts\"}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createOverlay\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  container\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"HTMLElement\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"MapPanes\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLng\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLngLiteral\"})}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Overlay\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"google\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"OverlayView\"})}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    container\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"HTMLElement\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"MapPanes\"})}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLng\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLngLiteral\"})}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      container\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"HTMLElement\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"MapPanes\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLng\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"LatLngLiteral\"})}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"super\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"container\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"pane\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` pane\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"position\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` position\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onAdd\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" pane \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getPanes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"pane\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      pane\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"appendChild\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"container\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"draw\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" projection \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getProjection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" point \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" projection\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"fromLatLngToDivPixel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"position\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"point \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"container\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"style\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"transform\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"translate(\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"point\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:\"px, \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"point\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"y\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:\"px)\"}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onRemove\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"container\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"parentNode\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"container\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"parentNode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"removeChild\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"container\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Overlay\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" pane\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Let's refactor the \",(0,e.jsx)(n.strong,{children:\"OverlayView\"}),\" component accordingly:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"OverlayView.tsx\"}),(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line deleted\",children:(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` import { Overlay } from './Overlay'\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token deleted-sign deleted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` import { createOverlay } from './Overlay'\n`})]})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`export default function OverlayView({\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` position,\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` pane = 'floatPane',\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` map,\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` zIndex,\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` children,\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`}: OverlayProps) {\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` const overlay = useMemo(() =\u003e {\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line deleted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   return new Overlay(container, pane, position)\n`})]})]}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token deleted-sign deleted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   return createOverlay(container, pane, position)\n`})]})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` }, [container, pane, position])\n`})]})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`}\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Now we should be able to see our map again and our custom markers without error!\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/optimized/articles/custom-google-maps-marker/custom-marker.webp\",alt:\"Custom Google Maps Markers built with Overlay\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"adding-animations-and-user-interactions\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#adding-animations-and-user-interactions\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Adding Animations and User Interactions\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Since our custom markers are React components, we can define the user experience and use the available tooling in the React ecosystem. Let's implement:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"a soft animation to transition the marker's appearance,\"}),`\n`,(0,e.jsx)(n.li,{children:\"and a click event handler to toggle the button state and a card component that displays hotel details.\"}),`\n`]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"CustomMarker.tsx\"}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" useCallback\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" useMemo \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Hotel\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../../types/hotel'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"OverlayView\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../OverlayView'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" motion \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'framer-motion'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"interface\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"CustomMarkerProps\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  hotel\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Hotel\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Map\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"onClick\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"payload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Hotel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  highlight\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"boolean\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"CustomMarker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  onClick\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  highlight\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"CustomMarkerProps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" price \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useMemo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"$ \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"ratesSummary\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"minPrice\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[(0,e.jsx)(n.span,{className:\"token special-escape escape\",children:\"\\\\.\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*?\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\"\\\\d\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\")\"})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" handleClick \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useCallback\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onClick\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"onClick\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"      \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"map \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"OverlayView\"})]}),`\n`]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"position\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            lat\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"location\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"latitude\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            lng\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" hotel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"location\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"longitude\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"map\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// when users select it, move the marker to the foreground\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"zIndex\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"highlight \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"99\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"          \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token comment\",children:\"/* appearance transition */\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"          \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"motion.div\"]}),`\n`]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"initial\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" opacity\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"animate\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" opacity\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"exit\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" opacity\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"transition\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"              type\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'spring'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"              stiffness\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"400\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"              damping\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"              delay\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"random\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"            \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"button\"]}),`\n`]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"onClick\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"handleClick\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// button state toggle\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"styles\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"                backgorundColor\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" highlight \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'white'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'DarkGray'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"                color\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" highlight \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'black'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'white'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"              \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"price\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"            \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"button\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"          \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"motion.div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"        \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"OverlayView\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"    \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"The animation looks like this:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/articles/custom-google-maps-marker/animation-demo.gif\",alt:\"Full user interaction with custom Marker\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsx)(n.p,{children:\"The button state toggle and the card toggle are also in place:\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/articles/custom-google-maps-marker/demo.gif\",alt:\"Full user interaction with custom Marker\",width:\"100%\",className:\"rounded centered\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"final-thoughts\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#final-thoughts\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Final Thoughts\"]}),`\n`,(0,e.jsx)(n.p,{children:\"It looks like a lot of code to create a custom marker but the mental model is actually straightforward:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"We render a DOM element as the container in the map through an overlay instance.\"}),`\n`,(0,e.jsx)(n.li,{children:\"In the overlay, we can position the container at the right place on the map.\"}),`\n`,(0,e.jsx)(n.li,{children:\"The container is also the destination of a React portal.\"}),`\n`,(0,e.jsx)(n.li,{children:\"When a React marker component is ready to render, we portal the component to the container in the map.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"references\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#references\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"References\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/react-map\",children:\"Website: Adding a Map and Markers to a React Application\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/markers\",children:\"Website: Google Maps JavaScript API - Markers\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/custom-markers\",children:\"Website: Google Maps JavaScript API - Custom Markers\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#OverlayView\",children:\"Website: Google Maps JavaScript API - OverlayView class\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/customoverlays\",children:\"Website: Google Maps JavaScript API - Custom Overlays\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes\",children:\"Website: Google Maps JavaScript API - MapPanes interface\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.airbnb.com/s/San-Francisco--CA--United-States/homes?tab_id=home_tab\u0026refinement_paths%5B%5D=%2Fhomes\u0026flexible_trip_lengths%5B%5D=one_week\u0026query=San%20Francisco%2C%20CA%2C%20USA\u0026place_id=ChIJIQBpAG2ahYAR_6128GcTUEo\u0026date_picker_type=calendar\u0026checkin=2022-08-27\u0026checkout=2022-08-31\u0026adults=2\u0026source=structured_search_input_header\u0026search_type=user_map_move\u0026ne_lat=37.8053501277308\u0026ne_lng=-122.37779937848381\u0026sw_lat=37.77496292220189\u0026sw_lng=-122.44955383405022\u0026zoom=15\u0026search_by_map=true\",children:\"Website: Airbnb\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://xd.adobe.com/ideas/process/ui-design/designing-interactive-buttons-states/\",children:\"Website: Designing States for Buttons \u0026 UI Interactions - Adobe XD Ideas\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.framer.com/motion/\",children:\"Website: Framer Motion\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://reactjs.org/docs/portals.html\",children:\"Website: React Portals\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://vercel.com/solutions/nextjs\",children:\"Website: Next.js\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://rapidapi.com/tipsters/api/priceline-com-provider/\",children:\"Website: RapidAPI - Priceline com Provider\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.patterns.dev/posts/factory-pattern/\",children:\"Website: Factory Pattern - patterns\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/googlemaps/react-wrapper\",children:\"GitHub: Google Maps JavaScript API React Wrapper\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/DawChihLiou/react-google-maps-marker-demo\",children:\"GitHub: react-google-maps-marker-demo\"})}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"speech balloon\",children:\"\\u{1F4AC}\"}),\" Comments on \",(0,e.jsx)(n.a,{href:\"https://www.reddit.com/r/javascript/comments/wvnx8q/building_a_custom_google_maps_marker_react/\",children:\"Reddit\"}),\".\"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you have it! Thanks for reading through\",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"raising hands\",children:\"\\u{1F64C}\"}),`\nIf you find this article useful, please share it to help more people in their engineering journey.`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"bird\",children:\"\\u{1F426}\"}),\" Feel free to connect with me on \",(0,e.jsx)(n.a,{href:\"https://twitter.com/dawchihliou\",children:\"twitter\"}),\"!\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u23ED Ready for the next article? \",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"backhand index pointing right\",children:\"\\u{1F449}\"}),\" \",(0,e.jsx)(n.a,{href:\"/articles/event-bus-for-react\",children:(0,e.jsx)(n.strong,{children:\"Event Bus for React\"})})]}),`\n`,(0,e.jsx)(n.p,{children:\"Happy coding!\"})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var b=v;return w(x);})();\n;return Component;"},"_id":"articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs.mdx","_raw":{"sourceFilePath":"articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs.mdx","sourceFileName":"building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs.mdx","sourceFileDir":"articles","contentType":"mdx","flattenedPath":"articles/building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"},"type":"Article","readingTime":{"text":"8 min read","minutes":7.55,"time":453000,"words":1510},"wordCount":1512,"slug":"building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"}},"__N_SSG":true},"page":"/articles/[slug]","query":{"slug":"building-custom-google-maps-marker-react-component-like-airbnb-in-nextjs"},"buildId":"bdMATWyNRuQEd9P4SOOLN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>